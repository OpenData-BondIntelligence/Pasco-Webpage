"use strict";(self.webpackChunkreportEmbed=self.webpackChunkreportEmbed||[]).push([["json-contracts"],{49060:function(Ee,ee,O){var F,f,v;O.d(ee,{Dd:function(){return F},vx:function(){return D},SM:function(){return M},XO:function(){return W}}),(f=F||(F={})).NotIn="NotIn",f.SelectAll="All",f.operatorDictionary={None:0,LessThan:1,LessThanOrEqual:2,GreaterThan:3,GreaterThanOrEqual:4,Contains:5,DoesNotContain:6,StartsWith:7,DoesNotStartWith:8,Is:9,IsNot:10,IsBlank:11,IsNotBlank:12},f.logicalOperatorDictionary={Or:1,And:0},(v=f.ErrorCodes||(f.ErrorCodes={})).InvalidDataType="InvalidDataType",v.FieldNotFound="FieldNotFound",v.FilterConditionNotFound="FilterConditionNotFound",function(v){v.InvalidTarget="Could not serialize json filter target to SQ expression.",v.InvalidDataTypeMessage="The data type of the value {0} is not supported. Only string, number and boolean are supported.",v.InvalidCondition="Advanced filter requires a filter condition (None | LessThan | LessThanOrEqual | GreaterThan | GreaterThanOrEqual | Contains | DoesNotContain | StartsWith | DoesNotStartWith | Is | IsNot | IsBlank | IsNotBlank)."}(f.ErrorMessages||(f.ErrorMessages={}));var D="All",M=function(){function f(){}return f.InvalidDataType="InvalidDataType",f.FieldNotFound="FieldNotFound",f.FilterConditionNotFound="FilterConditionNotFound",f.FilterValidationErrors="FilterValidationErrors",f.LogicalConditionNotFound="LogicalConditionNotFound",f.BasicFilterSerializationError="BasicFilterSerializationError",f.TupleFilterSerializationError="TupleFilterSerializationError",f.AdvancedFilterSerializationError="AdvancedFilterSerializationError",f.InvalidFilterType="InvalidFilterType",f.InvalidFilterCondition="InvalidFilterCondition",f.FilterNotFound="FilterNotFound",f.TargetNotFound="TargetNotFound",f.BasicFilterOperatorNotFound="BasicFilterOperatorNotFound",f.InvalidReportData="InvalidReportData",f.InvalidPageData="InvalidPageData",f}(),W=function(){function f(){}return f.InvalidFilterMessage="Filter is not valid, validation errors: ",f.InvalidTarget="Could not serialize json filter target to SQ expression.",f.InvalidCondition="Advanced filter requires a filter condition (None | LessThan | LessThanOrEqual | GreaterThan | GreaterThanOrEqual | Contains | DoesNotContain | StartsWith | DoesNotStartWith | Is | IsNot | IsBlank | IsNotBlank).",f.InvalidDataTypeMessage="The data type of the value {0} is not supported. Only string, number and boolean are supported.",f.FilterSerializationError="Could not serialize filter.",f.InvalidFilterTypeMessage="Not supported filter type - can't serialize to json syntax.",f.SemanticFilterInvalidCondition="Filter with invalid condition - can't serialize to json syntax.",f.FilterNotFoundMessage="Invoked filter serialization function with no filter.",f.TargetNotFoundMessage="Invoked filter serialization function with no target.",f.FieldNotFoundMessage="Invoked filter serialization function on a table that has no column/measure/hierarchy.",f.BasicFilterOperatorNotFoundMessage="Basic filter requires an operator (In | Not).",f.FilterValuesNotFound=" Could not retrieve filter values.",f.InvalidReportDataMessage="Could not find the report.",f.InvalidPageDataMessage="Could not find the active page.",f.DataPointSerializationError="Could not serialize a data point.",f.TupleFilterSerializationError="Could not serialize Tuple filter.",f}()},50433:function(Ee,ee,O){O.d(ee,{D:function(){return D}});var F=O(49060),S=jsCommon.Trace,D=function(){function h(){}return h.traceError=function(M){S.error("Throwing exception: "+JSON.stringify(M),null==M.Stack)},h.fieldNotFound=function(M){return{name:F.SM.FieldNotFound,message:F.XO.InvalidTarget+(M?"Target table: "+M.table:"")}},h.filterValidationErrors=function(M){var W=M.map(function(f){return f.message}).join(", ");return{name:F.SM.FilterValidationErrors,message:F.XO.InvalidFilterMessage+W}},h.invalidDataType=function(M){return{name:F.SM.InvalidDataType,message:jsCommon.StringExtensions.format(F.XO.InvalidDataTypeMessage,M)}},h.filterConditionNotFound=function(){return{name:F.SM.FilterConditionNotFound,message:F.XO.InvalidCondition}},h.basicFilterSerializationError=function(M){return{name:F.SM.BasicFilterSerializationError,message:F.XO.FilterSerializationError+M}},h.advancedFilterSerializationError=function(){return{name:F.SM.AdvancedFilterSerializationError,message:F.XO.FilterSerializationError}},h.tupleFilterSerializationError=function(M){return{name:F.SM.BasicFilterSerializationError,message:F.XO.TupleFilterSerializationError+M}},h.invalidFilterType=function(){return{name:F.SM.InvalidFilterType,message:F.XO.InvalidFilterTypeMessage}},h.invalidFilterCondition=function(){return{name:F.SM.InvalidFilterCondition,message:F.XO.SemanticFilterInvalidCondition}},h.filterNotFound=function(){return{name:F.SM.FilterNotFound,message:F.XO.FilterNotFoundMessage}},h.targetNotFound=function(){return{name:F.SM.TargetNotFound,message:F.XO.TargetNotFoundMessage}},h.fieldExpressionNotFound=function(){return{name:F.SM.FieldNotFound,message:F.XO.FieldNotFoundMessage}},h.basicFilterOperatorNotFound=function(){return{name:F.SM.BasicFilterOperatorNotFound,message:F.XO.BasicFilterOperatorNotFoundMessage}},h.invalidReportData=function(){return{name:F.SM.InvalidReportData,message:F.XO.InvalidReportDataMessage}},h.invalidPageData=function(){return{name:F.SM.InvalidPageData,message:F.XO.InvalidPageDataMessage}},h}()},47429:function(Ee,ee,O){O.d(ee,{D:function(){return pe}});var pe,F=O(40582),S=powerbi.TelemetryCategory,D=powerbi.telemetryEventFactory,h=powerbi.telemetry.CustomerAction,W=(jsCommon,powerbi.telemetry.EventFactories),R="PBI.JSONFilter.UnsupportedFilterType",u=W[R]=function(z){return D({name:R,baseEvent:h(z),info:z,category:S.CustomerAction,loggers:void 0})},P=O(49060),d=O(50433),T=powerbi.explore.contracts,se=jsCommon.ArrayExtensions,E=powerbi.data,ge=powerbi.data.FieldExprPattern,Ne=powerbi.explore.viewModels.FilterCardConverter,B=jsCommon.Utility,Se=E.SQExpr,$=E.SQExprUtils,be=E.SQConstantExpr,ue=powerbi.explore.FilterUtils,Ie=E.DataViewObjectDefinitions,De=E.RelativeFilterType,we=E.ScopeIdentityExtractor.ScopeIdKeysAndValuesExtractorImpl,Re=powerbi.explore.viewModels.FilterViewModelFactory;!function(z){function H(l,a){var r=new oe(a),s=l.accept(r);return l.hasGroupOnKeys(a)&&(s.keys=function(l,a,r){var s=l.getKeyColumns(r),g=[];return s&&(g=s.map(function(y){return y.accept(a).column})),g}(l,r,a)),s}function J(l,a){if(l&&a){var r={};void 0!==a.isLockedInViewMode&&(r.isLockedInViewMode=a.isLockedInViewMode),void 0!==a.isHiddenInViewMode&&(r.isHiddenInViewMode=a.isHiddenInViewMode),void 0!==a.displayName&&(r.displayName=a.displayName),_.isEmpty(r)||(l.displaySettings=r)}}z.fromSemanticFilter=function(l,a,r,s,g){var y;if(r&&(!r.conditions()||_.isEmpty(r.conditions())||r.conditions().length>1)&&B.throwException(d.D.invalidFilterCondition()),function(l){return l.type===T.FilterType.TopN||l.type===T.FilterType.Exclude||l.type===T.FilterType.Include||l.type===T.FilterType.RelativeDate||l.type===T.FilterType.RelativeTime||l.type===T.FilterType.Categorical||l.type===T.FilterType.Visual||l.type===T.FilterType.Advanced||l.type===T.FilterType.Tuple||!l.type}(l))if(l.type===T.FilterType.TopN)y=re.serializeFilter(r,a,s,l);else if(l.type===T.FilterType.RelativeTime||l.type===T.FilterType.RelativeDate)y=ne.serializeFilter(r,a,s,l);else if(l.type===T.FilterType.Exclude||l.type===T.FilterType.Include)y=ve.serializeFilter(r,a,s,l);else if(l.type===T.FilterType.Tuple)y=ae.serializeFilter(r,a,s,l);else if(l.type===T.FilterType.Advanced){var m=void 0;if(r){var C=r.conditions()[0];m=q.getAdvancedFilterExpression(C)}else m=Re.extractAdvFilterCard(l);m||B.throwException(d.D.advancedFilterSerializationError()),y=q.serializeFilter(m,a,s,l)}else{var N=l.expression;m=void 0,r&&(C=r.conditions()[0],m=q.getAdvancedFilterExpression(C));var j=l.type;null==j&&(N||B.throwException(d.D.fieldExpressionNotFound()),j=ue.getDefaultFilterType(N,a,l.howCreated,m?m.field:null)),m&&j===T.FilterType.Advanced?y=q.serializeFilter(m,a,s,l):(N||B.throwException(d.D.fieldExpressionNotFound()),y=L.serializeFilter(r,l,a,s,l))}else g.logEvent(u,{filterType:T.FilterType[l.type]}),y=new s.NotSupportedFilter(null,P.XO.InvalidFilterTypeMessage,T.FilterType[l.type]).toJSON();return y},z.getTarget=H;var re=function(){function l(){}return l.serializeFilter=function(a,r,s,g){a||B.throwException(d.D.filterNotFound());var y=E.TopNFilterPattern.extractParametersFromFilter(a),x=new s.TopNFilter(H(y.fieldBeingFiltered,r),y.isTop?"Top":"Bottom",y.itemCount,H(y.orderByField,r));return J(x,g),x.toJSON()},l}(),ve=function(){function l(){}return l.serializeFilter=function(a,r,s,g){(!a||_.isEmpty(a.conditions()))&&B.throwException(d.D.filterNotFound());var y=new Pe,x=a.conditions()[0].accept(y),m=x[0].fieldExpr,C=x[0].isNot,N=new s.IncludeExcludeFilter(H(m,r),C||!1,L.getValuesFromSQExpr(m,r,a).displayedValues);return J(N,g),N.toJSON()},l}(),ne=function(){function l(){}return l.serializeFilter=function(a,r,s,g){var x=E.RelativeDateFilterPattern.extractParametersFromSemanticFilter(a,g.type===T.FilterType.RelativeDate?De.Date:De.Time),C=H(x?x.field:g.expression,r);C||B.throwException(d.D.targetNotFound());var j,N=x&&x.options;return g.type===T.FilterType.RelativeDate?j=l.CreateRelativeDateFilter(C,N,s):g.type===T.FilterType.RelativeTime&&(j=l.CreateRelativeTimeFilter(C,N,s)),J(j,g),j.toJSON()},l.getRelativeDateFilterOperator=function(a,r){switch(a&&a.relativeQualifier){case E.RelativeDateQualifier.Current:return r.RelativeDateOperators.InThis;case E.RelativeDateQualifier.Next:return r.RelativeDateOperators.InNext;case E.RelativeDateQualifier.Last:case void 0:return r.RelativeDateOperators.InLast}},l.getRelativeDateFilterTimeUnit=function(a,r){if(!a)return r.RelativeDateFilterTimeUnit.Days;switch(a.relativeUnit){case E.RelativeDateUnit.Minute:return r.RelativeDateFilterTimeUnit.Minutes;case E.RelativeDateUnit.Hour:return r.RelativeDateFilterTimeUnit.Hours;case E.RelativeDateUnit.Day:return r.RelativeDateFilterTimeUnit.Days;case E.RelativeDateUnit.Week:return r.RelativeDateFilterTimeUnit.Weeks;case E.RelativeDateUnit.CalendarWeek:return r.RelativeDateFilterTimeUnit.CalendarWeeks;case E.RelativeDateUnit.Month:return r.RelativeDateFilterTimeUnit.Months;case E.RelativeDateUnit.CalendarMonth:return r.RelativeDateFilterTimeUnit.CalendarMonths;case E.RelativeDateUnit.Year:return r.RelativeDateFilterTimeUnit.Years;case E.RelativeDateUnit.CalendarYear:return r.RelativeDateFilterTimeUnit.CalendarYears}},l.getRelativeTimeFilterTimeUnit=function(a,r){if(!a)return r.RelativeDateFilterTimeUnit.Hours;switch(a.relativeUnit){case E.RelativeDateUnit.Minute:return r.RelativeDateFilterTimeUnit.Minutes;case E.RelativeDateUnit.Hour:return r.RelativeDateFilterTimeUnit.Hours}},l.CreateRelativeDateFilter=function(a,r,s){return new s.RelativeDateFilter(a,l.getRelativeDateFilterOperator(r,s),r&&r.duration,l.getRelativeDateFilterTimeUnit(r,s),!(r&&!r.includeToday))},l.CreateRelativeTimeFilter=function(a,r,s){return new s.RelativeTimeFilter(a,l.getRelativeDateFilterOperator(r,s),r&&r.duration,l.getRelativeTimeFilterTimeUnit(r,s))},l}(),L=function(){function l(){}return l.serializeFilter=function(a,r,s,g,y){var N,x=H(r.expression,s),m=a?l.getOperator(s,a,r.expression):P.vx,C=l.getValuesFromSQExpr(r.expression,s,a,r.cachedValueItems);return(N=C.keyValues&&C.keyValues.length>0?new g.BasicFilterWithKeys(x,m,C.displayedValues,C.keyValues):new g.BasicFilter(x,m,C.displayedValues))||B.throwException(d.D.basicFilterSerializationError()),J(N,y),N.requireSingleSelection=l.requireSingleSelection(y),N.toJSON()},l.requireSingleSelection=function(a){if(!a.objects)return!1;var r=Ie.getValue(a.objects,{objectName:"general",propertyName:"requireSingleSelect"},void 0);return!(!r||!r.value)&&be.getBooleanValue(r)},l.getValuesFromSQExpr=function(a,r,s,g){var y={displayedValues:[],keyValues:[]};if(!s)return y;var x,m=l.getSelectedScopeIdsContainerFromFilter(r,s,a);m&&(x=_.isEmpty(m.scopeIds)?[]:m.scopeIds[0]),_.isEmpty(x)&&B.throwException(d.D.basicFilterSerializationError(P.XO.FilterValuesNotFound));for(var C=0,N=x;C<N.length;C++){var j=N[C];if(a.hasGroupOnKeys(r)){var n=E.SQExprConverter.getAllComparands(j).map(function(t){return l.convertValue(t.value)});y.keyValues.push(n),_.isEmpty(g)||g.length!==x.length?B.throwException(d.D.basicFilterSerializationError(P.XO.FilterValuesNotFound)):y.displayedValues=g.map(function(t){return l.getLabelForGOK(t)})}else{var e=E.SQExprConverter.getFirstComparandValue(j);y.displayedValues.push(l.convertValue(e))}}return y},l.getOperator=function(a,r,s){var g=l.getSelectedScopeIdsContainerFromFilter(a,r,s);if(g)return g.isNot?"NotIn":"In";B.throwException(d.D.basicFilterOperatorNotFound())},l.getSelectedScopeIdsContainerFromFilter=function(a,r,s){var g=s.getKeyColumns(a);return g||B.throwException(d.D.fieldExpressionNotFound()),E.SQExprConverter.asScopeIdsContainer(r,[g])},l.convertValue=function(a){return _.isDate(a)?a.toISOString():a},l.getLabelForGOK=function(a){return null===a?null:"string"==typeof a?a:a&&a.displayName?a.displayName:void B.throwException(d.D.invalidDataType("Unrecognized type of value: "+a))},l}(),ae=function(){function l(){}return l.serializeFilter=function(a,r,s,g){if(!a)return null;var y,x,m=a.where(),C=m&&m[0]&&m[0].condition;if(!(E.SQExpr.isIn(C)&&C.values&&C.args&&C.args.length>0))return null;y=C.args,x=C.values;var N,n,j=g.filterExpressionMetadata,ce=j&&!_.isEmpty(j.cachedValueItems);if(ce&&(n=ue.findIdentityMapInFilterCache(y,x[0],j)),ce&&n){for(var o=[],p=[],c=0;c<n.identities.length;c++){var I=n.identities[c],w=new we;I.expr.accept(w);var U=j.expressions[c],b=U.getTargetEntity().entity,k=U.ref;if(1===w.keys.length&&k===w.keys[0].ref){var V={table:b,column:k};p.push(c),o.push(V)}else{V={table:b,column:k,keys:[]};for(var X=0,K=w.keys;X<K.length;X++){var Z=K[X];Z.getTargetEntity(),V.keys.push(Z.ref),p.push(c)}o.push(V)}}for(var fe=[],Fe=0,xe=x;Fe<xe.length;Fe++){var me=xe[Fe],he=ue.findIdentityMapInFilterCache(y,me,j),ie=[];for(c=0;c<he.identities.length;c++)ie.push({value:he.valueMap[c]});for(var le=0;le<me.length;le++){var Me=me[le].value,Ce=p[le];o[Ce].keys&&(ie[Ce].keyValues||(ie[Ce].keyValues=[]),ie[Ce].keyValues.push(Me))}fe.push(ie)}N=new s.TupleFilter(o,"In",fe)}else{var t=_.map(y,function(Ae){var Te=Ae.getTargetColumnRef(r);return{table:Te.getTargetEntity().entity,column:Te.ref}}),i=_.map(x,function(Ae){return _.map(Ae,function(Te){if(Se.isConstant(Te))return{value:Te.value};B.throwException(d.D.tupleFilterSerializationError())})});N=new s.TupleFilter(t,"In",i)}return N||B.throwException(d.D.tupleFilterSerializationError()),J(N,g),N.toJSON()},l}(),q=function(){function l(){}return l.serializeFilter=function(a,r,s,g){var y=new oe(r),x=a.field.accept(y),m=l.getAdvancedFilterLogicalOperator(a.logicalOperator),C=a.conditions.map(function(j){return l.getAdvancedFilterCondition(j)}),N=new s.AdvancedFilter(x,m,C);return N||B.throwException(d.D.advancedFilterSerializationError()),J(N,g),N.toJSON()},l.getAdvancedFilterExpression=function(a){return Ne.createAdvFilter(a)},l.getAdvancedFilterLogicalOperator=function(a){switch(a){case 0:case 2:return"And";case 1:return"Or"}},l.getAdvancedFilterCondition=function(a){var r;E.OperatorHelper.getValueRequired(a.operator)&&(!a.value||!a.value.hasValue)&&B.throwException(d.D.filterConditionNotFound()),9===a.operator?r="Is":10===a.operator?r="IsNot":3===a.operator?r="GreaterThan":4===a.operator?r="GreaterThanOrEqual":1===a.operator?r="LessThan":2===a.operator?r="LessThanOrEqual":5===a.operator?r="Contains":6===a.operator?r="DoesNotContain":7===a.operator?r="StartsWith":8===a.operator?r="DoesNotStartWith":11===a.operator?r="IsBlank":12===a.operator?r="IsNotBlank":B.throwException(d.D.filterConditionNotFound());var s=a.value;return{operator:r,value:a.value.isDate?s.value.toISOString():s.value}},l}(),oe=function(l){function a(r){var s=l.call(this)||this;return s.schema=r,s}return(0,F.ZT)(a,l),a.prototype.visitEntity=function(r){return{table:r.entity,column:null}},a.prototype.visitPropertyVariationSource=function(r){var s=r.arg.accept(this);return s?{table:s.table,hierarchy:null,hierarchyLevel:null}:null},a.prototype.visitHierarchy=function(r){var s=r.arg.accept(this);return s?{table:s.table,hierarchy:r.hierarchy,hierarchyLevel:null}:null},a.prototype.visitAggr=function(r){var s=r.arg.accept(this);if(!s)return null;var g=s;return g.aggregationFunction=E.aggregateFunctionName(r.func),g},a.prototype.visitColumnRef=function(r){var s=r.source.accept(this);return s?{table:s.table,column:r.ref}:null},a.prototype.visitMeasureRef=function(r){var s=r.source.accept(this);return s?{table:s.table,measure:r.ref}:null},a.prototype.visitHierarchyLevel=function(r){var s=r.arg.accept(this);return s?{table:s.table,hierarchy:s.hierarchy,hierarchyLevel:r.level}:null},a.prototype.visitGroupRef=function(r){var s=r.source.accept(this);if(!s)return null;for(var g=[],y=0,x=r.groupedExprs;y<x.length;y++){var C=x[y].accept(this);C&&g.push(C)}return{table:s.table,column:r.ref,groupedColumns:g}},a.prototype.visitArithmetic=function(r){if(!ge.isPercentOfGrandTotal(r,this.schema))return null;var s=r.left.accept(this);return s.percentOfGrandTotal=!0,s},a}(E.DefaultSQExprVisitor);z.SemanticFilterFieldVisitor=oe}(pe||(pe={}));var ye=function(){function z(){}return z.fromInExpr=function(Q,A){for(var H=[],te=function(ne,L){var ae=_.map(Q.values,function(q){return q[ne]});H.push({fieldExpr:Q.args[ne],isNot:A,values:$.concatUnique([],ae)})},J=0,re=Q.args.length;J<re;J++)te(J);return H},z.merge=function(Q,A){for(var H=se.copy(Q),te=function(L){var ae=_.findIndex(H,function(oe){return Se.equals(oe.fieldExpr,L.fieldExpr)&&oe.isNot===L.isNot});if(-1!==ae){var q=H[ae];q.values=$.concatUnique(q.values,L.values)}else H.push(L)},J=0,re=A;J<re.length;J++)te(re[J]);return H},z}(),Pe=function(z){function Q(){return null!==z&&z.apply(this,arguments)||this}return(0,F.ZT)(Q,z),Q.prototype.visitIn=function(A){return ye.fromInExpr(A)},Q.prototype.visitNot=function(A){return A&&A.arg&&10===A.arg.kind?ye.fromInExpr(A.arg,!0):z.prototype.visitNot.call(this,A,void 0)},Q.prototype.visitAnd=function(A){var H=A.left.accept(this),te=A.right.accept(this);if(H&&te)return ye.merge(H,te)},Q}(E.DefaultSQExprVisitor)},55312:function(Ee,ee,O){O.r(ee),O.d(ee,{JsonContractsModule:function(){return ce}});var F=O(60400),S=O(76430),D=O(35034),h=O(49060),M=O(62835),W=function(){function n(){}return n.prototype.fieldNotFound=function(e){return{name:h.Dd.ErrorCodes.FieldNotFound,message:h.Dd.ErrorMessages.InvalidTarget+(e?"Target table: "+e.table:"")}},n.prototype.invalidDataType=function(e){return{name:h.Dd.ErrorCodes.InvalidDataType,message:jsCommon.StringExtensions.format(h.Dd.ErrorMessages.InvalidDataTypeMessage,e)}},n.prototype.filterConditionNotFound=function(){return{name:h.Dd.ErrorCodes.FilterConditionNotFound,message:h.Dd.ErrorMessages.InvalidCondition}},n.\u0275prov=S.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac=function(t){return new(t||n)},providedIn:"root"}),n}(),f=powerbi.data.Condition,R=jsCommon.DateExtensions,u=powerbi.explore.viewModels.FilterCardConverter,v=powerbi.explore.FilterUtils,P=powerbi.data.SemanticFilter,d=powerbi.data.SQExprUtils,T=jsCommon.Utility,se=function(){function n(e,t){this.jsonTargetParserService=e,this.errorProvider=t}return n.prototype.tryBuildFilterContainer=function(e,t,i){if((0,D.getFilterType)(i)!==this.getFilterType())return null;var o=i,c=this.jsonTargetParserService.getFieldExpr(o.target,t);c||T.throwException(this.errorProvider.fieldNotFound(o.target));for(var I=[],w=0,U=o.conditions;w<U.length;w++){var k=this.getCondition(U[w]);k&&I.push(k)}var V=c.getMetadata(t),X=V?V.type:null,K=h.Dd.logicalOperatorDictionary[o.logicalOperator],Y=d.hasMappedMParameter(c,t),Z=u.toSQExpr(c,X,I,K,Y);return{name:v.getNextFilterName(e.filters),expression:c,filter:Z?P.fromSQExpr(Z):void 0,type:powerbi.explore.contracts.FilterType.Advanced}},n.prototype.getFilterType=function(){return D.FilterType.Advanced},n.prototype.getCondition=function(e){e||T.throwException(this.errorProvider.filterConditionNotFound());var i,t=h.Dd.operatorDictionary[e.operator];return i=_.isString(e.value)&&R.parseIsoDateFast(e.value.substr(0,26))?R.parseIsoDateFast(e.value.substr(0,26)):e.value,new f(t,i)},n.\u0275fac=function(t){return new(t||n)(S.\u0275\u0275inject(M.N),S.\u0275\u0275inject(W))},n.\u0275prov=S.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),E=O(95781),ge=powerbi.data,Ne=powerbi.data.SQExpr,B=powerbi.explore.FilterExpressionMetadataUtils,Se=powerbi.explore.FilterUtils,$=ge.SQExprBuilder,be=ge.SemanticFilter,ue=jsCommon.Utility,Ie=function(){function n(e,t,i){this.jsonTargetParserService=e,this.errorProvider=t,this.featureSwitchesService=i}return n.prototype.tryBuildFilterContainer=function(e,t,i){if((0,D.getFilterType)(i)!==this.getFilterType())return null;var w,o=i,c={cachedValueItems:[],expressions:[]},I=this.jsonTargetParserService.getFieldExpr(o.target,t);if(I||ue.throwException(this.errorProvider.fieldNotFound(o.target)),o.operator!==h.Dd.SelectAll){var U=this.getFieldExprsForKeys(o.target,t),b=[],k=0;c.expressions=[I];for(var V=0,X=o.values;V<X.length;V++){var K=X[V],Z={identities:[],valueMap:{0:null!=K?K.toString():null}},G=[],de=o.keyValues;if(U&&de)for(var fe=0,Fe=de[k];fe<Fe.length;fe++)G.push(this.buildSQConstantExpr(Fe[fe]));else G.push(this.buildSQConstantExpr(K));if(U){var me=B.makeIdentity(U,G);Z.identities.push(me),c.cachedValueItems.push(Z)}b.push(G),k++}var he=Ne.isHierarchyLevel(I),ie=void 0;if(!U&&he&&this.doesHierarchyLevelExistsOnSchema(t,o.target)){var Oe=ge.dsr.createQueryGenerator(powerbi.common.utils.getDsrReaderSwitches(this.featureSwitchesService.featureSwitches)).produceIdentities(I,t);ie=$.inValues(Oe,b)}else ie=$.inValues(U||[I],b);var le;le=o.operator===h.Dd.NotIn?$.not(ie):ie,w=be.fromSQExpr(le)}return{cachedValueItems:B.tryGetDisplayNameIdentityPairs(c),name:Se.getNextFilterName(e.filters),expression:I,filter:w,filterExpressionMetadata:c,type:powerbi.explore.contracts.FilterType.Categorical}},n.prototype.getFilterType=function(){return D.FilterType.Basic},n.prototype.doesHierarchyLevelExistsOnSchema=function(e,t){if(!(t&&t.table&&t.hierarchy&&t.hierarchyLevel))return!1;for(var i=0,o=e.schemas;i<o.length;i++)if(o[i].findHierarchyLevel(t.table,t.hierarchy,t.hierarchyLevel))return!0;return!1},n.prototype.buildSQConstantExpr=function(e){var t;if(_.isString(e))if(null!=jsCommon.DateExtensions.parseIsoDateFast(e.substr(0,26))){var i=jsCommon.DateExtensions.parseIsoDateFast(e.substr(0,26));t=$.dateTime(i)}else t=$.text(e);else _.isBoolean(e)?t=$.boolean(e):_.isNumber(e)?t=powerbi.Double.isInteger(e)?$.integer(e):$.double(e):null===e?t=$.nullConstant():ue.throwException(this.errorProvider.invalidDataType(e));return t},n.prototype.getFieldExprsForKeys=function(e,t){var i=this;return e&&e.keys?_.map(e.keys,function(p){return i.jsonTargetParserService.getFieldExpr(e,t,p)}):null},n.\u0275fac=function(t){return new(t||n)(S.\u0275\u0275inject(M.N),S.\u0275\u0275inject(W),S.\u0275\u0275inject(E.vZ))},n.\u0275prov=S.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),De=powerbi.explore.FilterUtils,we=jsCommon.Utility,Re=function(){function n(e,t){this.jsonTargetParserService=e,this.errorProvider=t}return n.prototype.tryBuildFilterContainer=function(e,t,i){if((0,D.getFilterType)(i)!==this.getFilterType())return null;var o=i,p=this.jsonTargetParserService.getFieldExpr(i.target,t),c=this.jsonTargetParserService.getFieldExpr(o.orderBy,t);if(!p||!c)throw we.throwException(this.errorProvider.fieldNotFound(i.target)),{};var w=powerbi.data.TopNFilterPattern.buildFilterFromParameters({fieldBeingFiltered:p,isTop:"Top"===o.operator,itemCount:o.itemCount,orderByField:c});return{name:De.getNextFilterName(e.filters),expression:p,filter:w,type:powerbi.explore.contracts.FilterType.TopN}},n.prototype.getFilterType=function(){return D.FilterType.TopN},n.\u0275fac=function(t){return new(t||n)(S.\u0275\u0275inject(M.N),S.\u0275\u0275inject(W))},n.\u0275prov=S.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),pe=O(40582),ye=powerbi.explore.FilterUtils,Pe=jsCommon.Utility,z=powerbi.data,Q=function(){function n(e,t){this.jsonTargetParserService=e,this.errorProvider=t}return n.prototype.tryBuildFilterContainer=function(e,t,i){return(0,D.getFilterType)(i)!==this.getFilterType()?null:(null!=i.timeUnitsCount&&(c=z.RelativeDateFilterPattern.buildSemanticFilter(this.createRelativeFilterParameters(i,t))),{name:ye.getNextFilterName(e.filters),expression:this.jsonTargetParserService.getFieldExpr(i.target,t),filter:c,type:this.getContractFilterType()});var c},n.prototype.createRelativeFilterParameters=function(e,t){var i=this.jsonTargetParserService.getFieldExpr(e.target,t);return i||Pe.throwException(this.errorProvider.fieldNotFound(e.target)),{field:i,options:{duration:e.timeUnitsCount,includeToday:e&&(e.includeToday||e.filterType===D.FilterType.RelativeTime),relativeQualifier:this.translateToRelativeQualifierEnum(e.operator),relativeUnit:this.translateToRelativeFilterUnitEnum(e.timeUnitType)}}},n.prototype.translateToRelativeQualifierEnum=function(e){switch(e){case D.RelativeDateOperators.InLast:return z.RelativeDateQualifier.Last;case D.RelativeDateOperators.InThis:return z.RelativeDateQualifier.Current;case D.RelativeDateOperators.InNext:return z.RelativeDateQualifier.Next;default:return}},n}(),A=powerbi.data,H=powerbi.explore.contracts.FilterType,te=function(n){function e(t,i){return n.call(this,t,i)||this}return(0,pe.ZT)(e,n),e.prototype.translateToRelativeFilterUnitEnum=function(t){switch(t){case D.RelativeDateFilterTimeUnit.Days:return A.RelativeDateUnit.Day;case D.RelativeDateFilterTimeUnit.Weeks:return A.RelativeDateUnit.Week;case D.RelativeDateFilterTimeUnit.CalendarWeeks:return A.RelativeDateUnit.CalendarWeek;case D.RelativeDateFilterTimeUnit.Months:return A.RelativeDateUnit.Month;case D.RelativeDateFilterTimeUnit.CalendarMonths:return A.RelativeDateUnit.CalendarMonth;case D.RelativeDateFilterTimeUnit.Years:return A.RelativeDateUnit.Year;case D.RelativeDateFilterTimeUnit.CalendarYears:return A.RelativeDateUnit.CalendarYear;default:return}},e.prototype.getFilterType=function(){return D.FilterType.RelativeDate},e.prototype.getContractFilterType=function(){return H.RelativeDate},e.\u0275fac=function(i){return new(i||e)(S.\u0275\u0275inject(M.N),S.\u0275\u0275inject(W))},e.\u0275prov=S.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(Q),J=powerbi.explore.contracts.FilterType,re=powerbi.data,ve=function(n){function e(t,i){return n.call(this,t,i)||this}return(0,pe.ZT)(e,n),e.prototype.translateToRelativeFilterUnitEnum=function(t){switch(t){case D.RelativeDateFilterTimeUnit.Minutes:return re.RelativeDateUnit.Minute;case D.RelativeDateFilterTimeUnit.Hours:return re.RelativeDateUnit.Hour;default:return}},e.prototype.getContractFilterType=function(){return J.RelativeTime},e.prototype.getFilterType=function(){return D.FilterType.RelativeTime},e.\u0275fac=function(i){return new(i||e)(S.\u0275\u0275inject(M.N),S.\u0275\u0275inject(W))},e.\u0275prov=S.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(Q),ne=function(){function n(e,t,i,o,p){this.filterContainerBuilders=[e,t,i,o,p]}return n.prototype.tryBuildFilterContainer=function(e,t,i){for(var o=0,p=this.filterContainerBuilders;o<p.length;o++){var I=p[o].tryBuildFilterContainer(e,t,i);if(I)return I}},n.\u0275fac=function(t){return new(t||n)(S.\u0275\u0275inject(se),S.\u0275\u0275inject(Ie),S.\u0275\u0275inject(Re),S.\u0275\u0275inject(te),S.\u0275\u0275inject(ve))},n.\u0275prov=S.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),L=O(50433),ae=O(47429),q=O(59116),oe=powerbi.explore.viewModels.FilterCardConverter,l=powerbi.data.RelativeFilterType,a=powerbi.explore.FilterExpressionMetadataUtils,r=powerbi.explore.contracts.FilterType,s=powerbi.data.Selector,g=powerbi.data.SQExprBuilder,y=powerbi.data.SQExprUtils,x=powerbi.data.SemanticFilter,m=jsCommon.Utility,C=powerbi.data,j=[{provide:"jsonTargetParserService",useClass:M.N},{provide:"filterContainerProvider",useClass:ne},{provide:"jsonFilterParserModern",useClass:function(){function n(e,t,i){this.telemetryService=e,this.jsonTargetParserService=t,this.filterContainerProvider=i}return n.prototype.tryCreateSemanticFilter=function(e,t,i){var p=this.tryCreateFilterContainer({filters:[{name:e}]},t,i);if(p)return p.filter},n.prototype.tryCreateJSONFilter=function(e,t,i){var o=x.unmerge(e);if(_.isEmpty(o))return[];for(var p=[],c=0,I=o;c<I.length;c++){var w=I[c],U={name:"filter",filter:w},b=!1;if(b||powerbi.data.TopNFilterPattern.extractParametersFromFilter(w)&&(U.type=powerbi.explore.contracts.FilterType.TopN,b=!0),b||powerbi.data.RelativeDateFilterPattern.extractParametersFromSemanticFilter(w,l.Date)&&(U.type=powerbi.explore.contracts.FilterType.RelativeDate,b=!0),b||powerbi.data.RelativeDateFilterPattern.extractParametersFromSemanticFilter(w,l.Time)&&(U.type=powerbi.explore.contracts.FilterType.RelativeTime,b=!0),b||powerbi.data.TupleFilterPattern.extractParametersFromFilter(w,t,i)&&(U.type=powerbi.explore.contracts.FilterType.Tuple,U.filterExpressionMetadata=i,b=!0),!b){var K=oe.createAdvFilter(w.conditions()[0]);K&&(U.type=powerbi.explore.FilterUtils.getFilterType(K.field,K.supportsCategorical),U.expression=K.field,b=!0)}if(!b)return null;p.push(U)}return this.tryGetFilters({filters:p},t)},n.prototype.getVisualsInfo=function(e){var t=this;return e.map(function(i){return t.getVisualInfo(i.name,null,i.config.singleVisual.visualType)})},n.prototype.tryCreateFilterContainer=function(e,t,i){try{return this.constructFilterContainer(e,t,i)}catch(o){return L.D.traceError(o),null}},n.prototype.tryConvertJsonFilterArrayToFilterDataArray=function(e,t){try{return this.convertJsonFilterArrayToFilterDataArray(e,t)}catch(i){L.D.traceError(i)}return null},n.prototype.tryGetFilters=function(e,t){var i=this;if(!e.filters||0===e.filters.length)return[];try{return e.filters.map(function(o){return ae.D.fromSemanticFilter(o,t,o.filter,D,i.telemetryService)})}catch(o){throw L.D.traceError(o),void 0!==o.message?{message:o.message}:{message:h.XO.FilterSerializationError}}},n.prototype.getReportAndPageInfo=function(e){return{report:this.getReportInfo(e),page:this.getActivePageInfo(e),visual:null,dataPoints:null,regions:null,filters:null}},n.prototype.tryCreateDataViewScopeIdentityFromExpr=function(e,t){try{for(var i=[],o=0,p=t;o<p.length;o++)i.push(this.buildSQConstantExpr(p[o]));return C.createDataViewScopeIdentity(y.getDataViewScopeIdentityComparisonExpr(e,i))}catch(I){return null}},n.prototype.tryGetSelectedDataPoints=function(e,t,i,o,p){if(!o||!o.config||!o.config.singleVisual)throw{message:h.XO.DataPointSerializationError};var c=o.config.singleVisual;try{var I=this.tryGetFilters(o,t);return{report:this.getReportInfo(e),page:this.getActivePageInfo(e),visual:this.getVisualInfo(o.name,p,c.visualType),dataPoints:this.getDataPoints(i,t),regions:null,filters:I}}catch(w){throw L.D.traceError(w),void 0!==w.message?{message:w.message}:{message:h.XO.DataPointSerializationError}}},n.prototype.getValues=function(e,t){var i=this;if(!e)return[];var p=_.filter(e,function(c){return""!==c.value});return _.map(p,function(c){return{target:i.jsonTargetParserService.getTarget(c.expr,t),value:c.value,formattedValue:c.formattedValue}})},n.prototype.getDataPoints=function(e,t){var i=[];if(_.isEmpty(e))return i;for(var o=0,p=e;o<p.length;o++){var c=p[o],I={identity:[],values:this.getValues(c.values,t)},w=s.getScopeIdentities(c.selector);if(w)for(var U=new ae.D.SemanticFilterFieldVisitor(t),b=0,k=w;b<k.length;b++){var V=k[b];if(V.expr){var K=powerbi.data.SQExprConverter.getAllComparands(V);if(!K)return i;for(var Y=0,Z=K;Y<Z.length;Y++){var G=Z[Y],de=G.expr.accept(U);I.identity.push({target:de,equals:G.value})}}}i.push(I)}return i},n.prototype.getReportInfo=function(e){return(!e||null==e.activeSectionIndex)&&m.throwException(L.D.invalidReportData()),e.report&&{id:e.report.objectId,displayName:e.report.displayName}},n.prototype.getActivePageInfo=function(e){(!e||null==e.activeSectionIndex)&&m.throwException(L.D.invalidPageData());var t=e.sections[e.activeSectionIndex];return{name:t.name,displayName:t.displayName}},n.prototype.getVisualInfo=function(e,t,i){var o={name:e,type:i};return t&&(o.title=t),o},n.prototype.constructFilterContainer=function(e,t,i){var o=this.validateFilter(i);o&&m.throwException(L.D.filterValidationErrors(o));var p=this.filterContainerProvider.tryBuildFilterContainer(e,t,i);return this.updateFilterDisplaySettings(p,i.displaySettings),p},n.prototype.updateFilterDisplaySettings=function(e,t){e&&t&&(e.isLockedInViewMode=t.isLockedInViewMode,e.isHiddenInViewMode=t.isHiddenInViewMode,e.displayName=t.displayName)},n.prototype.getTupleElementTargetExpressions=function(e,t){var i=this.jsonTargetParserService.getFieldExpr(e,t);return i||m.throwException(L.D.fieldNotFound(e)),this.getFieldExprsForKeys(e,t)||[i]},n.prototype.getTupleElementTargetKeyExpressions=function(e,t){return this.getFieldExprsForKeys(e,t)||[]},n.prototype.getTupleElementTargetNonKeyExpression=function(e,t){var i=this.jsonTargetParserService.getFieldExpr(e,t);return i||m.throwException(L.D.fieldNotFound(e)),i},n.prototype.getTupleTargetExpressions=function(e,t){for(var i=[],o=0,p=e;o<p.length;o++)i=i.concat(this.getTupleElementTargetExpressions(p[o],t));return i},n.prototype.getTupleElementValueExpressions=function(e){var t=[];if(e.keyValues)for(var i=0,o=e.keyValues;i<o.length;i++)t.push(this.buildSQConstantExpr(o[i]));else t.push(this.buildSQConstantExpr(e.value));return t},n.prototype.getTupleElementKeyValueExpressions=function(e){var t=[];if(e.keyValues)for(var i=0,o=e.keyValues;i<o.length;i++)t.push(this.buildSQConstantExpr(o[i]));return t},n.prototype.getTupleElementNonKeyValueExpression=function(e){return this.buildSQConstantExpr(e.value)},n.prototype.getTupleValueExpressions=function(e){for(var t=[],i=0,o=e;i<o.length;i++)t=t.concat(this.getTupleElementValueExpressions(o[i]));return t},n.prototype.convertJsonFilterArrayToFilterDataArray=function(e,t){var i=this;return _.isEmpty(e)?[]:_.map(e,function(o){return i.convertJsonFilterToFilterData(o,t)})},n.prototype.convertJsonFilterToFilterData=function(e,t){var i={filter:null,type:null,filterExpressionMetadata:null,displayName:null};if(e)if(e.filterType===D.FilterType.Tuple)i.type=r.Tuple,i.filter=this.convertJsonTupleFilterToSemanticFilter(e,t),i.filterExpressionMetadata=this.extractFilterExpressionMetadataFromJsonTupleFilter(e,t);else{var p=this.constructFilterContainer({filters:[{name:"Filter"}]},t,e);i.filter=p&&p.filter}return i},n.prototype.convertJsonTupleFilterToSemanticFilter=function(e,t){for(var i=this.getTupleTargetExpressions(e.target,t),o=[],p=0,c=e.values;p<c.length;p++)o.push(this.getTupleValueExpressions(c[p]));var w=g.inValues(i,o);return x.fromSQExpr(w)},n.prototype.extractFilterExpressionMetadataFromJsonTupleFilter=function(e,t){var i={expressions:[],cachedValueItems:[]};return this.populateFilterExpressionMetadata(i,e,t),i},n.prototype.populateFilterExpressionMetadata=function(e,t,i){var o=this;if(_.find(t.target,function(G){return!_.isEmpty(o.getTupleElementTargetKeyExpressions(G,i))})){var p=_.map(t.target,function(G){return o.getTupleElementTargetKeyExpressions(G,i)});e.expressions=_.map(t.target,function(G){return o.getTupleElementTargetNonKeyExpression(G,i)});for(var c=0,I=t.values;c<I.length;c++){for(var w=I[c],U={identities:[],valueMap:{}},b=0;b<t.target.length;b++){var k=w[b];_.isString(k.value)?U.valueMap[b]=k.value:m.throwException(L.D.invalidDataType(k.value));var V=void 0;if(_.isEmpty(p[b])){var X=this.getTupleElementNonKeyValueExpression(k);V=a.makeIdentity([e.expressions[b]],[X])}else{var Y=this.getTupleElementKeyValueExpressions(k);V=a.makeIdentity(p[b],Y)}U.identities.push(V)}e.cachedValueItems.push(U)}}},n.prototype.getFieldExprsForKeys=function(e,t){var i=this;return e&&e.keys?_.map(e.keys,function(p){return i.jsonTargetParserService.getFieldExpr(e,t,p)}):null},n.prototype.buildSQConstantExpr=function(e){var t;if(_.isString(e))if(null!=jsCommon.DateExtensions.parseIsoDateFast(e.substr(0,26))){var i=jsCommon.DateExtensions.parseIsoDateFast(e.substr(0,26));t=g.dateTime(i)}else t=g.text(e);else _.isBoolean(e)?t=g.boolean(e):_.isNumber(e)?t=powerbi.Double.isInteger(e)?g.integer(e):g.double(e):null===e?t=g.nullConstant():m.throwException(L.D.invalidDataType(e));return t},n.prototype.validateFilter=function(e){return(0,D.validateFilter)(e)},n.\u0275fac=function(t){return new(t||n)(S.\u0275\u0275inject(q.y0),S.\u0275\u0275inject(M.N),S.\u0275\u0275inject(ne))},n.\u0275prov=S.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()}],ce=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=S.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=S.\u0275\u0275defineInjector({providers:j,imports:[[F.CommonModule]]}),n}()},62835:function(Ee,ee,O){O.d(ee,{N:function(){return f}});var F=O(35034),D=O(47429),h=O(76430),M=powerbi.data.SQExprBuilder,W=powerbi.data.SQExprConverter,f=function(){function R(){}return R.prototype.getFilterTarget=function(u,v){return D.D.getTarget(u,v)},R.prototype.getTarget=function(u,v,P){if(void 0===P&&(P=!0),!u)return null;var T,d=W.asFieldPattern(u,v);return d?(d.columnAggr||P&&d.groupingColumnAggr?T=this.getColumnAggrTarget(d):d.hierarchyLevelAggr?T=this.getHierarchyLevelAggrTarget(d):d.measure?T=this.getMeasureTarget(d):d.hierarchyLevel?T=this.getHierarchyLevelTarget(d):d.column&&(T=this.getColumnTarget(d)),T):null},R.prototype.getFieldExpr=function(u,v,P){var d;if(_.isEmpty(v.schemas),P)d=this.getColumnFieldPattern(u,v,P);else if((0,F.isHierarchyLevelAggr)(u))d=this.getHierarchyLevelAggrFieldPattern(u,v);else if((0,F.isColumnAggr)(u))d=this.getColumnAggrFieldPattern(u,v);else if((0,F.isMeasure)(u))d=this.getMeasureFieldPattern(u,v);else if((0,F.isHierarchyLevel)(u))d=this.getHierarchyLevelFieldPattern(u,v);else{if(!(0,F.isColumn)(u))throw new Error("Invalid or unsupported target");d=this.getColumnFieldPattern(u,v)}return!!d&&(0,F.isPercentOfGrandTotal)(u)&&(d=this.getPercentOfGrandTotalFieldPattern(d)),M.fieldExpr(d)},R.prototype.getColumnFieldPattern=function(u,v,P){var d=P||u.column;return{column:{schema:this.getSchemaName(d,u.table,v),entity:u.table,name:d}}},R.prototype.getMeasureFieldPattern=function(u,v){return{measure:{schema:this.getSchemaName(u.measure,u.table,v),entity:u.table,name:u.measure}}},R.prototype.getHierarchyLevelFieldPattern=function(u,v){return{hierarchyLevel:{schema:this.getSchemaName(u.hierarchy,u.table,v,!0),entity:u.table,name:u.hierarchy,level:u.hierarchyLevel}}},R.prototype.getHierarchyLevelAggrFieldPattern=function(u,v){return{hierarchyLevelAggr:{schema:this.getSchemaName(u.hierarchy,u.table,v,!0),entity:u.table,name:u.hierarchy,level:u.hierarchyLevel,aggregate:this.getQueryAggregateFunction(u.aggregationFunction)}}},R.prototype.getColumnAggrFieldPattern=function(u,v){return{columnAggr:{schema:this.getSchemaName(u.column,u.table,v),entity:u.table,name:u.column,aggregate:this.getQueryAggregateFunction(u.aggregationFunction)}}},R.prototype.getPercentOfGrandTotalFieldPattern=function(u){return{percentOfGrandTotal:{baseExpr:u}}},R.prototype.getQueryAggregateFunction=function(u){switch(u){case"Sum":return 0;case"Avg":return 1;case"Count":return 2;case"Min":return 3;case"Max":return 4;case"CountNonNull":return 5;case"Median":return 6;case"StandardDeviation":return 7;case"Variance":return 8}},R.prototype.getColumnTarget=function(u){var v=u.column;return{$schema:"http://powerbi.com/product/schema#column",column:v.name,table:v.entity}},R.prototype.getColumnAggrTarget=function(u,v){void 0===v&&(v=!0);var P=u.columnAggr||v&&u.groupingColumnAggr;return P?{$schema:"http://powerbi.com/product/schema#columnAggr",column:P.name,table:P.entity,aggregationFunction:powerbi.data.aggregateFunctionName(P.aggregate)}:null},R.prototype.getMeasureTarget=function(u){var v=u.measure;return{$schema:"http://powerbi.com/product/schema#measure",measure:v.name,table:v.entity}},R.prototype.getHierarchyLevelTarget=function(u){var v=u.hierarchyLevel;return{$schema:"http://powerbi.com/product/schema#hierarchyLevel",hierarchy:v.name,hierarchyLevel:v.level,table:v.entity}},R.prototype.getHierarchyLevelAggrTarget=function(u){var v=u.hierarchyLevelAggr;return{$schema:"http://powerbi.com/product/schema#hierarchyLevelAggr",hierarchy:v.name,hierarchyLevel:v.level,table:v.entity,aggregationFunction:powerbi.data.aggregateFunctionName(v.aggregate)}},R.prototype.getSchemaName=function(u,v,P,d){void 0===d&&(d=!1);for(var T=0,se=P.schemas;T<se.length;T++){var E=se[T];if(E.findProperty(v,u)||d&&E.findHierarchy(v,u))return E.name}},R.\u0275prov=h.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac=function(v){return new(v||R)},providedIn:"root"}),R}()}}]);