"use strict";(self.webpackChunkreportEmbed=self.webpackChunkreportEmbed||[]).push([[1],{97285:function(Ee,ne,t){t.d(ne,{L:function(){return P}});var e=t(40582),n=t(76430),f=t(85169),i=t(61226),M=t(60400),E=t(9784),I=t(48830),d=function(b){return{"accessibility-info-collapsed":b}},P=function(){function y(b){this.hotkeyDialogService=b,this.onClose=new n.EventEmitter,this.isCollapsed=!0}return y.prototype.onFocusIn=function(){this.show()},y.prototype.onFocusOut=function(){this.hide()},y.prototype.showKeyboardShortcuts=function(b){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(o){switch(o.label){case 0:return[4,this.hotkeyDialogService.show()];case 1:return o.sent().afterClosed().subscribe(function(){b.target.focus()}),[2]}})})},y.prototype.skipToContent=function(){this.hide(),this.onClose.emit()},y.prototype.hide=function(){this.isCollapsed=!0},y.prototype.show=function(){this.isCollapsed=!1},y.\u0275fac=function(a){return new(a||y)(n.\u0275\u0275directiveInject(f.g))},y.\u0275cmp=n.\u0275\u0275defineComponent({type:y,selectors:[["accessibility-info"]],hostBindings:function(a,o){1&a&&n.\u0275\u0275listener("focusin",function(){return o.onFocusIn()})("focusout",function(){return o.onFocusOut()})},outputs:{onClose:"onClose"},decls:8,vars:3,consts:[["keyboard-shortcuts","ctrl-Enter","focus-nav-mode","Browser",1,"accessibility-info",3,"ngClass"],[1,"accessibility-info-items"],["tabindex","0","role","button","localize","HotkeyDialog_Help_Desc",1,"link",3,"accessible-click"],["localize","AccessibilityInfo_ShowScreenReaderTips","target","_blank","href","https://go.microsoft.com/fwlink/?linkid=852575"],["tabindex","0","role","button","localize","AccessibilityInfo_SkipToContent",1,"link",3,"accessible-click"]],template:function(a,o){1&a&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"ul",1),n.\u0275\u0275elementStart(2,"li"),n.\u0275\u0275elementStart(3,"span",2),n.\u0275\u0275listener("accessible-click",function(s){return o.showKeyboardShortcuts(s)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"li"),n.\u0275\u0275element(5,"a",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"li"),n.\u0275\u0275elementStart(7,"span",4),n.\u0275\u0275listener("accessible-click",function(){return o.skipToContent()}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&a&&n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(1,d,o.isCollapsed))},directives:[i.q,M.NgClass,E.X,I.t],styles:['[_nghost-%COMP%]{position:absolute;z-index:10000003}@media print{[_nghost-%COMP%]{display:none}}.accessibility-info[_ngcontent-%COMP%]{position:absolute;left:0;top:0;margin:10px;padding:16px;background:white;border-radius:2px;box-shadow:0 6.4px 14.4px rgba(0,0,0,.133),0 1.2px 3.6px rgba(0,0,0,.11);outline:none;font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif;white-space:nowrap}.accessibility-info-items[_ngcontent-%COMP%]{display:flex;flex-direction:column}.accessibility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.accessibility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:unset}.accessibility-info-collapsed[_ngcontent-%COMP%]{width:1px;height:1px;margin:-1px;border:0px;overflow:hidden;padding:0;opacity:0}.accessibility-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .accessibility-info[_ngcontent-%COMP%]   span.link[_ngcontent-%COMP%]{color:var(--default-link-color, #1F3A93);text-decoration:unset;font-size:14px;outline:none;padding:1px}.accessibility-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:focus, .accessibility-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{border:1px solid var(--neutral-primary-color, #333333)}.accessibility-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:var(--default-visited-link-color, #551A8B)}.accessibility-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--neutral-dark-color, #212121);cursor:pointer}']}),y}()},2220:function(Ee,ne,t){t.d(ne,{z:function(){return ge}});var e=t(40582),n=t(76430),f=t(60354),i=t(97894),M=t(49099),E=t(91738),I=t(91054),d=t(23580),P=t(95781),y=t(44627),b=t(60660),a=t(76182),o=t(21231),l=t(60400),s=t(64417),c=t(50651),O=t(6431),x=t(52555),V=t(80763),w=t(48830),T=t(83757),v=powerbi.explore.contracts.BookmarkExtensions,g=jsCommon.DropPosition,r=jsCommon.BrowserUtils,u=["bookmarkElement"];function C(re,j){if(1&re&&n.\u0275\u0275element(0,"i",8),2&re){var ie=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",ie.getExpandCollapseIconClasses())}}function F(re,j){1&re&&n.\u0275\u0275element(0,"i",9)}function A(re,j){if(1&re){var ie=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"input",10),n.\u0275\u0275listener("keydown",function(Q){return n.\u0275\u0275restoreView(ie),n.\u0275\u0275nextContext().handleKeyDown(Q)})("blur",function(){return n.\u0275\u0275restoreView(ie),n.\u0275\u0275nextContext().renameBookmark()})("ngModelChange",function(Q){return n.\u0275\u0275restoreView(ie),n.\u0275\u0275nextContext().bookmark.displayName=Q}),n.\u0275\u0275elementEnd()}if(2&re){var Z=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngModel",Z.bookmark.displayName)}}function W(re,j){if(1&re){var ie=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"i",11),n.\u0275\u0275elementStart(1,"button",12),n.\u0275\u0275listener("accessible-click",function(fe){return n.\u0275\u0275restoreView(ie),n.\u0275\u0275nextContext().showContextMenu(fe)}),n.\u0275\u0275pipe(2,"localize"),n.\u0275\u0275element(3,"span",13),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}2&re&&(n.\u0275\u0275advance(1),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(2,1,"Options_Menu")))}function k(re,j){if(1&re){var ie=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"bookmark-node",15),n.\u0275\u0275listener("onGroupBookmarks",function(){return n.\u0275\u0275restoreView(ie),n.\u0275\u0275nextContext(2).groupBookmarks()})("onUngroupBookmarks",function(){return n.\u0275\u0275restoreView(ie),n.\u0275\u0275nextContext(2).ungroupBookmarks()})("onMultiSelectBookmarks",function(J){return n.\u0275\u0275restoreView(ie),n.\u0275\u0275nextContext(2).multiSelectBookmark(J)}),n.\u0275\u0275elementEnd()}if(2&re){var Z=j.$implicit,fe=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("bookmark",Z)("selectedBookmarks",fe.selectedBookmarks)("parentBookmark",fe.bookmark)("isEditable",fe.isEditable)}}function R(re,j){if(1&re&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,k,1,4,"bookmark-node",14),n.\u0275\u0275elementContainerEnd()),2&re){var ie=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",ie.bookmark.children)}}var G=function(j,ie,Z,fe){return{"bookmark-selected":j,"child-bookmark":ie,disabled:Z,"default-bookmark":fe}},le=function(){return["trimmedTextWithEllipsis"]},ge=function(){function re(j,ie,Z,fe,Q,J,se,oe,K){var D=this;this.promiseFactory=j,this.bookmarkService=ie,this.dragDataService=Z,this.explorationCapabilities=fe,this.featureSwitchService=Q,this.lazyScoped=J,this.localizationService=se,this.pbiMenuService=oe,this.screenReaderService=K,this.onGroupBookmarks=new n.EventEmitter,this.onUngroupBookmarks=new n.EventEmitter,this.onMultiSelectBookmarks=new n.EventEmitter,this.Bookmark=powerbi.explore.contracts.BookmarkExtensions,this.dropConfig={accept:"bookmark"},this.getDragContext=function(){return{data:{bookmark:D.bookmark,parent:D.parentBookmark}}},this.dropActionHandler=function(p){return D.getDropAction(p)},this.bookmarkAuthoringPromise=this.lazyScoped.get("bookmarkAuthoringService")}return re.prototype.ngOnInit=function(){var j=this;this.isEditing=!1,this.isDefaultBookmark=this.bookmark.isDefault,this.pbiEditableLabelOptions={disableClick:!0,customTooltip:!1,inputMatchLabelWidth:!1,onEdit:function(){return j.startEditName()},onBlur:function(){return j.cancelEditName()}}},re.prototype.ngOnChanges=function(j){j.parentBookmark&&(this.isChildBookmark=!!this.parentBookmark),j.bookmark&&(this.hasChildren=v.isBookmarkGroup(this.bookmark))},re.prototype.ngAfterViewInit=function(){var j=this;this.bookmarkElement.nativeElement.addEventListener(jsCommon.DOMConstants.contextmenuEventName,function(ie){j.isEditable&&(ie.preventDefault(),j.showContextMenu(ie))})},re.prototype.dragDisabled=function(){return!(!this.capabilities||!this.capabilities.disallowDrag)},re.prototype.isDisabled=function(){if(v.isBookmarkGroup(this.bookmark))return!1;var j=this.bookmark.options;return j&&j.suppressActiveSection&&j.suppressData&&j.suppressDisplay},re.prototype.isSelected=function(){var j=this;return this.selectedBookmarks&&_.some(this.selectedBookmarks,function(ie){return ie.name===j.bookmark.name})},re.prototype.getExpandCollapseIconClasses=function(){if(v.isBookmarkGroup(this.bookmark))return this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign?this.bookmark.isExpanded?"pbi-glyph-chevrondownmedium":"pbi-glyph-arrowright":(this.bookmark.isExpanded?"expanded":"")+" pbi-glyph-caretright"},re.prototype.getExpandCollapseState=function(){if(v.isBookmarkGroup(this.bookmark))return this.bookmark.isExpanded},re.prototype.handleKeydown=function(j){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(ie){switch(ie.label){case 0:return document.activeElement.id!==this.bookmarkElement.nativeElement.id?[2]:13!==j.keyCode?[3,2]:[4,this.selectBookmark(void 0,!1)];case 1:return ie.sent(),[3,4];case 2:return 32!==j.keyCode?[3,4]:[4,this.selectBookmark(void 0,j.ctrlKey||j.shiftKey)];case 3:ie.sent(),ie.label=4;case 4:return[2]}})})},re.prototype.selectBookmark=function(j,ie){var Z;return void 0===ie&&(ie=!1),(0,e.mG)(this,void 0,powerbi.Promise,function(){var fe,J,se,oe;return(0,e.Jh)(this,function(K){switch(K.label){case 0:return this.isDisabled()?[2]:(fe=j?j.ctrlKey||j.shiftKey:ie,this.isEditable&&fe?(!v.isBookmarkGroup(this.bookmark)&&!this.isChildBookmark&&this.multiSelectBookmark(this.bookmark),[3,6]):[3,1]);case 1:return v.isBookmarkGroup(this.bookmark)?(this.bookmark.isExpanded=!this.bookmark.isExpanded,[3,6]):[3,2];case 2:return v.isWebBookmark(this.bookmark)?[4,this.lazyScoped.get("personalBookmarks")]:[3,4];case 3:return J=K.sent(),[3,5];case 4:J=this.bookmarkService,K.label=5;case 5:J.apply(this.bookmark),(se=null===(Z=this.bookmark)||void 0===Z?void 0:Z.displayName)&&(oe=this.localizationService.format("Selected",se),this.screenReaderService.alert(oe)),K.label=6;case 6:return[2]}})})},re.prototype.multiSelectBookmark=function(j){this.onMultiSelectBookmarks.emit(j)},re.prototype.dropOntoSibling=function(j){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var ie,Z,fe,Q,J;return(0,e.Jh)(this,function(se){switch(se.label){case 0:return(ie=this.dragDataService.getDragContext())&&ie.data?(Z=ie.data.bookmark,fe=this.parentBookmark,Q=this.bookmark,J=3===j,v.isBookmarkGroup(this.bookmark)&&v.isStateBookmark(Z)&&J&&this.bookmark.isExpanded&&(fe=this.bookmark,Q=this.bookmark.children[0],J=!1),v.isBookmarkGroup(Z)&&this.isLastChildBookmark()&&J&&(fe=null,Q=this.parentBookmark),[4,this.bookmarkAuthoringPromise]):[2];case 1:return se.sent().move(Z,Q,J,fe),[2]}})})},re.prototype.startEditName=function(){!this.isEditable||(this.isEditing=!0)},re.prototype.cancelEditName=function(){this.isEditing=!1},re.prototype.handleKeyDown=function(j){"Enter"===j.key&&r.noModifierPressed(j)?this.renameBookmark():"Escape"===j.key&&r.noModifierPressed(j)&&this.cancelEditName(),j.stopPropagation()},re.prototype.renameBookmark=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var ie;return(0,e.Jh)(this,function(Z){switch(Z.label){case 0:return jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(this.bookmark.displayName)?[2]:(this.cancelEditName(),v.isWebBookmark(this.bookmark)?[4,this.lazyScoped.get("personalBookmarks")]:[3,2]);case 1:return ie=Z.sent(),[3,4];case 2:return[4,this.bookmarkAuthoringPromise];case 3:ie=Z.sent(),Z.label=4;case 4:return ie.rename(this.bookmark,this.bookmark.displayName),[2]}})})},re.prototype.showContextMenu=function(j){var ie=this;if(j.stopPropagation(),this.contextMenuOperations)this.contextMenuOperations.handleContextMenu(this,this.bookmarkElement.nativeElement);else{var Z=this.getMenuItemCollection(),Q=(0,e.pi)((0,e.pi)({},{x:j.pageX,y:j.pageY}),{element:j.target}),J=M.p.getPbiMenuConfig(Z,Q);this.pbiMenuService.open(J).onButtonClick$.pipe((0,i.q)(1)).subscribe(function(oe){ie.selectMenuItem(oe.id)})}},re.prototype.selectMenuItem=function(j){switch(j){case 0:this.groupBookmarks();break;case 1:this.ungroupBookmarks();break;case 2:this.editBookmark();break;case 3:this.deleteBookmark();break;case 4:this.updateBookmark();break;case 5:this.toggleApplyDataOption();break;case 7:this.toggleApplyDisplayOption();break;case 6:this.toggleApplyActiveSectionOption();break;case 8:this.toggleApplyOnlyToSelectedVisuals()}},re.prototype.getBookmarkRole=function(){return v.isWebBookmark(this.bookmark)?"option":"treeitem"},re.prototype.getAriaLevel=function(){return v.isWebBookmark(this.bookmark)?null:this.isChildBookmark?2:1},re.prototype.deleteBookmark=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(j){switch(j.label){case 0:return[4,this.bookmarkAuthoringPromise];case 1:return j.sent().remove(this.bookmark),[2]}})})},re.prototype.updateBookmark=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(j){switch(j.label){case 0:return v.isStateBookmark(this.bookmark)?[4,this.bookmarkAuthoringPromise]:[2];case 1:return j.sent().update(this.bookmark),[2]}})})},re.prototype.groupBookmarks=function(){this.onGroupBookmarks.emit()},re.prototype.ungroupBookmarks=function(){this.onUngroupBookmarks.emit(this.bookmark)},re.prototype.editBookmark=function(){this.isEditing=!0},re.prototype.toggleApplyDataOption=function(){this.toggleBookmarkOption("suppressData")},re.prototype.toggleApplyDisplayOption=function(){this.toggleBookmarkOption("suppressDisplay")},re.prototype.toggleApplyActiveSectionOption=function(){this.toggleBookmarkOption("suppressActiveSection")},re.prototype.toggleApplyOnlyToSelectedVisuals=function(){this.toggleBookmarkOption("applyOnlyToTargetVisuals")},re.prototype.toggleBookmarkOption=function(j){v.isStateBookmark(this.bookmark)&&(this.bookmark.options||(this.bookmark.options={}),this.bookmark.options[j]=!this.bookmark.options[j])},re.prototype.getDropAction=function(j){var ie=this.promiseFactory.defer(),Z=this.dragDataService.getDragContext();if(Z&&Z.data&&this.isEditable)if(v.isBookmarkGroup(Z.data.bookmark)){var Q=v.isBookmarkGroup(this.bookmark)&&!this.bookmark.isExpanded||v.isStateBookmark(this.bookmark)&&!this.isChildBookmark||this.isLastChildBookmark();g.isAbove(j)&&!this.isChildBookmark?ie.resolve(2):!g.isAbove(j)&&Q?ie.resolve(3):ie.resolve(0)}else g.isAbove(j)?ie.resolve(2):ie.resolve(3);else ie.resolve(0);return ie.promise},re.prototype.isLastChildBookmark=function(){if(this.parentBookmark){var j=this.parentBookmark.children;return _.isEmpty(j),j.indexOf(this.bookmark)===j.length-1}return!1},re.prototype.getMenuItemCollection=function(){return v.isBookmarkGroup(this.bookmark)?this.getMenuItemCollectionForBookmarkGroup(this.bookmark):this.getMenuItemCollectionForStateBookmark(this.bookmark)},re.prototype.getMenuItemCollectionForBookmarkGroup=function(j){var ie={items:[]};return ie.items.push({key:2,type:0,text:this.localizationService.get("ItemAction_Rename")}),ie.items.push({key:1,type:0,text:this.localizationService.get("Ungroup")}),ie},re.prototype.getMenuItemCollectionForStateBookmark=function(j){var ie={items:[]},Z=j.options;ie.items.push({key:4,type:0,text:this.localizationService.get("PBI_Button_Label_Update")}),ie.items.push({key:2,type:0,text:this.localizationService.get("ItemAction_Rename")}),ie.items.push({key:3,type:0,text:this.localizationService.get("Delete")}),ie.items.push(this.isChildBookmark?{key:1,type:0,text:this.localizationService.get("Ungroup")}:{key:0,type:0,text:this.localizationService.get("Group_Action"),disabled:!this.isSelected()}),ie.items.push({type:1}),ie.items.push({key:5,type:0,text:this.localizationService.get("ExplorationBookmarks_Data"),tooltip:this.localizationService.get("ExplorationBookmarks_Data_Tooltip"),checked:!(Z&&Z.suppressData)}),ie.items.push({key:7,type:0,text:this.localizationService.get("ExplorationBookmarks_Display"),tooltip:this.localizationService.get("ExplorationBookmarks_Display_Tooltip"),checked:!(Z&&Z.suppressDisplay)}),ie.items.push({key:6,type:0,text:this.localizationService.get("ExplorationBookmarks_ActiveSection"),tooltip:this.localizationService.get("ExplorationBookmarks_ActiveSection_Tooltip"),checked:!(Z&&Z.suppressActiveSection)}),ie.items.push({type:1});var fe=Z&&Z.applyOnlyToTargetVisuals;return ie.items.push({key:8,type:0,text:this.localizationService.get("AllVisuals"),tooltip:this.localizationService.get("ExplorationBookmarks_AllVisuals_Tooltip"),checked:!fe}),ie.items.push({key:8,type:0,text:this.localizationService.get("ExplorationBookmarks_SelectedVisuals"),tooltip:this.localizationService.get("ExplorationBookmarks_SelectedVisuals_Tooltip"),checked:fe}),ie},re.\u0275fac=function(ie){return new(ie||re)(n.\u0275\u0275directiveInject(f.t),n.\u0275\u0275directiveInject(E.F),n.\u0275\u0275directiveInject(I.x),n.\u0275\u0275directiveInject(d.U),n.\u0275\u0275directiveInject(P.vZ),n.\u0275\u0275directiveInject(y.H),n.\u0275\u0275directiveInject(b.o),n.\u0275\u0275directiveInject(a.o),n.\u0275\u0275directiveInject(o.g))},re.\u0275cmp=n.\u0275\u0275defineComponent({type:re,selectors:[["bookmark-node"]],viewQuery:function(ie,Z){var fe;(1&ie&&n.\u0275\u0275viewQuery(u,5),2&ie)&&(n.\u0275\u0275queryRefresh(fe=n.\u0275\u0275loadQuery())&&(Z.bookmarkElement=fe.first))},inputs:{bookmark:"bookmark",selectedBookmarks:"selectedBookmarks",isEditable:"isEditable",parentBookmark:"parentBookmark",contextMenuOperations:"contextMenuOperations",capabilities:"capabilities"},outputs:{onGroupBookmarks:"onGroupBookmarks",onUngroupBookmarks:"onUngroupBookmarks",onMultiSelectBookmarks:"onMultiSelectBookmarks"},features:[n.\u0275\u0275NgOnChangesFeature],decls:8,vars:27,consts:[["tabindex","0",1,"ui-droppable","dropzone","bookmark","themeableElement",3,"id","ngClass","drag","getDragContext","dragDisabled","drop","dropAction","click","keydown","dropHandler"],["bookmarkElement",""],["aria-hidden","true","class","caret glyphicon glyph-mini smallFontSize item-auto",3,"ngClass",4,"ngIf"],["localizeTooltip","DefaultBookmarkTooltip","class","caret glyphicon pbi-glyph-bookmark-default glyph-mini smallFontSize item-auto",4,"ngIf"],[1,"unselectable","title"],[3,"ngModel","keydown","blur","ngModelChange",4,"pbiEditableLabel","pbiEditableLabelValue","pbiEditableLabelMode","pbiEditableLabelEditable","pbiEditableLabelClasses"],["class","menuContainer item-auto",4,"ngIf"],[4,"ngIf"],["aria-hidden","true",1,"caret","glyphicon","glyph-mini","smallFontSize","item-auto",3,"ngClass"],["localizeTooltip","DefaultBookmarkTooltip",1,"caret","glyphicon","pbi-glyph-bookmark-default","glyph-mini","smallFontSize","item-auto"],[3,"ngModel","keydown","blur","ngModelChange"],[1,"menuContainer","item-auto"],["localizeTooltip","Options_Menu",1,"optionsMenu",3,"accessible-click"],[1,"glyphicon","pbi-glyph-more"],[3,"bookmark","selectedBookmarks","parentBookmark","isEditable","onGroupBookmarks","onUngroupBookmarks","onMultiSelectBookmarks",4,"ngFor","ngForOf"],[3,"bookmark","selectedBookmarks","parentBookmark","isEditable","onGroupBookmarks","onUngroupBookmarks","onMultiSelectBookmarks"]],template:function(ie,Z){1&ie&&(n.\u0275\u0275elementStart(0,"div",0,1),n.\u0275\u0275listener("click",function(Q){return Z.selectBookmark(Q)})("keydown",function(Q){return Z.handleKeydown(Q)})("dropHandler",function(Q){return Z.dropOntoSibling(Q.dropAction)}),n.\u0275\u0275template(2,C,1,1,"i",2),n.\u0275\u0275template(3,F,1,0,"i",3),n.\u0275\u0275elementStart(4,"div",4),n.\u0275\u0275template(5,A,1,1,"input",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,W,4,3,"i",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,R,2,1,"ng-container",7)),2&ie&&(n.\u0275\u0275propertyInterpolate("id",Z.bookmark.name),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction4(21,G,Z.isSelected(),Z.isChildBookmark,Z.isDisabled(),Z.isDefaultBookmark))("drag","bookmark")("getDragContext",Z.getDragContext)("dragDisabled",Z.dragDisabled())("drop",Z.dropConfig)("dropAction",Z.dropActionHandler),n.\u0275\u0275attribute("role",Z.getBookmarkRole())("aria-level",Z.getAriaLevel())("aria-label",Z.bookmark.displayName)("aria-selected",Z.isSelected())("aria-expanded",Z.getExpandCollapseState()),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",Z.hasChildren),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Z.isDefaultBookmark),n.\u0275\u0275advance(2),n.\u0275\u0275property("pbiEditableLabel",Z.pbiEditableLabelOptions)("pbiEditableLabelValue",Z.bookmark.displayName)("pbiEditableLabelMode",!0)("pbiEditableLabelEditable",Z.isEditing)("pbiEditableLabelClasses",n.\u0275\u0275pureFunction0(26,le)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Z.isEditable),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Z.Bookmark.isBookmarkGroup(Z.bookmark)&&Z.bookmark.isExpanded))},directives:[l.NgClass,s.w,c.W,l.NgIf,O.D,x.r,V.Fj,V.JJ,V.On,w.t,l.NgForOf,re],pipes:[T.F],styles:["i.caret[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;padding:0;color:var(--neutral-tertiary-color, #A6A6A6);transform-origin:50% 50%;transition:transform .25s}i.caret.expanded[_ngcontent-%COMP%]{transform:rotate(0)}i.caret.glyphicon[_ngcontent-%COMP%]{margin:0 4px 0 0}.newPaneColors[_nghost-%COMP%]   i.caret[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   i.caret[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}"]}),re}()},41987:function(Ee,ne,t){t.d(ne,{d:function(){return y}});var e=t(40582),n=t(76430),f=t(91738),i=t(71367),M=t(40629),E=t(44627),I=t(9784),d=t(52555),P=powerbi.explore.services.events,y=function(){function b(a,o,l,s){this.bookmarkService=a,this.eventBridge=o,this.viewModeState=l,this.lazyScopedProviderModern=s}return b.prototype.ngOnInit=function(){return(0,e.mG)(this,void 0,void 0,function(){var a=this;return(0,e.Jh)(this,function(o){switch(o.label){case 0:return this.eventsChannel=this.eventBridge.createChannelSubscriptionManager().subscribe(P.bookmarkViewStateChanged,function(){return a.init()}).subscribe(P.bookmarkApplied,function(l,s){!a.inPersonalBookmarksViewState()||(a.currentBookmark=_.find(a.bookmarksToPlay,function(c){return c.name===s.bookmarkName}))}),[4,this.init()];case 1:return o.sent(),[2]}})})},b.prototype.ngOnDestroy=function(){this.eventsChannel&&this.eventsChannel.unsubscribeAll()},b.prototype.ngOnChanges=function(a){return(0,e.mG)(this,void 0,void 0,function(){var o;return(0,e.Jh)(this,function(l){switch(l.label){case 0:return(a.selectedBookmark.isFirstChange()||this.selectedBookmark)&&(this.currentBookmark=this.selectedBookmark),this.currentBookmarkIndex<0?(o=this,[4,this.getBookmarkService()]):[3,2];case 1:o.bookmarksToPlay=l.sent().getBookmarkListToPlay(this.currentBookmark),l.label=2;case 2:return[2]}})})},Object.defineProperty(b.prototype,"currentBookmarkIndex",{get:function(){var o=this;return this.currentBookmark?_.findIndex(this.bookmarksToPlay,function(l){return l.name===o.currentBookmark.name}):0},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"currentBookmarkName",{get:function(){return this.currentBookmark?this.currentBookmark.displayName:""},enumerable:!1,configurable:!0}),b.prototype.switchTo=function(a){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(l){switch(l.label){case 0:return[4,this.getBookmarkService()];case 1:return l.sent().apply(this.bookmarksToPlay[a]),[2]}})})},b.prototype.exit=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(o){switch(o.label){case 0:return[4,this.getBookmarkService()];case 1:return o.sent().setPlayMode(!1),[2]}})})},b.prototype.init=function(){return(0,e.mG)(this,void 0,void 0,function(){var a,o,l;return(0,e.Jh)(this,function(s){switch(s.label){case 0:return null==this.viewModeState.getViewState().bookmarkView?[2]:[4,this.getBookmarkService()];case 1:return a=s.sent(),o=this.getSelectedBookmark(),this.bookmarksToPlay=a.getBookmarkListToPlay(o),l=o&&o.name,!_.isEmpty(this.bookmarksToPlay)&&this.bookmarksToPlay[0].name!==l&&a.apply(this.bookmarksToPlay[0]),[2]}})})},b.prototype.getBookmarkService=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(a){return this.inPersonalBookmarksViewState()?[2,this.lazyScopedProviderModern.get("personalBookmarks")]:[2,this.bookmarkService]})})},b.prototype.getSelectedBookmark=function(){if(!this.inPersonalBookmarksViewState())return this.selectedBookmark},b.prototype.inPersonalBookmarksViewState=function(){return 1===this.viewModeState.getViewState().bookmarkView},b.\u0275fac=function(o){return new(o||b)(n.\u0275\u0275directiveInject(f.F),n.\u0275\u0275directiveInject(i.J),n.\u0275\u0275directiveInject(M.kc),n.\u0275\u0275directiveInject(E.H))},b.\u0275cmp=n.\u0275\u0275defineComponent({type:b,selectors:[["bookmark-play"]],inputs:{selectedBookmark:"selectedBookmark"},features:[n.\u0275\u0275NgOnChangesFeature],decls:14,vars:5,consts:[["localize","ExplorationBookmarks_PlayPosition","localize-fragments","",1,"bookmark-position"],["fragment-index","0","localize","Generic_Bookmark"],["fragment-index","1"],["fragment-index","2"],[1,"bookmark-title"],["localizeTooltip","Previous_ButtonText",1,"bookmark-icon",3,"disabled","click"],[1,"glyphicon","pbi-glyph-arrowleft","glyph-small"],["localizeTooltip","Next_ButtonText",1,"bookmark-icon",3,"disabled","click"],[1,"glyphicon","pbi-glyph-arrowright","glyph-small"],["localizeTooltip","Close",1,"bookmark-icon",3,"click"],[1,"glyphicon","pbi-glyph-close","glyph-small"]],template:function(o,l){1&o&&(n.\u0275\u0275elementStart(0,"span",0),n.\u0275\u0275element(1,"span",1),n.\u0275\u0275elementStart(2,"span",2),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"span",3),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"span",4),n.\u0275\u0275text(7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"button",5),n.\u0275\u0275listener("click",function(){return l.switchTo(l.currentBookmarkIndex-1)}),n.\u0275\u0275element(9,"i",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"button",7),n.\u0275\u0275listener("click",function(){return l.switchTo(l.currentBookmarkIndex+1)}),n.\u0275\u0275element(11,"i",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"button",9),n.\u0275\u0275listener("click",function(){return l.exit()}),n.\u0275\u0275element(13,"i",10),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(l.currentBookmarkIndex+1),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(null==l.bookmarksToPlay?null:l.bookmarksToPlay.length),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(l.currentBookmarkName),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",l.currentBookmarkIndex<=0),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",l.currentBookmarkIndex>=(null==l.bookmarksToPlay?null:l.bookmarksToPlay.length)-1))},directives:[I.X,d.r],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex;flex-direction:row;height:100%;background-color:var(--neutral-tertiary-alt-color, #C8C8C8);font-size:17px;color:var(--neutral-primary-color, #333333);align-items:center}[_nghost-%COMP%]   .hideOverflowText[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   .bookmark-position[_ngcontent-%COMP%]{margin-left:20px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   .bookmark-title[_ngcontent-%COMP%]{flex-grow:1;text-align:center;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]{height:21px;margin-right:16px;display:flex;flex-direction:row;align-items:center;background-color:transparent}[_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--neutral-primary-color, #333333)}[_nghost-%COMP%]   button.bookmark-icon[disabled][_ngcontent-%COMP%], [_nghost-%COMP%]   button.bookmark-icon[disabled][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   button.bookmark-icon[disabled][_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [_nghost-%COMP%]   button.bookmark-icon[disabled][_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:var(--neutral-tertiary-color, #A6A6A6);background-color:transparent;pointer-events:none}[_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]:focus:hover, [_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]:active:hover{background-color:transparent}[_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]   i.glyphicon[_ngcontent-%COMP%]{margin:0}"]}),b}()},71237:function(Ee,ne,t){t.d(ne,{m:function(){return d}});var e=t(40582),n=t(76430),f=t(44627),i=t(40629),M=t(60400),E=t(2220);function I(P,y){if(1&P){var b=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"bookmark-node",1),n.\u0275\u0275listener("onGroupBookmarks",function(){return n.\u0275\u0275restoreView(b),n.\u0275\u0275nextContext().groupBookmarks()})("onUngroupBookmarks",function(s){return n.\u0275\u0275restoreView(b),n.\u0275\u0275nextContext().ungroupBookmarks(s)})("onMultiSelectBookmarks",function(s){return n.\u0275\u0275restoreView(b),n.\u0275\u0275nextContext().multiSelectBookmark(s)}),n.\u0275\u0275elementEnd()}if(2&P){var a=y.$implicit,o=n.\u0275\u0275nextContext();n.\u0275\u0275property("bookmark",a)("selectedBookmarks",o.multiSelectedBookmarks)("isEditable",o.isEditable())("capabilities",o.capabilities)("contextMenuOperations",o.contextMenuOperations)}}var d=function(){function P(y,b){this.lazyScoped=y,this.viewModeState=b,this.bookmarkAuthoringPromise=this.lazyScoped.get("bookmarkAuthoringService")}return P.prototype.ngOnChanges=function(y){y.selectedBookmark&&this.resetMultiSelectedBookmarks()},P.prototype.isEditable=function(){return!this.isPlayMode()&&(this.capabilities&&this.capabilities.editableInAllViewModes||1===this.viewModeState.getMode())},P.prototype.groupBookmarks=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(y){switch(y.label){case 0:return[4,this.bookmarkAuthoringPromise];case 1:return y.sent().group(this.multiSelectedBookmarks),this.resetMultiSelectedBookmarks(),[2]}})})},P.prototype.ungroupBookmarks=function(y){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(b){switch(b.label){case 0:return powerbi.explore.contracts.BookmarkExtensions.isStateBookmark(y)?[2]:[4,this.bookmarkAuthoringPromise];case 1:return b.sent().ungroup(y),[2]}})})},P.prototype.multiSelectBookmark=function(y){if(this.isMultiSelectAllowed()){var b=_.findIndex(this.multiSelectedBookmarks,function(a){return a.name===y.name});b>-1?this.multiSelectedBookmarks.splice(b,1):this.multiSelectedBookmarks.push(y)}},P.prototype.resetMultiSelectedBookmarks=function(){if(this.selectedBookmark){if(powerbi.explore.contracts.BookmarkExtensions.isBookmarkGroup(this.selectedBookmark))return;this.multiSelectedBookmarks=[this.selectedBookmark]}else this.multiSelectedBookmarks=[]},P.prototype.isMultiSelectAllowed=function(){var y=this;return(!this.capabilities||!this.capabilities.disallowMultiSelect)&&this.isEditable()&&(!this.selectedBookmark||_.some(this.bookmarks,function(b){return b.name===y.selectedBookmark.name}))},P.prototype.isPlayMode=function(){return null!=this.viewModeState.getViewState().bookmarkView},P.\u0275fac=function(b){return new(b||P)(n.\u0275\u0275directiveInject(f.H),n.\u0275\u0275directiveInject(i.kc))},P.\u0275cmp=n.\u0275\u0275defineComponent({type:P,selectors:[["bookmark-tree"]],inputs:{bookmarks:"bookmarks",selectedBookmark:"selectedBookmark",capabilities:"capabilities",contextMenuOperations:"contextMenuOperations"},features:[n.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"bookmark","selectedBookmarks","isEditable","capabilities","contextMenuOperations","onGroupBookmarks","onUngroupBookmarks","onMultiSelectBookmarks",4,"ngFor","ngForOf"],[3,"bookmark","selectedBookmarks","isEditable","capabilities","contextMenuOperations","onGroupBookmarks","onUngroupBookmarks","onMultiSelectBookmarks"]],template:function(b,a){1&b&&n.\u0275\u0275template(0,I,1,5,"bookmark-node",0),2&b&&n.\u0275\u0275property("ngForOf",a.bookmarks)},directives:[M.NgForOf,E.z],styles:[".bookmark-list[_ngcontent-%COMP%]{display:block;flex:1 1 0px;overflow-y:auto;box-sizing:border-box;align-items:stretch;padding:0 4px}.bookmark-list[_ngcontent-%COMP%]   .scroll-content.scroll-scrolly_visible[_ngcontent-%COMP%]{padding-right:10px}"]}),P}()},7062:function(Ee,ne,t){t.d(ne,{P:function(){return O}});var e=t(76430),n=t(23580),f=t(95781),i=t(40629),M=t(60400),E=t(9784),I=t(50568),d=t(54467),P=t(52555),y=function(){function x(V){this.explorationCapabilities=V}return x.prototype.transform=function(V){return V&&!!this.explorationCapabilities.getCapabilities().showPersonalBookmarksInPane},x.\u0275fac=function(w){return new(w||x)(e.\u0275\u0275directiveInject(n.U,16))},x.\u0275pipe=e.\u0275\u0275definePipe({name:"computeIsReportPanelToggleEnabled",type:x,pure:!0}),x}(),b=function(V,w){return{bookmarks:V,selectedBookmark:w}};function a(x,V){if(1&x&&e.\u0275\u0275element(0,"pbi-lazy-load",3),2&x){var w=e.\u0275\u0275nextContext();e.\u0275\u0275property("modulePath",w.bookmarksPaneModulePath)("componentId","BookmarkListComponentId")("inputArgs",e.\u0275\u0275pureFunction2(3,b,w.bookmarks,w.selectedBookmark))}}function o(x,V){if(1&x&&e.\u0275\u0275element(0,"pbi-lazy-load",15),2&x){var w=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("modulePath",w.personalBookmarksModulePath)("componentId",w.personalBookmarksComponentId)}}function l(x,V){if(1&x){var w=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-expansion-panel",11),e.\u0275\u0275listener("opened",function(){e.\u0275\u0275restoreView(w);var g=e.\u0275\u0275nextContext(2);return g.onExpansionPanelOpened(g.bookmarksViewStatePersonal)}),e.\u0275\u0275elementStart(1,"mat-expansion-panel-header",7),e.\u0275\u0275element(2,"i",12),e.\u0275\u0275element(3,"mat-panel-title",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,o,1,2,"pbi-lazy-load",14),e.\u0275\u0275elementEnd()}if(2&x){var T=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("@.disabled",!0)("hideToggle",T.newPaneColorsEnabled),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",T.currentBookmarksView===T.bookmarksViewStatePersonal)}}function s(x,V){if(1&x&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"pbi-lazy-load",3),e.\u0275\u0275elementContainerEnd()),2&x){var w=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("modulePath",w.bookmarksPaneModulePath)("componentId","BookmarkListComponentId")("inputArgs",e.\u0275\u0275pureFunction2(3,b,w.bookmarks,w.selectedBookmark))}}function c(x,V){if(1&x){var w=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",4),e.\u0275\u0275elementStart(1,"mat-accordion",4),e.\u0275\u0275template(2,l,5,3,"mat-expansion-panel",5),e.\u0275\u0275pipe(3,"computeIsReportPanelToggleEnabled"),e.\u0275\u0275elementStart(4,"mat-expansion-panel",6),e.\u0275\u0275listener("opened",function(){e.\u0275\u0275restoreView(w);var g=e.\u0275\u0275nextContext();return g.onExpansionPanelOpened(g.bookmarksViewStateReport)}),e.\u0275\u0275pipe(5,"computeIsReportPanelToggleEnabled"),e.\u0275\u0275pipe(6,"computeIsReportPanelToggleEnabled"),e.\u0275\u0275elementStart(7,"mat-expansion-panel-header",7),e.\u0275\u0275element(8,"i",8),e.\u0275\u0275element(9,"mat-panel-title",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,s,2,6,"ng-container",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&x){var T=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,6,T.supportExpandablePanels)),e.\u0275\u0275advance(2),e.\u0275\u0275property("@.disabled",!0)("expanded",!0)("disabled",!e.\u0275\u0275pipeBind1(5,8,T.supportExpandablePanels))("hideToggle",T.newPaneColorsEnabled||!e.\u0275\u0275pipeBind1(6,10,T.supportExpandablePanels)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",T.currentBookmarksView===T.bookmarksViewStateReport)}}var O=function(){function x(V,w,T){this.explorationCapabilities=V,this.featureSwitchService=w,this.viewModeState=T,this.personalBookmarksModulePath="@powerbi/WebBookmarksUI/web-bookmarks-ui.module#WebBookmarksUIModule",this.personalBookmarksComponentId="PersonalBookmarksComponentId",this.bookmarksViewStatePersonal=1,this.bookmarksViewStateReport=0,this.newPaneColorsEnabled=this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign}return x.prototype.onExpansionPanelOpened=function(V){this.currentBookmarksView=V,this.viewModeState.setBookmarkViewState(void 0)},Object.defineProperty(x.prototype,"bookmarksPaneModulePath",{get:function(){return"@powerbi/ExploreUI/lazy-modules/bookmarks-pane/bookmarks-pane.module#BookmarksPaneModule"},enumerable:!1,configurable:!0}),x.\u0275fac=function(w){return new(w||x)(e.\u0275\u0275directiveInject(n.U),e.\u0275\u0275directiveInject(f.vZ),e.\u0275\u0275directiveInject(i.kc))},x.\u0275cmp=e.\u0275\u0275defineComponent({type:x,selectors:[["bookmarks-pane-content"]],inputs:{bookmarks:"bookmarks",selectedBookmark:"selectedBookmark",supportExpandablePanels:"supportExpandablePanels"},decls:3,vars:2,consts:[[3,"modulePath","componentId","inputArgs",4,"ngIf"],["class","flexStretchItem",4,"ngIf"],["href","https://go.microsoft.com/fwlink/?linkid=856391","target","_blank","localize","ExplorationBookmarks_HelpLink",1,"bookmark-help"],[3,"modulePath","componentId","inputArgs"],[1,"flexStretchItem"],[3,"hideToggle","opened",4,"ngIf"],[3,"expanded","disabled","hideToggle","opened"],["localizeTooltip","Pane_Toggle"],["ng-if","newPaneColorsEnabled && supportExpandablePanels | computeIsReportPanelToggleEnabled",1,"expansionIndicator","glyphicon","glyph-mini"],["localize","ReportBookmarks"],[4,"ngIf"],[3,"hideToggle","opened"],["ng-if","newPaneColorsEnabled",1,"expansionIndicator","glyphicon","glyph-mini"],["localize","PersonalBookmarks"],[3,"modulePath","componentId",4,"ngIf"],[3,"modulePath","componentId"]],template:function(w,T){1&w&&(e.\u0275\u0275template(0,a,1,6,"pbi-lazy-load",0),e.\u0275\u0275template(1,c,11,12,"section",1),e.\u0275\u0275element(2,"a",2)),2&w&&(e.\u0275\u0275property("ngIf",!T.supportExpandablePanels),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!T.supportExpandablePanels))},directives:[M.NgIf,E.X,I.R,d.pp,d.ib,d.yz,P.r,d.yK],pipes:[y],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto}.flexStretchItem[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;align-self:stretch}.mat-expansion-panel[_ngcontent-%COMP%]:not(:first-of-type) > .mat-expansion-panel-header[_ngcontent-%COMP%]{border-top:none}.mat-expansion-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:0 0 40px;border-radius:0!important}.mat-expansion-panel.mat-expanded[_ngcontent-%COMP%]{flex:1 1 auto;align-self:stretch}.bookmark-help[_ngcontent-%COMP%]{flex:none;padding:6px 10px 12px;border-top:1px solid var(--neutral-primary-color, #333333);color:var(--neutral-lighter-color, #F4F4F4)}.mat-expansion-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:none!important}  .mat-expansion-panel-spacing{margin:0!important}  .mat-expansion-panel{background-color:var(--neutral-primary-color-alt, #444444)}  .mat-expansion-panel .mat-expansion-panel-header{height:40px!important;padding:0 16px;font-size:14px;border-bottom:1px solid var(--black-color, #000);border-top:1px solid var(--black-color, #000)}  .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title{color:var(--white-color, #FFF);margin:0}  .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-indicator:after{color:var(--white-color, #FFF)}  .mat-expansion-panel .mat-expansion-panel-content{display:flex;flex:1 1 auto;flex-direction:column}  .mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body{display:flex;flex-direction:column;flex:1 1 auto;padding:0}  .mat-expansion-panel .mat-expansion-panel-content bookmark-list .bookmark-content.bookmark-empty .bookmark-info{line-height:normal;font-size:12px;color:var(--white-color, #FFF)}.newPaneColors[_nghost-%COMP%]   .bookmark-help[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .bookmark-help[_ngcontent-%COMP%]{border-color:var(--gray-40, #E1DFDD);color:var(--fluent-theme-link-darker-color, #005A9E)}.newPaneColors[_nghost-%COMP%]   mat-expansion-panel-header[aria-expanded=true][_ngcontent-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]:before, .newPaneColors   [_nghost-%COMP%]   mat-expansion-panel-header[aria-expanded=true][_ngcontent-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]:before{content:"\\e70e"}.newPaneColors[_nghost-%COMP%]   mat-expansion-panel-header[aria-expanded=false][_ngcontent-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]:before, .newPaneColors   [_nghost-%COMP%]   mat-expansion-panel-header[aria-expanded=false][_ngcontent-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]:before{content:"\\e70d"}.newPaneColors[_nghost-%COMP%]   .expansionIndicator[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]{color:var(--gray-180, #252423);margin-top:4px}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel{background-color:var(--gray-20, #F3F2F1)}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header{border-color:var(--gray-40, #E1DFDD)}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title{color:var(--gray-180, #252423)}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-indicator:after, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-indicator:after{color:var(--gray-180, #252423)}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-content bookmark-list .bookmark-content.bookmark-empty .bookmark-info, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-content bookmark-list .bookmark-content.bookmark-empty .bookmark-info{color:var(--gray-180, #252423)}html[data-focus-source="key"]   .newPaneColors[_nghost-%COMP%]   .bookmark-help[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   .newPaneColors   [_nghost-%COMP%]   .bookmark-help[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}']}),x}()},146:function(Ee,ne,t){t.d(ne,{f:function(){return x}});var e=t(76430),n=t(61226),f=t(60400),i=t(9784),M=t(52555);function E(V,w){1&V&&e.\u0275\u0275element(0,"div",13)}function I(V,w){1&V&&e.\u0275\u0275element(0,"div",14)}function d(V,w){if(1&V){var T=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",16),e.\u0275\u0275listener("click",function(g){return e.\u0275\u0275restoreView(T),e.\u0275\u0275nextContext(2).onShowErrorDetails(g)}),e.\u0275\u0275elementEnd()}}function P(V,w){if(1&V&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,d,1,0,"a",15),e.\u0275\u0275elementContainerEnd()),2&V){var T=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(T.errorInfo&&T.errorInfo.hideSeeDetails))}}function y(V,w){if(1&V&&e.\u0275\u0275element(0,"a",17),2&V){var T=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("href",T.errorInfo.details.helpLink,e.\u0275\u0275sanitizeUrl)}}function b(V,w){1&V&&e.\u0275\u0275element(0,"span",18)}function a(V,w){1&V&&e.\u0275\u0275element(0,"span",19)}function o(V,w){1&V&&e.\u0275\u0275element(0,"span",18)}function l(V,w){1&V&&e.\u0275\u0275element(0,"span",20)}function s(V,w){1&V&&e.\u0275\u0275element(0,"span",20)}function c(V,w){1&V&&e.\u0275\u0275element(0,"span",21)}var x=function(){function V(){this.fixErrors=new e.EventEmitter,this.showErrorDetails=new e.EventEmitter}return V.prototype.ngOnInit=function(){this.updateErrorOverlayVisibility(this.viewport)},V.prototype.ngOnChanges=function(w){w.viewport&&this.updateErrorOverlayVisibility(this.viewport),(w.errorInfo||w.viewMode)&&(this.isFixButtonVisible=this.errorInfo&&(1===this.viewMode&&0!==this.errorInfo.fixableError||0===this.viewMode&&3===this.errorInfo.fixableError))},V.prototype.updateErrorOverlayVisibility=function(w){!w||(this.showErrorMessage=w.width>=270)},V.prototype.onShowErrorDetails=function(w){w.preventDefault(),this.showErrorDetails.emit()},V.\u0275fac=function(T){return new(T||V)},V.\u0275cmp=e.\u0275\u0275defineComponent({type:V,selectors:[["canvas-visual-error-overlay"]],inputs:{errorInfo:"errorInfo",viewMode:"viewMode",viewport:"viewport"},outputs:{fixErrors:"fixErrors",showErrorDetails:"showErrorDetails"},features:[e.\u0275\u0275NgOnChangesFeature],decls:19,vars:14,consts:[["focus-nav-mode","Group","keyboard-shortcuts","ctrl-ArrowRight scoped",1,"errorMessage","themableBackgroundColorSolid"],[3,"ngSwitch"],["class","glyphicon pbi-glyph-error glyph-med",4,"ngSwitchDefault"],["class","glyphicon pbi-glyph-blockedsite glyph-med",4,"ngSwitchCase"],[1,"errorSpan",3,"hidden"],[4,"ngSwitchDefault"],["localize","LearnMore","localizeTooltip","LearnMore","class","errorSeeMore","target","_blank",4,"ngSwitchCase"],[1,"fixThisContainer"],[1,"btn","primary",3,"hidden","click"],["localize","Fix_This","localizeTooltip","FixReferences_ToolTip",4,"ngSwitchCase"],["localize","Fix_This","localizeTooltip","RelationshipDetection_Tooltip",4,"ngSwitchCase"],["localize","VisualContainer_EnableScriptVisuals",4,"ngSwitchCase"],["localize","Fix_This","localizeTooltip","FixDataSourceSettings_ToolTip",4,"ngSwitchCase"],[1,"glyphicon","pbi-glyph-error","glyph-med"],[1,"glyphicon","pbi-glyph-blockedsite","glyph-med"],["localize","VisualContainer_ShowErrorDetails","localizeTooltip","VisualContainer_ShowErrorDetails","class","errorSeeMore","href","",3,"click",4,"ngIf"],["localize","VisualContainer_ShowErrorDetails","localizeTooltip","VisualContainer_ShowErrorDetails","href","",1,"errorSeeMore",3,"click"],["localize","LearnMore","localizeTooltip","LearnMore","target","_blank",1,"errorSeeMore"],["localize","Fix_This","localizeTooltip","FixReferences_ToolTip"],["localize","Fix_This","localizeTooltip","RelationshipDetection_Tooltip"],["localize","VisualContainer_EnableScriptVisuals"],["localize","Fix_This","localizeTooltip","FixDataSourceSettings_ToolTip"]],template:function(T,v){1&T&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275template(2,E,1,0,"div",2),e.\u0275\u0275template(3,I,1,0,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div"),e.\u0275\u0275elementStart(5,"span",4),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(7,1),e.\u0275\u0275template(8,P,2,1,"ng-container",5),e.\u0275\u0275template(9,y,1,1,"a",6),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",7),e.\u0275\u0275elementStart(11,"button",8),e.\u0275\u0275listener("click",function(){return v.fixErrors.emit()}),e.\u0275\u0275elementContainerStart(12,1),e.\u0275\u0275template(13,b,1,0,"span",9),e.\u0275\u0275template(14,a,1,0,"span",10),e.\u0275\u0275template(15,o,1,0,"span",9),e.\u0275\u0275template(16,l,1,0,"span",11),e.\u0275\u0275template(17,s,1,0,"span",11),e.\u0275\u0275template(18,c,1,0,"span",12),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&T&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",v.errorInfo&&v.errorInfo.overlayType),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!v.showErrorMessage),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(v.errorInfo&&v.errorInfo.details&&v.errorInfo.details.message),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",v.errorInfo&&v.errorInfo.details&&v.errorInfo.details.errorType),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!v.isFixButtonVisible),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",v.errorInfo&&v.errorInfo.fixableError),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",3),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",4),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",5),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",6))},directives:[n.q,f.NgSwitch,f.NgSwitchDefault,f.NgSwitchCase,f.NgIf,i.X,M.r],styles:['[_nghost-%COMP%]{font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif;font-size:14px;display:table;background-color:var(--neutral-lighter-color, #F4F4F4);width:100%;height:100%;color:var(--black-color, #000)}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]{display:table-cell;line-height:normal;vertical-align:middle;padding:0 20px;margin:4px;text-align:center}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%]{margin-right:4px}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   .fixThisContainer[_ngcontent-%COMP%]{margin-top:12px}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   a.errorSeeMore[_ngcontent-%COMP%]{text-decoration:underline}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{outline:1px solid #000000}']}),V}()},40254:function(Ee,ne,t){t.d(ne,{f:function(){return P}});var e=t(76430),n=t(23580),f=t(60660),i=t(41062),M=t(60400);function E(y,b){if(1&y&&e.\u0275\u0275element(0,"i"),2&y){var a=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("infoIcon glyphicon ",a.useStylableHeader()?"pbi-glyph-info-nocircle":"pbi-glyph-info","")}}function I(y,b){1&y&&e.\u0275\u0275element(0,"i",4)}function d(y,b){1&y&&e.\u0275\u0275element(0,"i",5)}var P=function(){function y(b,a){this.explorationCapabilities=b,this.localizationService=a}return y.prototype.getTooltipConfig=function(){return{tooltipArrowPosition:powerbi.common.ArrowPosition.arrowTopLeft,tooltipDelay:100,tooltipDescription:this.getWarningMessage()}},y.prototype.getWarningMessage=function(){var b=this.details;return b?this.hasAdditionalErrorInfo(b)?b.message+" "+this.localizationService.get("VisualContainer_ClickToSeeMore"):b.message:""},y.prototype.useStylableHeader=function(){return this.explorationCapabilities&&this.explorationCapabilities.getCapabilities().visualContainerOptions.useStylableHeader},y.prototype.isClickable=function(){var b=this.details;return!!b&&(!_.isEmpty(b.message)||this.hasAdditionalErrorInfo(b))},y.prototype.hasAdditionalErrorInfo=function(b){return powerbi.explore.util.ErrorDetailsUtility.hasAdditionalErrorInfo(b)},y.\u0275fac=function(a){return new(a||y)(e.\u0275\u0275directiveInject(n.U),e.\u0275\u0275directiveInject(f.o))},y.\u0275cmp=e.\u0275\u0275defineComponent({type:y,selectors:[["canvas-visual-header-icon"]],inputs:{details:"details",iconType:"iconType"},decls:4,vars:6,consts:[[3,"pbi-tooltip","disabled","ngSwitch"],[3,"class",4,"ngSwitchCase"],["class","warningIcon pbi-glyph-warning glyphicon",4,"ngSwitchCase"],["class","errorIcon pbi-glyph-error glyphicon",4,"ngSwitchCase"],[1,"warningIcon","pbi-glyph-warning","glyphicon"],[1,"errorIcon","pbi-glyph-error","glyphicon"]],template:function(a,o){1&a&&(e.\u0275\u0275elementStart(0,"button",0),e.\u0275\u0275template(1,E,1,3,"i",1),e.\u0275\u0275template(2,I,1,0,"i",2),e.\u0275\u0275template(3,d,1,0,"i",3),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275property("pbi-tooltip",o.getTooltipConfig())("disabled",!o.isClickable())("ngSwitch",o.iconType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","info"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","warning"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","error"))},directives:[i.i,M.NgSwitch,M.NgSwitchCase],styles:[".warningIcon[_ngcontent-%COMP%], .infoIcon[_ngcontent-%COMP%], .errorIcon[_ngcontent-%COMP%]{font-size:16px}.warningIcon[_ngcontent-%COMP%]{color:var(--theme-primary-color, #F2C811)}.infoIcon[_ngcontent-%COMP%]{color:var(--info-dark-color, #33669A)}.errorIcon[_ngcontent-%COMP%]{color:var(--warning-color, #A4262C)}"]}),y}()},94201:function(Ee,ne,t){t.d(ne,{Fy:function(){return O}});var e=t(76430),n=t(71367),f=t(92759),i=t(16423),M=t(52555),E=t(14989),I=powerbi.explore.services.events,d=["carouselScrollPane"],P=["previousPageButton"],y=["nextPageButton"],b=function(){return{"aria-label":"Carousel_PreviousPages"}},a=function(){return{"aria-label":"Carousel_NextPages"}},o=["*"],O=function(){function x(V,w,T,v){this.eventBridge=V,this.rtlService=w,this.element=T,this.renderer=v,this.onSeeAll=new e.EventEmitter,this.previousWidth=0,this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager()}return Object.defineProperty(x.prototype,"isRtl",{get:function(){return this.rtlService.isRtlLayout},enumerable:!1,configurable:!0}),x.prototype.carouselResized=function(){if(this.autoResize){var V=this.element.nativeElement.parentElement.offsetWidth;V!==this.previousWidth&&(this.previousWidth=V,this.updateCarouselWidth(),this.scrollActiveItemIntoView())}},x.prototype.ngOnInit=function(){var V=this;if(this.isScrollingActiveItemIntoView=!1,this.autoResize){this.subscriptionManager.subscribe(I.sectionNameChanged,function(){return V.updateCarouselWidth()});var w=0;new MutationObserver(function(g){V.updateCarouselWidth();var r=V.getScrollChildren().length;w===r-1?V.scrollToLast():0===w&&V.scrollActiveItemIntoView(),w=r}).observe(this.scrollPane.nativeElement,{childList:!0,characterData:!0,attributes:!0})}},x.prototype.ngOnDestroy=function(){this.subscriptionManager&&this.subscriptionManager.unsubscribeAll()},x.prototype.ngOnChanges=function(){this.updateCarouselWidth(),this.scrollActiveItemIntoView()},x.prototype.ngAfterViewInit=function(){var V=this;this.subscriptionManager.subscribe(I.updateNavButtonEvent,function(){return V.updateNavButtonVisibility()})},x.prototype.getScrollChildren=function(){var V=this.scrollPane.nativeElement.children;return this.isReadingMode&&(V=$(V).not(".hidden-in-view-mode")),V},x.prototype.onNavButtonContainerRightClick=function(V){V.preventDefault(),this.onSeeAll&&this.onSeeAll.emit(V)},x.prototype.scrollToNext=function(){for(var V=this.getScrollChildren(),w=this.scrollPane.nativeElement.offsetWidth,T=this.isRtl?V.length-1:0;this.isRtl?T>=0:T<V.length;this.isRtl?T--:T++){var v=$(V[T]);if(v.position().left+v.width()>w){this.scrollToChild(v);break}}},x.prototype.scrollToPrevious=function(){for(var T,V=this.scrollPane,w=this.getScrollChildren(),v=-V.nativeElement.offsetWidth,g=this.isRtl?w.length-1:0;this.isRtl?g>=0:g<w.length;this.isRtl?g--:g++)if((T=$(w[g])).position().left>=v){this.scrollToChild(T);break}},x.prototype.scrollToChild=function(V){var w=this;if(V&&V.length>0){this.isScrollingActiveItemIntoView=!0;var T=$(this.scrollPane.nativeElement),v=T.scrollLeft()+V.position().left-T.position().left;T.animate({scrollLeft:v},250,function(){w.updateNavButtonVisibility(),w.isScrollingActiveItemIntoView=!1})}},x.prototype.scrollToLast=function(){var V=_.last(this.getScrollChildren());this.scrollToChild($(V))},x.prototype.scrollActiveItemIntoView=function(){if(!this.isScrollingActiveItemIntoView){var V=this.element.nativeElement.getElementsByClassName("selected");this.scrollToChild($(V[0]))}},x.prototype.updateCarouselWidth=function(){if(null!==this.scrollPane.nativeElement.offsetParent){for(var V=this.element.nativeElement.parentElement.offsetWidth,w=this.getScrollChildren(),T=0,v=0,g=w.length;v<g;v++)T+=$(w[v]).outerWidth(!0);var r=T+40;V>39&&(r=Math.min(V-(this.isReadingMode?0:39),r)),$(this.element.nativeElement).width(r)}this.updateNavButtonVisibility()},x.prototype.updateNavButtonVisibility=function(){this.renderer.setProperty(this.previousNavButton.nativeElement,"disabled",!1),this.renderer.setProperty(this.nextNavButton.nativeElement,"disabled",!1);var V=this.isRtl?-1:1;V*this.scrollPane.nativeElement.scrollLeft<=0&&this.renderer.setProperty(this.previousNavButton.nativeElement,"disabled",!0),Math.abs(V*this.scrollPane.nativeElement.scrollLeft+(this.scrollPane.nativeElement.offsetWidth-this.scrollPane.nativeElement.scrollWidth))<=2&&this.renderer.setProperty(this.nextNavButton.nativeElement,"disabled",!0)},x.\u0275fac=function(w){return new(w||x)(e.\u0275\u0275directiveInject(n.J),e.\u0275\u0275directiveInject(f.q),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Renderer2))},x.\u0275cmp=e.\u0275\u0275defineComponent({type:x,selectors:[["carousel"]],viewQuery:function(w,T){if(1&w&&(e.\u0275\u0275viewQuery(d,7),e.\u0275\u0275viewQuery(P,7),e.\u0275\u0275viewQuery(y,7)),2&w){var v=void 0;e.\u0275\u0275queryRefresh(v=e.\u0275\u0275loadQuery())&&(T.scrollPane=v.first),e.\u0275\u0275queryRefresh(v=e.\u0275\u0275loadQuery())&&(T.previousNavButton=v.first),e.\u0275\u0275queryRefresh(v=e.\u0275\u0275loadQuery())&&(T.nextNavButton=v.first)}},inputs:{autoResize:"autoResize",isReadingMode:"isReadingMode"},outputs:{onSeeAll:"onSeeAll"},features:[e.\u0275\u0275NgOnChangesFeature],ngContentSelectors:o,decls:11,vars:4,consts:[["role","presentation","data-automation-id","carousel",1,"carouselControl",3,"mouseenter","on-resize"],["data-automation-id","carousel_navButtonContainer",1,"navButtonContainer",3,"contextmenu"],["tabindex","-1","localize-tooltip","Carousel_PreviousPages","data-automation-id","carousel_previousPage",1,"carouselNavButton","previousPage",3,"localizeAttr","click"],["previousPageButton",""],[1,"glyphicon","pbi-glyph-caretleft","glyph-mini"],["tabindex","-1","localize-tooltip","Carousel_NextPages","data-automation-id","carousel_nextPage",1,"carouselNavButton","nextPage",3,"localizeAttr","click"],["nextPageButton",""],[1,"glyphicon","pbi-glyph-caretright","glyph-mini"],["role","presentation","data-automation-id","carousel_carouselScrollPane",1,"carouselScrollPane"],["carouselScrollPane",""]],template:function(w,T){1&w&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275listener("mouseenter",function(){return T.updateNavButtonVisibility()})("on-resize",function(){return T.carouselResized()}),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275listener("contextmenu",function(g){return T.onNavButtonContainerRightClick(g)}),e.\u0275\u0275elementStart(2,"button",2,3),e.\u0275\u0275listener("click",function(){return T.isRtl?T.scrollToNext():T.scrollToPrevious()}),e.\u0275\u0275element(4,"i",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",5,6),e.\u0275\u0275listener("click",function(){return T.isRtl?T.scrollToPrevious():T.scrollToNext()}),e.\u0275\u0275element(7,"i",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",8,9),e.\u0275\u0275projection(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&w&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("localizeAttr",e.\u0275\u0275pureFunction0(2,b)),e.\u0275\u0275advance(3),e.\u0275\u0275property("localizeAttr",e.\u0275\u0275pureFunction0(3,a)))},directives:[i.O,M.r,E.b],styles:[".carouselControl[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;height:100%}.carouselControl[_ngcontent-%COMP%]:hover   .carouselNavButton[_ngcontent-%COMP%]{opacity:1}.carouselControl[_ngcontent-%COMP%]   .navButtonContainer[_ngcontent-%COMP%]{display:flex}.carouselControl[_ngcontent-%COMP%]   .carouselNavButton[_ngcontent-%COMP%]{width:20px;padding:0;margin:0;border:none;background:transparent;line-height:1em;font-size:1em;outline:none;opacity:0;transition:opacity .5s}.carouselControl[_ngcontent-%COMP%]   .carouselNavButton.previousPage[_ngcontent-%COMP%]{left:0}.carouselControl[_ngcontent-%COMP%]   .carouselNavButton.nextPage[_ngcontent-%COMP%]{right:0}.carouselControl[_ngcontent-%COMP%]   .carouselScrollPane[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden}",".exploreHost.landingController[_nghost-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]{width:inherit!important}.exploreHost.landingController[_nghost-%COMP%]   .carouselControl[_ngcontent-%COMP%]   .navButtonContainer[_ngcontent-%COMP%]   .carouselNavButton.nextPage[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .carouselControl[_ngcontent-%COMP%]   .navButtonContainer[_ngcontent-%COMP%]   .carouselNavButton.nextPage[_ngcontent-%COMP%]{border-right:none}.exploreHost.landingController[_nghost-%COMP%]   .carouselScrollPane[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .carouselScrollPane[_ngcontent-%COMP%]{left:88px!important}"]}),x}()},80693:function(Ee,ne,t){t.d(ne,{X:function(){return D}});var e=t(40582),n=t(60354),f=t(76430),i=t(38942),M=t(88201),E=t(10883),I=t(71367),d=t(66075),P=t(7078),y=t(26808),b=t(13213),a=t(95781),o=t(24824),l=t(76963),s=t(60660),c=t(79224),O=t(21231),x=t(59116),V=t(59804),w=t(78226),T=t(4928),v=t(80815),g=t(60400),r=t(37105),u=t(93733),C=t(9784),F=powerbi.explore,A=F.contracts,W=powerbi.data,R=F.services.events,G=F.util,ge=powerbi.visuals,re=W.DataViewObjectDefinitions,j=powerbi.Prototype,ie=W.SQConstantExpr,Z=W.SQExprBuilder,fe=F.util.SparklinesUtil,Q=ge.TablixProperties,J=F.util.VisualContainerUtils;function se(h,m){if(1&h&&f.\u0275\u0275element(0,"visual-modern",3),2&h){var S=f.\u0275\u0275nextContext();f.\u0275\u0275property("viewModel",S.core.viewModel.visual)("supportsScreenReader",!0)}}function oe(h,m){1&h&&(f.\u0275\u0275elementStart(0,"div",6),f.\u0275\u0275element(1,"tri-svg-icon",7),f.\u0275\u0275elementStart(2,"div",8),f.\u0275\u0275element(3,"span",9),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(4,"div",10),f.\u0275\u0275element(5,"span",11),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd())}function K(h,m){if(1&h&&(f.\u0275\u0275elementStart(0,"div",4),f.\u0275\u0275template(1,oe,6,0,"div",5),f.\u0275\u0275elementEnd()),2&h){var S=f.\u0275\u0275nextContext();f.\u0275\u0275styleProp("width",S.core.viewModel.visual.viewport.width,"px")("height",S.core.viewModel.visual.viewport.height,"px"),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",S.inVisualCalcMode&&S.core.isInitialized)}}var D=function(){function h(m,S,N,ce,he,Ce,me,Ze,Je,it,Te,ue,ve,Me,we,$e,et,at,dt,Fe){this.conceptualSchemaProxy=m,this.dataSourcesService=S,this.eventBridge=N,this.explorationNavigation=ce,this.featureSwitchService=he,this.filterGenerator=Ce,this.geocoder=me,this.geolocationService=Ze,this.localizationService=Je,this.modulLoader=it,this.promiseFactory=Te,this.screenReaderService=ue,this.singleExecutableDataProxyFactory=ve,this.telemetryService=Me,this.visibility=we,this.visualAuthoring=$e,this.visualAuthoringOperations=et,this.visualHostTooltipServiceFactory=at,this.visualPlugin=dt,this.visualQueryGenerator=Fe,this.inVisualCalcMode=!1}return h.prototype.ngOnChanges=function(m){!this.core||m.viewModel&&(this.core.viewModel=m.viewModel.currentValue,this.core.$onChanges(m))},h.prototype.ngOnInit=function(){this.core=new p({conceptualSchemaProxy:this.conceptualSchemaProxy,dataSources:this.dataSourcesService,eventBridge:this.eventBridge,explorationNavigation:this.explorationNavigation,featureSwitchService:this.featureSwitchService,filterGenerator:this.filterGenerator,geocoder:this.geocoder,geolocationService:this.geolocationService,localizationService:this.localizationService,moduleLoader:this.modulLoader,promiseFactory:this.promiseFactory,screenReaderService:this.screenReaderService,singleExecutableDataProxyFactory:this.singleExecutableDataProxyFactory,telemetryService:this.telemetryService,visibility:this.visibility,visualAuthoring:this.visualAuthoring,visualHostTooltipServiceFactory:this.visualHostTooltipServiceFactory,visualPlugin:this.visualPlugin,visualAuthoringOperations:this.visualAuthoringOperations,visualQueryGenerator:this.visualQueryGenerator}),this.core.viewModel=this.viewModel,this.core.inVisualCalcMode=this.inVisualCalcMode,this.core.detailVisualSpinnerActionCallback=this.detailVisualSpinnerActionCallback,this.core.$onInit()},h.prototype.ngOnDestroy=function(){this.core&&this.core.$onDestroy()},h.prototype.getFocusNavMode=function(){return this.isAccessibleTable()||this.isPivotTable()?"":"Group"},h.prototype.isAccessibleTable=function(){var m,S;return(null===(S=null===(m=this.core.viewModel)||void 0===m?void 0:m.visual)||void 0===S?void 0:S.type)===powerbi.visuals.plugins.accessibleTable.name},h.prototype.isPivotTable=function(){var m,S;return(null===(S=null===(m=this.core.viewModel)||void 0===m?void 0:m.visual)||void 0===S?void 0:S.type)===powerbi.visuals.plugins.pivotTable.name},h.\u0275fac=function(S){return new(S||h)(f.\u0275\u0275directiveInject(i.i),f.\u0275\u0275directiveInject(E.D),f.\u0275\u0275directiveInject(I.J),f.\u0275\u0275directiveInject(d.z),f.\u0275\u0275directiveInject(a.vZ),f.\u0275\u0275directiveInject(P.r),f.\u0275\u0275directiveInject(o.i),f.\u0275\u0275directiveInject(l._1),f.\u0275\u0275directiveInject(s.o),f.\u0275\u0275directiveInject(c.m),f.\u0275\u0275directiveInject(n.t),f.\u0275\u0275directiveInject(O.g),f.\u0275\u0275directiveInject(M.U),f.\u0275\u0275directiveInject(x.y0),f.\u0275\u0275directiveInject(y.w),f.\u0275\u0275directiveInject(V.$),f.\u0275\u0275directiveInject(w.Q),f.\u0275\u0275directiveInject(T.q),f.\u0275\u0275directiveInject(v.D),f.\u0275\u0275directiveInject(b.S))},h.\u0275cmp=f.\u0275\u0275defineComponent({type:h,selectors:[["detail-visual"]],inputs:{viewModel:"viewModel",inVisualCalcMode:"inVisualCalcMode",detailVisualSpinnerActionCallback:"detailVisualSpinnerActionCallback"},features:[f.\u0275\u0275NgOnChangesFeature],decls:3,vars:6,consts:[["role","document",1,"detailVisual",3,"ngSwitch"],[3,"viewModel","supportsScreenReader",4,"ngSwitchCase"],["class","noDataOverlay",3,"width","height",4,"ngSwitchCase"],[3,"viewModel","supportsScreenReader"],[1,"noDataOverlay"],["class","errorMessage",4,"ngIf"],[1,"errorMessage"],["name","table_triangle_20_regular","sprite","visual-calc-icons",1,"errorSvgIcon"],[1,"messageTitle"],["localize","DetailVisual_No_Data_Title",1,"errorSpan"],[1,"messageDetail"],["localize","DetailVisual_No_Data_Detail",1,"errorSpan"]],template:function(S,N){1&S&&(f.\u0275\u0275elementStart(0,"div",0),f.\u0275\u0275template(1,se,1,2,"visual-modern",1),f.\u0275\u0275template(2,K,2,5,"div",2),f.\u0275\u0275elementEnd()),2&S&&(f.\u0275\u0275classProp("noBorder",N.inVisualCalcMode),f.\u0275\u0275property("ngSwitch",N.core.viewModel&&N.core.viewModel.hasData),f.\u0275\u0275attribute("focus-nav-mode",N.getFocusNavMode()),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngSwitchCase",!0),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngSwitchCase",!1))},directives:[g.NgSwitch,g.NgSwitchCase,r.y,g.NgIf,u.M,C.X],styles:['[_nghost-%COMP%]{font-family:"Segoe UI","Segoe UI Web (West European)",-apple-system,BlinkMacSystemFont,Roboto,"Helvetica Neue",sans-serif;font-size:14px;display:flex;width:100%;height:100%;flex:1}[_nghost-%COMP%]   .noDataOverlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;line-height:normal;margin:4px;gap:10px;text-align:center;background-color:transparent}[_nghost-%COMP%]   .noDataOverlay[_ngcontent-%COMP%]   .errorSvgIcon[_ngcontent-%COMP%]{color:var(--globalColorDarkOrangeShade10)}[_nghost-%COMP%]   .noDataOverlay[_ngcontent-%COMP%]   .messageTitle[_ngcontent-%COMP%]{margin-bottom:20px;font-weight:600;font-size:18px;color:#323130}[_nghost-%COMP%]   .noDataOverlay[_ngcontent-%COMP%]   .messageDetail[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:20px;color:#484644}[_nghost-%COMP%]   .hide[_ngcontent-%COMP%]{display:none}',".exploreHost.landingController   .visualContainer.popOut.seeData[_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController   .visualContainer.popOut.seeData   [_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color, #FFF);-webkit-user-select:text;user-select:text}.exploreHost.landingController.phoneLayouts   .visualContainer.popOut.seeData[_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController.phoneLayouts   .visualContainer.popOut.seeData   [_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController.tabletPortraitLayout   .visualContainer.popOut.seeData[_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController.tabletPortraitLayout   .visualContainer.popOut.seeData   [_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%]{border-style:none}.exploreHost.landingController.phoneLayouts[_nghost-%COMP%]   .visualContainer.popOut.seeData[_nghost-%COMP%], .exploreHost.landingController.phoneLayouts   .visualContainer.popOut.seeData   [_nghost-%COMP%]{height:100%}.exploreHost.landingController.phoneLayouts[_nghost-%COMP%]   .visualContainer.popOut.seeData[_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController.phoneLayouts   .visualContainer.popOut.seeData   [_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%]{height:100%}"]}),h}(),p=function(){function h(m){this.services=m,this.inVisualCalcMode=!1}return h.prototype.$onInit=function(){this.dataProxy=this.services.singleExecutableDataProxyFactory.create(),this.visualDataProxyService=F.services.createExploreVisualDataProxyService(this.dataProxy,this.services.filterGenerator,this.services.promiseFactory,this.services.visualPlugin),this.queryVisualHostServices=this.createQueryVisualHostServices(),this.initializeVisual()},h.prototype.$onDestroy=function(){this.subscriptionManager&&this.subscriptionManager.unsubscribeAll()},h.prototype.$onChanges=function(m){m.viewModel&&void 0===this.isInitialized&&this.initializeVisual()},h.prototype.initializeVisual=function(){var m=this;if(this.viewModel&&this.viewModel.parentContract){var S=this.viewModel.parentContract,N=this.viewModel.visual;N.visualPlugin=this.services.visualPlugin,N.interactivityOptions={isInteractiveLegend:!1,selection:!1},N.type=18&S.visibility?ge.plugins.pivotTable.name:ge.plugins.accessibleTable.name,N.hostServices=j.inherit(F.services.createVisualHostServices((0,e.pi)((0,e.pi)({},this.services),{geolocation:this.services.geolocationService,visualHostTooltipService:this.services.visualHostTooltipServiceFactory.create(N)})),function(he){he.persistProperties=function(Ce){return m.persistProperties(Ce)},he.getLocalizedString=function(Ce){for(var me,Ze=[],Je=1;Je<arguments.length;Je++)Ze[Je-1]=arguments[Je];return(me=m.services.localizationService).format.apply(me,(0,e.ev)([Ce],Ze||[]))},he.getViewMode=function(){return 1},he.loadMoreData=function(){m.runQuery(!1,!1,!0)},he.alertScreenReader=function(Ce){return m.services.screenReaderService.alertPolite(Ce)}}),this.initializeDetailVisualContract(N.type),this.subscriptionManager=this.services.eventBridge.createChannelSubscriptionManager().subscribe(R.visualContainerChanged,function(he,Ce){Ce&&m.viewModel.parentContract&&Ce.affectContainer(m.viewModel.parentContract)&&m.runQuery(!1)}).subscribe(R.filterContainerChanged,function(he,Ce){(0!==Ce.scope.scopeType||Ce.scope.container===m.viewModel.parentContract)&&m.runQuery(!1)}).subscribe(R.parentExpandCollapseAction,function(he,Ce){Ce.visualContainer===m.viewModel.parentContract&&m.runQuery(!1)}),this.runQuery(!0),this.isInitialized=!1}},h.prototype.initializeDetailVisualContract=function(m){this.detailVisualContract={name:this.viewModel.parentContract.name,config:{singleVisual:{visualType:m}},layouts:jsCommon.ArrayExtensions.extendWithId([{id:0,position:{x:0,y:0,width:0,height:0}}])}},h.prototype.updateSubtotalState=function(){var m=this.viewModel.parentContract,S=!1,N=!1;if(m.config&&m.config.singleVisual&&!this.inVisualCalcMode)if("pivotTable"===m.config.singleVisual.visualType){if(S=!0,N=!0,m.config.singleVisual.objects){var ce=re.getValue(m.config.singleVisual.objects,Q.PropSubTotalsPivotTableColumnSubtotals,void 0);ce&&ce.value&&(N=ie.getBooleanValue(ce)),(ce=re.getValue(m.config.singleVisual.objects,Q.PropSubTotalsPivotTableRowSubtotals,void 0))&&ce.value&&(S=ie.getBooleanValue(ce))}}else"tableEx"===m.config.singleVisual.visualType?S=!0:m.config.singleVisual.visualType===powerbi.visuals.plugins.waterfallChart.name&&(N=!0);var he=this.detailVisualContract.config.singleVisual.objects||{};re.setValue(he,Q.PropSubTotalsPivotTableRowSubtotals,null,Z.boolean(S)),re.setValue(he,Q.PropSubTotalsPivotTableColumnSubtotals,null,Z.boolean(N)),this.inVisualCalcMode&&(re.setValue(he,Q.PropRowsSteppedLayout,null,Z.boolean(!1)),re.setValue(he,Q.PropRowsExpandCompositeHierarchy,null,Z.boolean(!0)),re.setValue(he,Q.PropSubTotalsPivotTableRowSubtotalsPosition,null,Z.text(powerbi.visuals.rowSubtotalPosition.bottom))),this.detailVisualContract.config.singleVisual.objects=he},h.prototype.persistProperties=function(m){var S=this.detailVisualContract,N=_.isArray(m)?{replace:m}:m;this.services.visualAuthoring.persistProperties(N,S,!0)&&this.runQuery(!1,!0)},h.prototype.runQuery=function(m,S,N){var ce=this;if(void 0===N&&(N=!1),this.viewModel&&this.viewModel.parentContract){this.updateSubtotalState();var he=this.viewModel.parentContract,Ce=this.services.dataSources.get();!Ce||!he.config||!he.config.singleVisual||N&&!this.visualDataProxyService.canLoadMore()||(this.startSpinner(),this.services.conceptualSchemaProxy.get(Ce).then(function(me){var Ze=ce.viewModel.parentContract,Je=A.SingleVisualConfig.clone(Ze.config.singleVisual),it={name:Ze.name,config:{singleVisual:Je}};return fe.replaceSparklineDataWithMeasure(me,it,ce.services.visualAuthoringOperations),ce.visualDataProxyService.runQuery({dataSources:Ce,schema:me,config:it.config.singleVisual,hostServices:ce.queryVisualHostServices,visualQueryGenerator:ce.services.visualQueryGenerator,executionType:N?1:2,preferCurrentData:S,additionalDataViewKinds:2,useNativeReferenceNameAsDisplayNames:ce.inVisualCalcMode}).then(function(ue){return ce.onDataChanged(ue,m,N)},function(ue){return ce.clearData("Query error",m)})},function(me){return ce.clearData("Conceptual schema error",m)}).finally(function(){ce.stopSpinner(),ce.isInitialized=!0}))}},h.prototype.clearData=function(m,S){var N=this.viewModel;N.visual.dataTransforms={},N.visual.data={dataView:{metadata:{columns:[]},matrix:{rows:{root:{children:[],childIdentityFields:[]},levels:[]},columns:{root:{children:[]},levels:[]},valueSources:[]}},dataViewSource:null},N.hasData=!1},h.prototype.onDataChanged=function(m,S,N){var ce;if(ce=m?{dataView:m&&m.dataReaderResult?m.dataReaderResult.dataView:null,dataViewSource:m&&m.dataViewSource?m.dataViewSource:null}:this.viewModel.visual.data){var he=ce.dataView;if(he&&!he.matrix)return void this.clearData("No matrix data view",S);var Ze,me=J.isSegment(ce.dataView);if(me&&(ce.isFirstSegment=me),null!=he){var Je=this.visualDataProxyService.lastExecutedQuery(),it=J.getDataRolesForVisual(this.viewModel.parentContract,this.services.visualPlugin),Te=_.map(it,function(ve){return ve.name}),ue=G.MatrixVisualDataViewConverter.generate(he,Je.transforms.selects,Je.transforms.splits,Te,Je.transforms.roles&&Je.transforms.roles.ordering,this.services.featureSwitchService);if(Ze=ue?ue.transformActions:void 0,ce.dataView=ue&&ue.dataView?ue.dataView:ce.dataView,!Ze)return void this.clearData("Failed to generate data view transform actions",S);Ze.objects=this.detailVisualContract.config.singleVisual.objects}N&&(W.segmentation.DataViewMerger.mergeDataViews(he=this.viewModel.visual.data.dataView,ce.dataView),ce.dataView=he),this.viewModel.visual.dataTransforms=Ze,this.viewModel.visual.data=ce,this.viewModel.hasData=!0}},h.prototype.createQueryVisualHostServices=function(){var m=this;return j.inherit(F.util.VisualHostServicesUtil.createQueryVisualHostServices(),function(S){S.getFilters=function(N,ce){var he=m.services.explorationNavigation;return N.calculateDetailVisualFilter(he.getCurrentExploration(),he.getCurrentSection(),m.viewModel.parentContract,ce,1)},S.getDataSourceVariables=function(){var N=m.services.explorationNavigation.getCurrentExploration();return void 0!==N?N.dataSourceVariables:void 0}})},h.prototype.startSpinner=function(){this.detailVisualSpinnerActionCallback(0)},h.prototype.stopSpinner=function(){this.detailVisualSpinnerActionCallback(1)},h}()},73603:function(Ee,ne,t){t.d(ne,{L:function(){return n}});var e=t(76430),n=function(){function i(){}return i.prototype.ngOnChanges=function(M){M.viewModel&&this.onViewModelChange()},i.prototype.onViewModelChange=function(){var M=function(i,M,E){var I=$("<canvas></canvas>").attr({width:i.UnitLength,height:M.UnitLength}).get(0),d=I.getContext("2d");d.fillStyle=E;for(var P=0;P<i.UnitDivisions;++P){var y=Math.round(P*i.UnitLength/i.UnitDivisions);d.fillRect(y,0,1,1)}for(P=1;P<M.UnitDivisions;++P){var b=Math.round(P*M.UnitLength/M.UnitDivisions);d.fillRect(0,b,1,1)}return I}(this.viewModel.layoutX,this.viewModel.layoutY,this.viewModel.color);this.unitImageUrl=M.toDataURL("image/png")},i.\u0275fac=function(E){return new(E||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["dot-grid"]],inputs:{viewModel:"viewModel"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[[1,"container"],[1,"hideEdgeDots"],[1,"background"]],template:function(E,I){1&E&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"div",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&E&&(e.\u0275\u0275advance(2),e.\u0275\u0275styleProp("background-image","url("+I.unitImageUrl+")"))},styles:[".container[_ngcontent-%COMP%], .hideEdgeDots[_ngcontent-%COMP%], .background[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;pointer-events:none;display:inline-block}.container[_ngcontent-%COMP%]{top:0}.hideEdgeDots[_ngcontent-%COMP%]{overflow:hidden;padding-left:1px;padding-top:20px;box-sizing:border-box}.background[_ngcontent-%COMP%]{background-repeat:repeat;background-position-x:-1px}.stylableVisualContainerHeader[_nghost-%COMP%]   .hideEdgeDots[_ngcontent-%COMP%], .stylableVisualContainerHeader   [_nghost-%COMP%]   .hideEdgeDots[_ngcontent-%COMP%]{padding-top:1px}.stylableVisualContainerHeader[_nghost-%COMP%]   .background[_ngcontent-%COMP%], .stylableVisualContainerHeader   [_nghost-%COMP%]   .background[_ngcontent-%COMP%]{background-position-y:-1px}@media print{.container[_ngcontent-%COMP%]{display:none}}"]}),i}()},22391:function(Ee,ne,t){t.d(ne,{w:function(){return re}});var e=t(40582),n=t(76430),f=t(80763),i=t(18086),M=t(66571),E=t(65657),I=t(11105),d=t(2564),P=t(59043),y=t(25322),b=t(23580),a=t(95781),o=t(60660),l=t(76712),s=t(21231),c=t(60400),O=t(38872),x=t(41062),V=t(65287),w=t(74262),T=t(9784),v=powerbi.explore.util.DurationDisplayHelper,g=powerbi.explore.util.DurationParser,r=jsCommon.NumberExtensions,u=jsCommon.StringExtensions,C=function(ie){return{invalid:ie}};function F(j,ie){if(1&j&&(n.\u0275\u0275elementStart(0,"form",6),n.\u0275\u0275elementStart(1,"div",7),n.\u0275\u0275elementStart(2,"div",8),n.\u0275\u0275element(3,"num-up-down",9),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"mat-select",10),n.\u0275\u0275element(6,"mat-option",11),n.\u0275\u0275element(7,"mat-option",12),n.\u0275\u0275element(8,"mat-option",13),n.\u0275\u0275element(9,"mat-option",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&j){var Z=n.\u0275\u0275nextContext();n.\u0275\u0275property("formGroup",Z.durationPickerGroup),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(9,C,Z.durationPickerGroup.invalid)),n.\u0275\u0275advance(1),n.\u0275\u0275property("pbi-tooltip",n.\u0275\u0275pipeBind1(4,7,Z.tooltipConfig$))("labelId",Z.labelId)("ariaDescribedby",Z.ariaDescribedby),n.\u0275\u0275advance(2),n.\u0275\u0275property("panelClass",Z.newPaneColors),n.\u0275\u0275attribute("aria-labelledby",Z.labelId)}}function A(j,ie){1&j&&n.\u0275\u0275element(0,"span",15)}function W(j,ie){1&j&&n.\u0275\u0275element(0,"span",16)}function k(j,ie){1&j&&n.\u0275\u0275element(0,"b",25)}function R(j,ie){1&j&&n.\u0275\u0275element(0,"b",26)}function G(j,ie){if(1&j&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",19),n.\u0275\u0275template(2,k,1,0,"b",20),n.\u0275\u0275template(3,R,1,0,"ng-template",null,21,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",19),n.\u0275\u0275element(6,"span",22),n.\u0275\u0275elementStart(7,"b"),n.\u0275\u0275text(8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"div",19),n.\u0275\u0275element(10,"span",23),n.\u0275\u0275elementStart(11,"b"),n.\u0275\u0275text(12),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"div",19),n.\u0275\u0275element(14,"span",24),n.\u0275\u0275elementStart(15,"b"),n.\u0275\u0275text(16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&j){var Z=ie.ngIf,fe=n.\u0275\u0275reference(4);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",Z.adminConfig.autoRefreshEnabled)("ngIfElse",fe),n.\u0275\u0275advance(6),n.\u0275\u0275textInterpolate1(" ",Z.adminTimeString,""),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate1(" ",Z.effectiveRefreshInterval,""),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate1(" ",Z.lastRefreshTimestamp,"")}}function le(j,ie){1&j&&n.\u0275\u0275element(0,"div",27)}function ge(j,ie){if(1&j&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,G,17,5,"ng-container",17),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275template(3,le,1,0,"ng-template",null,18,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementContainerEnd()),2&j){var Z=n.\u0275\u0275reference(4),fe=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,2,fe.refreshStatistics$))("ngIfElse",Z)}}var re=function(j){function ie(Z,fe,Q,J,se){var oe=j.call(this)||this;return oe.explorationCapabilities=Z,oe.featureSwitchService=fe,oe.localizationService=Q,oe.reportRefreshService=J,oe.screenReaderService=se,oe.modelValueChange=new n.EventEmitter,oe.showDetails=!1,oe.milliSecondsinOneSecond=1e3,oe.refreshStatistics$=(0,i.F)(oe.milliSecondsinOneSecond/2).pipe((0,M.U)(function(K){return oe.reportRefreshService.getRefreshStats()}),(0,E.h)(function(K){return!!K}),(0,E.h)(function(K){return void 0!==K.adminConfig}),(0,M.U)(function(K){return(0,e.pi)((0,e.pi)({},K),{lastRefreshTimestamp:K.lastRefreshTimestamp||oe.localizationService.get("TwoDashes"),effectiveRefreshInterval:v.convertSecondsToTimeString(K.effectiveRefreshInterval/oe.milliSecondsinOneSecond,oe.localizationService),adminTimeString:v.convertSecondsToTimeString(K.adminConfig.refreshIntervalSeconds,oe.localizationService)})})),oe.validateFormGroup=function(K){var D=K.get("value").value,p=K.get("unit").value,h=null==D||u.isNullOrUndefinedOrWhiteSpaceString(p),m=oe.validators.integer&&r.isDecimal(D);return h||m?{integer:!0}:v.isBelowMinimumValue(D,p,oe.validators.min)?{min:!0}:v.isAboveMaximumValue(D,p,oe.validators.max)?{max:!0}:null},oe.newPaneColors=oe.featureSwitchService.featureSwitches.paneColorRefresh||oe.explorationCapabilities.getCapabilities().showFluentDesign?"pbi-modern-select-panel themeableElement":"pbi-modern-select-old-panel themeableElement",oe}return(0,e.ZT)(ie,j),ie.prototype.ngOnInit=function(){this.createFormGroup(),this.setModel()},ie.prototype.setModel=function(){var Z=this;this.mergePropertyInputsAndFormControl(this.changes$("modelValue"),this.value$.pipe((0,E.h)(function(fe){return!_.isNull(fe)})),"modelValue",this.onDestroy$).subscribe(function(fe){var Q=g.parseISODurationdString(fe),J=g.durationParseResultToArray(Q);J.length>0&&Z.durationPickerGroup.setValue({value:J[0].value,unit:J[0].unit},{emitEvent:!1})})},ie.prototype.createFormGroup=function(){var Z=this;this.durationPickerGroup=new f.cw({value:new f.NI,unit:new f.NI},{validators:this.validateFormGroup});var fe=this.durationPickerGroup.statusChanges.pipe((0,M.U)(function(se){return"INVALID"!==se}),(0,I.O)(!0),(0,d.R)(this.onDestroy$)),Q=this.changes$("validators").pipe((0,M.U)(function(se){return Z.getErrorMessages(se)}));this.tooltipConfig$=fe.pipe((0,P.M)(Q),(0,M.U)(function(se){var K=se[1];if(Z.durationPickerGroup.errors){var D=Object.keys(Z.durationPickerGroup.errors)[0];return Z.getTooltipConfig(K[D])}})),this.durationPickerGroup.valueChanges.pipe((0,d.R)(this.onDestroy$)).subscribe(function(se){return Z.onUpdate(se,"VALID"===Z.durationPickerGroup.status)}),this.mergePropertyInputsAndFormControl(this.changes$("isDisabled"),this.disabled$,"isDisabled",this.onDestroy$).subscribe(function(se){se&&!Z.durationPickerGroup.disabled?Z.durationPickerGroup.disable({emitEvent:!1}):!se&&!Z.durationPickerGroup.enabled&&Z.durationPickerGroup.enable({emitEvent:!1})})},ie.prototype.onUpdate=function(Z,fe){if(fe){var Q=[{value:Z.value,unit:Z.unit,isTimeUnit:v.isTimeUnit(Z.unit)}],J=g.durationParseResultItemsToDurationParseResult(Q),se=g.durationParseResultToISODurationString(J);this.modelValueChange.emit(se),this.onValueChange(se),this.onTouched();var oe=v.getTimeString(Q[0],this.localizationService);this.screenReaderService.alert(oe)}},ie.prototype.getErrorMessages=function(Z){return{integer:this.localizationService.get("No_Decimal_Input"),min:this.localizationService.format("DurationPicker_Error_Below_Minimum",[v.getReadableTimeString(Z.min,this.localizationService)]),max:this.localizationService.format("DurationPicker_Error_Above_Maximum",[v.getReadableTimeString(Z.max,this.localizationService)])}},ie.prototype.getTooltipConfig=function(Z){if(Z)return{tooltipDescription:Z,tooltipShowOnFocus:!0}},ie.\u0275fac=function(fe){return new(fe||ie)(n.\u0275\u0275directiveInject(b.U),n.\u0275\u0275directiveInject(a.vZ),n.\u0275\u0275directiveInject(o.o),n.\u0275\u0275directiveInject(l.F),n.\u0275\u0275directiveInject(s.g))},ie.\u0275cmp=n.\u0275\u0275defineComponent({type:ie,selectors:[["duration-picker"]],inputs:{modelValue:"modelValue",validators:"validators",isDisabled:"isDisabled",labelId:"labelId",ariaDescribedby:"ariaDescribedby",tooltipConfig:"tooltipConfig"},outputs:{modelValueChange:"modelValueChange"},features:[n.\u0275\u0275ProvidersFeature([{provide:f.JU,useExisting:(0,n.forwardRef)(function(){return ie}),multi:!0}]),n.\u0275\u0275InheritDefinitionFeature],decls:7,vars:7,consts:[[3,"formGroup",4,"ngIf"],[1,"info-container"],["type","button",1,"info-button",3,"disabled","click"],["localize","Generic_HideDetails",4,"ngIf","ngIfElse"],["showDetailsView",""],[4,"ngIf"],[3,"formGroup"],[1,"controls-container"],[1,"num-up-down",3,"ngClass"],["formControlName","value",3,"pbi-tooltip","labelId","ariaDescribedby"],["formControlName","unit","disableOptionCentering","true",1,"themeableElement","pbi-modern-select",3,"panelClass"],["value","S","localize","TimeUnit_Seconds_Lowercase"],["value","M","localize","TimeUnit_Minutes_Lowercase"],["value","H","localize","TimeUnit_Hours_Lowercase"],["value","D","localize","TimeUnit_Days_Lowercase"],["localize","Generic_HideDetails"],["localize","Generic_ShowDetails"],[4,"ngIf","ngIfElse"],["calculating",""],[1,"info-label"],["localize","DurationPicker_Admin_Enabled_True",4,"ngIf","ngIfElse"],["notEnabled",""],["localize","DurationPicker_Admin_Interval"],["localize","DurationPicker_Actual_Rate"],["localize","DurationPicker_Last_Refresh"],["localize","DurationPicker_Admin_Enabled_True"],["localize","DurationPicker_Admin_Enabled_False"],["localize","DurationPicker_Calculating_Refresh_Stats"]],template:function(fe,Q){if(1&fe&&(n.\u0275\u0275template(0,F,10,11,"form",0),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275elementStart(2,"button",2),n.\u0275\u0275listener("click",function(){return Q.showDetails=!Q.showDetails}),n.\u0275\u0275template(3,A,1,0,"span",3),n.\u0275\u0275template(4,W,1,0,"ng-template",null,4,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,ge,5,4,"ng-container",5),n.\u0275\u0275elementEnd()),2&fe){var J=n.\u0275\u0275reference(5);n.\u0275\u0275property("ngIf",Q.durationPickerGroup),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("disabled",Q.durationPickerGroup.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",Q.durationPickerGroup.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Q.showDetails)("ngIfElse",J),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",Q.showDetails)}},directives:[c.NgIf,f._Y,f.JL,f.sg,c.NgClass,O.x4,f.JJ,f.u,x.i,V.gD,w.ey,T.X],pipes:[c.AsyncPipe],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;width:100%}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]{display:flex;flex-grow:1}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   .num-up-down[_ngcontent-%COMP%]{margin-right:4px}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   .num-up-down[_ngcontent-%COMP%]   num-up-down[_ngcontent-%COMP%]{width:70px}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   .num-up-down.invalid[_ngcontent-%COMP%]   num-up-down[_ngcontent-%COMP%]{border-color:var(--fluent-theme-error-dark-color, #A80000)}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{height:24px}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-select.mat-select-disabled[_ngcontent-%COMP%]{background-color:var(--gray-20, #F3F2F1);border-color:var(--gray-60, #C8C6C4);color:var(--gray-90, #A19F9D)}.info-container.disabled[_ngcontent-%COMP%]{color:var(--gray-90, #A19F9D)}.info-container[_ngcontent-%COMP%]   .info-button[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;color:var(--fluent-theme-link-color, #0078D4);background:none;border:none;padding:1px;cursor:pointer}html[data-focus-source="key"][_nghost-%COMP%]   .info-container[_ngcontent-%COMP%]   .info-button[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .info-container[_ngcontent-%COMP%]   .info-button[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.info-container[_ngcontent-%COMP%]   .info-button[disabled][_ngcontent-%COMP%]{color:var(--gray-90, #A19F9D)}.info-container[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:1px 0}'],changeDetection:0}),ie}(y.N)},8178:function(Ee,ne,t){t.d(ne,{H:function(){return g}});var e=t(40582),n=t(76430),f=t(61624),i=t(40629),M=t(77540),E=t(71367),I=t(44627),d=t(61226),P=t(60400),y=t(94201),b=t(88613),a=t(52555),o=t(48830),l=t(29595),s=t(41987),c=powerbi.explore.services.events,O=function(u,C){return{selected:u,"hidden-in-view-mode":C}};function x(r,u){if(1&r&&(n.\u0275\u0275elementStart(0,"li",9),n.\u0275\u0275element(1,"exploration-navigation-tab",10),n.\u0275\u0275elementEnd()),2&r){var C=u.$implicit,F=u.index,A=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(6,O,C.selected,A.isHiddenInViewMode(C))),n.\u0275\u0275advance(1),n.\u0275\u0275property("viewModel",C)("isEditing",A.isEditMode())("tabIndex",F)("isOnlyVisibleTab",A.isOnlySectionVisibleInViewMode(C))("isHiddenInViewMode",A.isHiddenInViewMode(C))}}function V(r,u){if(1&r&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,x,2,9,"li",8),n.\u0275\u0275elementContainerEnd()),2&r){var C=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",C.viewModel.exploration.sections)}}function w(r,u){if(1&r){var C=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",11),n.\u0275\u0275listener("accessible-click",function(){return n.\u0275\u0275restoreView(C),n.\u0275\u0275nextContext(2).createSection()}),n.\u0275\u0275elementStart(1,"div",12),n.\u0275\u0275elementStart(2,"div",13),n.\u0275\u0275element(3,"svg-use-symbol",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}}function T(r,u){if(1&r){var C=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ul",4),n.\u0275\u0275elementStart(1,"carousel",5),n.\u0275\u0275listener("onSeeAll",function(W){return n.\u0275\u0275restoreView(C),n.\u0275\u0275nextContext().seeAllSections(W)}),n.\u0275\u0275template(2,V,2,1,"ng-container",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,w,4,0,"li",7),n.\u0275\u0275elementEnd()}if(2&r){var F=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("isReadingMode",F.isReadingMode()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",F.viewModel),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",F.isEditMode())}}function v(r,u){if(1&r&&(n.\u0275\u0275elementStart(0,"ul",15),n.\u0275\u0275element(1,"bookmark-play",16),n.\u0275\u0275elementEnd()),2&r){var C=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("selectedBookmark",C.viewModel.exploration.contract.activeBookmark)}}var g=function(){function r(u,C,F,A,W){var k=this;this.formFactor=u,this.viewModeState=C,this.dropdown=F,this.eventBridge=A,this.lazyScoped=W,this.eventBridge.createChannelSubscriptionManager().subscribe(c.renameSection,function(R,G){return k.renameSection(G)})}return r.prototype.isBookmarkView=function(){return null!=this.viewModeState.getViewState().bookmarkView},r.prototype.createSection=function(){this.eventBridge.publishToChannel(c.createSection)},r.prototype.seeAllSections=function(u){var C=this,F={items:[]},A=this.isReadingMode();_.forEach(this.viewModel.exploration.sections,function(W,k){(!A||!C.isHiddenInViewMode(W))&&F.items.push({key:k,text:W.displayName,type:0,selected:W.selected})}),this.dropdown.showContextMenu(F,{x:u.pageX,y:u.pageY},function(W){return C.eventBridge.publishToChannel(c.switchSection,{index:W})},!0,void 0,!0,!0)},r.prototype.isEditMode=function(){return this.formFactor.getCurrentLayoutCapabilities().canAddRemoveSections()},r.prototype.isReadingMode=function(){return 0===this.viewModeState.getMode()},r.prototype.getModeString=function(){return this.isEditMode()?"editing":this.isReadingMode()||1===this.viewModeState.getMode()&&1===this.formFactor.getCurrentLayout()?"reading":void 0},r.prototype.isHiddenInViewMode=function(u){return!!(1&u.contract.visibility)},r.prototype.isOnlySectionVisibleInViewMode=function(u){if(this.isHiddenInViewMode(u))return!1;for(var C=0,F=this.viewModel.exploration.sections;C<F.length;C++){var A=F[C];if(A!==u&&!this.isHiddenInViewMode(A))return!1}return!0},r.prototype.renameSection=function(u){return(0,e.mG)(this,void 0,void 0,function(){var C=this;return(0,e.Jh)(this,function(F){return this.lazyScoped.get("explorationAuthoring").then(function(A){A.renameSection(C.viewModel,u.sectionNewName,u.sectionIndex)}),[2]})})},r.\u0275fac=function(C){return new(C||r)(n.\u0275\u0275directiveInject(f.F),n.\u0275\u0275directiveInject(i.kc),n.\u0275\u0275directiveInject(M.V),n.\u0275\u0275directiveInject(E.J),n.\u0275\u0275directiveInject(I.H))},r.\u0275cmp=n.\u0275\u0275defineComponent({type:r,selectors:[["exploration-footer-modern"]],inputs:{viewModel:"viewModel"},decls:4,vars:5,consts:[["keyboard-shortcuts","ctrl-F6","data-automation-type","explorationNavigationContent","tabindex","0","focus-nav-mode","Group","focus-priority","14"],[1,"background"],["class","pane sections","role","presentation",4,"ngIf"],["class","pane sections","pbiLazyLoadContents","exploreUIShellConfig",4,"ngIf"],["role","presentation",1,"pane","sections"],["autoResize","true","role","tablist",3,"isReadingMode","onSeeAll"],[4,"ngIf"],["class","section static create","localizeTooltip","Carousel_NewPage","tabindex","0","focusElement","","role","button","data-automation-id","carousel_NewPage",3,"accessible-click",4,"ngIf"],["class","section static","role","presentation","data-automation-id","carousel_section",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation","data-automation-id","carousel_section",1,"section","static",3,"ngClass"],["data-automation-type","explorationNavigationTab",3,"viewModel","isEditing","tabIndex","isOnlyVisibleTab","isHiddenInViewMode"],["localizeTooltip","Carousel_NewPage","tabindex","0","focusElement","","role","button","data-automation-id","carousel_NewPage",1,"section","static","create",3,"accessible-click"],[1,"thumbnail-container"],[1,"thumbnail"],["sheet","exploreCanvasIcons","symbolId","slidethumb_addnew"],["pbiLazyLoadContents","exploreUIShellConfig",1,"pane","sections"],[3,"selectedBookmark"]],template:function(C,F){1&C&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"div",1),n.\u0275\u0275template(2,T,4,3,"ul",2),n.\u0275\u0275template(3,v,2,1,"ul",3),n.\u0275\u0275elementEnd()),2&C&&(n.\u0275\u0275classMapInterpolate1("explorationNavigationContent unselectable ",F.getModeString(),""),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!F.isBookmarkView()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",F.isBookmarkView()))},directives:[d.q,P.NgIf,y.Fy,P.NgForOf,P.NgClass,b.j,a.r,o.t,l.k,s.d],styles:['[_nghost-%COMP%]     .explorationNavigationContent{position:absolute;left:0;z-index:2;overflow:hidden;height:35px;background-color:var(--white-color, #FFF);width:100%;outline:0}[_nghost-%COMP%]     .editing, [_nghost-%COMP%]     .reading, [_nghost-%COMP%]     .pane{bottom:0}[_nghost-%COMP%]     .reading{background:var(--neutral-primary-color, #333333)}[_nghost-%COMP%]     .reading .pane.sections .carouselControl .carouselScrollPane{right:0}[_nghost-%COMP%]     .pane{display:flex;justify-content:flex-start;align-items:center;left:0;color:var(--neutral-secondary-alt-color, #777777)}[_nghost-%COMP%]     .pane.sections{width:100%;background-color:var(--gray-20, #F3F2F1);height:100%}[_nghost-%COMP%]     .pane.sections .carouselControl{display:flex}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselScrollPane{display:flex}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton{opacity:1;color:var(--theme-secondary-color, #000000)}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton i{padding-left:0;margin-left:2px;margin-right:6px}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton:disabled{color:var(--neutral-tertiary-alt-color, #C8C8C8)}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton:disabled:hover{background-color:var(--neutral-light-color, #EAEAEA)}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton.previousPage{padding:1px 0 0 2px}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton.nextPage{border-style:solid;border-color:var(--neutral-tertiary-color, #A6A6A6);border-width:0 1px 0 0;padding:1px 2px 0 0;right:0;left:15px}html[dir=rtl]   [_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton i{margin-left:6px;margin-right:2px}html[dir=rtl]   [_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton.previousPage{padding:1px 2px 0 0}html[dir=rtl]   [_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton.nextPage{border-width:0 0 0 1px;padding:1px 0 0 2px;left:0;right:15px}[_nghost-%COMP%]     .pane.sections.dragover li:nth-last-child(1){border-bottom:2px solid var(--black-color, #000)}  carousel{display:flex;height:100%;overflow-x:hidden}  .explorationContainer .section{height:35px;font-size:12px;font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif;color:var(--gray-180, #252423);margin:0 auto;line-height:normal;border-right:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);bottom:0}  .explorationContainer .section .section-index{display:none}  .explorationContainer .section.static{box-sizing:border-box}  .explorationContainer .section.static .sectionDeleteIcon{display:none}  .explorationContainer .section.static:hover,   .explorationContainer .section.static .thumbnail-container:focus{outline:none}  .explorationContainer .section.static:hover .sectionDeleteIcon,   .explorationContainer .section.static .thumbnail-container:focus .sectionDeleteIcon{display:inline;position:absolute;top:0;right:4px;z-index:2;background-color:transparent;cursor:pointer}  .explorationContainer .section.static:hover .section-index,   .explorationContainer .section.static .thumbnail-container:focus .section-index{color:var(--neutral-dark-color, #212121)}  .explorationContainer .section.static.create{margin:0;border-right:none;width:39px}  .explorationContainer .section.selected{background-color:var(--white-color, #FFF);border-bottom:4px solid var(--theme-primary-color, #F2C811);font-family:"Segoe UI Semibold","wf_segoe-ui_semibold",helvetica,arial,sans-serif}  .explorationContainer .section.dynamic{background-color:transparent;left:0;padding:3px 20px}  .explorationContainer .section.dynamic .section-index{display:inline-block;position:relative;left:1px;height:100%;text-align:center;font-size:12px;font-family:"Segoe UI Semibold","wf_segoe-ui_semibold",helvetica,arial,sans-serif;color:var(--neutral-primary-color-alt3, #515151);bottom:2px;border:none;padding:0;box-sizing:content-box}  .explorationContainer .section.dynamic .section-index::selection{background:var(--theme-primary-color, #F2C811);color:var(--text-primary-content-color, #515151)}  .explorationContainer .section.dynamic .section-index:hover{color:var(--neutral-dark-color, #212121)}  .explorationContainer .section.dynamic .textLabel{max-width:240px;overflow:hidden;text-overflow:ellipsis;cursor:default;line-height:35px}  .explorationContainer .section.dynamic input{margin-top:3px;line-height:29px;height:29px}  .explorationContainer .section .thumbnail-container{position:relative;box-sizing:border-box;border:none;display:flex;align-items:center}  html[data-focus-source=key]   .explorationContainer .section .thumbnail-container:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}  .explorationContainer .section .hidden-tab{padding-left:28px;padding-right:12px}  .explorationContainer .section .sectionHiddenIcon{position:absolute;top:15px;left:12px;color:var(--neutral-primary-color-alt3, #515151)}  .explorationContainer .section.ui-draggable-dragging{border-right:none}  .explorationContainer .section.ui-draggable-dragging .sectionDeleteIcon{display:none}  .explorationContainer .section.ui-draggable-dragging .sectionHiddenIcon{position:absolute;top:15px;left:6px;color:var(--neutral-primary-color-alt3, #515151)}  .explorationContainer .section.dragover{border-top:2px solid var(--black-color, #000)}  .explorationContainer .section.create{left:3px;outline:none}html[data-focus-source=key][_ngcontent-%COMP%]     .explorationContainer .section.create:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}  .explorationContainer .section.create .thumbnail-container{padding-top:5px;background-color:var(--theme-primary-color, #F2C811);height:inherit;position:initial}  .explorationContainer .section.create .thumbnail-container .thumbnail svg-use-symbol svg{height:24px;width:39px}  .explorationContainer .section.hidden-in-view-mode{display:none}  .explorationContainer.editing .section.hidden-in-view-mode{display:inline-block}',".exploreHost.landingController[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]{height:44px}.exploreHost.landingController[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%]{height:44px;background-color:var(--fluentThemeNeutralLighterAltColor)}.exploreHost.landingController[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%]   .section.static[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%]   .section.static[_ngcontent-%COMP%]{height:initial;background-color:transparent;padding:4px;border:none}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton{width:44px}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton .glyphicon, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton .glyphicon, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton .glyphicon, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton .glyphicon{margin-top:5px}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton .glyph-mini, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton .glyph-mini, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton .glyph-mini, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton .glyph-mini{font-size:20px}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled .glyph-mini, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled .glyph-mini, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled .glyph-mini, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled .glyph-mini{color:var(--fluentThemeLightGrayColor)}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:not(:disabled) .glyph-mini, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:not(:disabled) .glyph-mini, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:not(:disabled) .glyph-mini, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:not(:disabled) .glyph-mini{color:var(--fluentThemeErrorTextColor)}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:hover, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:hover, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:hover, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:hover, .exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover{background-color:var(--fluentThemeNeutralLighterAltColor)}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:hover .glyphicon, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:hover .glyphicon, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:hover .glyphicon, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:hover .glyphicon, .exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover .glyphicon, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover .glyphicon, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover .glyphicon, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover .glyphicon{margin-top:5px;color:var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton.nextPage, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton.nextPage, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton.nextPage, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton.nextPage{left:39px}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselScrollPane, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselScrollPane, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselScrollPane, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselScrollPane{left:84px}.exploreHost.landingController.coverNativeNotch[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%], .exploreHost.landingController.coverNativeNotch   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]{height:calc(44px + env(safe-area-inset-bottom))}.exploreHost.landingController.coverNativeNotch[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%], .exploreHost.landingController.coverNativeNotch   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%]{height:calc(44px + env(safe-area-inset-bottom));padding-bottom:env(safe-area-inset-bottom)}"]}),r}()},88613:function(Ee,ne,t){t.d(ne,{j:function(){return r}});var e=t(86385),n=t(36119),f=t(76430),i=t(71367),M=t(77540),E=t(44627),I=t(40629),d=t(60400),P=t(64417),y=t(50651),b=t(48830),a=t(6431),o=t(80763),l=t(52555),s=powerbi.explore.services.events,c=["sectionElement"];function O(u,C){1&u&&f.\u0275\u0275element(0,"div",5)}function x(u,C){if(1&u){var F=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"input",6),f.\u0275\u0275listener("ngModelChange",function(k){return f.\u0275\u0275restoreView(F),f.\u0275\u0275nextContext().viewModel.displayName=k})("blur",function(){f.\u0275\u0275restoreView(F);var k=f.\u0275\u0275nextContext();return k.renameSection(k.viewModel.displayName)}),f.\u0275\u0275elementEnd()}if(2&u){var A=f.\u0275\u0275nextContext();f.\u0275\u0275property("ngModel",A.viewModel.displayName)}}function V(u,C){if(1&u){var F=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"div",7),f.\u0275\u0275listener("click",function(W){return f.\u0275\u0275restoreView(F),f.\u0275\u0275nextContext().deleteSection(W)}),f.\u0275\u0275text(1,"x"),f.\u0275\u0275elementEnd()}2&u&&f.\u0275\u0275attribute("aria-hidden",!0)}var w=function(C,F){return{"hidden-tab":C,selected:F}},T=function(){return{accept:"sections"}},r=function(){function u(C,F,A,W,k){var R=this;this.eventBridge=C,this.platformCapabilities=F,this.dropdown=A,this.lazyScoped=W,this.viewModeState=k,this.editableLabelOptions={disableClick:!0,inputMatchLabelWidth:!0,onEdit:function(){return R.beginEditSection()},onBlur:function(){return R.endEditSection()}},this.supportsMinervaDialog=this.platformCapabilities.supportsMinervaDialog}return u.prototype.ngOnInit=function(){this.viewModel.isTabEditable=!1},u.prototype.drop=function(C,F){if(1===this.viewModeState.getMode()){var A=this.getSections(),W=A.index(C.target),k=A.index(F.draggable);this.eventBridge.publishToChannel(s.reorderSection,{originalIndex:k,targetIndex:W})}},u.prototype.getSections=function(){return $(".pane.sections").find(".section.dynamic")},u.prototype.deleteSection=function(C,F){void 0===F&&(F=this.tabIndex),this.eventBridge.publishToChannel(s.deleteSectionInitiated,{sectionIndex:F,supportMinervaDialog:this.supportsMinervaDialog}),C&&C.stopPropagation&&C.stopPropagation()},u.prototype.beginEditSection=function(){this.viewModel.isTabEditable=!0},u.prototype.endEditSection=function(){this.viewModel.isTabEditable=!1,this.renameSection(this.viewModel.displayName),this.updateWidth()},u.prototype.updateWidth=function(){this.eventBridge.publishToChannel(s.sectionNameChanged)},u.prototype.changeSection=function(C){void 0===C&&(C=this.tabIndex),!this.viewModel.selected&&(this.eventBridge.publishToChannel(s.switchSection,{index:C}),event&&event.stopPropagation&&event.stopPropagation(),this.sectionElement.nativeElement.focus())},u.prototype.renameSection=function(C,F){void 0===F&&(F=this.tabIndex),this.viewModel.isTabEditable=!1,jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(C)||this.viewModel.contract.displayName===C?this.viewModel.displayName=this.viewModel.contract.displayName:this.eventBridge.publishToChannel(s.renameSection,{sectionNewName:C,sectionIndex:F})},u.prototype.showContextMenu=function(C){var F=this;if(C.preventDefault(),this.isEditing){var A=this.getMenuItemsCollection();this.dropdown.showContextMenu(A,{x:C.pageX,y:C.pageY},function(W){return F.selectMenuItem(W)},!1)}},u.prototype.onKeyDown=function(C){if(this.isEditing)switch(C.keyCode){case e.yY:this.isOnlyVisibleTab||this.deleteSection(C,this.tabIndex);break;case e.oh:case e.SV:case e.Sd:case e.uR:jsCommon.BrowserUtils.isCtrlOrMeta(C)&&this.reorderSection(C)}},u.prototype.reorderSection=function(C){var F=this.getSections(),A=F.index(C.target),W=0,k=!0;switch(C.keyCode){case C.shiftKey&&e.oh:W=0===A?A:A-1;break;case C.shiftKey&&e.SV:W=A===F.length-1?A:A+1;break;case e.Sd:W=0;break;case e.uR:W=F.length-1;break;default:k=!1}k&&(this.eventBridge.publishToChannel(s.reorderSection,{originalIndex:A,targetIndex:W}),C.stopPropagation())},u.prototype.getMenuItemsCollection=function(){for(var C={items:[]},F=0,A=this.viewModel.menuItems.items;F<A.length;F++){var W=A[F],k=W.key,R=!1;this.isOnlyVisibleTab&&(2===k||3===k)||(3===k&&(R=!!this.isHiddenInViewMode),C.items.push({key:k,type:0,text:W.text,checked:R}))}return C},u.prototype.toggleSectionVisibility=function(){var C=this,F=this.isHiddenInViewMode?0:1;this.lazyScoped.get("explorationAuthoring").then(function(A){A.setSectionVisibility(C.viewModel.contract,F)})},u.prototype.selectMenuItem=function(C){switch(C){case 0:this.eventBridge.publishToChannel(s.duplicateSection,this.tabIndex);break;case 1:this.beginEditSection();break;case 2:this.deleteSection(null,this.tabIndex);break;case 3:this.toggleSectionVisibility()}},u.\u0275fac=function(F){return new(F||u)(f.\u0275\u0275directiveInject(i.J),f.\u0275\u0275directiveInject(n.E),f.\u0275\u0275directiveInject(M.V),f.\u0275\u0275directiveInject(E.H),f.\u0275\u0275directiveInject(I.kc))},u.\u0275cmp=f.\u0275\u0275defineComponent({type:u,selectors:[["exploration-navigation-tab"]],viewQuery:function(F,A){var W;(1&F&&f.\u0275\u0275viewQuery(c,5),2&F)&&(f.\u0275\u0275queryRefresh(W=f.\u0275\u0275loadQuery())&&(A.sectionElement=W.first))},inputs:{viewModel:"viewModel",displayName:"displayName",isEditing:"isEditing",isOnlyVisibleTab:"isOnlyVisibleTab",isHiddenInViewMode:"isHiddenInViewMode",tabIndex:"tabIndex"},decls:5,vars:14,consts:[["role","tab","tabindex","0",1,"section","dynamic","thumbnail-container",3,"ngClass","drag","drop","dblclick","accessible-click","contextmenu","keydown","dropHandler"],["sectionElement",""],["class","glyphicon glyph-mini pbi-glyph-hide3 sectionHiddenIcon",4,"ngIf"],["class","section-index textInput",3,"ngModel","ngModelChange","blur",4,"pbiEditableLabel","pbiEditableLabelValue","pbiEditableLabelMode","pbiEditableLabelEditable"],["class","sectionDeleteIcon","localizeTooltip","Carousel_DeletePage",3,"click",4,"ngIf"],[1,"glyphicon","glyph-mini","pbi-glyph-hide3","sectionHiddenIcon"],[1,"section-index","textInput",3,"ngModel","ngModelChange","blur"],["localizeTooltip","Carousel_DeletePage",1,"sectionDeleteIcon",3,"click"]],template:function(F,A){1&F&&(f.\u0275\u0275elementStart(0,"div",0,1),f.\u0275\u0275listener("dblclick",function(){return A.beginEditSection()})("accessible-click",function(){return A.changeSection()})("contextmenu",function(k){return A.showContextMenu(k)})("keydown",function(k){return A.onKeyDown(k)})("dropHandler",function(k){return A.drop(k.event,k.ui)}),f.\u0275\u0275template(2,O,1,0,"div",2),f.\u0275\u0275template(3,x,1,1,"input",3),f.\u0275\u0275template(4,V,2,1,"div",4),f.\u0275\u0275elementEnd()),2&F&&(f.\u0275\u0275property("ngClass",f.\u0275\u0275pureFunction2(10,w,A.isHiddenInViewMode,A.viewModel.selected))("drag","sections")("drop",f.\u0275\u0275pureFunction0(13,T)),f.\u0275\u0275attribute("aria-selected",A.viewModel.selected),f.\u0275\u0275advance(2),f.\u0275\u0275property("ngIf",A.isHiddenInViewMode),f.\u0275\u0275advance(1),f.\u0275\u0275property("pbiEditableLabel",A.editableLabelOptions)("pbiEditableLabelValue",A.viewModel.displayName)("pbiEditableLabelMode",A.isEditing)("pbiEditableLabelEditable",A.viewModel.isTabEditable),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",A.isEditing&&!A.isOnlyVisibleTab))},directives:[d.NgClass,P.w,y.W,b.t,d.NgIf,a.D,o.Fj,o.JJ,o.On,l.r],styles:['.exploreHost.landingController[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]{background-color:var(--fluentThemeNeutralLighterAltColor);border-radius:4px;padding:3px 10px;height:100%}.exploreHost.landingController[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     pbi-text-label, .exploreHost.landingController   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     pbi-text-label{height:100%}.exploreHost.landingController[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]   .section-index[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]   .section-index[_ngcontent-%COMP%]{font-size:13px;margin-top:4px}.exploreHost.landingController[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     .textLabel, .exploreHost.landingController   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     .textLabel{font-size:13px;line-height:24px;padding:0;color:var(--fluentThemeNeutralPrimaryAltColor)}.exploreHost.landingController   .selected[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%], .exploreHost.landingController   .selected   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]{background-color:var(--fluentThemeWhiteColor)}.exploreHost.landingController   .selected[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     .textLabel:after, .exploreHost.landingController   .selected   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     .textLabel:after{content:"";float:left;width:100%;height:4px;border-radius:2px;background:var(--fluentThemePrimaryColor)}']}),u}()},87805:function(Ee,ne,t){t.d(ne,{m:function(){return P}});var e=t(40582),n=t(76430),f=t(6038),i=t(60400),M=t(50568),E=t(46448);function I(y,b){if(1&y&&n.\u0275\u0275element(0,"pbi-lazy-load",2),2&y){var a=n.\u0275\u0275nextContext();n.\u0275\u0275property("modulePath",a.modulePath)("componentId",a.componentId)("inputArgs",a.inputArgs)("outputArgs",a.outputArgs)}}function d(y,b){1&y&&n.\u0275\u0275element(0,"pbi-spinner",3)}var P=function(y){function b(){var a=null!==y&&y.apply(this,arguments)||this;return a.initialExpr=void 0,a.withFieldList=!1,a.onExprChange=new n.EventEmitter,a.onCrossPickerDrop=new n.EventEmitter,a.componentId="FieldPickerComponentId",a.modulePath="./lazy-modules/field-picker-modern/field-picker-modern.module#FieldPickerModernModule",a.initialExpr$=a.changes$("initialExpr"),a}return(0,e.ZT)(b,y),b.prototype.ngOnInit=function(){var a=this;this.outputArgs={onExprChange:function(l){return a.onExprChange.emit(l)},onCrossPickerDrop:function(l){return a.onCrossPickerDrop.emit(l)}},this.onChanges$.subscribe(function(){a.inputArgs={initialExpr:a.initialExpr$,validators:a.validators,allowMultipleValues:a.allowMultipleValues,allowReorderItems:a.allowReorderItems,disallowReplaceItems:a.disallowReplaceItems,allowEntityField:a.allowEntityField,disableDropZoneIndicator:a.disableDropZoneIndicator,label:a.label,ariaLabelledby:a.ariaLabelledby,ariaDescribedby:a.ariaDescribedby,disabled:a.disabled,withFieldList:a.withFieldList,getDropExprStrategy:a.getDropExprStrategy,menuStrategy:a.menuStrategy,displayNameStrategy:a.displayNameStrategy,flyoutFieldsStrategy:a.flyoutFieldsStrategy,enterExitFieldRename$:a.enterExitFieldRename$,externalCrossPickerDragDropMonitor:a.externalCrossPickerDragDropMonitor,perspectiveDisplayName:a.perspectiveDisplayName}})},b.\u0275fac=function(){var a;return function(l){return(a||(a=n.\u0275\u0275getInheritedFactory(b)))(l||b)}}(),b.\u0275cmp=n.\u0275\u0275defineComponent({type:b,selectors:[["field-picker-modern-lazy"]],inputs:{initialExpr:"initialExpr",allowMultipleValues:"allowMultipleValues",allowReorderItems:"allowReorderItems",disallowReplaceItems:"disallowReplaceItems",allowEntityField:"allowEntityField",disableDropZoneIndicator:"disableDropZoneIndicator",validators:"validators",label:"label",ariaLabelledby:"ariaLabelledby",ariaDescribedby:"ariaDescribedby",disabled:"disabled",withFieldList:"withFieldList",getDropExprStrategy:"getDropExprStrategy",menuStrategy:"menuStrategy",displayNameStrategy:"displayNameStrategy",flyoutFieldsStrategy:"flyoutFieldsStrategy",enterExitFieldRename$:"enterExitFieldRename$",externalCrossPickerDragDropMonitor:"externalCrossPickerDragDropMonitor",perspectiveDisplayName:"perspectiveDisplayName"},outputs:{onExprChange:"onExprChange",onCrossPickerDrop:"onCrossPickerDrop"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"modulePath","componentId","inputArgs","outputArgs",4,"ngIf","ngIfElse"],["loading",""],[3,"modulePath","componentId","inputArgs","outputArgs"],[1,"pbi-spinner-medium"]],template:function(o,l){if(1&o&&(n.\u0275\u0275template(0,I,1,4,"pbi-lazy-load",0),n.\u0275\u0275template(1,d,1,0,"ng-template",null,1,n.\u0275\u0275templateRefExtractor)),2&o){var s=n.\u0275\u0275reference(2);n.\u0275\u0275property("ngIf",l.inputArgs)("ngIfElse",s)}},directives:[i.NgIf,M.R,E.k],encapsulation:2}),b}(f.w)},85654:function(Ee,ne,t){t.d(ne,{v:function(){return lt}});var e=t(40582),n=t(88471),f=t(60354),i=t(76430),M=t(19156),E=t(38942),I=t(10883),d=t(95762),P=t(71367),y=t(66075),b=t(83469),a=t(59886),o=t(16035),l=t(91054),s=t(23580),c=t(95781),O=t(60660),x=t(21231),V=t(59116),w=t(40629),T=t(59804),v=t(80815),g=t(76020),r=t(3085),u=t(60400),C=t(9784),F=t(50651),A=t(52555),W=t(61289),k=t(41062),R=t(65296),G=t(64417),le=powerbi.explore.services.ActionIdentifier,ge=powerbi.common.ArrowVerticalPosition,re=jsCommon.DropPosition,j=powerbi.explore.services.events,ie=powerbi.explore.constants.ExploreCanvasConstants,Z=powerbi.explore.util.FilterPaneUtil,fe=powerbi.explore.FilterUtils,Q=powerbi.explore.SectionUtils,J=powerbi.explore.services.selectionUtils,se=powerbi.explore.viewModels.ViewModelFactory,oe=function(te,ee){return{"font-family":te,"font-size":ee}};function K(de,te){if(1&de&&i.\u0275\u0275element(0,"span",10),2&de){var ee=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(1,oe,ee.headerFontFamily,ee.headerFontSize))}}function D(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",20),i.\u0275\u0275listener("pbiMenuButtonClick",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(3).onMenuItemClicked(xe,0)}),i.\u0275\u0275element(1,"span",21),i.\u0275\u0275elementEnd()}if(2&de){var X=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("menuMode",X.menuMode)("pbiMenu",X.getMenuItems)("pbi-tooltip",X.getOptionsMenuTooltipConfig()),i.\u0275\u0275attribute("aria-label",X.getOptionsMenuLabel())}}function p(de,te){if(1&de&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275element(1,"h3",18),i.\u0275\u0275template(2,D,2,4,"button",19),i.\u0275\u0275elementEnd()),2&de){var ee=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(3,oe,ee.headerFontFamily,ee.headerFontSize))("localize",ee.filterPaneHeaderLocalization_Visual),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",ee.isEditMode&&ee.isInOutspacePane)}}function h(de,te){if(1&de&&i.\u0275\u0275element(0,"filter",23),2&de){var ee=te.$implicit,X=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",ee)("isInOutspacePane",X.isInOutspacePane)("filterCardStyleArguments",X.filterCardStyleArguments)("searchFiltersInput",X.searchFiltersInput)}}function m(de,te){if(1&de&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,h,1,4,"filter",22),i.\u0275\u0275elementContainerEnd()),2&de){var ee=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",ee.viewModel.visualFilters)}}function S(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"filter",25),i.\u0275\u0275listener("moveFilter",function(Ye){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(3).moveFilter(Ye.startIndex,Ye.targetIndex,Ye.filterScopeType)})("dropHandler",function(Ye){var Ie=i.\u0275\u0275restoreView(ee),rt=Ie.index,st=Ie.$implicit;return i.\u0275\u0275nextContext(3).dropFilterWithCustomOrder(Ye.event,Ye.ui,Ye.dropAction,rt,st)})("drop",function(Ye){var Ie=i.\u0275\u0275restoreView(ee),rt=Ie.index,st=Ie.$implicit,ct=i.\u0275\u0275nextContext(3);return ct.getDropConfigForVisualFilters()&&ct.dropFieldFilterWithCustomOrder(Ye,rt,st)}),i.\u0275\u0275elementEnd()}if(2&de){var X=te.$implicit,Be=te.index,xe=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",X)("isInOutspacePane",xe.isInOutspacePane)("filterCardStyleArguments",xe.filterCardStyleArguments)("index",Be)("lastIndex",xe.getSortableFiltersLength(xe.viewModel.visualFilters))("searchFiltersInput",xe.searchFiltersInput)("drop",xe.getDropConfigForVisualFilters())("dropWatchConfig",!0)("drag","filter")("dragDisabled",xe.filterCustomSortDisabled(X))("getDragContext",xe.getDragContext(X,Be))("dropAction",xe.getOutspaceFilterDropAction(xe.dropPosition,X))}}function N(de,te){if(1&de&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,S,1,12,"filter",24),i.\u0275\u0275elementContainerEnd()),2&de){var ee=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",ee.viewModel.visualFilters)}}function ce(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",26),i.\u0275\u0275listener("dropHandler",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(2).appendVisualFilters(xe.event,xe.ui,xe.dropAction)})("drop",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(2).appendFieldVisualFilters(xe)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&de){var X=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",X.shouldShowAddFilterLabelText(X.viewModel.visualFilters)?"dropzone":"end-dropzone")("ngStyle",i.\u0275\u0275pureFunction2(7,oe,X.headerFontFamily,X.headerFontSize))("title",X.shouldShowAddFilterLabelText(X.viewModel.visualFilters)?X.viewModel.addFilterLabel:"")("drop",X.dropZoneDropConfig)("dropAction",X.getDropAction),i.\u0275\u0275attribute("tabindex",-1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",X.shouldShowAddFilterLabelText(X.viewModel.visualFilters)?X.viewModel.addFilterLabel:""," ")}}var he=function(te){return{"bucket-padding":te}};function Ce(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"section",11),i.\u0275\u0275template(1,p,3,6,"div",12),i.\u0275\u0275elementStart(2,"div",13),i.\u0275\u0275elementStart(3,"div",14),i.\u0275\u0275listener("dropHandler",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext().dropVisualFilter(xe.event,xe.ui,xe.dropAction)})("drop",function(xe){i.\u0275\u0275restoreView(ee);var je=i.\u0275\u0275nextContext();return je.getFilterPaneDropConfig()&&je.dropFieldVisualFilter(xe)}),i.\u0275\u0275template(4,m,2,1,"ng-container",15),i.\u0275\u0275template(5,N,2,1,"ng-container",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,ce,2,10,"div",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&de){var X=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(8,he,X.isSearchTextNullOrEmpty())),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isSearchTextNullOrEmpty()),i.\u0275\u0275advance(2),i.\u0275\u0275property("drop",X.getFilterPaneDropConfig())("dropWatchConfig",!0)("dropAction",X.getDropAction),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!X.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isEditMode()&&X.isSearchTextNullOrEmpty())}}function me(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",30),i.\u0275\u0275listener("pbiMenuButtonClick",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(3).onMenuItemClicked(xe,1)}),i.\u0275\u0275element(1,"span",21),i.\u0275\u0275elementEnd()}if(2&de){var X=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("menuMode",X.menuMode)("pbiMenu",X.getMenuItems)("pbi-tooltip",X.getOptionsMenuTooltipConfig()),i.\u0275\u0275attribute("aria-label",X.getOptionsMenuLabel())}}function Ze(de,te){if(1&de&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275element(1,"h3",28),i.\u0275\u0275template(2,me,2,4,"button",29),i.\u0275\u0275elementEnd()),2&de){var ee=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(3,oe,ee.headerFontFamily,ee.headerFontSize))("localize",ee.filterPaneHeaderLocalization_Page),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",ee.isEditMode&&ee.isInOutspacePane)}}function Je(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"filter",32),i.\u0275\u0275listener("moveFilter",function(Ye){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(3).moveFilter(Ye.startIndex,Ye.targetIndex,Ye.filterScopeType)})("dropHandler",function(Ye){var Ie=i.\u0275\u0275restoreView(ee),rt=Ie.index,st=Ie.$implicit;return i.\u0275\u0275nextContext(3).dropFilterWithCustomOrder(Ye.event,Ye.ui,Ye.dropAction,rt,st)})("drop",function(Ye){var Ie=i.\u0275\u0275restoreView(ee),rt=Ie.index,st=Ie.$implicit,ct=i.\u0275\u0275nextContext(3);return ct.getFilterPaneDropConfig()&&ct.dropFieldFilterWithCustomOrder(Ye,rt,st)}),i.\u0275\u0275elementEnd()}if(2&de){var X=te.$implicit,Be=te.index,xe=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",X)("isInOutspacePane",xe.isInOutspacePane)("filterCardStyleArguments",xe.filterCardStyleArguments)("index",Be)("lastIndex",xe.getSortableFiltersLength(xe.viewModel.pageFilters))("searchFiltersInput",xe.searchFiltersInput)("drop",xe.getFilterDropConfig())("dropWatchConfig",!0)("dropAction",xe.getOutspaceFilterDropAction(xe.dropPosition,X))("drag","filter")("dragDisabled",xe.filterCustomSortDisabled(X))("getDragContext",xe.getDragContext(X,Be))}}function it(de,te){if(1&de&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Je,1,12,"filter",31),i.\u0275\u0275elementContainerEnd()),2&de){var ee=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",ee.viewModel.pageFilters)}}function Te(de,te){if(1&de&&i.\u0275\u0275element(0,"filter",23),2&de){var ee=te.$implicit,X=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",ee)("isInOutspacePane",X.isInOutspacePane)("filterCardStyleArguments",X.filterCardStyleArguments)("searchFiltersInput",X.searchFiltersInput)}}function ue(de,te){if(1&de&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Te,1,4,"filter",22),i.\u0275\u0275elementContainerEnd()),2&de){var ee=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",ee.viewModel.pageFilters)}}function ve(de,te){if(1&de&&i.\u0275\u0275element(0,"filter",23),2&de){var ee=te.$implicit,X=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",ee)("isInOutspacePane",X.isInOutspacePane)("filterCardStyleArguments",X.filterCardStyleArguments)("searchFiltersInput",X.searchFiltersInput)}}function Me(de,te){if(1&de&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,ve,1,4,"filter",22),i.\u0275\u0275elementContainerEnd()),2&de){var ee=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",ee.viewModel.drillthroughFilters)}}function we(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",26),i.\u0275\u0275listener("dropHandler",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(2).appendPageFilters(xe.event,xe.ui,xe.dropAction)})("drop",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(2).appendFieldPageFilters(xe)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&de){var X=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",X.shouldShowAddFilterLabelText(X.viewModel.pageFilters)?"dropzone":"end-dropzone")("ngStyle",i.\u0275\u0275pureFunction2(7,oe,X.headerFontFamily,X.headerFontSize))("title",X.shouldShowAddFilterLabelText(X.viewModel.pageFilters)?X.viewModel.addFilterLabel:"")("drop",X.dropZoneDropConfig)("dropAction",X.getDropAction),i.\u0275\u0275attribute("tabindex",-1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",X.shouldShowAddFilterLabelText(X.viewModel.pageFilters)?X.viewModel.addFilterLabel:""," ")}}function $e(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"section",27),i.\u0275\u0275template(1,Ze,3,6,"div",12),i.\u0275\u0275elementStart(2,"div",13),i.\u0275\u0275elementStart(3,"div",14),i.\u0275\u0275listener("dropHandler",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext().dropPageFilter(xe.event,xe.ui,xe.dropAction)})("drop",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext().dropFieldPageFilter(xe)}),i.\u0275\u0275template(4,it,2,1,"ng-container",15),i.\u0275\u0275template(5,ue,2,1,"ng-container",15),i.\u0275\u0275template(6,Me,2,1,"ng-container",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,we,2,10,"div",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&de){var X=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(9,he,X.isSearchTextNullOrEmpty())),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isSearchTextNullOrEmpty()),i.\u0275\u0275advance(2),i.\u0275\u0275property("drop",X.getFilterPaneDropConfig())("dropWatchConfig",!0)("dropAction",X.getDropAction),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!X.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isInOutspacePane&&X.showDrillthroughInPageFiltersInOutspacePane()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isEditMode()&&X.isSearchTextNullOrEmpty())}}function et(de,te){if(1&de&&i.\u0275\u0275element(0,"filter",23),2&de){var ee=te.$implicit,X=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("viewModel",ee)("isInOutspacePane",X.isInOutspacePane)("filterCardStyleArguments",X.filterCardStyleArguments)("searchFiltersInput",X.searchFiltersInput)}}function at(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",36),i.\u0275\u0275listener("dropHandler",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(2).dropDrillthroughFilter(xe.event,xe.ui,xe.dropAction)})("drop",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(2).dropFieldDrillthroughFilter(xe)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&de){var X=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",0===X.viewModel.drillthroughFilters.length?"dropzone":"end-dropzone")("title",0===X.viewModel.drillthroughFilters.length?X.viewModel.addDrillthroughFilterLabel:"")("drop",X.dropZoneDropConfig)("dropAction",X.getDropAction),i.\u0275\u0275attribute("tabindex",-1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",0===X.viewModel.drillthroughFilters.length?X.viewModel.addDrillthroughFilterLabel:""," ")}}function dt(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"section",33),i.\u0275\u0275elementStart(1,"div",17),i.\u0275\u0275element(2,"h3",34),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",13),i.\u0275\u0275elementStart(4,"div",14),i.\u0275\u0275listener("dropHandler",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext().dropDrillthroughFilter(xe.event,xe.ui,xe.dropAction)})("drop",function(xe){i.\u0275\u0275restoreView(ee);var je=i.\u0275\u0275nextContext();return je.getFilterPaneDropConfig()&&je.dropFieldDrillthroughFilter(xe)}),i.\u0275\u0275template(5,et,1,4,"filter",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,at,2,6,"div",35),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&de){var X=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(6,oe,X.headerFontFamily,X.headerFontSize)),i.\u0275\u0275advance(2),i.\u0275\u0275property("drop",X.getFilterPaneDropConfig())("dropWatchConfig",!0)("dropAction",X.getDropAction),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",X.viewModel.drillthroughFilters),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.showDrillthroughDropZone())}}function Fe(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",40),i.\u0275\u0275listener("pbiMenuButtonClick",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(3).onMenuItemClicked(xe,2)}),i.\u0275\u0275element(1,"span",21),i.\u0275\u0275elementEnd()}if(2&de){var X=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("menuMode",X.menuMode)("pbiMenu",X.getMenuItems)("pbi-tooltip",X.getOptionsMenuTooltipConfig()),i.\u0275\u0275attribute("aria-label",X.getOptionsMenuLabel())}}function be(de,te){if(1&de&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275element(1,"h3",38),i.\u0275\u0275template(2,Fe,2,4,"button",39),i.\u0275\u0275elementEnd()),2&de){var ee=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(3,oe,ee.headerFontFamily,ee.headerFontSize))("localize",ee.filterPaneHeaderLocalization_Report),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",ee.isEditMode&&ee.isInOutspacePane)}}function _e(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"filter",32),i.\u0275\u0275listener("moveFilter",function(Ye){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(3).moveFilter(Ye.startIndex,Ye.targetIndex,Ye.filterScopeType)})("dropHandler",function(Ye){var Ie=i.\u0275\u0275restoreView(ee),rt=Ie.index,st=Ie.$implicit;return i.\u0275\u0275nextContext(3).dropFilterWithCustomOrder(Ye.event,Ye.ui,Ye.dropAction,rt,st)})("drop",function(Ye){var Ie=i.\u0275\u0275restoreView(ee),rt=Ie.index,st=Ie.$implicit,ct=i.\u0275\u0275nextContext(3);return ct.getFilterDropConfig()&&ct.dropFieldFilterWithCustomOrder(Ye,rt,st)}),i.\u0275\u0275elementEnd()}if(2&de){var X=te.$implicit,Be=te.index,xe=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",X)("isInOutspacePane",xe.isInOutspacePane)("filterCardStyleArguments",xe.filterCardStyleArguments)("index",Be)("lastIndex",xe.getSortableFiltersLength(xe.viewModel.reportFilters))("searchFiltersInput",xe.searchFiltersInput)("drop",xe.getFilterDropConfig())("dropWatchConfig",!0)("dropAction",xe.getOutspaceFilterDropAction(xe.dropPosition,X))("drag","filter")("dragDisabled",xe.filterCustomSortDisabled(X))("getDragContext",xe.getDragContext(X,Be))}}function Oe(de,te){if(1&de&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,_e,1,12,"filter",31),i.\u0275\u0275elementContainerEnd()),2&de){var ee=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",ee.viewModel.reportFilters)}}function Xe(de,te){if(1&de&&i.\u0275\u0275element(0,"filter",42),2&de){var ee=te.$implicit,X=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",ee)("filterCardStyleArguments",X.filterCardStyleArguments)("isInOutspacePane",X.isInOutspacePane)("searchFiltersInput",X.searchFiltersInput)}}function nt(de,te){if(1&de&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Xe,1,4,"filter",41),i.\u0275\u0275elementContainerEnd()),2&de){var ee=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",ee.viewModel.reportFilters)}}function ht(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",26),i.\u0275\u0275listener("dropHandler",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(2).appendReportFilters(xe.event,xe.ui,xe.dropAction)})("drop",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext(2).appendFieldReportFilters(xe)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&de){var X=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",X.shouldShowAddFilterLabelText(X.viewModel.reportFilters)?"dropzone":"end-dropzone")("ngStyle",i.\u0275\u0275pureFunction2(7,oe,X.headerFontFamily,X.headerFontSize))("title",X.shouldShowAddFilterLabelText(X.viewModel.reportFilters)?X.viewModel.addFilterLabel:"")("drop",X.dropZoneDropConfig)("dropAction",X.getDropAction),i.\u0275\u0275attribute("tabindex",-1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",X.shouldShowAddFilterLabelText(X.viewModel.reportFilters)?X.viewModel.addFilterLabel:""," ")}}function bt(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"section",37),i.\u0275\u0275template(1,be,3,6,"div",12),i.\u0275\u0275elementStart(2,"div",13),i.\u0275\u0275elementStart(3,"div",14),i.\u0275\u0275listener("dropHandler",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext().dropReportFilter(xe.event,xe.ui,xe.dropAction)})("drop",function(xe){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext().dropFieldReportFilter(xe)}),i.\u0275\u0275template(4,Oe,2,1,"ng-container",15),i.\u0275\u0275template(5,nt,2,1,"ng-container",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,ht,2,10,"div",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&de){var X=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(8,he,X.isSearchTextNullOrEmpty())),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isSearchTextNullOrEmpty()),i.\u0275\u0275advance(2),i.\u0275\u0275property("drop",X.getFilterPaneDropConfig())("dropWatchConfig",!0)("dropAction",X.getDropAction),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!X.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isEditMode()&&X.isSearchTextNullOrEmpty())}}function Ft(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",43),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext().editVariablesOnClick()}),i.\u0275\u0275elementEnd()}if(2&de){var X=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(1,oe,X.headerFontFamily,X.headerFontSize))}}function ke(de,te){if(1&de&&(i.\u0275\u0275elementStart(0,"div",47),i.\u0275\u0275element(1,"i",48),i.\u0275\u0275element(2,"div",49),i.\u0275\u0275elementEnd()),2&de){var ee=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(1,oe,ee.headerFontFamily,ee.headerFontSize))}}var Ae=function(te,ee,X,Be){return{"font-family":te,"font-size":ee,"background-color":X,color:Be}};function Le(de,te){if(1&de){var ee=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",44),i.\u0275\u0275template(1,ke,3,4,"div",45),i.\u0275\u0275elementStart(2,"button",46),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(ee),i.\u0275\u0275nextContext().onApplyAllClicked()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&de){var X=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isApplyAllButtonInErrorState),i.\u0275\u0275advance(1),i.\u0275\u0275propertyInterpolate("localize",X.getApplyAllButtonTooltip()),i.\u0275\u0275propertyInterpolate("localizeTooltip",X.getApplyAllButtonTooltip()),i.\u0275\u0275property("disabled",!X.applyAllHasFiltersToApply()||X.isApplyAllButtonInErrorState)("ngStyle",i.\u0275\u0275pureFunction4(5,Ae,X.headerFontFamily,X.headerFontSize,X.applyAllHasFiltersToApply()&&!X.isApplyAllButtonInErrorState?X.checkboxAndApplyColor:"",X.checkboxAndApplyForegroundColor))}}var Ve=function(){return{ignoreOverlay:!1,ignoreMobile:!1}},tt=function(te){return{isInOutspacePane:te}},lt=function(){function de(te,ee,X,Be,xe,je,Ye,Ie,rt,st,ct,ft,Pt,Mt,St,zt,Yt,qt,pe,B){var U=this;this.aggrOps=te,this.conceptualSchemaProxy=ee,this.dataSources=X,this.displayNameService=Be,this.dragDataService=xe,this.eventBridge=je,this.explorationCapabilities=Ye,this.explorationNavigation=Ie,this.featureSwitchService=rt,this.localizationService=st,this.ngZone=ct,this.promiseFactory=ft,this.screenReaderService=Pt,this.scriptVisuals=Mt,this.selection=St,this.telemetryService=zt,this.viewModeState=Yt,this.visualAuthoring=qt,this.visualPlugin=pe,this.visualPluginOps=B,this.menuMode=n.Kb.Compact,this.selectedSortType=1,this.getOptionsMenuLabel=function(){return U.localizationService.get("Options_Menu")};var z=this.explorationNavigation.getCurrentExploration();this.viewModel=se.createFilterPane(this.localizationService,null!=z),this.filterPaneDropConfig={accept:"field",greedy:!1},this.filterDropConfig={accept:"filter field",greedy:!1},this.dropZoneDropConfig={accept:"field",greedy:!1},this.exploreUIShellConfig=powerbi.explore.modules.ExploreUIShellModule,this.invalidFilterChanges={},this.validFilterChanges={},this.filterPaneUtilServices={aggrOps:this.aggrOps,conceptualSchemaProxy:this.conceptualSchemaProxy,dataSources:this.dataSources,displayNameService:this.displayNameService,explorationCapabilities:this.explorationCapabilities,explorationNavigation:this.explorationNavigation,eventBridge:this.eventBridge,featureSwitchService:this.featureSwitchService,localizationService:this.localizationService,scriptVisuals:this.scriptVisuals,selection:this.selection,telemetryService:this.telemetryService,visualAuthoring:this.visualAuthoring,visualPlugin:this.visualPlugin},this.getDropAction=function(ae){return U.getDropActionInternal(ae)}}return de.prototype.ngOnInit=function(){var te=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(j.selectionChanged,function(){return te.updateSelection()}).subscribe(j.visualTypeChanged,function(){return te.updateSelection()}).subscribe(j.modelChanged,function(){return te.onModelChanged()}).subscribe(j.canvasChanged,function(){return te.onCanvasChanged()}).subscribe(j.explorationLoaded,function(){return te.onModelChanged()}).subscribe(j.visualContainerChanged,function(ee,X){return te.onVisualContainerChanged(X)}).subscribe(j.explorationFiltersContainerChanged,function(ee,X){return te.onExplorationFiltersContainerChanged(X)}).subscribe(j.sectionFiltersContainerChanged,function(ee,X){return te.onSectionFiltersContainerChanged(X)}).subscribe(j.filterContainerChanged,function(ee,X){return te.onFilterContainerChanged(X)}).subscribe(j.applyAllBufferedFilterCardChanged,function(ee,X){return te.onApplyAllFilterCardBufferedChanges(X)}).subscribe(j.explorationSlowDataSourceSettingsLoaded,function(ee,X){return te.ngZone.run(function(){X.isApplyAllButtonEnabledChanged&&(te.onApplyAllClicked(),te.isApplyAllEnabled=te.isApplyAllOnForThisFilter())})}).subscribe(j.explorationSettingsLoaded,function(ee,X){X.useDefaultAggregateDisplayNameChanged&&te.updateVisualFilters()}),this.filterPaneHeaderLocalization_Visual="FilterPane_Visual"+(this.isInOutspacePane?"_OutspacePane":""),this.filterPaneHeaderLocalization_Page="FilterPane_Page"+(this.isInOutspacePane?"_OutspacePane":""),this.filterPaneHeaderLocalization_Report="FilterPane_Report"+(this.isInOutspacePane?"_OutspacePane":""),this.isApplyAllEnabled=this.isApplyAllOnForThisFilter(),this.updateSelection(),this.onModelChanged()},de.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},de.prototype.ngOnChanges=function(te){te.sectionObjects&&this.updateFormatting(te.sectionObjects.currentValue),this.searchFiltersInput&&te.searchFiltersInput&&this.announceTotalVisibleFilterCards()},de.prototype.getDragContext=function(te,ee){return function(){return{filter:te,filterScopeType:te.getFilterContainerScope().scopeType,startIndex:ee}}},de.prototype.getOutspaceFilterDropAction=function(te,ee){var X=this;return function(){var Be,xe=X.dragDataService.getDragContext(),je=ee.getFilterContainerScope().scopeType;return Be=xe?void 0!==xe.filterScopeType&&je!==xe.filterScopeType?0:re.isBelow(te)?3:2:0,X.promiseFactory.resolve(Be)}},de.prototype.getFilterPaneDropConfig=function(){if(!this.isInOutspacePane||!this.customSortEnabled()&&this.isSearchTextNullOrEmpty())return this.filterPaneDropConfig},de.prototype.getDropConfigForVisualFilters=function(){if(!this.isInOutspacePane||this.customSortEnabled(0)&&this.isSearchTextNullOrEmpty())return this.filterDropConfig},de.prototype.getFilterDropConfig=function(){if(!this.isInOutspacePane||this.isSearchTextNullOrEmpty())return this.filterDropConfig},de.prototype.getOptionsMenuTooltipConfig=function(){return{tooltipArrowVerticalPosition:ge.top,tooltipTitle:this.getOptionsMenuLabel(),tooltipShowOnFocus:!0}},Object.defineProperty(de.prototype,"getMenuItems",{get:function(){return{items:[{id:1,type:n.iB.Button,text:this.localizationService.get("FilterPane_Filter_Sort_AZ"),checkable:!0,checked:1===this.selectedSortType,icon:{type:0,glyph:"glyphicon pbi-glyph-atoz glyph-small"}},{id:2,type:n.iB.Button,text:this.localizationService.get("FilterPane_Filter_Sort_ZA"),checkable:!0,checked:2===this.selectedSortType,icon:{type:0,glyph:"glyphicon pbi-glyph-ztoa glyph-small"}}]}},enumerable:!1,configurable:!0}),de.prototype.onMenuItemClicked=function(te,ee){this.selectedSortType=te.id,this.onSortOrderMenuItemSelected(ee,this.selectedSortType),this.announceSelectedItem(te)},de.prototype.announceSelectedItem=function(te){var ee=this.localizationService.format("Selected",te.text);this.screenReaderService.alertPolite(ee)},de.prototype.moveFilter=function(te,ee,X){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(xe){switch(xe.label){case 0:return[4,this.visualAuthoring.moveFilter(this.dataSources.get(),X,ee,te)];case 1:return xe.sent()&&this.sortFiltersBySortType(X,3),[2]}})})},de.prototype.addFilterWithCustomOrder=function(te,ee){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(X){switch(X.label){case 0:return[4,this.addFilterWithCustomOrderCore(te,ee,this.getFieldFromDragContext())];case 1:return X.sent(),[2]}})})},de.prototype.addFilterWithCustomOrderCore=function(te,ee,X){return(0,e.mG)(this,void 0,void 0,function(){var Be;return(0,e.Jh)(this,function(je){switch(je.label){case 0:return Be=fe.getFiltersContainer(ee,this.selection,this.explorationNavigation),[4,this.visualAuthoring.setFilterSortType(this.dataSources.get(),ee,3)];case 1:return je.sent()&&Z.addFilterToScopeFromDrop(ee,Be,!1,this.dataSources,X,this.visualAuthoring,te),[2]}})})},de.prototype.showEditVariablesLink=function(){var te=this.explorationNavigation.getCurrentSection();if(Q.isQuickExploreSection(te)||!this.isInOutspacePane)return!1;var ee=this.conceptualSchemaProxy.getLatestCapabilities(this.dataSources.get(),void 0);if(!ee||!ee.supportsDataSourceVariables)return!1;var X=this.explorationCapabilities.getCapabilities();return!(!X||X.disableEditVariables)},de.prototype.editVariablesOnClick=function(){this.eventBridge.publishToChannel(j.datasourceVariablesEditClicked)},de.prototype.onSortOrderMenuItemSelected=function(te,ee){this.visualAuthoring.setFilterSortType(this.dataSources.get(),te,ee),this.sortFiltersBySortType(te,ee)},de.prototype.shouldShowAddFilterLabelText=function(te){return!(!this.isInOutspacePane&&!_.isEmpty(te))},de.prototype.customSortEnabled=function(te){return this.isEditMode()&&this.isInOutspacePane},de.prototype.filterCustomSortDisabled=function(te){if(!te)return!0;var ee=te.getFilterContainerScope();return!(ee?this.customSortEnabled(ee.scopeType):this.customSortEnabled())||!te.canSortManually||!this.isSearchTextNullOrEmpty()},de.prototype.isSortable=function(te){return this.isInOutspacePane&&!this.filterCustomSortDisabled(te)},de.prototype.showDrillthroughDropZone=function(){return!this.isInOutspacePane&&(this.viewModeState.getConfig().alwaysPopulatePanes||this.isEditMode())},de.prototype.dropFieldFilterWithCustomOrder=function(te,ee,X){var Be=powerbi.explore.helpers.getModernFieldListExpr(te);this.dropFilterWithCustomOrderCore(this.getDropActionInternalCore(Be),ee,X,Be,!1)},de.prototype.dropFilterWithCustomOrder=function(te,ee,X,Be,xe){this.dropFilterWithCustomOrderCore(X,Be,xe,this.getFieldFromDragContext(),!0)},de.prototype.dropFilterWithCustomOrderCore=function(te,ee,X,Be,xe){var je=X&&X.getFilterContainerScope(),Ye=je&&je.scopeType;if(this.customSortEnabled(Ye)){var Ie=this.dragDataService.getDragContext();if(Ie&&xe){var rt=this.getTargetIndex(Ie.startIndex,ee,3===te);if(void 0!==rt){var ct=je.container.filters[Ie.startIndex];this.moveFilter(Ie.startIndex,rt,Ye),this.eventBridge.publishToChannel(j.filterContainerChanged,{filter:ct,changeType:4,scope:je})}}else this.addFilterWithCustomOrderCore(3===te?ee+1:ee,Ye,Be)}},de.prototype.dropFieldVisualFilter=function(te){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(ee){return this.dropVisualFilterCore(powerbi.explore.helpers.getModernFieldListExpr(te)),[2]})})},de.prototype.dropVisualFilter=function(te,ee,X){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(Be){switch(Be.label){case 0:return[4,this.dropVisualFilterCore(this.getFieldFromDragContext())];case 1:return Be.sent(),[2]}})})},de.prototype.dropVisualFilterCore=function(te){return(0,e.mG)(this,void 0,void 0,function(){var ee;return(0,e.Jh)(this,function(Be){switch(Be.label){case 0:return(ee=this.getSelectedVisual())?this.customSortEnabled(0)?[4,this.visualAuthoring.setFilterSortType(this.dataSources.get(),0,3)]:[3,2]:[2];case 1:return Be.sent()&&Z.addFilterToScopeFromDrop(0,ee,!1,this.dataSources,te,this.visualAuthoring,this.viewModel.visualFilters.length),[3,3];case 2:this.appendVisualFiltersCore(te),Be.label=3;case 3:return[2]}})})},de.prototype.appendFieldVisualFilters=function(te){this.appendVisualFiltersCore(powerbi.explore.helpers.getModernFieldListExpr(te))},de.prototype.appendVisualFilters=function(te,ee,X){this.appendVisualFiltersCore(this.getFieldFromDragContext())},de.prototype.appendVisualFiltersCore=function(te){var ee=this.getSelectedVisual();ee&&Z.addFilterToScopeFromDrop(0,ee,!1,this.dataSources,te,this.visualAuthoring,3===ee.filterSortOrder?this.viewModel.visualFilters.length:void 0)},de.prototype.dropFieldPageFilter=function(te){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(ee){switch(ee.label){case 0:return[4,this.dropPageFilterCore(powerbi.explore.helpers.getModernFieldListExpr(te))];case 1:return ee.sent(),[2]}})})},de.prototype.dropPageFilter=function(te,ee,X){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(Be){switch(Be.label){case 0:return[4,this.dropPageFilterCore(this.getFieldFromDragContext())];case 1:return Be.sent(),[2]}})})},de.prototype.dropPageFilterCore=function(te){return(0,e.mG)(this,void 0,void 0,function(){var ee;return(0,e.Jh)(this,function(Be){switch(Be.label){case 0:return ee=this.explorationNavigation.getCurrentSection(),this.customSortEnabled(1)?[4,this.visualAuthoring.setFilterSortType(this.dataSources.get(),1,3)]:[3,2];case 1:return Be.sent()&&Z.addFilterToScopeFromDrop(1,ee,!1,this.dataSources,te,this.visualAuthoring,this.getSortableFiltersLength(this.viewModel.pageFilters)),[3,3];case 2:this.appendPageFiltersCore(te),Be.label=3;case 3:return[2]}})})},de.prototype.appendFieldPageFilters=function(te){te.stopPropagation(),te.preventDefault(),this.appendPageFiltersCore(powerbi.explore.helpers.getModernFieldListExpr(te))},de.prototype.appendPageFilters=function(te,ee,X){this.appendPageFiltersCore(this.getFieldFromDragContext())},de.prototype.appendPageFiltersCore=function(te){var ee=this.explorationNavigation.getCurrentSection(),X=3===ee.filterSortOrder?this.getSortableFiltersLength(this.viewModel.pageFilters):void 0;Z.addFilterToScopeFromDrop(1,ee,!1,this.dataSources,te,this.visualAuthoring,X)},de.prototype.dropFieldDrillthroughFilter=function(te){this.dropDrillthroughFilterCore(powerbi.explore.helpers.getModernFieldListExpr(te))},de.prototype.dropDrillthroughFilter=function(te,ee,X){this.dropDrillthroughFilterCore(this.getFieldFromDragContext())},de.prototype.dropDrillthroughFilterCore=function(te){var ee=this.explorationNavigation.getCurrentSection();Z.addFilterToScopeFromDrop(1,ee,!0,this.dataSources,te,this.visualAuthoring)},de.prototype.dropFieldReportFilter=function(te){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(ee){switch(ee.label){case 0:return[4,this.dropReportFilterCore(powerbi.explore.helpers.getModernFieldListExpr(te))];case 1:return ee.sent(),[2]}})})},de.prototype.dropReportFilter=function(te,ee,X){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(Be){switch(Be.label){case 0:return[4,this.dropReportFilterCore(this.getFieldFromDragContext())];case 1:return Be.sent(),[2]}})})},de.prototype.dropReportFilterCore=function(te){return(0,e.mG)(this,void 0,void 0,function(){var ee;return(0,e.Jh)(this,function(Be){switch(Be.label){case 0:return ee=this.explorationNavigation.getCurrentExploration(),this.customSortEnabled(2)?[4,this.visualAuthoring.setFilterSortType(this.dataSources.get(),2,3)]:[3,2];case 1:return Be.sent()&&Z.addFilterToScopeFromDrop(2,ee,!1,this.dataSources,te,this.visualAuthoring,this.getSortableFiltersLength(this.viewModel.reportFilters)),[3,3];case 2:this.appendReportFiltersCore(te),Be.label=3;case 3:return[2]}})})},de.prototype.appendFieldReportFilters=function(te){this.appendReportFiltersCore(powerbi.explore.helpers.getModernFieldListExpr(te))},de.prototype.appendReportFilters=function(te,ee,X){this.appendReportFiltersCore(this.getFieldFromDragContext())},de.prototype.appendReportFiltersCore=function(te){var ee=this.explorationNavigation.getCurrentExploration(),X=3===ee.filterSortOrder?this.getSortableFiltersLength(this.viewModel.reportFilters):void 0;Z.addFilterToScopeFromDrop(2,ee,!1,this.dataSources,te,this.visualAuthoring,X)},de.prototype.getSortableFiltersLength=function(te){var ee=_.findIndex(te,function(Be){return!Be.canSortManually});return-1===ee?te.length:ee},de.prototype.isVisualFiltersVisible=function(){var te=this.viewModeState.getMode(),ee=1===te,X=0===te;if(this.isEditMode()&&this.isInOutspacePane&&this.viewModel.isVisualVisible)return!0;if(this.isInOutspacePane){var Be=_.filter(this.viewModel.visualFilters,function(xe){return!0!==xe.contract.isHiddenInViewMode});return this.viewModel.isVisualVisible&&!_.isEmpty(Be)}return!!(ee&&this.viewModel.isVisualVisible||X&&!_.isEmpty(this.viewModel.visualFilters))},de.prototype.isPageFiltersVisible=function(){var te=this.viewModel.pageFilters;return this.isReadingMode()&&this.isInOutspacePane&&(te=te.concat(this.viewModel.drillthroughFilters)),this.isPageOrReportScopeFiltersVisible(te)},de.prototype.showDrillthroughInPageFiltersInOutspacePane=function(){return!!this.featureSwitchService.featureSwitches.onObject||this.isReadingMode()},de.prototype.isDrillthroughFiltersVisible=function(){if(!this.viewModeState.getConfig().displayOptions.showDrillthroughFilters)return!1;var ee=this.explorationNavigation.getCurrentSection();return!(!ee||null!=ee.type&&0!==ee.type&&2!==ee.type)&&this.isPageOrReportScopeFiltersVisible(this.viewModel.drillthroughFilters)},de.prototype.isReportFiltersVisible=function(){return this.isPageOrReportScopeFiltersVisible(this.viewModel.reportFilters)},de.prototype.showNoFiltersHeader=function(){return this.isInOutspacePane&&!this.isVisualFiltersVisible()&&!this.isPageFiltersVisible()&&!this.isDrillthroughFiltersVisible()&&!this.isReportFiltersVisible()},de.prototype.getApplyAllButtonTooltip=function(){return this.viewModeState.getConfig().displayOptions.enableMobileFilters?"Apply_All":"Apply"},de.prototype.isApplyAllOnForThisFilter=function(){var te=this.viewModeState.getConfig().displayOptions.enableMobileFilters;return fe.isApplyAllEnabled(this.isInOutspacePane||te,this.explorationNavigation)},de.prototype.applyAllHasFiltersToApply=function(){return Object.keys(this.validFilterChanges).length+Object.keys(this.invalidFilterChanges).length>0},de.prototype.onApplyAllFilterCardBufferedChanges=function(te){te.wasDeleted?(delete this.validFilterChanges[te.id],delete this.invalidFilterChanges[te.id]):te.canApply?(this.validFilterChanges[te.id]={filterType:te.filterType,filterScope:te.filterScopeType},delete this.invalidFilterChanges[te.id]):(this.invalidFilterChanges[te.id]={filterType:te.filterType,filterScope:te.filterScopeType},delete this.validFilterChanges[te.id]),this.updateIsApplyAllInErrorState()},de.prototype.updateIsApplyAllInErrorState=function(){this.isApplyAllButtonInErrorState=Object.keys(this.invalidFilterChanges).length>0&&this.isApplyAllButtonInErrorState},de.prototype.getFieldFromDragContext=function(){var te=this.dragDataService.getDragContext();return null==te?void 0:te.field},de.prototype.getDropActionInternal=function(te,ee){var X=this.promiseFactory.defer();return X.resolve(this.getDropActionInternalCore(this.getFieldFromDragContext())),X.promise},de.prototype.getDropActionInternalCore=function(te){return te?3:0},de.prototype.onApplyAllClicked=function(){this.telemetryService.logEvent(powerbi.telemetry.EXApplyAllClicked,{numValidFilters:Object.keys(this.validFilterChanges).length,numInvalidFilters:Object.keys(this.invalidFilterChanges).length});var te={};Object.keys(this.invalidFilterChanges).length>0?(this.isApplyAllButtonInErrorState=!0,te.idsInError=Object.keys(this.invalidFilterChanges)):(this.validFilterChanges={},this.invalidFilterChanges={},te.undoRedoActionId=new le((new Date).toTimeString(),"Apply All")),this.eventBridge.publishToChannel(j.applyAllClicked,te)},de.prototype.updateFormatting=function(te){var ee,X,Be=null==te?void 0:te.outspacePane;if(this.checkboxAndApplyColor=fe.getCheckboxAndApplyColor(Be,null===(X=null===(ee=this.filterCardStyleArguments)||void 0===ee?void 0:ee.defaultStyleOverride)||void 0===X?void 0:X.checkboxAndApplyColor),this.isInOutspacePane){this.checkboxAndApplyForegroundColor=fe.getColor(Be,"foregroundColor",ie.DefaultOutspacePaneCheckboxAndApplyForegroundColor);var xe=powerbi.DataViewObject.getValue(Be,"fontFamily",ie.DefaultOutspacePaneFontFamily);this.headerFontFamily=xe;var je=powerbi.DataViewObject.getValue(Be,"headerSize",ie.DefaultOutspacePaneHeaderSizePt);this.headerFontSize=je+"pt"}},de.prototype.getFiltersByScopeType=function(te,ee){var X;switch(te){case 0:X=this.viewModel.visualFilters;break;case 1:X=ee&&5===ee?this.viewModel.drillthroughFilters:this.viewModel.pageFilters;break;case 2:X=this.viewModel.reportFilters}return X},de.prototype.setFiltersByScopeType=function(te,ee,X){switch(te){case 0:this.viewModel.visualFilters=ee;break;case 1:5===X?this.viewModel.drillthroughFilters=ee:this.viewModel.pageFilters=ee;break;case 2:this.viewModel.reportFilters=ee}},de.prototype.sortFiltersBySortType=function(te,ee){var X=this;void 0===ee&&(ee=1);var Be=this.getFiltersByScopeType(te),xe=this.viewModeState.getConfig().displayOptions.enableMobileFilters,je=Be.filter(function(Ie){return(X.isInOutspacePane||xe)&&Ie.canSortManually}),Ye=Be.filter(function(Ie){return!X.isInOutspacePane&&!xe||!Ie.canSortManually});if(Be.length>0){switch(ee){case 1:je.sort(se.sortFilterByDisplayName),Ye.sort(se.sortFilterByDisplayName);break;case 2:je.sort(se.sortFilterByDisplayName).reverse(),Ye.sort(se.sortFilterByDisplayName).reverse();break;case 3:je.sort(se.sortFilterByOrdinal)}this.setFiltersByScopeType(te,je.concat(Ye))}},de.prototype.onModelChanged=function(){this.createReportFilters(),this.createPageScopeFilters()},de.prototype.isEditMode=function(){return 1===this.viewModeState.getMode()},de.prototype.isReadingMode=function(){return 0===this.viewModeState.getMode()},de.prototype.onExplorationFiltersContainerChanged=function(te){te.container===this.explorationNavigation.getCurrentExploration()&&(this.createReportFilters(),this.createPageScopeFilters())},de.prototype.onSectionFiltersContainerChanged=function(te){te.container===this.explorationNavigation.getCurrentSection()&&this.createPageScopeFilters()},de.prototype.onCanvasChanged=function(){this.createPageScopeFilters(),this.isApplyAllEnabled&&(this.validFilterChanges=this.removeBufferedFilterChangesByFilterScope(this.validFilterChanges,[0,1]),this.invalidFilterChanges=this.removeBufferedFilterChangesByFilterScope(this.invalidFilterChanges,[0,1]),this.updateIsApplyAllInErrorState())},de.prototype.getTargetIndex=function(te,ee,X){if(X&&(ee+=1),ee!==te)return ee},de.prototype.isPageOrReportScopeFiltersVisible=function(te){if(this.isInOutspacePane){if(this.isEditMode())return!0;te=_.reduce(te,function(X,Be){return Be.contract.isHiddenInViewMode||X.push(Be),X},[])}else if(this.viewModeState.getConfig().alwaysPopulatePanes||this.isEditMode())return!0;return!_.isEmpty(te)},de.prototype.updateSelection=function(){this.isApplyAllEnabled&&(this.validFilterChanges=this.removeBufferedFilterChangesByFilterScope(this.validFilterChanges,[0]),this.invalidFilterChanges=this.removeBufferedFilterChangesByFilterScope(this.invalidFilterChanges,[0]),this.updateIsApplyAllInErrorState());var te=this.viewModel,ee=this.getSelectedVisual();te.visualFilters.length=0,ee&&this.visualPluginOps.isQueryVisual(ee.config.singleVisual.visualType)?(te.isVisualVisible=!0,this.updateVisualFilters()):this.viewModel.isVisualVisible=!1},de.prototype.onVisualContainerChanged=function(te){if(te){var ee=this.getSelectedVisual();ee&&te.affectContainer(ee)&&"UserAction_Sorting"!==te.sourceLabelKey&&this.updateVisualFilters()}},de.prototype.onFilterContainerChanged=function(te){return(0,e.mG)(this,void 0,void 0,function(){var ee,X,Be,xe,je,Ye,Ie;return(0,e.Jh)(this,function(rt){switch(rt.label){case 0:return te.filter?[4,Z.getConceptualSchema(this.filterPaneUtilServices.dataSources,this.filterPaneUtilServices.conceptualSchemaProxy)]:[2];case 1:return ee=rt.sent(),X=5===te.filter.howCreated&&!this.viewModeState.getConfig().displayOptions.showDrillthroughFilters,Z.updateCategoricalFiltersIfNeeded(this.filterPaneUtilServices,0,this.viewModel.visualFilters,te),Z.updateCategoricalFiltersIfNeeded(this.filterPaneUtilServices,1,this.viewModel.pageFilters,te),Z.updateCategoricalFiltersIfNeeded(this.filterPaneUtilServices,2,this.viewModel.reportFilters,te),X||Z.updateCategoricalFiltersIfNeeded(this.filterPaneUtilServices,1,this.viewModel.drillthroughFilters,te),X&&!this.isInOutspacePane||(Be=this.explorationNavigation.getCurrentExploration(),xe=this.getSelectedVisual(),je=fe.getFiltersContainer(te.scope.scopeType,this.selection,this.explorationNavigation),Ie=je?je.filterSortOrder:void 0,Ye=this.getFiltersByScopeType(te.scope.scopeType,te.filter.howCreated),Z.onFilterContainerChanged(te,Ye,Be,this.filterPaneUtilServices,ee,xe),(1===te.changeType||256===te.changeType)&&this.sortFiltersBySortType(te.scope.scopeType,Ie)),[2]}})})},de.prototype.getSelectedVisual=function(){return J.getSelectedVisual(this.selection)},de.prototype.createPageScopeFilters=function(){return(0,e.mG)(this,void 0,void 0,function(){var te,ee,X,Be,xe;return(0,e.Jh)(this,function(je){switch(je.label){case 0:return(te=this.explorationNavigation.getCurrentSection())?[4,Z.getPageScopeFilters(this.filterPaneUtilServices)]:[2];case 1:for(ee=je.sent(),this.viewModel.pageFilters=[],this.viewModel.drillthroughFilters=[],X=0,Be=ee;X<Be.length;X++)5!==(xe=Be[X]).howCreated?this.viewModel.pageFilters.push(xe):this.viewModel.drillthroughFilters.push(xe);return this.sortFiltersBySortType(1,te.filterSortOrder),[2]}})})},de.prototype.createReportFilters=function(){return(0,e.mG)(this,void 0,void 0,function(){var te,ee;return(0,e.Jh)(this,function(X){switch(X.label){case 0:return(te=this.explorationNavigation.getCurrentExploration())?[4,Z.getConceptualSchema(this.dataSources,this.conceptualSchemaProxy)]:(this.viewModel.reportFilters=null,[2]);case 1:return ee=X.sent(),this.viewModel.reportFilters=se.createFilters({scopeType:2,container:te},ee,this.displayNameService,this.visualPlugin,this.aggrOps,this.localizationService,null),Z.addConfigToFilters(this.viewModel.reportFilters,ee,this.dataSources,this.visualAuthoring,!1),this.sortFiltersBySortType(2,this.explorationNavigation.getCurrentExploration().filterSortOrder),[2]}})})},de.prototype.updateVisualFilters=function(){return(0,e.mG)(this,void 0,void 0,function(){var te,ee,X;return(0,e.Jh)(this,function(Be){switch(Be.label){case 0:return[4,Z.getConceptualSchema(this.dataSources,this.conceptualSchemaProxy)];case 1:return te=Be.sent(),ee=this.explorationNavigation.getCurrentSection(),(X=this.getSelectedVisual())?(this.viewModel.visualFilters=this.visualAuthoring.createVisualFilters(ee,X,this.dataSources.get(),te),this.sortFiltersBySortType(0,this.getSelectedVisual().filterSortOrder),[2]):[2]}})})},de.prototype.isSearchTextNullOrEmpty=function(){return!(this.searchFiltersInput&&!/^\s*$/.test(this.searchFiltersInput))},de.prototype.removeBufferedFilterChangesByFilterScope=function(te,ee){return _.omitBy(te,function(X){return ee.some(function(Be){return X.filterScope===Be})})},de.prototype.announceTotalVisibleFilterCards=function(){var je,te=this,xe=this.viewModel.visualFilters.filter(function(Ye){return!Z.shouldHideFilterBySearchInput(Ye,te.searchFiltersInput,te.featureSwitchService)}).length+this.viewModel.pageFilters.filter(function(Ye){return!Z.shouldHideFilterBySearchInput(Ye,te.searchFiltersInput,te.featureSwitchService)}).length+this.viewModel.reportFilters.filter(function(Ye){return!Z.shouldHideFilterBySearchInput(Ye,te.searchFiltersInput,te.featureSwitchService)}).length;je=0===xe?this.localizationService.get("ContentList_EmptySearchResults"):1===xe?this.localizationService.get("Count_SearchBox_Result_One"):this.localizationService.format("Count_SearchBox_Results",[xe]),this.screenReaderService.alert(je)},de.\u0275fac=function(ee){return new(ee||de)(i.\u0275\u0275directiveInject(M.C),i.\u0275\u0275directiveInject(E.i),i.\u0275\u0275directiveInject(I.D),i.\u0275\u0275directiveInject(d.O),i.\u0275\u0275directiveInject(l.x),i.\u0275\u0275directiveInject(P.J),i.\u0275\u0275directiveInject(s.U),i.\u0275\u0275directiveInject(y.z),i.\u0275\u0275directiveInject(c.vZ),i.\u0275\u0275directiveInject(O.o),i.\u0275\u0275directiveInject(i.NgZone),i.\u0275\u0275directiveInject(f.t),i.\u0275\u0275directiveInject(x.g),i.\u0275\u0275directiveInject(b.k),i.\u0275\u0275directiveInject(a.z),i.\u0275\u0275directiveInject(V.y0),i.\u0275\u0275directiveInject(w.kc),i.\u0275\u0275directiveInject(T.$),i.\u0275\u0275directiveInject(v.D),i.\u0275\u0275directiveInject(o.f))},de.\u0275cmp=i.\u0275\u0275defineComponent({type:de,selectors:[["filter-pane-modern"]],inputs:{isInOutspacePane:"isInOutspacePane",sectionObjects:"sectionObjects",searchFiltersInput:"searchFiltersInput",filterCardStyleArguments:"filterCardStyleArguments"},features:[i.\u0275\u0275NgOnChangesFeature],decls:10,vars:12,consts:[[1,"filterPane-FlexWrapper"],["dragScroll","",1,"filterPaneScrollWrapper",3,"pbiScrollbar"],["data-automation-type","filterPane",1,"filterPaneModern",3,"ngClass"],["id","noFiltersHeader","class","header caption mediumFontSize","localize","No_Filter_For_Visual_FilterPane",3,"ngStyle",4,"ngIf"],["id","visualFilterContainer","class","bucket","role","group","aria-describedby","filterPaneVisualHeader",3,"ngClass",4,"ngIf"],["id","pageFilterContainer","class","bucket","role","group","aria-describedby","filterPanePageHeader",3,"ngClass",4,"ngIf"],["id","drillthroughFilterContainer","class","bucket","role","group","aria-describedby","filterPaneDrillThroughHeader",4,"ngIf"],["id","exploreFilterContainer","class","bucket","role","group","aria-describedby","filterPaneReportHeader",3,"ngClass",4,"ngIf"],["class","editVariablesButton trimmedTextWithEllipsis","localize","EditVariables_OutspacePane","localizeTooltip","EditVariables_OutspacePane_Tooltip",3,"ngStyle","click",4,"ngIf"],["id","paneApplyAll",4,"ngIf"],["id","noFiltersHeader","localize","No_Filter_For_Visual_FilterPane",1,"header","caption","mediumFontSize",3,"ngStyle"],["id","visualFilterContainer","role","group","aria-describedby","filterPaneVisualHeader",1,"bucket",3,"ngClass"],["class","header",4,"ngIf"],[1,"cards"],[3,"drop","dropWatchConfig","dropAction","dropHandler"],[4,"ngIf"],["class","unselectable trimmedTextWithEllipsis",3,"ngClass","ngStyle","title","drop","dropAction","dropHandler",4,"ngIf"],[1,"header"],["localizeTooltip","FilterPane_VisualDescription","id","filterPaneVisualHeader",1,"caption","trimmedTextWithEllipsis",3,"ngStyle","localize"],["class","optionsMenu","aria-describedby","filterPaneVisualHeader",3,"menuMode","pbiMenu","pbi-tooltip","pbiMenuButtonClick",4,"ngIf"],["aria-describedby","filterPaneVisualHeader",1,"optionsMenu",3,"menuMode","pbiMenu","pbi-tooltip","pbiMenuButtonClick"],[1,"glyphicon","pbi-glyph-more","glyph-mini"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","searchFiltersInput",4,"ngFor","ngForOf"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","searchFiltersInput"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","index","lastIndex","searchFiltersInput","drop","dropWatchConfig","drag","dragDisabled","getDragContext","dropAction","moveFilter","dropHandler",4,"ngFor","ngForOf"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","index","lastIndex","searchFiltersInput","drop","dropWatchConfig","drag","dragDisabled","getDragContext","dropAction","moveFilter","dropHandler"],[1,"unselectable","trimmedTextWithEllipsis",3,"ngClass","ngStyle","title","drop","dropAction","dropHandler"],["id","pageFilterContainer","role","group","aria-describedby","filterPanePageHeader",1,"bucket",3,"ngClass"],["localizeTooltip","FilterPane_VisualDescription","id","filterPanePageHeader",1,"caption","trimmedTextWithEllipsis",3,"ngStyle","localize"],["class","optionsMenu","aria-describedby","filterPanePageHeader",3,"menuMode","pbiMenu","pbi-tooltip","pbiMenuButtonClick",4,"ngIf"],["aria-describedby","filterPanePageHeader",1,"optionsMenu",3,"menuMode","pbiMenu","pbi-tooltip","pbiMenuButtonClick"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","index","lastIndex","searchFiltersInput","drop","dropWatchConfig","dropAction","drag","dragDisabled","getDragContext","moveFilter","dropHandler",4,"ngFor","ngForOf"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","index","lastIndex","searchFiltersInput","drop","dropWatchConfig","dropAction","drag","dragDisabled","getDragContext","moveFilter","dropHandler"],["id","drillthroughFilterContainer","role","group","aria-describedby","filterPaneDrillThroughHeader",1,"bucket"],["localize","FilterPane_Drillthrough","localizeTooltip","FilterPane_DrillthroughDescription","id","filterPaneDrillThroughHeader",1,"caption","trimmedTextWithEllipsis",3,"ngStyle"],["class","unselectable trimmedTextWithEllipsis",3,"ngClass","title","drop","dropAction","dropHandler",4,"ngIf"],[1,"unselectable","trimmedTextWithEllipsis",3,"ngClass","title","drop","dropAction","dropHandler"],["id","exploreFilterContainer","role","group","aria-describedby","filterPaneReportHeader",1,"bucket",3,"ngClass"],["localizeTooltip","FilterPane_VisualDescription","id","filterPaneReportHeader",1,"caption","trimmedTextWithEllipsis",3,"ngStyle","localize"],["class","optionsMenu","aria-describedby","filterPaneReportHeader",3,"menuMode","pbiMenu","pbi-tooltip","pbiMenuButtonClick",4,"ngIf"],["aria-describedby","filterPaneReportHeader",1,"optionsMenu",3,"menuMode","pbiMenu","pbi-tooltip","pbiMenuButtonClick"],["data-automation-type","filterCard",3,"viewModel","filterCardStyleArguments","isInOutspacePane","searchFiltersInput",4,"ngFor","ngForOf"],["data-automation-type","filterCard",3,"viewModel","filterCardStyleArguments","isInOutspacePane","searchFiltersInput"],["localize","EditVariables_OutspacePane","localizeTooltip","EditVariables_OutspacePane_Tooltip",1,"editVariablesButton","trimmedTextWithEllipsis",3,"ngStyle","click"],["id","paneApplyAll"],["class","applyAllErrorDialogue",4,"ngIf"],["ng-keyup","$event.keyCode == 13 && onApplyAllClicked()","id","buttonApplyAll",3,"disabled","ngStyle","localize","localizeTooltip","click"],[1,"applyAllErrorDialogue"],[1,"glyphicon","glyph-small","pbi-glyph-error"],["role","alert","localize","FilterPane_ApplyAllErrorDialogue",1,"applyAllErrorDialogueText",3,"ngStyle"]],template:function(ee,X){1&ee&&(i.\u0275\u0275elementStart(0,"section",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275template(3,K,1,4,"span",3),i.\u0275\u0275template(4,Ce,7,10,"section",4),i.\u0275\u0275template(5,$e,8,11,"section",5),i.\u0275\u0275template(6,dt,7,9,"section",6),i.\u0275\u0275template(7,bt,7,10,"section",7),i.\u0275\u0275template(8,Ft,1,4,"button",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(9,Le,3,10,"div",9),i.\u0275\u0275elementEnd()),2&ee&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("pbiScrollbar",i.\u0275\u0275pureFunction0(9,Ve)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(10,tt,X.isInOutspacePane)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.showNoFiltersHeader()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isVisualFiltersVisible()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isPageFiltersVisible()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isDrillthroughFiltersVisible()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isReportFiltersVisible()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.showEditVariablesLink()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.isApplyAllEnabled))},directives:[g.W,r.r,u.NgClass,u.NgIf,C.X,u.NgStyle,F.W,A.r,W.l8,k.i,u.NgForOf,R.z,G.w],styles:['.isInOutspacePane[_ngcontent-%COMP%]{box-sizing:border-box;font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif;overflow:visible;padding:0 8px}  html[data-focus-source=key] .isInOutspacePane:focus,   html[data-focus-source=key] .isInOutspacePane *:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}  html[data-focus-source=mouse] .isInOutspacePane:focus,   html[data-focus-source=mouse] .isInOutspacePane *:focus,   html[data-focus-source=program] .isInOutspacePane:focus,   html[data-focus-source=program] .isInOutspacePane *:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:inherit}.isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{border:none;background-color:inherit;width:100%;border-radius:4px;box-sizing:border-box}html:not([dir="rtl"])[_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{float:right}.isInOutspacePane[_ngcontent-%COMP%]   .cards.append[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811)}.isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .dragover.dropzone[_ngcontent-%COMP%]{box-shadow:0 0 2px 2px}.isInOutspacePane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{padding:14px;border-radius:2px;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);color:inherit;text-align:center}.isInOutspacePane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   .end-dropzone[_ngcontent-%COMP%]{height:8px}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]{display:flex;flex-direction:column}.isInOutspacePane[_ngcontent-%COMP%]   .bucket.bucket-padding[_ngcontent-%COMP%]{padding:0 0 18px}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:inherit;display:flex;box-sizing:border-box;font-weight:inherit}html:not([dir="rtl"])[_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:0 4px 4px 0}html[dir="rtl"][_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:0 0 4px 4px}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-top:8px;font-size:14px;flex-grow:1}html:not([dir="rtl"])[_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-left:0}html[dir="rtl"][_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-right:0}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]{background-color:transparent;margin-top:8px;color:inherit}  html[data-focus-source=key] .isInOutspacePane .bucket .header .optionsMenu:focus,   html[data-focus-source=key] .isInOutspacePane .bucket .header .optionsMenu *:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}  html[data-focus-source=mouse] .isInOutspacePane .bucket .header .optionsMenu:focus,   html[data-focus-source=mouse] .isInOutspacePane .bucket .header .optionsMenu *:focus,   html[data-focus-source=program] .isInOutspacePane .bucket .header .optionsMenu:focus,   html[data-focus-source=program] .isInOutspacePane .bucket .header .optionsMenu *:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   filter[_ngcontent-%COMP%]{display:flex;touch-action:auto}.isInOutspacePane[_ngcontent-%COMP%]   filter.append[_ngcontent-%COMP%]{box-shadow:0 3px}.isInOutspacePane[_ngcontent-%COMP%]   filter.prepend[_ngcontent-%COMP%]{box-shadow:0 -3px}.isInOutspacePane[_ngcontent-%COMP%]   .hasRestateHighlight[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1)}.isInOutspacePane[_ngcontent-%COMP%]   .editVariablesButton[_ngcontent-%COMP%]{padding:6px 0 18px;max-width:100%;color:var(--fluent-theme-link-color, #0078D4)}.isInOutspacePane[_ngcontent-%COMP%]   .editVariablesButton[_ngcontent-%COMP%], .isInOutspacePane[_ngcontent-%COMP%]   .editVariablesButton[_ngcontent-%COMP%]:hover{background:transparent}.isInOutspacePane[_ngcontent-%COMP%]   .editVariablesButton[_ngcontent-%COMP%]:hover{color:var(--fluent-theme-link-alt-color, #004578);text-decoration:underline}.isInOutspacePane[_ngcontent-%COMP%]   #noFiltersHeader[_ngcontent-%COMP%]{padding:6px 0 18px;display:block}.isInOutspacePane[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{position:sticky;bottom:0px;z-index:1}.isInOutspacePane[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]{margin:0 auto;display:block;border-radius:2px;width:100%;height:40px;border-color:var(--neutral-secondary-color, #666666)}.isInOutspacePane[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:enabled{background:var(--theme-primary-color, #F2C811)}.isInOutspacePane[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll.errorState[_ngcontent-%COMP%]{background:var(--warning-color, #A4262C)}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){width:100%;box-sizing:border-box;font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif;overflow:visible}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){float:left}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){padding:0 6px 4px 4px}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){padding:0 4px 4px 6px}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]:focus{outline:none}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:var(--white-color, #FFF);display:flex;box-sizing:border-box;font-weight:inherit}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:6px 5px 6px 0}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:6px 0 6px 5px}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{font-size:12px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-left:12px}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-right:12px}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]:focus{outline:none}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color-alt2, #4a4a4a);width:100%;border:1px dashed var(--neutral-secondary-color, #666666);border-radius:4px;box-sizing:border-box}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%]{float:right}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards.append[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811)}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .dropzone[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8);padding:4px 8px}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .dropzone[_ngcontent-%COMP%]:focus{outline:none}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .end-dropzone[_ngcontent-%COMP%]{height:8px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .header[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .header[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4);border-radius:2px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards.append[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards.append[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .dropzone[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .dropzone[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.filterPane-FlexWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;border-color:inherit}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{border-top:1px solid;border-color:inherit;display:flex;flex-direction:column;box-sizing:border-box;padding-top:8px}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]{margin:8px 8px 16px auto;border-radius:2px;border:1px transparent solid;width:80px;height:32px}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]   html[data-focus-source=key][_ngcontent-%COMP%], .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]{margin:0 8px;padding:7px;display:flex;background:var(--fluent-theme-error-background-color, #FDE7E9)}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{color:var(--fluent-theme-error-dark-color, #A80000);padding-right:6px}',".exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .cards[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .cards[_ngcontent-%COMP%]{font-size:12px;border:0;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{border-top:0;min-height:50px;margin-bottom:unset;padding-top:2px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]{min-height:32px;font-weight:500;margin:5px 18px 16px auto;border-radius:4px;font-size:14px;letter-spacing:normal;background-color:var(--fluentThemeWhiteToNightColor);border:2px solid var(--fluentThemeNeutralTertiaColor);font-weight:bold;width:100px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:not(:enabled), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:not(:enabled){color:var(--fluentThemeNeutralTertiaColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:enabled, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:enabled{background-color:inherit;border:2px solid var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child{position:relative;top:0px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:hover, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:hover{color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]{background-color:var(--fluentThemeErrorBackgroundColor);color:var(--fluentThemeErrorDarkColor);margin:auto 18px;min-height:24px;padding:5px;font-size:14px;border-radius:4px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%]{padding-top:2px;margin:unset}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{padding-right:10px;padding-top:2px;font-size:20px;color:var(--fluentThemeErrorDarkColor);margin:unset}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){padding:0 17px}.exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{min-height:calc(50px + env(safe-area-inset-bottom))}.exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child, .exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child{position:relative;top:0}@media (orientation: landscape){.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{flex-direction:row;min-height:50px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]{margin-top:0;margin-bottom:auto;position:unset}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%]{padding-right:10px}.exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{min-height:calc(25px + env(safe-area-inset-bottom) + 5px)}.exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child, .exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child{position:unset}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%]{padding-left:10px}}.exploreHost.landingController[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%]{margin-bottom:8px}.exploreHost.landingController[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{margin-bottom:44px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]{margin:5px auto 16px 24px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{padding-left:10px}"]}),de}()},31141:function(Ee,ne,t){t.d(ne,{F:function(){return d}});var e=t(76430),n=t(66075),f=t(93993),i=t(60400),M=powerbi.explore.FilterUtils;function E(P,y){if(1&P&&(e.\u0275\u0275elementStart(0,"li",1),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&P){var b=y.$implicit;e.\u0275\u0275propertyInterpolate("title",b),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",b," ")}}var I=function(y,b,a,o,l){return{backgroundColor:y,"border-color":b,color:a,"font-family":o,"font-size":l}},d=function(){function P(y,b){this.explorationNavigation=y,this.themeService=b}return P.prototype.ngOnInit=function(){var y=this.explorationNavigation.getCurrentExploration(),b=this.themeService.getVisualStyle(y.themeCollection),a=M.getFilterCardStyle(this.sectionObjects,!0,b);this.backgroundColor=a.backgroundColor,this.borderColor=a.borderColor,this.color=a.foregroundColor,this.fontFamily=a.fontFamily,this.fontSize=a.fontSize},P.prototype.getAriaLabelForRestatementItem=function(){var b=this.filterRestatement&&this.filterRestatement.restatements;return(this.filterRestatement&&this.filterRestatement.fieldName)+" "+(_.isEmpty(b)?"":b.join())},P.\u0275fac=function(b){return new(b||P)(e.\u0275\u0275directiveInject(n.z),e.\u0275\u0275directiveInject(f.f))},P.\u0275cmp=e.\u0275\u0275defineComponent({type:P,selectors:[["filter-restatement-card"]],inputs:{filterRestatement:"filterRestatement",sectionObjects:"sectionObjects"},decls:5,vars:11,consts:[[1,"filterRestatementCard",3,"ngStyle"],[3,"title"],[3,"title",4,"ngFor","ngForOf"]],template:function(b,a){1&b&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"strong",1),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"ul"),e.\u0275\u0275template(4,E,2,2,"li",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&b&&(e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction5(5,I,a.backgroundColor,a.borderColor,a.color,a.fontFamily,a.fontSize)),e.\u0275\u0275attribute("aria-label",a.getAriaLabelForRestatementItem()),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("title",a.filterRestatement.fieldNameToolTip),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(a.filterRestatement.fieldName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",a.filterRestatement.restatements))},directives:[i.NgStyle,i.NgForOf],styles:[".filterRestatementCard[_ngcontent-%COMP%]{border:1px solid;margin-top:6px;padding:8px 12px;font-size:14px;word-wrap:break-word;border-radius:2px}.filterRestatementCard[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;margin:0}"]}),P}()},69475:function(Ee,ne,t){t.d(ne,{k:function(){return i}});var e=t(86269),n=t(76430),f=t(88775),i=function(){function M(E){this.filterRestatementData=E,this.visual=E.visual}return M.\u0275fac=function(I){return new(I||M)(n.\u0275\u0275directiveInject(e.M))},M.\u0275cmp=n.\u0275\u0275defineComponent({type:M,selectors:[["filter-restatement-overlay"]],decls:2,vars:1,consts:[[1,"pbi-depth-2"],[3,"visual"]],template:function(I,d){1&I&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"filter-restatement",1),n.\u0275\u0275elementEnd()),2&I&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("visual",d.visual))},directives:[f.W],encapsulation:2,changeDetection:0}),M}()},88775:function(Ee,ne,t){t.d(ne,{W:function(){return v}});var e=t(40582),n=t(76430),f=t(38942),i=t(10883),M=t(66075),E=t(98713),I=t(60660),d=t(59116),P=t(93993),y=t(40629),b=t(60400),a=t(9784),o=t(31141),l=powerbi.common.utils.ColorUtility,s=powerbi.visuals.ColorHelper,c=powerbi.DataViewObject,O=powerbi.explore.constants.ExploreCanvasConstants,x=powerbi.explore.util;function V(g,r){if(1&g&&(n.\u0275\u0275elementStart(0,"li"),n.\u0275\u0275element(1,"filter-restatement-card",6),n.\u0275\u0275elementEnd()),2&g){var u=r.$implicit,C=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("filterRestatement",u)("sectionObjects",C.section.evaluatedObjects)}}function w(g,r){1&g&&n.\u0275\u0275element(0,"li",7)}var T=function(r,u,C,F){return{backgroundColor:r,color:u,"font-family":C,"font-size":F}},v=function(){function g(r,u,C,F,A,W,k,R,G){this.changeDetector=r,this.conceptualSchemaProxy=u,this.dataSources=C,this.explorationNavigation=F,this.filterRestatementService=A,this.localizationService=W,this.telemetryService=k,this.themeService=R,this.viewModeState=G,this.backgroundColorSelector={objectName:"outspacePane",propertyName:"backgroundColor"},this.foregroundColorSelector={objectName:"outspacePane",propertyName:"foregroundColor"},this.filters=[]}return g.prototype.ngOnInit=function(){var r=this.explorationNavigation.getCurrentExploration();this.section=this.explorationNavigation.getCurrentSection();var C=this.themeService.getVisualStyle(r.themeCollection),F=s.create(C),A=this.section&&this.section.evaluatedObjects;this.setBackground(A,F),this.setColor(A,F),this.setText(A),this.update()},g.prototype.ngOnChanges=function(r){(r.supportsValueLevelFilters||r.visual)&&this.update()},g.prototype.update=function(){var r=this;this.dialogueDescriptionKey=this.supportsValueLevelFilters?"FilterRestatementVisual_ToolTip_Dialogue_Description_Value":"FilterRestatementVisual_ToolTip_Dialogue_Description",this.ariaLabelString=this.localizationService.get(this.dialogueDescriptionKey),this.getVisualFilters().then(function(u){r.filters=u,r.telemetryService.logEvent(powerbi.telemetry.EXImprovedFilterExperienceShowRestatement,{numOfFiltersShown:r.filters.length,viewMode:x.getTelemetryViewMode(r.viewModeState.getMode())}),r.changeDetector.detectChanges()})},g.prototype.getVisualFilters=function(){return(0,e.mG)(this,void 0,void 0,function(){var r,u;return(0,e.Jh)(this,function(C){switch(C.label){case 0:return r=this.explorationNavigation.getCurrentExploration(),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return u=C.sent(),this.supportsValueLevelFilters?[2,this.filterRestatementService.getContextualFilterRestatements(u,this.visual)]:[2,this.filterRestatementService.getVisualFilterRestatements(r,this.section,u,this.visual)]}})})},g.prototype.setBackground=function(r,u){var C=u.getColorForProperty(r,this.backgroundColorSelector,"background"),A=l.convertTransparencyToOpacity(c.getValue(this.section.evaluatedObjects&&this.section.evaluatedObjects.outspacePane,"transparency",O.DefaultOutspacePaneTransparency));this.backgroundColor=l.hexToRGBString(C,A)},g.prototype.setColor=function(r,u){var C=u.getColorForProperty(r,this.foregroundColorSelector,"foreground");this.color=l.hexToRGBString(C)},g.prototype.setText=function(r){var u=r&&r.outspacePane;this.fontFamily=c.getValue(u,"fontFamily",O.DefaultOutspacePaneFontFamily);var C=c.getValue(u,"headerSize",O.DefaultOutspacePaneHeaderSizePt);this.fontSize=C+"pt"},g.\u0275fac=function(u){return new(u||g)(n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(f.i),n.\u0275\u0275directiveInject(i.D),n.\u0275\u0275directiveInject(M.z),n.\u0275\u0275directiveInject(E.I),n.\u0275\u0275directiveInject(I.o),n.\u0275\u0275directiveInject(d.y0),n.\u0275\u0275directiveInject(P.f),n.\u0275\u0275directiveInject(y.kc))},g.\u0275cmp=n.\u0275\u0275defineComponent({type:g,selectors:[["filter-restatement"]],inputs:{supportsValueLevelFilters:"supportsValueLevelFilters",visual:"visual"},features:[n.\u0275\u0275NgOnChangesFeature],decls:7,vars:10,consts:[[2,"background-color","white"],["autofocus","","tabindex","0","role","region",1,"filterRestatement","themeableElement",2,"z-index","999",3,"ngStyle"],["aria-hidden","true",1,"glyphicon","pbi-glyph-filter"],["aria-hidden","true",1,"title",3,"localize"],[4,"ngFor","ngForOf"],["class","noFilter","localize","No_Filter_For_Visual",4,"ngIf"],[3,"filterRestatement","sectionObjects"],["localize","No_Filter_For_Visual",1,"noFilter"]],template:function(u,C){1&u&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275element(2,"span",2),n.\u0275\u0275element(3,"span",3),n.\u0275\u0275elementStart(4,"ul"),n.\u0275\u0275template(5,V,2,2,"li",4),n.\u0275\u0275template(6,w,1,0,"li",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&u&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction4(5,T,C.backgroundColor,C.color,C.fontFamily,C.fontSize)),n.\u0275\u0275attribute("aria-label",C.ariaLabelString),n.\u0275\u0275advance(2),n.\u0275\u0275property("localize",C.dialogueDescriptionKey),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",C.filters),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!C.filters||0===C.filters.length))},directives:[b.NgStyle,a.X,b.NgForOf,b.NgIf,o.F],styles:[".filterRestatement[_ngcontent-%COMP%]{font-size:14px;width:260px;max-height:374px;overflow-y:auto;padding:12px 16px}.filterRestatement[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle}.filterRestatement[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{vertical-align:middle;margin-bottom:4px;margin-left:2px}.filterRestatement[_ngcontent-%COMP%]   .noFilter[_ngcontent-%COMP%]{padding:5px}.filterRestatement[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:0}.filterRestatement[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;margin:0}"],changeDetection:0}),g}()},88082:function(Ee,ne,t){t.d(ne,{A:function(){return it}});var e=t(40582),n=t(76430),f=t(60354),i=t(19156),M=t(38942),E=t(88201),I=t(4486),d=t(10883),P=t(95762),y=t(71367),b=t(12603),a=t(66075),o=t(7078),l=t(23246),s=t(13213),c=t(95781),O=t(24824),x=t(76963),V=t(60660),w=t(79224),T=t(59116),v=t(40629),g=t(59804),r=t(4928),u=t(80815),C=t(21231),F=t(60400),A=t(37105),W=t(14162),k=t(9784),R=t(29595),G=t(52555),le=t(90683),ge=t(36896),re=t(80763),j=powerbi.data.DataViewObjectDefinitions,ie=jsCommon.EnumExtensions,Z=powerbi.explore.services.events,fe=powerbi.explore.services,Q=powerbi.explore.FilterUtils,J=powerbi.explore.viewModels.FilterViewModel,se=powerbi.explore.PodUtils,oe=powerbi.data.RestatementHelper,K=powerbi.data.SemanticFilter,D=powerbi.data.SQExpr,p=powerbi.data.SQExprBuilder,h=powerbi.explore.services.toFilterData,m=powerbi.explore.util.VisualContainerUtils,S=powerbi.explore.util.VisualHostServicesUtil;function N(Te,ue){if(1&Te&&n.\u0275\u0275element(0,"visual-modern",6),2&Te){var ve=n.\u0275\u0275nextContext();n.\u0275\u0275property("viewModel",ve.viewModel.readOnlyState.visual)("currentZone",ve.currentZone)("supportsScreenReader",!0)}}function ce(Te,ue){1&Te&&(n.\u0275\u0275elementStart(0,"div",7),n.\u0275\u0275element(1,"spinner"),n.\u0275\u0275element(2,"span",8),n.\u0275\u0275elementEnd())}function he(Te,ue){1&Te&&(n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275elementStart(1,"i",10),n.\u0275\u0275element(2,"svg-use-symbol",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"span",12),n.\u0275\u0275elementEnd())}function Ce(Te,ue){if(1&Te){var ve=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",13),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(ve),n.\u0275\u0275nextContext().onApplyButtonClicked()}),n.\u0275\u0275elementEnd()}if(2&Te){var Me=n.\u0275\u0275nextContext();n.\u0275\u0275property("disabled",!Me.isApplyButtonEnabled())}}var me=function(ue){return{"border-color":ue}};function Ze(Te,ue){if(1&Te){var ve=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",14),n.\u0275\u0275elementStart(1,"mat-checkbox",15),n.\u0275\u0275listener("change",function(){return n.\u0275\u0275restoreView(ve),n.\u0275\u0275nextContext().updateRequiredState()})("ngModelChange",function($e){return n.\u0275\u0275restoreView(ve),n.\u0275\u0275nextContext().viewModel.isSingleSelectionRequired=$e}),n.\u0275\u0275element(2,"span",16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}if(2&Te){var Me=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("disabled",Me.viewModel.isSingleSelectDisabled()),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(10,me,Me.viewModel.borderColor))("ngClass",Me.isInOutspacePane?"filterOutspace":"filterClassic"),n.\u0275\u0275advance(1),n.\u0275\u0275property("matCheckBoxColor",Me.viewModel.checkboxAndApplyColor)("matCheckBoxColorIsChecked",Me.viewModel.isSingleSelectionRequired)("disabled",Me.viewModel.isSingleSelectDisabled())("ngModel",Me.viewModel.isSingleSelectionRequired)("aria-label",Me.requireSingleSelectLabel)("localizeTooltip",Me.getToolTipForSingleSelect())}}var Je={objectName:"general",propertyName:"isInvertedSelectionMode"},it=function(){function Te(ue,ve,Me,we,$e,et,at,dt,Fe,be,_e,Oe,Xe,nt,ht,bt,Ft,ke,Ae,Le,Ve,tt,lt,de,te){this.aggrOps=ue,this.contextActivityService=ve,this.conceptualSchemaProxy=Me,this.dataSources=we,this.displayNameService=$e,this.eventBridge=et,this.explorationActivity=at,this.explorationNavigation=dt,this.featureSwitchService=Fe,this.filterGenerator=be,this.geocoder=_e,this.geolocationService=Oe,this.localizationService=Xe,this.moduleLoader=nt,this.ngZone=ht,this.promiseFactory=bt,this.singleExecutableDataProxyFactory=Ft,this.telemetryService=ke,this.undoRedo=Ae,this.viewModeState=Le,this.visualAuthoring=Ve,this.visualHostTooltipServiceFactory=tt,this.visualPlugin=lt,this.visualQueryGenerator=de,this.screenReaderService=te}return Te.prototype.ngOnInit=function(){var ue=this;this.runInAngularZone(function(){return ue.onInitImpl()})},Te.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.viewModel.setServices(void 0,this.visualPlugin,this.viewModeState),this.viewModel.readOnlyState.visual=void 0},Te.prototype.ngOnChanges=function(ue){var ve=this;this.runInAngularZone(function(){return ve.onChangesImpl(ue)})},Te.prototype.onInitImpl=function(){var ue=this,ve=this.singleExecutableDataProxyFactory.create();if(this.visualDataProxyService=fe.createExploreVisualDataProxyService(ve,this.filterGenerator,this.promiseFactory,this.visualPlugin),this.crossFilteringHostService=this.createFilteringHostService(),this.requireSingleSelectLabel=this.localizationService.get("PageFilter_SingleSelectionRequired"),se.isPodEnabled(this.viewModel.contract,this.viewModel.getFilterContainerScope())&&this.isPodParameter())this.viewModel.isSingleSelectionRequired=!0;else if(this.viewModel.contract.objects){var Me=j.getValue(this.viewModel.contract.objects,{objectName:"general",propertyName:"requireSingleSelect"},void 0);Me&&Me.value&&(this.viewModel.isSingleSelectionRequired=powerbi.data.SQConstantExpr.getBooleanValue(Me))}this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(Z.filterContainerChanged,function(we,$e){return ue.onFilterContainerChanged($e)}).subscribe(Z.explorationLoaded,function(){return ue.runInAngularZone(function(){return ue.updateSlowDataApplyEnabled()})}).subscribe(Z.sectionObjectsEvaluated,function(we,$e){return ue.runInAngularZone(function(){ue.viewModel.isFilterExpanded()&&ue.loadData(!1)})}).subscribe(Z.explorationUnloaded,function(){return ue.runInAngularZone(function(){return ue.updateSlowDataApplyEnabled()})}).subscribe(Z.applyAllClicked,function(we,$e){return ue.onApplyAllClicked($e)}).subscribe(Z.explorationSlowDataSourceSettingsLoaded,function(we,$e){return ue.runInAngularZone(function(){($e.isFilterSelectionsButtonEnabledChanged||$e.isApplyAllButtonEnabledChanged)&&(ue.applyBufferedFilter(),ue.updateSlowDataApplyEnabled())})}),this.updateSlowDataApplyEnabled(),this.init(this.viewModel)},Te.prototype.onChangesImpl=function(ue){!this.isInitialized&&!0===ue.expanded.currentValue&&(this.init(this.viewModel),this.isInitialized=!0)},Te.prototype.init=function(ue){var ve=this;this.viewModel=ue,this.viewModel.setServices(powerbi.Prototype.inherit(powerbi.explore.services.createVisualHostServices({geocoder:this.geocoder,geolocation:this.geolocationService,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.create(),screenReaderService:this.screenReaderService}),function(Me){Me.persistProperties=function(we,$e){return ve.persistProperties(we)},Me.loadMoreData=function(){return ve.loadMoreData()},Me.promiseFactory=function(){return ve.promiseFactory},Me.canSelect=function(we){return!0},Me.getFilterExpressionMetadata=function(){return ve.getFilterExpressionMetadata()},Me.setFilterExpressionMetadata=function(we){return ve.setFilterExpressionMetadata(we)},Me.ignoreDefaultFilter=function(){return ve.ignoreDefaultFilter()},Me.dataMultiSelectMode=function(){return ve.getDataMultiSelectMode()}}),this.visualPlugin,this.viewModeState),this.getConceptualSchema().then(function(Me){if(ve.viewModel.updateFilterProperties(Me,ve.visualPlugin,ve.aggrOps),ve.viewModel.updateViewState(),ve.viewModel.isSingleSelectionRequired){var we=ve.viewModel.getFilterContainerScope();!ve.isPodParameter()&&1===we.scopeType||ve.viewModel.isMappedToMParameter()&&!ve.viewModel.supportsMultipleValues()?ve.updateRequiredState(!1):ve.updateVisualSelectAllState()}ve.viewModel.readOnlyState.expanded&&ve.loadData(!1),ve.loadRestatement()})},Te.prototype.getToolTipForSingleSelect=function(){return this.viewModel.isMappedToMParameter()&&!this.viewModel.supportsMultipleValues()?"DQP_RequireSingleSelect_Tootltip":"PageFilter_SingleSelectionRequired_Tooltip"},Te.prototype.isViewMode=function(){return 0===this.viewModeState.getMode()},Te.prototype.isFooterVisible=function(){return this.viewModel.readOnlyState.canToggleSingleSelect&&(!this.isInOutspacePane||!this.isViewMode())},Te.prototype.updateRequiredState=function(ue){void 0===ue&&(ue=!0);var ve=this.viewModel.isSingleSelectionRequired;this.visualAuthoring.setRequireSingleSelection(this.viewModel.contract,this.viewModel.getFilterContainerScope(),ve),this.updateVisualSelectAllState(),this.updateVisualProperties();var Me=this.viewModel;if(ue&&ve&&(Me.contract.filter||this.applyAllEnabled)){this.visualAuthoring.updateFilter(Me.getFilterContainerScope(),Me.contract,void 0);var we=void 0;this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(we=Q.createChangeFilterActivity(this.contextActivityService,"Clear Filter"));var $e={filter:Me.contract,changeType:10,scope:Me.getFilterContainerScope(),changeFilterActivity:we};Q.notifyFilterContainerChangedByUser(this.eventBridge,$e),this.applyAllEnabled&&(this.bufferedFilter=void 0,this.applyBufferedFilter(),Me.setRestatement(oe.fromDataViewScopeIdentities([],!1,Me.formatter)),Q.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,powerbi.explore.contracts.FilterType.Visual,this.viewModel.id,!0,!0)),we&&we.resolve()}else ue&&this.visualAuthoring.updateFilter(Me.getFilterContainerScope(),Me.contract,Me.contract.filter)},Te.prototype.isApplyButtonVisible=function(){return this.slowDataApplyEnabled&&!this.applyAllEnabled},Te.prototype.isApplyButtonEnabled=function(){return this.haveBufferedFilter},Te.prototype.onApplyAllClicked=function(ue){this.applyAllEnabled&&!ue.idsInError&&this.applyBufferedFilter(ue.undoRedoActionId)},Te.prototype.onApplyButtonClicked=function(){this.slowDataApplyEnabled&&(document.activeElement.blur(),this.applyBufferedFilter())},Te.prototype.runInAngularZone=function(ue){n.NgZone.isInAngularZone()?ue():this.ngZone.run(ue)},Te.prototype.loadRestatement=function(){var ue=this,ve=this.viewModel.contract;ve.filter?this.getConceptualSchema().then(function(Me){var we=powerbi.visuals.plugins.slicer.capabilities,$e=h(ve.filter,void 0,ve),et=ue.displayNameService.getFilterRestatementForOverlay($e,Me,we);!_.isEmpty(et)&&et[0]&&et[0].restatements?ue.viewModel.setRestatement(et[0].restatements.join(ue.localizationService.get("ListJoin_Separator"))):ue.viewModel.setRestatement(void 0)}):this.viewModel.setRestatement(void 0)},Te.prototype.ignoreDefaultFilter=function(){var ue=this.viewModel.contract;return 1!==ue.howCreated&&!K.isDefaultFilter(ue.filter)},Te.prototype.persistProperties=function(ue){var ve=this,Me=_.isArray(ue)?{merge:ue}:ue;!this.viewModel.readOnlyState.visual||(this.viewModel.contract.config.singleVisual.objects=this.viewModel.readOnlyState.visual.dataTransforms.objects,this.runInAngularZone(function(){ve.checkAndApplySelfFilterPropertyChanges(Me),ve.checkAndApplyFilterPropertyChanges(Me)}))},Te.prototype.checkAndApplySelfFilterPropertyChanges=function(ue){var ve=powerbi.visuals.plugins.slicer.capabilities,Me=this.filterGenerator.tryGetSelfFilterProperty(ve);!ue||void 0===this.getChangeProperty(Me.propertyName,ue.merge)&&void 0===this.getChangeProperty(Me.propertyName,ue.remove)||(powerbi.explore.services.applyPropertyChanges(ue,ve.objects,this.viewModel.contract.config.singleVisual.objects),this.loadData(!1))},Te.prototype.checkAndApplyFilterPropertyChanges=function(ue){var ve,Me;if(ue){var we=this.filterGenerator.tryGetFilterPropertyIdentifier(powerbi.visuals.plugins.slicer.capabilities),$e=this.getChangeProperty(we.propertyName,ue.merge),et=this.getChangeProperty(Je.propertyName,ue.merge);$e&&(ve=$e.properties[we.propertyName]),et&&(Me=et.properties[Je.propertyName]);var at=this.getChangeProperty(we.propertyName,ue.remove),dt=this.getChangeProperty(Je.propertyName,ue.remove);if(!($e||at||et||dt))return;this.bufferPropertyChanges(ve,Me)||this.applyPropertyChanges(ve,Me,void 0)}else this.bufferPropertyChanges(ve,Me)||this.applyPropertyChanges(ve,Me,void 0)},Te.prototype.getChangeProperty=function(ue,ve){if(!_.isEmpty(ve))return _.find(ve,function(Me){return _.has(Me.properties,ue)})},Te.prototype.applyPropertyChanges=function(ue,ve,Me){var we=this,$e=j.getValue(this.viewModel.contract.objects,Je,void 0),et=$e&&$e.value,at=this.viewModel;if(at.useDefaultFilter=!1,(!K.isSameFilter(at.contract.filter,ue)||et!==ve)&&(!K.isAnyFilter(at.contract.filter)||ue||et!==ve)){var dt=this.viewModel.readOnlyState.visual,Fe=(0,e.pi)({},dt.data);dt.data=Fe;var be=ue||et||ve?2:10,_e=at.getFilterContainerScope();this.viewModel.contract.type=this.viewModel.readOnlyState.type;var Oe=function(nt){void 0===at.contract.objects&&(at.contract.objects={}),ve?j.setValue(at.contract.objects,Je,null,p.boolean(ve)):j.deleteProperty(at.contract.objects,Je.objectName,null,Je.propertyName);var ht=at.readOnlyState.visual;ht.dataTransforms&&ht.dataTransforms.objects&&we.setInvertedSelectionOnVisual(ht.dataTransforms.objects),we.visualAuthoring.updateFilter(_e,at.contract,ue),Q.ensureFilterHasName(at.contract,_e);var Ft,bt={filter:at.contract,changeType:be,scope:_e,parentActivity:nt};we.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Ft=Q.createChangeFilterActivity(we.contextActivityService,"Basic Filter"),bt.changeFilterActivity=Ft),Q.notifyFilterContainerChangedByUser(we.eventBridge,bt),Ft&&Ft.resolve(),we.loadRestatement()};this.undoRedo.register("UpdateFilter",function(){2===be?we.explorationActivity.doRootActivity(Oe,function(){return we.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneBasicFilterChanged,{filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(_e.scopeType),fieldKind:powerbi.explore.util.getTelemetryFieldKind(at.contract.expression),viewMode:powerbi.explore.util.getTelemetryViewMode(we.viewModeState.getMode()),isInOutspacePane:we.viewModel.isInOutspacePane})}):we.explorationActivity.doActivity(Oe,function(Xe){return we.telemetryService.startChildActivity(we.currentActivity&&we.currentActivity.event||Xe&&Xe.event,powerbi.telemetry.EXFilterPaneBasicFilterChanged,{filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(_e.scopeType),fieldKind:powerbi.explore.util.getTelemetryFieldKind(at.contract.expression),viewMode:powerbi.explore.util.getTelemetryViewMode(we.viewModeState.getMode()),isInOutspacePane:we.viewModel.isInOutspacePane})})},Me)}},Te.prototype.isPodParameter=function(){var ue=this.explorationNavigation.getCurrentExploration(),ve=this.explorationNavigation.getCurrentSection(),Me=this.viewModel.contract.name;return!!(ue&&ve&&Me)&&se.hasParameter(ue,ve.name,Me)},Te.prototype.createFilteringHostService=function(){var ue=this;return powerbi.Prototype.inherit(S.createQueryVisualHostServices(),function(ve){ve.getFilters=function(Me,we){return ue.filterGenerator.calculateFilterContainerInputFilter(ue.explorationNavigation.getCurrentExploration(),ue.explorationNavigation.getCurrentSection(),ue.viewModel.contract,we,ue.viewModel.getFilterContainerScope())},ve.getDataSourceVariables=function(){var Me=ue.explorationNavigation.getCurrentExploration();return void 0!==Me?Me.dataSourceVariables:void 0}})},Te.prototype.loadMoreData=function(){this.visualDataProxyService.canLoadMore()&&this.loadData(!0)},Te.prototype.loadData=function(ue){var ve=this;this.viewModel.isLoading=!0,this.hasQueryError=!1,this.getConceptualSchema().then(function(Me){var we=ve.dataSources.get();return ve.visualDataProxyService.runQuery({dataSources:we,schema:Me,config:ve.viewModel.contract.config.singleVisual,hostServices:ve.crossFilteringHostService,visualQueryGenerator:ve.visualQueryGenerator,executionType:ue?1:0}).then(function(et){var at=ve.visualDataProxyService.lastExecutedQuery();ve.hasQueryError=!1,ve.applyVisualStyling(at.transforms),!0===ue?ve.onMergeMoreData(et,Me,at.transforms):ve.onDataChanged(et,Me,at.transforms)},function(et){et instanceof powerbi.QueryCancellationClientError&&et.ignorable||(ve.hasQueryError=!0)}).finally(function(){ve.viewModel.isLoading=!1})})},Te.prototype.onDataChanged=function(ue,ve,Me){if(ue&&ue.dataReaderResult&&this.viewModel.readOnlyState.visual){var $e={dataView:ue&&ue.dataReaderResult?ue.dataReaderResult.dataView:null,dataViewSource:ue&&ue.dataViewSource?ue.dataViewSource:null},et=m.isSegment($e.dataView);et&&($e.isFirstSegment=et),this.viewModel.contract.filter||this.removeBufferedPropertyChanges(),this.updateVisualState(Me,$e),this.viewModel.updateViewState(),this.dataLoaded=!0}},Te.prototype.onMergeMoreData=function(ue,ve,Me){var we=this.viewModel.readOnlyState.visual;if(ue&&ue.dataReaderResult&&we){var $e=ue.dataReaderResult.dataView;if($e){var et=we.data.dataView;powerbi.data.segmentation.DataViewMerger.mergeDataViews(et,$e),this.updateVisualState(Me,{dataView:et,dataViewSource:ue&&ue.dataViewSource,isFirstSegment:!1})}}},Te.prototype.updateVisualState=function(ue,ve){var Me=this.viewModel.readOnlyState.visual;Me.data=ve,Me.dataTransforms=ue,ue&&(this.viewModel.contract.config.singleVisual.objects=ue.objects)},Te.prototype.setFilterPropertyByIdAndValue=function(ue,ve){j.setValue(this.viewModel.readOnlyState.visual.dataTransforms.objects,ue,null,ve)},Te.prototype.deleteFilterPropertyByNames=function(ue){j.deleteProperty(this.viewModel.readOnlyState.visual.dataTransforms.objects,ue.objectName,null,ue.propertyName)},Te.prototype.onFilterContainerChanged=function(ue){var ve=this,Me=this.viewModel,we=Me.readOnlyState.visual;if(ue.filter===Me.contract){if(ue.parentActivity&&(this.currentActivity=ue.parentActivity),ie.hasFlag(ue.changeType,2))this.runInAngularZone(function(){ve.onFilterUpdate(ue,Me,we)});else if(this.dataLoaded&&ie.hasFlag(ue.changeType,4))this.runInAngularZone(function(){ve.loadData(!1)});else if(ie.hasFlag(ue.changeType,16))we&&we.visual&&we.visual.update({viewport:J.DefaultVisualViewPort,type:powerbi.VisualUpdateType.Resize,dataViews:null});else if(ie.hasFlag(ue.changeType,32)){var $e=this.viewModel;$e.cardType.type!==ue.filter.type&&this.runInAngularZone(function(){$e.cardType.type=ue.filter.type})}this.currentActivity=void 0}},Te.prototype.onFilterUpdate=function(ue,ve,Me){10===ue.changeType?this.onFilterClear(ve,Me):this.setInvertedSelectionOnVisual(Me.dataTransforms.objects),K.isSameFilter(ve.contract.filter,ue.filter.filter)||(ve.readOnlyState.visual.dataTransforms&&(ve.contract.config.singleVisual.objects=ve.readOnlyState.visual.dataTransforms.objects),this.applyAllEnabled||this.visualAuthoring.updateFilter(ve.getFilterContainerScope(),ve.contract,ue.filter.filter),null!=ue.filter.filter&&this.loadData(!1));var we=this.visualDataProxyService.lastExecutedQuery();we&&(this.applyVisualStyling(we.transforms),this.updateVisualProperties()),this.applyAllEnabled||this.loadRestatement()},Te.prototype.onFilterClear=function(ue,ve){if(ve&&(ve.visual&&ve.visual.onClearSelection(),ve.dataTransforms)){var Me=powerbi.visuals.slicerProps.general.filter,we=ue.contract.expression;if(we&&ue.hasDefaultValue){var $e=K.getDefaultAnyValueFilter([],[we]);this.setFilterPropertyByIdAndValue(Me,$e)}else this.deleteFilterPropertyByNames(Me);this.deleteFilterPropertyByNames(powerbi.visuals.slicerProps.data.isInvertedSelectionMode)}this.applyAllEnabled?(this.updateVisualProperties(),this.haveBufferedFilter=!0):((!ue.contract.filter||K.isAnyFilter(ue.contract.filter))&&ue.setRestatement(oe.fromDataViewScopeIdentities([],!1,ue.formatter)),K.isDefaultFilter(ue.contract.filter)&&ue.setRestatement(oe.fromDefault(ue.defaultValue.value)))},Te.prototype.setInvertedSelectionOnVisual=function(ue){var ve=powerbi.visuals.slicerProps.data.isInvertedSelectionMode,Me=j.getValue(this.viewModel.contract.objects,Je,void 0),we=Me&&Me.value;we?j.setValue(ue,ve,null,p.boolean(we)):j.deleteProperty(ue,ve.objectName,null,ve.propertyName)},Te.prototype.updateVisualSelectAllState=function(){var ue=this.viewModel.readOnlyState.visual;if(ue){var ve=this.viewModel.isSingleSelectionRequired,Me=ue.dataTransforms.objects,we=powerbi.visuals.slicerProps.selection.selectAllCheckboxEnabled,$e=powerbi.visuals.slicerProps.selection.singleSelect;Me||(Me={}),j.setValue(Me,we,null,p.boolean(!ve)),j.setValue(Me,$e,null,p.boolean(ve))}},Te.prototype.updateVisualProperties=function(){var ue=this.viewModel.readOnlyState.visual;ue&&ue.data&&(ue.data={dataView:ue.data.dataView,dataViewSource:ue.data.dataViewSource,isFirstSegment:ue.data.isFirstSegment})},Te.prototype.setFilterExpressionMetadata=function(ue){var Me,ve=this.viewModel.contract;if(ue&&!_.isEmpty(ue.expressions)&&!_.isEmpty(ue.cachedValueItems)){var we=powerbi.data.ScopeIdentityExtractor.getKeys(ue.cachedValueItems[0].identities[0].expr);(we.length>1||!D.equals(ve.expression,we[0]))&&(Me=ue)}ve.cachedValueItems=powerbi.explore.FilterExpressionMetadataUtils.tryGetDisplayNameIdentityPairs(Me)},Te.prototype.getFilterExpressionMetadata=function(){var ve,ue=this.viewModel.contract;return _.isEmpty(ue.cachedValueItems)||(ve=powerbi.explore.FilterExpressionMetadataUtils.convertCacheToFilterExpressionMetadata(ue.expression,ue.cachedValueItems)),ve},Te.prototype.getDataMultiSelectMode=function(){return this.viewModeState.getConfig().touchOptions.dataMultiSelectMode},Te.prototype.getConceptualSchema=function(){var ue=this.dataSources.get();return ue&&this.viewModel.contract.config&&this.viewModel.contract.config.singleVisual?this.conceptualSchemaProxy.get(ue):this.promiseFactory.reject()},Te.prototype.updateSlowDataApplyEnabled=function(){this.slowDataApplyEnabled=!1;var ue=this.explorationNavigation.getCurrentExploration();if(ue&&ue.slowDataSourceSettings){var ve=this.viewModeState.getConfig().displayOptions.enableMobileFilters;this.applyAllEnabled=Q.isApplyAllEnabled(this.isInOutspacePane||ve,this.explorationNavigation),this.slowDataApplyEnabled=ue.slowDataSourceSettings.isFilterSelectionsButtonEnabled||this.applyAllEnabled}},Te.prototype.applyBufferedFilter=function(ue){if(this.haveBufferedFilter){var ve=this.bufferedFilter,Me=this.bufferedInvertedSelectionChange;this.haveBufferedFilter=!1,this.bufferedFilter=void 0,this.bufferedInvertedSelectionChange=void 0,this.applyPropertyChanges(ve,Me,ue)}},Te.prototype.bufferPropertyChanges=function(ue,ve){if(!this.slowDataApplyEnabled||!this.haveBufferedFilter&&K.isSameFilter(this.viewModel.contract.filter,ue))return!1;var Me=powerbi.visuals.slicerProps.general.filter;return this.setFilterPropertyByIdAndValue(Me,ue),this.updateVisualProperties(),this.haveBufferedFilter=!0,this.bufferedFilter=ue,this.bufferedInvertedSelectionChange=ve,this.applyAllEnabled&&Q.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,powerbi.explore.contracts.FilterType.Visual,this.viewModel.id,!0),!0},Te.prototype.removeBufferedPropertyChanges=function(){if(this.slowDataApplyEnabled||this.applyAllEnabled){var ue=powerbi.visuals.slicerProps.general.filter;this.deleteFilterPropertyByNames(ue)}},Te.prototype.applyVisualStyling=function(ue){if(ue){var ve={},Me=powerbi.visuals.slicerProps.searchBox,we=powerbi.visuals.slicerProps.general,$e=powerbi.visuals.slicerProps.items,et={solid:{color:p.text(this.viewModel.inputBoxBackgroundColor)}},at={solid:{color:p.text(this.viewModel.inputBoxBorderColor)}},dt={solid:{color:p.text(this.viewModel.foregroundColor)}},Fe=_.toInteger(_.replace(this.viewModel.fontSize,"pt","")),be=p.integer(Fe),_e=p.text(this.viewModel.fontFamily);j.setValue(ve,Me.background,null,et),j.setValue(ve,Me.borderColor,null,at),j.setValue(ve,$e.fontColor,null,dt),this.viewModel.isInOutspacePane?(j.setValue(ve,$e.textSize,null,be),j.setValue(ve,$e.fontFamily,null,_e)):j.setValue(ve,we.outlineColor,null,dt),j.extend(ve,ue.objects),ue.objects=ve}},Te.\u0275fac=function(ve){return new(ve||Te)(n.\u0275\u0275directiveInject(i.C),n.\u0275\u0275directiveInject(I.r),n.\u0275\u0275directiveInject(M.i),n.\u0275\u0275directiveInject(d.D),n.\u0275\u0275directiveInject(P.O),n.\u0275\u0275directiveInject(y.J),n.\u0275\u0275directiveInject(b.Z),n.\u0275\u0275directiveInject(a.z),n.\u0275\u0275directiveInject(c.vZ),n.\u0275\u0275directiveInject(o.r),n.\u0275\u0275directiveInject(O.i),n.\u0275\u0275directiveInject(x._1),n.\u0275\u0275directiveInject(V.o),n.\u0275\u0275directiveInject(w.m),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(f.t),n.\u0275\u0275directiveInject(E.U),n.\u0275\u0275directiveInject(T.y0),n.\u0275\u0275directiveInject(l.z),n.\u0275\u0275directiveInject(v.kc),n.\u0275\u0275directiveInject(g.$),n.\u0275\u0275directiveInject(r.q),n.\u0275\u0275directiveInject(u.D),n.\u0275\u0275directiveInject(s.S),n.\u0275\u0275directiveInject(C.g))},Te.\u0275cmp=n.\u0275\u0275defineComponent({type:Te,selectors:[["filter-visual"]],inputs:{viewModel:"viewModel",isInOutspacePane:"isInOutspacePane",expanded:"expanded"},features:[n.\u0275\u0275NgOnChangesFeature],decls:6,vars:6,consts:[[1,"filterVisualModern",3,"ngClass"],[3,"viewModel","currentZone","supportsScreenReader",4,"ngIf"],["class","filterSpinner",4,"ngIf"],["class","filterError",4,"ngIf"],["class","applyFilter smallFontSize","localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",3,"disabled","click",4,"ngIf"],["class","cardFooter",3,"ngStyle","ngClass","disabled",4,"ngIf"],[3,"viewModel","currentZone","supportsScreenReader"],[1,"filterSpinner"],["localize","FilterCard_Loading",1,"message"],[1,"filterError"],[1,"icon","filterPaneIcon","error"],["sheet","filterPaneIcons","symbolId","fieldListError"],["localize","FilterCard_ErrorMessage",1,"message"],["localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",1,"applyFilter","smallFontSize",3,"disabled","click"],[1,"cardFooter",3,"ngStyle","ngClass"],["label","PageFilter_SingleSelectionRequired",1,"required","flex","vertiPad","pbi-checkbox",3,"matCheckBoxColor","matCheckBoxColorIsChecked","disabled","ngModel","aria-label","localizeTooltip","change","ngModelChange"],["localize","PageFilter_SingleSelectionRequired"]],template:function(ve,Me){1&ve&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,N,1,3,"visual-modern",1),n.\u0275\u0275template(2,ce,3,0,"div",2),n.\u0275\u0275template(3,he,4,0,"div",3),n.\u0275\u0275template(4,Ce,1,1,"button",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,Ze,3,12,"div",5)),2&ve&&(n.\u0275\u0275property("ngClass",Me.isInOutspacePane?"filterOutspace":"filterClassic"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Me.dataLoaded),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Me.viewModel.isLoading&&!Me.dataLoaded),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Me.hasQueryError),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Me.isApplyButtonVisible()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Me.isFooterVisible()))},directives:[F.NgClass,F.NgIf,A.y,W.O,k.X,R.k,G.r,F.NgStyle,le.oG,ge.N,re.JJ,re.On],styles:['.filterVisualModern.filterOutspace[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .filterError[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:14px;width:14px;display:inline-block;padding:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-left:5px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-right:5px}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter{margin-top:6px;margin-bottom:6px;color:inherit;font-size:inherit;font-family:inherit;background-color:transparent;opacity:.5;position:relative}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter{float:right}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter{float:left}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter:hover{background-color:transparent}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter:enabled{color:inherit;opacity:1}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerHeader{margin:0}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerHeader input{background-color:transparent;color:inherit}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerHeader button{background-color:transparent}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .searchHeader.show{margin:4px 0;min-height:22px;height:initial}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .searchHeader.show input.searchInput{box-sizing:border-box;outline:0;padding:0!important}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .searchHeader.show input.searchInput::placeholder{color:inherit}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody{width:auto!important}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y{right:0}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y{left:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y{left:unset}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y{right:unset}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{color:var(--white-color, #FFF);text-overflow:ellipsis;overflow:hidden;white-space:nowrap}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{padding-left:4px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{padding-right:4px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{margin-right:8px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{margin-left:8px}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{padding:4px 0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{margin-left:0}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{margin-right:0}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox span.checkbox{color:inherit!important}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox.partiallySelected span.checkbox:before{color:currentColor}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox.selected:not(.partiallySeelcted) span.checkbox:before{content:"\\e73a";background-color:transparent}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .scroll-content{width:inherit!important;height:inherit!important;scrollbar-width:none}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .scroll-content::-webkit-scrollbar{display:none!important}.cardFooter.filterOutspace[_ngcontent-%COMP%]{width:100%;margin-top:4px;padding-top:4px;border-top:1px solid var(--neutral-dark-color, #212121);cursor:pointer}.cardFooter.filterOutspace.disabled[_ngcontent-%COMP%]{opacity:.5}html:not([dir="rtl"])[_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType, html:not([dir="rtl"])   [_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType{float:right}html[dir="rtl"][_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType, html[dir="rtl"]   [_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType{float:left}html:not([dir="rtl"])[_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType, html:not([dir="rtl"])   [_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType, html[dir="rtl"]   [_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType{margin-right:4px}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox{margin-bottom:0}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox.mat-checkbox-checked .mat-checkbox-inner-container{width:12px;height:12px;top:0px;border-style:solid;border-width:1px}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox.mat-checkbox-checked .mat-checkbox-inner-container .mat-checkbox-ripple{display:none}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox.mat-checkbox-checked .mat-checkbox-inner-container .mat-checkbox-background, .cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox.mat-checkbox-checked .mat-checkbox-inner-container .mat-checkbox-frame{border:none!important;border-radius:0}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox input{cursor:pointer}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox span{cursor:pointer;font-family:inherit;color:inherit;font-size:var(--sm-font-size, 12px)}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-inner-container{width:12px;height:12px;top:0px;border:none!important}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-inner-container .mat-checkbox-ripple{display:none}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-inner-container .mat-checkbox-background, .cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-inner-container .mat-checkbox-frame{border-color:inherit!important;border-style:solid;border-width:1px;border-radius:0}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-frame{border-style:none}','.filterVisualModern.filterClassic[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.filterVisualModern.filterClassic[_ngcontent-%COMP%]   .filterError[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:14px;width:14px;display:inline-block;padding:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-left:5px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-right:5px}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter{color:var(--neutral-tertiary-alt-color, #C8C8C8);background-color:transparent;position:relative;font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter{float:right}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter{float:left}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter:hover{background-color:transparent}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter:enabled{color:var(--theme-primary-color, #F2C811)}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerHeader{margin:0}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerHeader input{background-color:transparent;color:var(--white-color, #FFF)}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerHeader button{background-color:transparent}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerBody{width:auto!important}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer:hover .slicerCheckbox span.checkbox{color:inherit!important}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer:hover .slicerCheckbox.partiallySelected span.checkbox:before{color:inherit!important}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{margin-left:0}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{margin-right:0}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox.selected:not(.partiallySeelcted) span.checkbox:before{content:"\\e73a";background-color:transparent}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .scroll-content{width:inherit!important;height:inherit!important}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{color:var(--white-color, #FFF);text-overflow:ellipsis;overflow:hidden;white-space:nowrap}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{padding-left:4px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{padding-right:4px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{margin-right:8px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{margin-left:8px}.cardFooter.filterClassic[_ngcontent-%COMP%]{width:100%;margin-top:4px;padding-top:4px;border-top:1px solid var(--neutral-dark-color, #212121);cursor:pointer}.cardFooter.filterClassic.disabled[_ngcontent-%COMP%]{opacity:.5}html:not([dir="rtl"])[_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%]{float:right}html[dir="rtl"][_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%]{float:left}html:not([dir="rtl"])[_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%]{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%]{margin-right:4px}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-bottom:0}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     input{cursor:pointer}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     span{position:relative;cursor:pointer;font-family:inherit;color:inherit}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-inner-container{width:12px;height:12px;top:0px;background-color:var(--white-color, #FFF);border-style:none}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-inner-container .mat-checkbox-ripple{display:none}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-frame{border-style:none}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-input{display:none}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-background{width:12px;height:12px;border-radius:0;border-style:solid;border-width:1px;border-color:var(--neutral-secondary-color, #666666)}']}),Te}()},65296:function(Ee,ne,t){t.d(ne,{z:function(){return ln}});var e=t(76430),n=t(4486),f=t(38942),i=t(10883),M=t(95762),E=t(71367),I=t(12603),d=t(66075),P=t(9474),y=t(77540),b=t(23580),a=t(95781),o=t(18701),l=t(78600),s=t(21231),c=t(60660),O=t(76963),x=t(59116),V=t(93993),w=t(40629),T=t(59804),v=t(60400),g=t(94726),r=t(41062),u=t(6431),C=t(29595),F=t(52555),A=t(80763),W=t(9784),k=t(65287),R=t(70286),G=t(74262),le=t(40582),ge=t(19156),re=t(23246),j=t(35450),ie=t(72271),Z=t(80815),fe=t(14486),Q=t(60519),J=t(45971),se=t(12263),oe=function(){function q(L){this.localizationService=L}return q.prototype.transform=function(L,H){return this.localizationService.get(0===L?"ShowItemsWhenValue":1===H?"AdvancedFilter_Description_Or":"AdvancedFilter_Description_And")},q.\u0275fac=function(H){return new(H||q)(e.\u0275\u0275directiveInject(c.o,16))},q.\u0275pipe=e.\u0275\u0275definePipe({name:"computeAriaLabelForConditionalComboBox",type:q,pure:!0}),q}(),K=function(){function q(L){this.localizationService=L}return q.prototype.transform=function(L,H,Y,Se){switch(L){case 1:return this.localizationService.get(0===H?Y?"AdvancedFilter_Aria_DateTime_LessThan":"AdvancedFilter_Aria_LessThan":1===Se?Y?"AdvancedFilter_Aria_Or_DateTime_LessThan":"AdvancedFilter_Aria_Or_LessThan":Y?"AdvancedFilter_Aria_And_DateTime_LessThan":"AdvancedFilter_Aria_And_LessThan");case 2:return this.localizationService.get(0===H?Y?"AdvancedFilter_Aria_DateTime_LessThanOrEqual":"AdvancedFilter_Aria_LessThanOrEqual":1===Se?Y?"AdvancedFilter_Aria_Or_DateTime_LessThanOrEqual":"AdvancedFilter_Aria_Or_LessThanOrEqual":Y?"AdvancedFilter_Aria_And_DateTime_LessThanOrEqual":"AdvancedFilter_Aria_And_LessThanOrEqual");case 3:return this.localizationService.get(0===H?Y?"AdvancedFilter_Aria_DateTime_GreaterThan":"AdvancedFilter_Aria_GreaterThan":1===Se?Y?"AdvancedFilter_Aria_Or_DateTime_GreaterThan":"AdvancedFilter_Aria_Or_GreaterThan":Y?"AdvancedFilter_Aria_And_DateTime_GreaterThan":"AdvancedFilter_Aria_And_GreaterThan");case 4:return this.localizationService.get(0===H?Y?"AdvancedFilter_Aria_DateTime_GreaterThanOrEqual":"AdvancedFilter_Aria_GreaterThanOrEqual":1===Se?Y?"AdvancedFilter_Aria_Or_DateTime_GreaterThanOrEqual":"AdvancedFilter_Aria_Or_GreaterThanOrEqual":Y?"AdvancedFilter_Aria_And_DateTime_GreaterThanOrEqual":"AdvancedFilter_Aria_And_GreaterThanOrEqual");case 5:return this.localizationService.get(0===H?"AdvancedFilter_Aria_Contains":1===Se?"AdvancedFilter_Aria_Or_Contains":"AdvancedFilter_Aria_And_Contains");case 6:return this.localizationService.get(0===H?"AdvancedFilter_Aria_DoesNotContains":1===Se?"AdvancedFilter_Aria_Or_DoesNotContains":"AdvancedFilter_Aria_And_DoesNotContains");case 7:return this.localizationService.get(0===H?"AdvancedFilter_Aria_StartWith":1===Se?"AdvancedFilter_Aria_Or_StartWith":"AdvancedFilter_Aria_And_StartWith");case 8:return this.localizationService.get(0===H?"AdvancedFilter_Aria_DoesNotStartWith":1===Se?"AdvancedFilter_Aria_Or_DoesNotStartWith":"AdvancedFilter_Aria_And_DoesNotStartWith");case 9:return this.localizationService.get(0===H?"AdvancedFilter_Aria_Is":1===Se?"AdvancedFilter_Aria_Or_Is":"AdvancedFilter_Aria_And_Is");case 10:return this.localizationService.get(0===H?"AdvancedFilter_Aria_IsNot":1===Se?"AdvancedFilter_Aria_Or_IsNot":"AdvancedFilter_Aria_And_IsNot");default:return""}},q.\u0275fac=function(H){return new(H||q)(e.\u0275\u0275directiveInject(c.o,16))},q.\u0275pipe=e.\u0275\u0275definePipe({name:"computeAriaLabelForInputBox",type:q,pure:!0}),q}(),D=powerbi.explore.services.events,p=powerbi.explore.contracts.FilterType,h=powerbi.explore.FilterUtils,m=powerbi.explore.viewModels.FilterViewModelFactory,S=powerbi.common.utils.IdUtility,N=powerbi.data.SemanticFilter,ce=powerbi.common.directives.TooltipAnchorElementType;function he(q,L){if(1&q&&(e.\u0275\u0275elementStart(0,"mat-option",10),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&q){var H=L.$implicit,Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",H.value)("ngStyle",Y.filterCardStyle)("title",H.tooltip),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",H.label," ")}}function Ce(q,L){if(1&q&&(e.\u0275\u0275elementStart(0,"span",15),e.\u0275\u0275element(1,"svg-use-symbol",16),e.\u0275\u0275elementEnd()),2&q){var H=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("pbi-tooltip",H.tooltipConfig)}}var me=function(L){return{"border-color":L}},Ze=function(L,H){return{"background-color":L,color:H}};function Je(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",11),e.\u0275\u0275elementStart(1,"div",12),e.\u0275\u0275elementStart(2,"input",13),e.\u0275\u0275listener("ngModelChange",function(_t){e.\u0275\u0275restoreView(H);var yt=e.\u0275\u0275nextContext().$implicit;return yt.value&&(yt.value.stringValue=_t)})("blur",function(){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(3).handleInputBlur()})("ngModelChange",function(){e.\u0275\u0275restoreView(H);var _t=e.\u0275\u0275nextContext().$implicit,yt=e.\u0275\u0275nextContext(2);return yt.validateFilterInput(_t),yt.markDirty()}),e.\u0275\u0275pipe(3,"computeAriaLabelForInputBox"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Ce,2,1,"span",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(),Se=Y.$implicit,Re=Y.index,He=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275classProp("filterInputWarningBorder",He.showInputWarning&&Se.isInvalid),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(15,me,He.viewModel.inputBoxBorderColor))("hidden",!Se.valueRequired),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("placeholder",He.viewModel.getInputPlaceholder()),e.\u0275\u0275property("ngModel",Se.value&&Se.value.stringValue)("ngStyle",e.\u0275\u0275pureFunction2(17,Ze,He.viewModel.inputBoxBackgroundColor,He.viewModel.inputBoxForegroundColor))("disabled",He.viewModel.readOnlyState.disabled),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind4(3,10,Se.operator,Re,He.advFilterCard.isDateTime,He.advFilterCard.logicalOperator)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",He.shouldShowErrorFilterPaneIcon(Se))}}var it=function(L,H,Y){return{"background-color":L,color:H,"border-color":Y}};function Te(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",17),e.\u0275\u0275elementStart(1,"div",18),e.\u0275\u0275elementStart(2,"pbi-date-picker",19),e.\u0275\u0275listener("ngModelChange",function(_t){e.\u0275\u0275restoreView(H);var yt=e.\u0275\u0275nextContext().$implicit;return yt.value&&(yt.value.dateValue=_t)})("ngModelChange",function(){e.\u0275\u0275restoreView(H);var _t=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275nextContext(2).dateTimeSelected(_t)}),e.\u0275\u0275pipe(3,"computeAriaLabelForInputBox"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"pbi-time-picker",20),e.\u0275\u0275listener("ngModelChange",function(_t){e.\u0275\u0275restoreView(H);var yt=e.\u0275\u0275nextContext().$implicit;return yt.value&&(yt.value.timeValue=_t)})("ngModelChange",function(){e.\u0275\u0275restoreView(H);var _t=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275nextContext(2).dateTimeSelected(_t)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(),Se=Y.$implicit,Re=Y.index,He=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",He.viewModel.isInOutspacePane?"datetimePickerOutspace":"datetimePickerClassic"),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("light-theme",!He.viewModel.isInOutspacePane)("filterInputWarningBorder",He.showInputWarning&&!He.isValidDate(Se.value.dateValue)),e.\u0275\u0275propertyInterpolate("ariaLabelForInput",e.\u0275\u0275pipeBind4(3,14,Se.operator,Re,He.advFilterCard.isDateTime,He.advFilterCard.logicalOperator)),e.\u0275\u0275property("id",He.getMenuId(Re))("ngModel",Se.value&&Se.value.dateValue)("ngStyle",e.\u0275\u0275pureFunction3(19,it,He.viewModel.inputBoxBackgroundColor,He.viewModel.inputBoxForegroundColor,He.viewModel.inputBoxBorderColor))("placeholder",He.getLocalizedPlaceholder())("disabled",!Se.valueRequired||He.viewModel.readOnlyState.disabled),e.\u0275\u0275advance(2),e.\u0275\u0275styleMap(He.filterCardStyle),e.\u0275\u0275property("ngModel",Se.value&&Se.value.timeValue)}}function ue(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",21),e.\u0275\u0275listener("keydown",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(3).changeOperator(Re)}),e.\u0275\u0275elementStart(1,"label",22),e.\u0275\u0275elementStart(2,"input",23),e.\u0275\u0275listener("ngModelChange",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(3).advFilterCard.logicalOperator=Re})("ngModelChange",function(){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(3).markDirty()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",24),e.\u0275\u0275element(4,"span",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"label",22),e.\u0275\u0275elementStart(6,"input",23),e.\u0275\u0275listener("ngModelChange",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(3).advFilterCard.logicalOperator=Re})("ngModelChange",function(){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(3).markDirty()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"span",24),e.\u0275\u0275element(8,"span",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275classProp("disabledOperator",Y.isAndOperatorDisabled()),e.\u0275\u0275property("title",Y.getDisabledToolTipForAndOperator()),e.\u0275\u0275attribute("tabindex",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalAndOperator?0:-1)("aria-checked",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalAndOperator?"true":"false"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",Y.advFilterCard.logicalOperator)("value",Y.advFilterCard.logicalAndOperator)("disabled",Y.isAndOperatorDisabled())("checked",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalAndOperator),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalAndOperator?"pbi-glyph-radiobtnon":"pbi-glyph-radiobtnoff"),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("disabledOperator",Y.isOrOperatorDisabled()),e.\u0275\u0275property("title",Y.getDisabledToolTipForOrOperator()),e.\u0275\u0275attribute("tabindex",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalOrOperator?0:-1)("aria-checked",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalOrOperator?"true":"false"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",Y.advFilterCard.logicalOperator)("value",Y.advFilterCard.logicalOrOperator)("disabled",Y.isOrOperatorDisabled())("checked",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalOrOperator),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",Y.advFilterCard.logicalOperator!==Y.advFilterCard.logicalAndOperator?"pbi-glyph-radiobtnon":"pbi-glyph-radiobtnoff")}}function ve(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-select",5),e.\u0275\u0275listener("ngModelChange",function(Ct){return e.\u0275\u0275restoreView(H).$implicit.operator=Ct})("ngModelChange",function(){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(2).markDirty()}),e.\u0275\u0275pipe(2,"computeAriaLabelForConditionalComboBox"),e.\u0275\u0275template(3,he,2,4,"mat-option",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Je,5,20,"mat-form-field",7),e.\u0275\u0275template(5,Te,5,23,"section",8),e.\u0275\u0275template(6,ue,9,20,"section",9),e.\u0275\u0275elementContainerEnd()}if(2&q){var Y=L.$implicit,Se=L.index,Re=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("aria-label",e.\u0275\u0275pipeBind2(2,9,Se,Re.advFilterCard.logicalOperator)),e.\u0275\u0275property("ngModel",Y.operator)("ngStyle",e.\u0275\u0275pureFunction3(12,it,Re.viewModel.inputBoxBackgroundColor,Re.viewModel.inputBoxForegroundColor,Re.viewModel.inputBoxBorderColor))("disabled",Re.viewModel.readOnlyState.disabled)("compareWith",Re.compareOperator),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",Re.advFilterCard.operators),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!Re.advFilterCard.isDateTime&&Y.valueRequired),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Re.advFilterCard.isDateTime&&Y.valueRequired),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Re.showLogicOperators(Se))}}function Me(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",27),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(2).applyFilter()}),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",!Y.canApplyFilter())}}var we=function(L){return{"font-size":L}};function $e(q,L){if(1&q&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275element(1,"h3",2),e.\u0275\u0275template(2,ve,7,16,"ng-container",3),e.\u0275\u0275template(3,Me,1,1,"button",4),e.\u0275\u0275elementEnd()),2&q){var H=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(3,we,H.viewModel.fontSize)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",H.advFilterCard.conditions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!H.isApplyAllOnForThisFilter())}}var et=function(){function q(L,H,Y,Se,Re,He,Ct,_t,yt,Wt,tn,sn,nn,on,vn,fn,mn,cn,Lt){this.aggrOps=L,this.conceptualSchemaProxy=H,this.contextActivityService=Y,this.dataSources=Se,this.eventBridge=Re,this.explorationActivity=He,this.explorationNavigation=Ct,this.featureSwitchService=_t,this.highContrastCssGenerationService=yt,this.localizationService=Wt,this.ngZone=tn,this.overlayService=sn,this.screenReaderService=nn,this.telemetryService=on,this.tooltipService=vn,this.undoRedo=fn,this.viewModeState=mn,this.visualAuthoring=cn,this.visualPlugin=Lt,this.onFilterChanged=new e.EventEmitter,this.moduleConfig={name:"ui.bootstrap",dependency:{javascript:"angular-ui-datetimepicker"}},this.tooltipConfig={tooltipLocalizeTitle:"AdvancedFilter_InvalidTooltip_Number",tooltipAnchorElementSelector:"input[type='text']:first",tooltipAnchorElementType:ce.Sibling},this.menuIds={},this.isDirty=!1}return q.prototype.ngOnInit=function(){var L=this;this.ngZone.run(function(){return L.onInitImpl()})},q.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},q.prototype.compareOperator=function(L,H){return L===H},Object.defineProperty(q.prototype,"filterCardStyle",{get:function(){return{"background-color":this.viewModel.inputBoxBackgroundColor,color:this.viewModel.inputBoxForegroundColor,"border-color":this.viewModel.inputBoxBorderColor,"font-family":this.viewModel.fontFamily}},enumerable:!1,configurable:!0}),q.prototype.markDirty=function(){this.isDirty=!0,this.sendBufferedFilterChanges(),this.updateConditionsValid()},q.prototype.clearDirty=function(){this.isDirty=!1},q.prototype.getMenuId=function(L){return this.menuIds[L]||(this.menuIds[L]=S.generateId()),this.menuIds[L]},q.prototype.applyFilter=function(L){var H=this,Y=this.viewModel;Y.contract.type=p.Advanced,document.activeElement.blur(),this.getConceptualSchema().then(function(Se){H.updateConditionsValid(Se),H.canApplyFilter()&&H.explorationActivity.doRootActivity(function(Re){H.undoRedo.register("ApplyAdvancedFilter",function(){var _t,yt,He=H.advFilterCard.toSQExpr(Se),Ct=H.viewModel;He?(H.visualAuthoring.updateFilter(Ct.getFilterContainerScope(),Ct.contract,N.fromSQExpr(He)),_t=2):(H.visualAuthoring.updateFilter(Ct.getFilterContainerScope(),Ct.contract,void 0),_t=10),H.clearDirty(),Ct.useDefaultFilter=!1,H.updateRestatement(),H.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(yt=h.createChangeFilterActivity(H.contextActivityService,"Advanced Filter"));var Wt={filter:H.viewModel.contract,changeType:_t,scope:H.viewModel.getFilterContainerScope(),parentActivity:Re,changeFilterActivity:yt};H.onFilterChanged.emit(Wt),yt&&yt.resolve(),H.formatDate(H.advFilterCard)},L)},function(){return H.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneAdvancedFilterApplied,{filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(H.viewModel.getFilterContainerScope().scopeType),viewMode:powerbi.explore.util.getTelemetryViewMode(H.viewModeState.getMode()),isInOutspacePane:Y.isInOutspacePane,isDateTime:H.advFilterCard&&H.advFilterCard.isDateTime})})})},q.prototype.validateFilterInput=function(L){var H=this;this.getConceptualSchema().then(function(Y){L.value&&L.value.stringValue&&!H.advFilterCard.isConditionValid(Y,L)?(L.isInvalid=!0,H.shouldShowErrorFilterPaneIcon(L)&&H.screenReaderService.alert(H.localizationService.get(H.tooltipConfig.tooltipLocalizeTitle))):(L.isInvalid=!1,H.tooltipService.hideTooltip()),H.updateConditionsValid(Y).then(function(){return H.sendBufferedFilterChanges()})})},q.prototype.handleFocusedInputChanged=function(L,H){this.validateFilterInput(H)},q.prototype.handleInputBlur=function(){this.tooltipService.hideTooltip()},q.prototype.changeOperator=function(L){this.viewModel.isMappedToMParameter()||(39===L.keyCode||37===L.keyCode||38===L.keyCode||40===L.keyCode)&&(this.advFilterCard.logicalOperator=0===this.advFilterCard.logicalOperator?1:0,$(L.target).siblings().attr("tabindex","0").focus(),L.stopPropagation(),this.markDirty())},q.prototype.dateTimeSelected=function(L){var H=this;if(this.overlayService.hideAllDropdowns(),L.value.dateValue){var Y=L.value.timeValue.getHours(),Se=L.value.timeValue.getMinutes(),Re=L.value.dateValue.setHours(Y,Se,0,0);L.value.dateValue=new Date(Re),at(L),this.updateConditionsValid().then(function(){return H.markDirty()})}else this.clearDirty()},q.prototype.isValidDate=function(L){return L&&!isNaN(L.getTime())},q.prototype.updateConditionsValid=function(L){return(0,le.mG)(this,void 0,void 0,function(){var H,Y=this;return(0,le.Jh)(this,function(Se){switch(Se.label){case 0:return H=this.isApplyAllOnForThisFilter(),null==L?[3,1]:(this.conditionsValid=this.advFilterCard.areConditionsValid(H,L),[3,3]);case 1:return[4,this.getConceptualSchema().then(function(Re){Y.conditionsValid=Y.advFilterCard.areConditionsValid(H,Re)})];case 2:Se.sent(),Se.label=3;case 3:return this.showInputWarning=this.showInputWarning&&!this.conditionsValid,[2]}})})},q.prototype.canApplyFilter=function(){return this.isDirty&&!this.viewModel.readOnlyState.disabled&&this.conditionsValid},q.prototype.onKeyUp=function(L){L.preventDefault();var H=L.keyCode||L.which;!this.isApplyAllOnForThisFilter()&&13===H&&this.applyFilter()},q.prototype.getLocalizedPlaceholder=function(){return powerbi.formattingService.getCurrentCulture().calendar.patterns.d},q.prototype.isApplyAllOnForThisFilter=function(){var L=this.viewModeState.getConfig().displayOptions.enableMobileFilters;return h.isApplyAllEnabled(this.viewModel.isInOutspacePane||L,this.explorationNavigation)},q.prototype.onApplyAllClicked=function(L){this.isApplyAllOnForThisFilter()&&(L.idsInError?this.showInputWarning=-1!==L.idsInError.indexOf(this.viewModel.id.toString()):this.applyFilter(L.undoRedoActionId))},q.prototype.sendBufferedFilterChanges=function(){this.isApplyAllOnForThisFilter()&&h.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,p.Advanced,this.viewModel.id,this.canApplyFilter(),!1)},q.prototype.isAndOperatorDisabled=function(){return this.viewModel.isMappedToMParameter()||this.viewModel.readOnlyState.disabled},q.prototype.getDisabledToolTipForAndOperator=function(){return this.viewModel.isMappedToMParameter()?this.localizationService.get("DQP_Disabled_Operator"):""},q.prototype.isOrOperatorDisabled=function(){return this.viewModel.isMappedToMParameter()&&!this.viewModel.supportsMultipleValues()||this.viewModel.readOnlyState.disabled},q.prototype.getDisabledToolTipForOrOperator=function(){return this.viewModel.isMappedToMParameter()&&!this.viewModel.supportsMultipleValues()?this.localizationService.get("DQP_Disabled_Operator"):""},q.prototype.showLogicOperators=function(L){var H=L<this.advFilterCard.conditions.length-1;return!H&&this.viewModel.isMappedToMParameter()?!this.viewModel.supportsMultipleValues():H},q.prototype.shouldShowErrorFilterPaneIcon=function(L){return L.isInvalid&&!this.isApplyAllOnForThisFilter()},q.prototype.onInitImpl=function(){this.initialize(),this.initializeHighContrastRules(),this.viewModel.setServices(void 0,void 0,this.viewModeState)},q.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".themeableElement .advancedControl.conditionValue","{ border-color: @buttonForegroundColor !important; }")},q.prototype.initialize=function(){var L=this;this.getConceptualSchema().then(function(H){L.advFilterCard=m.extractAdvFilterCard(L.viewModel.contract),L.updateRestatement(),L.updateModel(H),L.formatDate(L.advFilterCard),L.subscriptionManager=L.eventBridge.createChannelSubscriptionManager().subscribe(D.applyAllClicked,function(Y,Se){return L.onApplyAllClicked(Se)}).subscribe(D.filterContainerChanged,function(Y,Se){return L.onFilterContainerChanged(Se)}).subscribe(powerbi.explore.services.events.explorationSlowDataSourceSettingsLoaded,function(Y,Se){return L.ngZone.run(function(){Se.isApplyAllButtonEnabledChanged&&(L.showInputWarning=!1)})})}).catch(function(){return L.telemetryService.logEvent(powerbi.telemetry.EXLoadFilterError,{message:"Conceptual schema could not be found."})}),this.showInputWarning=!1},q.prototype.getConceptualSchema=function(){var L=this.dataSources.get();return this.conceptualSchemaProxy.get(L)},q.prototype.updateModel=function(L){if(this.advFilterCard.loadOperators(L,this.aggrOps,this.viewModel.isMappedToMParameter()),this.advFilterCard.operators){var Y=this.advFilterCard.field.getMetadata(L);Y&&(this.advFilterCard.isDateTime=!!Y.type.dateTime),this.advFilterCard.ensureConditions(this.viewModel.isMappedToMParameter(),this.viewModel.supportsMultipleValues());var Se=this.advFilterCard.conditions;this.viewModel.updateFilterProperties(L,this.visualPlugin,this.aggrOps);for(var Re=0,He=Se;Re<He.length;Re++){var Ct=He[Re];Ct&&Ct.value&&(Ct.value.formatter=this.viewModel.formatter)}this.updateConditionsValid(L),this.viewModel.updateViewState()}else this.telemetryService.logEvent(powerbi.telemetry.EXLoadFilterError,{message:"Filter operators failed to load."})},q.prototype.formatDate=function(L){if(L.isDateTime)for(var H=0,Y=L.conditions;H<Y.length;H++)at(Y[H])},q.prototype.updateRestatement=function(){var L=this.viewModel;L.useDefaultFilter||L.contract.type!==p.Advanced||L.setRestatement(this.advFilterCard.getRestatement(L.formatter))},q.prototype.onFilterContainerChanged=function(L){var H=this,Y=this.viewModel;if(L.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(L.changeType,10)&&this.isApplyAllOnForThisFilter())this.showInputWarning=!1,this.advFilterCard.conditions.map(function(Re){var He;Re.operator&&!Re.valueRequired&&(Re.operator=9,H.markDirty()),(null===(He=Re.value)||void 0===He?void 0:He.stringValue)&&(Re.value=new powerbi.data.ConditionValue("",Re.value.formatter),H.markDirty())});else if(L.filter===Y.contract&&jsCommon.EnumExtensions.hasFlag(L.changeType,2)){var Se=m.extractAdvFilterCard(L.filter);this.advFilterCard.conditions=Se.conditions,this.advFilterCard.logicalOperator=Se.logicalOperator,this.updateRestatement(),this.advFilterCard.ensureConditions(this.viewModel.isMappedToMParameter(),this.viewModel.supportsMultipleValues())}},q.\u0275fac=function(H){return new(H||q)(e.\u0275\u0275directiveInject(ge.C),e.\u0275\u0275directiveInject(f.i),e.\u0275\u0275directiveInject(n.r),e.\u0275\u0275directiveInject(i.D),e.\u0275\u0275directiveInject(E.J),e.\u0275\u0275directiveInject(I.Z),e.\u0275\u0275directiveInject(d.z),e.\u0275\u0275directiveInject(a.vZ),e.\u0275\u0275directiveInject(l.g),e.\u0275\u0275directiveInject(c.o),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(j.F),e.\u0275\u0275directiveInject(s.g),e.\u0275\u0275directiveInject(x.y0),e.\u0275\u0275directiveInject(ie.a),e.\u0275\u0275directiveInject(re.z),e.\u0275\u0275directiveInject(w.kc),e.\u0275\u0275directiveInject(T.$),e.\u0275\u0275directiveInject(Z.D))},q.\u0275cmp=e.\u0275\u0275defineComponent({type:q,selectors:[["advanced-filter"]],inputs:{viewModel:"viewModel"},outputs:{onFilterChanged:"onFilterChanged"},decls:1,vars:1,consts:[["class","advanced",3,"ngStyle",4,"ngIf"],[1,"advanced",3,"ngStyle"],["localize","ShowItemsWhenValue","localizeTooltip","ShowItemsWhenValue",1,"description"],[4,"ngFor","ngForOf"],["class","applyFilter smallFontSize","localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",3,"disabled","click",4,"ngIf"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","panelClass","pbi-modern-select-panel themeableElement","disableOptionCentering","true",1,"comparisonOperator","advancedControl","pbi-modern-select",3,"aria-label","ngModel","ngStyle","disabled","compareWith","ngModelChange"],[3,"value","ngStyle","title",4,"ngFor","ngForOf"],["floatLabel","never","class","pbi-form-field",4,"ngIf"],["class","datetime datetimePicker","pbiLazyLoadContents","moduleConfig",3,"ngClass",4,"ngIf"],["role","radiogroup","class","logicalOperator advancedControl",3,"keydown",4,"ngIf"],[3,"value","ngStyle","title"],["floatLabel","never",1,"pbi-form-field"],["id","inputTheme",1,"advancedControl","conditionValue","flex","themeableElement",3,"ngStyle","hidden"],["matInput","","autocomplete","off","type","text","spellcheck","false",1,"item-fill","themeableElement",3,"ngModel","ngStyle","disabled","placeholder","ngModelChange","blur"],["class","errorIcon item-auto",3,"pbi-tooltip",4,"ngIf"],[1,"errorIcon","item-auto",3,"pbi-tooltip"],["sheet","filterPaneIcons","symbolId","alert"],["pbiLazyLoadContents","moduleConfig",1,"datetime","datetimePicker",3,"ngClass"],[1,"datePicker","flex"],[1,"datePickerSelector",3,"ariaLabelForInput","id","ngModel","ngStyle","placeholder","disabled","ngModelChange"],[3,"ngModel","ngModelChange"],["role","radiogroup",1,"logicalOperator","advancedControl",3,"keydown"],["role","radio",1,"logicalOperatorField",3,"title"],["type","radio",3,"ngModel","value","disabled","checked","ngModelChange"],[1,"glyphicon","glyph-mini",3,"ngClass"],["localize","Logical_And_Operator",1,"operatorText"],["localize","Logical_Or_Operator",1,"operatorText"],["localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",1,"applyFilter","smallFontSize",3,"disabled","click"]],template:function(H,Y){1&H&&e.\u0275\u0275template(0,$e,4,5,"div",0),2&H&&e.\u0275\u0275property("ngIf",Y.advFilterCard)},directives:[v.NgIf,v.NgStyle,W.X,F.r,v.NgForOf,k.gD,R.x,A.JJ,A.On,G.ey,fe.KE,Q.Nt,A.Fj,r.i,C.k,v.NgClass,J.N,se.l,A._],pipes:[oe,K],styles:['.advanced[_ngcontent-%COMP%]{padding-top:4px}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   .datetimePickerOutspace[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .filterOutspaceModern.card   [_nghost-%COMP%]   .datetimePickerOutspace[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:inherit}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-underline, .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix, .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix{padding-bottom:0}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after{color:inherit;border-left-width:3px;border-right-width:3px;border-top-width:6px;right:4px}html:not([dir="rtl"]).filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html:not([dir="rtl"]).filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html:not([dir="rtl"])   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html:not([dir="rtl"])   .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   html:not([dir="rtl"])[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   html:not([dir="rtl"])   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after{margin-right:2px}html[dir="rtl"].filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html[dir="rtl"].filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html[dir="rtl"]   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html[dir="rtl"]   .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   html[dir="rtl"][_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   html[dir="rtl"]   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after{margin-left:2px}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%], .filterOutspaceModern.card   [_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{background-color:inherit;color:inherit;font-family:inherit}.advanced[_ngcontent-%COMP%]   .datePicker[_ngcontent-%COMP%]   .datePickerSelector[_ngcontent-%COMP%]{margin:2px 0;width:100%}.advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{min-height:24px;padding:2px 6px}.advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:4px 0 6px}.advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%]{background-color:inherit;display:block;width:100%;box-sizing:border-box;margin:2px 0;outline:0;padding:0;min-height:24px}.advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{padding:8px 0}.advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField.disabledOperator[_ngcontent-%COMP%]{color:var(--gray-80, #B3B0AD)}.advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]   .operatorText[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}.advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]{color:inherit;background:transparent;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);border-radius:2px;box-sizing:border-box;display:flex}.advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background-color:var(--white-color, #FFF)}.advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;margin:7px 3px}.advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%]{display:inline-block;border-color:var(--gray-60, #C8C6C4);background-color:var(--white-color, #FFF);border-radius:2px;padding-left:3px;position:initial;font-family:inherit}.advanced   .newPaneColors   .filterPaneOutspaceModern[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%], .newPaneColors   .filterPaneOutspaceModern   [_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{min-height:24px;color:var(--black-color, #000);background-color:var(--white-color, #FFF);padding:2px 6px}','.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]{padding:4px 0 28px;border-radius:2px;margin:4px 0}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{color:var(--white-color, #FFF);height:24px;border:1px solid var(--black-color, #000);border-radius:0;padding:0 6px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:4px 0 6px}html:not([dir="rtl"]).filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html:not([dir="rtl"]).filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html:not([dir="rtl"])   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html:not([dir="rtl"])   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   html:not([dir="rtl"])[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   html:not([dir="rtl"])   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{float:left}html[dir="rtl"].filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html[dir="rtl"].filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html[dir="rtl"]   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html[dir="rtl"]   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   html[dir="rtl"][_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   html[dir="rtl"]   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{float:right}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color-alt, #444444);display:block;width:100%;height:24px;box-sizing:border-box;margin:2px 0;outline:0;padding:0}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-underline, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-underline{display:none}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper{border:0px;padding:0!important}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper .mat-form-field-infix, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper .mat-form-field-infix{padding:0!important;border:0px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after{color:currentColor!important;border-left-width:3px;border-right-width:3px;border-top-width:6px;right:4px}html:not([dir="rtl"]).filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html:not([dir="rtl"]).filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html:not([dir="rtl"])   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html:not([dir="rtl"])   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   html:not([dir="rtl"])[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   html:not([dir="rtl"])   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after{margin-right:2px}html[dir="rtl"].filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html[dir="rtl"].filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html[dir="rtl"]   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html[dir="rtl"]   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   html[dir="rtl"][_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   html[dir="rtl"]   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after{margin-left:2px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     label .mat-radio-outer-circle, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     label .mat-radio-outer-circle{border-width:1px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{padding:4px 0}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%]{margin-right:8px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]{color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);box-sizing:border-box;display:flex}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background-color:var(--neutral-primary-color-alt, #444444)}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%]{display:inline-block;border:1px solid var(--black-color, #000);border-radius:1px;padding-left:5px;position:initial}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]{color:var(--gray-180, #252423);border-color:var(--gray-60, #C8C6C4);border-radius:2px;background-color:var(--white-color, #FFF)}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF)}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-radius:2px}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%]{border-color:var(--gray-60, #C8C6C4)}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{background-color:transparent}',".exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{line-height:32px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]{height:32px;background:var(--fluentThemeWhiteColor);border:0;border-bottom:1px solid var(--fluentThemeNeutralTertiaryColor);margin:0 0 15px;border-radius:2px;color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:inherit;color:var(--fluentThemeNeutralDarkColor);height:100%}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-empty.mat-form-field-label, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-empty.mat-form-field-label{color:var(--fluentThemeNeutralTertiaColor)!important;padding-left:10px;padding-right:10px;height:32px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{float:none!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{margin:15px 0;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]{margin-right:80px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%]{margin-right:30px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{color:var(--fluentThemeNeutralSecondaryAltColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{border-radius:4px;border:2px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%]{position:absolute;right:0;bottom:20px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-label, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-label{width:auto}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{text-align:right}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]{margin-left:80px;margin-right:initial}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%]{margin-left:30px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%]{left:0}*[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}"]}),q}();function at(q){q.value.value=powerbi.formattingService.formatValue(q.value.dateValue,"d")}var dt=t(88082),Fe=t(180),be=t(33839),_e=t(3085),Oe=jsCommon.EnumExtensions,Xe=powerbi.explore.services.events,nt=powerbi.explore.FilterUtils;function ht(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",8),e.\u0275\u0275listener("click",function(Se){e.\u0275\u0275restoreView(H);var Re=e.\u0275\u0275nextContext().index;return e.\u0275\u0275nextContext(2).delete(Se,Re)}),e.\u0275\u0275elementEnd()}}var bt=function(L){return{includeExcludeFilterOutspace:L}},Ft=function(L){return{"font-size":L}};function ke(q,L){if(1&q&&(e.\u0275\u0275elementStart(0,"li",5),e.\u0275\u0275elementStart(1,"div",6),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,ht,1,0,"button",7),e.\u0275\u0275elementEnd()),2&q){var H=L.$implicit,Y=L.index,Se=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,bt,Se.filterViewModel.isInOutspacePane)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(10,Ft,Se.filterViewModel.fontSize)),e.\u0275\u0275attribute("aria-label",H.text)("ariaSetsize",Se.viewModel.points.length)("ariaPosinset",Y+1)("ariaSelected",!0),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",H.text," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!Se.filterViewModel.isFilterLocked())}}function Ae(q,L){if(1&q&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275elementStart(1,"div",2),e.\u0275\u0275elementStart(2,"ul",3),e.\u0275\u0275template(3,ke,4,12,"li",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&q){var H=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiScrollbar",H.scrollbarsConfig),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",H.viewModel.points)}}var Le=function(){function q(L,H,Y,Se,Re,He,Ct,_t,yt,Wt){var tn=this;this.conceptualSchemaProxy=L,this.contextActivityService=H,this.dataSources=Y,this.displayNameService=Se,this.eventBridge=Re,this.explorationNavigation=He,this.featureSwitchService=Ct,this.includeExcludeService=_t,this.ngZone=yt,this.visualAuthoring=Wt,this.isExpanded=!1,this.currentZone=this.explorationNavigation.getCurrentZone(),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(Xe.filterContainerChanged,function(sn,nn){return tn.onFilterContainerChanged(nn)}),this.scrollbarsConfig={ignoreOverlay:!1,ignoreMobile:!1}}return q.prototype.ngOnInit=function(){var L=this;this.ngZone.run(function(){return L.onInitImpl()})},q.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},q.prototype.toggleExpand=function(){this.isExpanded=!this.isExpanded},q.prototype.deleteFilter=function(L){var Y,H=this.filterViewModel.getFilterContainerScope();this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Y=nt.createChangeFilterActivity(this.contextActivityService,"Remove Filter")),this.visualAuthoring.removeFilter(this.filterViewModel.contract,H,void 0,Y),Y&&Y.resolve(),L.stopPropagation()},q.prototype.delete=function(L,H){if(1!==this.viewModel.points.length){var Y=this.filterViewModel.contract;if(Y.filterExpressionMetadata&&!_.isEmpty(Y.filterExpressionMetadata.cachedValueItems)){var Se=this.viewModel.points[H];nt.removeEntryFromFilterCache(Se.columns,Se.values,Y.filterExpressionMetadata)}this.viewModel.points.splice(H,1),this.includeExcludeService.updateFilterContainer(this.filterViewModel,this.viewModel),L.stopPropagation()}else this.deleteFilter(L)},q.prototype.onInitImpl=function(){this.updateViewModel()},q.prototype.updateViewModel=function(){var L=this,H=this.dataSources.get();this.conceptualSchemaProxy.get(H).then(function(Y){var Se=L.filterViewModel.contract;L.viewModel=L.includeExcludeService.buildViewModel(Se.filter,Se.type,Y,L.displayNameService,Se.filterExpressionMetadata)})},q.prototype.getFilterLockTooltip=function(){return this.filterViewModel.isFilterLocked()?"FilterPane_FilterLocked":this.filterViewModel.contract.isLockedInViewMode?"FilterPane_UnlockFilter":"FilterPane_LockFilter"},q.prototype.onFilterContainerChanged=function(L){L.filter===this.filterViewModel.contract&&Oe.hasFlag(L.changeType,2)&&this.updateViewModel()},q.prototype.toggleFilterVisibility=function(L,H){L.stopPropagation();var Y=this.filterViewModel;this.visualAuthoring.toggleFilterVisibility(Y.getFilterContainerScope(),Y.contract)},q.prototype.toggleFilterLockState=function(L,H){L.stopPropagation();var Se,Y=this.filterViewModel;this.visualAuthoring.toggleFilterLock(Y.getFilterContainerScope(),Y.contract),this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Se=nt.createChangeFilterActivity(this.contextActivityService,"Include Exclude Filter"));var Re={filter:Y.contract,changeType:2,scope:Y.getFilterContainerScope(),changeFilterActivity:Se};nt.notifyFilterContainerChangedByUser(this.eventBridge,Re),Se&&Se.resolve()},q.\u0275fac=function(H){return new(H||q)(e.\u0275\u0275directiveInject(f.i),e.\u0275\u0275directiveInject(n.r),e.\u0275\u0275directiveInject(i.D),e.\u0275\u0275directiveInject(M.O),e.\u0275\u0275directiveInject(E.J),e.\u0275\u0275directiveInject(d.z),e.\u0275\u0275directiveInject(a.vZ),e.\u0275\u0275directiveInject(o.Y),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(T.$))},q.\u0275cmp=e.\u0275\u0275defineComponent({type:q,selectors:[["include-exclude-filter"]],inputs:{filterViewModel:"filterViewModel"},decls:1,vars:1,consts:[["class","include-exclude-modern-filter-items",4,"ngIf"],[1,"include-exclude-modern-filter-items"],[3,"pbiScrollbar"],["role","listbox"],["class","include-exclude-modern-filter-item flex",3,"ngClass",4,"ngFor","ngForOf"],[1,"include-exclude-modern-filter-item","flex",3,"ngClass"],["tabindex","0","role","option",1,"caption","smallFontSize","trimmedTextWithEllipsis","unselectable","item-fill",3,"ngStyle"],["type","button","class","delete glyphicon pbi-glyph-close glyph-micro","localizeTooltip","Delete",3,"click",4,"ngIf"],["type","button","localizeTooltip","Delete",1,"delete","glyphicon","pbi-glyph-close","glyph-micro",3,"click"]],template:function(H,Y){1&H&&e.\u0275\u0275template(0,Ae,4,2,"div",0),2&H&&e.\u0275\u0275property("ngIf",Y.viewModel)},directives:[v.NgIf,_e.r,v.NgForOf,v.NgClass,v.NgStyle,F.r],styles:[".include-exclude-modern-filter-items[_ngcontent-%COMP%]{max-height:150px;display:flex;flex-direction:column;margin-top:8px}.include-exclude-modern-filter-items[_ngcontent-%COMP%]   .include-exclude-modern-filter-item[_ngcontent-%COMP%]{box-sizing:border-box;padding-right:4px;padding-bottom:4px}.include-exclude-modern-filter-items[_ngcontent-%COMP%]   .includeExcludeFilterOutspace[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .include-exclude-modern-filter-items[_ngcontent-%COMP%]   .includeExcludeFilterOutspace[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .include-exclude-modern-filter-items[_ngcontent-%COMP%]   .includeExcludeFilterOutspace[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:inherit}.include-exclude-modern-filter-items[_ngcontent-%COMP%]   .scroll-element.scroll-y[_ngcontent-%COMP%]{width:4px!important}.include-exclude-modern-filter-items[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .include-exclude-modern-filter-items[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .include-exclude-modern-filter-items[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:transparent;color:var(--neutral-tertiary-alt-color, #C8C8C8)}"]}),q}(),Ve=t(83757),tt=powerbi.common.ArrowVerticalPosition,lt=powerbi.explore.services.events,de=powerbi.explore.util.FilterPaneUtil,te=powerbi.explore.services.filterRestatementUtil,ee=powerbi.explore.contracts.FilterType,X=powerbi.explore.FilterUtils,Be=jsCommon.FocusManager,xe=jsCommon.FocusGroupNavigation,je=powerbi.data.RestatementHelper,Ye=powerbi.data.SemanticFilter;function Ie(q,L){1&q&&(e.\u0275\u0275elementStart(0,"i",23),e.\u0275\u0275element(1,"svg-use-symbol",24),e.\u0275\u0275elementEnd())}function rt(q,L){1&q&&e.\u0275\u0275element(0,"i",25)}function st(q,L){if(1&q&&(e.\u0275\u0275elementStart(0,"i"),e.\u0275\u0275element(1,"svg-use-symbol",26),e.\u0275\u0275elementEnd()),2&q){var H=e.\u0275\u0275nextContext(2);e.\u0275\u0275classMapInterpolate1("filterPaneIcon ",H.getIconClassName(),""),e.\u0275\u0275advance(1),e.\u0275\u0275property("symbolId",H.getIconClassName())}}function ct(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",27),e.\u0275\u0275listener("ngModelChange",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(2).editablelabelInputName=Re})("blur",function(){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(2).rename()}),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngModel",Y.editableLabelName)}}var ft=function(L){return{visibility:L}};function Pt(q,L){if(1&q&&e.\u0275\u0275element(0,"button",28),2&q){var H=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(5,ft,H.isEditMode?"":"visible"))("ngClass",H.isFilterExpanded()?"expand":"collapse")("pbi-tooltip",H.getExpandTooltipConfig()),e.\u0275\u0275attribute("aria-expanded",H.isFilterExpanded())("aria-label",H.editableLabelName+" "+H.viewModel.chevronExpandCollapseDescription)}}function Mt(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",29),e.\u0275\u0275listener("click",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(2).deleteFilter(Re)}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(5,ft,Y.isEditMode?"":"visible"))("pbi-tooltip",Y.getDeleteTooltipConfig()),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,3,"FilterPane_DeleteFilter"))}}var St=function(L){return{color:L}};function zt(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",30),e.\u0275\u0275listener("click",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(2).clearFilter(Re)}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",!Y.viewModel.hasRestatement)("ngStyle",e.\u0275\u0275pureFunction1(7,St,Y.viewModel.foregroundColor))("pbi-tooltip",Y.getClearFilterTooltipConfig()),e.\u0275\u0275attribute("aria-disabled",!Y.viewModel.hasRestatement)("aria-label",e.\u0275\u0275pipeBind1(1,5,Y.clearFilterTooltip))}}var Yt=function(L,H){return{"pbi-glyph-lock":L,"pbi-glyph-unlock":H}},qt=function(L){return{visibility:L}};function pe(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",31),e.\u0275\u0275listener("click",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(2).toggleFilterLockState(Re)}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(7,Yt,Y.viewModel.isFilterLocked(),!Y.viewModel.isFilterLocked()))("disabled",!Y.isEditMode)("ngStyle",e.\u0275\u0275pureFunction1(10,qt,Y.viewModel.isFilterLocked()?"visible":""))("pbi-tooltip",Y.getLockTooltipConfig()),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,5,Y.getFilterLockTooltip()))}}function B(q,L){1&q&&e.\u0275\u0275element(0,"button",32)}function U(q,L){1&q&&e.\u0275\u0275element(0,"button",33)}function z(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",30),e.\u0275\u0275listener("click",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(2).clearFilter(Re)}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",!Y.viewModel.hasRestatement)("ngStyle",e.\u0275\u0275pureFunction1(6,St,Y.viewModel.foregroundColor))("pbi-tooltip",Y.getClearFilterTooltipConfig()),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,4,Y.clearFilterTooltip))}}var ae=function(L,H){return{"pbi-glyph-view":L,"pbi-glyph-hide3":H}};function ye(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",34),e.\u0275\u0275listener("click",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(2).toggleFilterVisibility(Re)}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(6,ae,!Y.viewModel.contract.isHiddenInViewMode,Y.viewModel.contract.isHiddenInViewMode))("ngStyle",e.\u0275\u0275pureFunction1(9,ft,Y.isEditMode&&Y.viewModel.isFilterHidden()?"visible":""))("pbi-tooltip",Y.getHiddenTooltipConfig()),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,4,Y.getFilterHiddenTooltip()))}}function De(q,L){if(1&q&&(e.\u0275\u0275elementStart(0,"option",39),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&q){var H=L.$implicit,Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngValue",H),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",Y.getLabelForAsAggregationOption(!!H),"")}}var Ke=function(){return[!0,!1]};function Qe(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",35),e.\u0275\u0275element(1,"span",36),e.\u0275\u0275elementStart(2,"select",37),e.\u0275\u0275listener("ngModelChange",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(2).viewModel.isLinkedAsAggregation=Re})("change",function(){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(2).updateLinkAsAggregation()}),e.\u0275\u0275template(3,De,2,2,"option",38),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("localize",Y.getResourceIdForAsAggregationDropdown()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",Y.viewModel.isLinkedAsAggregation)("disabled",Y.viewModel.discourageAggregation),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(4,Ke))}}function Ge(q,L){if(1&q&&(e.\u0275\u0275element(0,"label",46),e.\u0275\u0275pipe(1,"localize")),2&q){var H=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("pbi-tooltip",H.getFilterTypeTooltipConfig()),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,2,H.getFilterTypeTooltip()))}}var pt=function(L,H,Y,Se){return{"background-color":L,color:H,"border-color":Y,"font-family":Se}};function mt(q,L){if(1&q&&(e.\u0275\u0275elementStart(0,"mat-option",47),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&q){var H=L.$implicit,Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",H)("ngStyle",e.\u0275\u0275pureFunction4(4,pt,Y.viewModel.inputBoxBackgroundColor,Y.viewModel.inputBoxForegroundColor,Y.viewModel.inputBoxBorderColor,Y.viewModel.fontFamily))("disabled",!Y.isEditMode&&5===H.type),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",H.label,"")}}var xt=function(L){return{"font-size":L}},Bt=function(L){return{invalidType:L}},Qt=function(L,H,Y){return{"background-color":L,color:H,"border-color":Y}};function en(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",40),e.\u0275\u0275elementStart(1,"div",41),e.\u0275\u0275element(2,"span",42),e.\u0275\u0275template(3,Ge,2,4,"label",43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-select",44),e.\u0275\u0275listener("ngModelChange",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(2).viewModel.cardType=Re})("selectionChange",function(){e.\u0275\u0275restoreView(H);var Re=e.\u0275\u0275nextContext(2);return Re.switchCardType(Re.cardType)}),e.\u0275\u0275template(5,mt,2,9,"mat-option",45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(8,xt,Y.viewModel.fontSize)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.isEditMode&&Y.isInOutspacePane),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("aria-label",Y.ariaLabelFilterType),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(10,Bt,Y.viewModel.isInvalidCardType()))("ngModel",Y.viewModel.cardType)("compareWith",Y.compareCardType)("ngStyle",e.\u0275\u0275pureFunction3(12,Qt,Y.viewModel.inputBoxBackgroundColor,Y.viewModel.inputBoxForegroundColor,Y.viewModel.inputBoxBorderColor)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",Y.viewModel.availableTypes)}}function Nt(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"advanced-filter",51),e.\u0275\u0275listener("onFilterChanged",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(3).onFilterChanged(Re)}),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",Y.viewModel)}}function $t(q,L){if(1&q&&e.\u0275\u0275element(0,"filter-visual",52),2&q){var H=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",H.viewModel)("isInOutspacePane",H.isInOutspacePane)("expanded",H.viewModel.readOnlyState.expanded)}}function Zt(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"top-n-filter",51),e.\u0275\u0275listener("onFilterChanged",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(3).onFilterChanged(Re)}),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",Y.viewModel)}}function Ht(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"relative-filter",53),e.\u0275\u0275listener("onFilterChanged",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(3).onFilterChanged(Re.args)}),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",Y.viewModel)("filterType",Y.viewModel.cardType.type)}}function Kt(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"relative-filter",53),e.\u0275\u0275listener("onFilterChanged",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext(3).onFilterChanged(Re.args)}),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",Y.viewModel)("filterType",Y.viewModel.cardType.type)}}function dn(q,L){if(1&q&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Nt,1,1,"advanced-filter",48),e.\u0275\u0275template(2,$t,1,3,"filter-visual",49),e.\u0275\u0275template(3,Zt,1,1,"top-n-filter",48),e.\u0275\u0275template(4,Ht,1,2,"relative-filter",50),e.\u0275\u0275template(5,Kt,1,2,"relative-filter",50),e.\u0275\u0275elementEnd()),2&q){var H=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",2===H.viewModel.cardType.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0===H.viewModel.cardType.type||4===H.viewModel.cardType.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",5===H.viewModel.cardType.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",8===H.viewModel.cardType.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",10===H.viewModel.cardType.type)}}function hn(q,L){if(1&q&&e.\u0275\u0275element(0,"include-exclude-filter",54),2&q){var H=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("filterViewModel",H.viewModel)}}var gn=function(L,H,Y,Se,Re){return{"background-color":L,"border-color":H,color:Y,"font-family":Se,"font-size":Re}},Gt=function(L,H){return{hasRestateHighlight:L,withMobileInvalidIcon:H}},rn=function(L){return{cardExpanded:L}};function an(q,L){if(1&q){var H=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275elementStart(1,"div",2),e.\u0275\u0275listener("singleClickAction",function(){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext().toggle()}),e.\u0275\u0275elementStart(2,"div",3),e.\u0275\u0275elementStart(3,"div",4),e.\u0275\u0275listener("contextmenu",function(Re){return e.\u0275\u0275restoreView(H),e.\u0275\u0275nextContext().showContextMenu(Re)}),e.\u0275\u0275template(4,Ie,2,0,"i",5),e.\u0275\u0275template(5,rt,1,0,"i",6),e.\u0275\u0275template(6,st,2,4,"i",7),e.\u0275\u0275template(7,ct,1,1,"input",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Pt,1,7,"button",9),e.\u0275\u0275template(9,Mt,2,7,"button",10),e.\u0275\u0275template(10,zt,2,9,"button",11),e.\u0275\u0275template(11,pe,2,12,"button",12),e.\u0275\u0275template(12,B,1,0,"button",13),e.\u0275\u0275template(13,U,1,0,"button",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",15),e.\u0275\u0275elementStart(15,"span",1),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",16),e.\u0275\u0275template(18,z,2,8,"button",11),e.\u0275\u0275template(19,ye,2,11,"button",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,Qe,4,5,"div",18),e.\u0275\u0275elementStart(21,"div",19),e.\u0275\u0275template(22,en,6,16,"div",20),e.\u0275\u0275template(23,dn,6,5,"div",21),e.\u0275\u0275template(24,hn,1,1,"include-exclude-filter",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&q){var Y=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("card ",Y.getFilterClass(),""),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction5(41,gn,Y.viewModel.backgroundColor,Y.viewModel.borderColor,Y.viewModel.foregroundColor,Y.viewModel.fontFamily,Y.viewModel.fontSize)),e.\u0275\u0275advance(1),e.\u0275\u0275property("singleClickDisabled",Y.viewModel.isEditingLabel)("singleClickTimeout",Y.isEditMode?300:0),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbi-tooltip",!Y.tooltipConfigManager.getTooltipConfig()),e.\u0275\u0275attribute("tooltip",Y.viewModel.readOnlyState.invalid),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(47,Gt,Y.isFilterApplied(),Y.showMobileInvalidIcon))("ngStyle",e.\u0275\u0275pureFunction1(50,xt,Y.viewModel.fontSize)),e.\u0275\u0275attribute("aria-label",Y.getAriaLabelString())("title",Y.getTooltip())("tabindex",Y.isEditMode?0:null),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.viewModel.readOnlyState.invalid),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showInputWarningIcon&&!Y.isMobileFilter()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=Y.getIconClassName()),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiEditableLabel",Y.pbiEditableLabelOptions)("pbiEditableLabelValue",Y.editableLabelName)("pbiEditableLabelMode",Y.isEditMode)("pbiEditableLabelEditable",!!Y.isInOutspacePane&&!!Y.viewModel.isEditingLabel)("pbiEditableLabelSearchString",Y.searchFiltersInput),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.canExpand&&!Y.shouldHideExpandForEmptyContent()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showDeleteIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showTopRowClearIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showLockIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showMobileInvalidIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showMobileEditIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(52,rn,Y.isFilterExpanded())),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("restatement ",Y.restatementLineStyleRule,""),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(54,xt,Y.viewModel.fontSize)),e.\u0275\u0275attribute("title",Y.getRestatement()),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(Y.getRestatement()),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Y.showBottomRowClearIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showVisibilityIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showLinkFieldOptions()),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",Y.shouldHideFilterContent()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showFilterTypeSelection()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.viewModel.cardType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.viewModel.readOnlyState&&(Y.viewModel.readOnlyState.type===Y.FilterType.Include||Y.viewModel.readOnlyState.type===Y.FilterType.Exclude)&&Y.isFilterExpanded())}}var ln=function(){function q(L,H,Y,Se,Re,He,Ct,_t,yt,Wt,tn,sn,nn,on,vn,fn,mn,cn,Lt,_n){this.contextActivityService=L,this.conceptualSchemaProxy=H,this.dataSources=Y,this.displayNameService=Se,this.dropdown=Re,this.eventBridge=He,this.explorationActivity=Ct,this.explorationCapabilities=_t,this.explorationNavigation=yt,this.featureSwitchService=Wt,this.includeExcludeService=tn,this.highContrastCssGenerationService=sn,this.localizationService=nn,this.networkAvailabilityService=on,this.telemetryService=vn,this.themeService=fn,this.screenReaderService=mn,this.viewModeState=cn,this.visualAuthoring=Lt,this.visualTimeSynchronizationService=_n,this.moveFilter=new e.EventEmitter,this.FilterType=ee,this.ariaLabelFilterType=this.localizationService.get("FilterCardTypeSwitchLabel"),this.allowChangeFilterTypes=!0,this.showInputWarningIconInternal=!1,this.showInputEditIconInternal=!1,this.initializeHighContrastRules()}return Object.defineProperty(q.prototype,"editableLabelName",{get:function(){return this.getDisplayName()},enumerable:!1,configurable:!0}),q.prototype.ngOnInit=function(){var L=this,H=this.viewModel;H.updateViewState(),H.updateAvailableTypes(this.featureSwitchService.featureSwitches),H.isInOutspacePane=this.isInOutspacePane,H.filterCardStyleArguments=this.filterCardStyleArguments,this.tooltipConfigManager={getTooltipConfig:function(){return{tooltipDisable:!H.readOnlyState.invalid,tooltipTitle:L.localizationService.get("Invalid_Filter_Tooltip")}}},H.chevronExpandCollapseDescription=this.localizationService.get("FilterCard_ExpandCollapse"),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(lt.filterContainerChanged,function(Y,Se){return L.onFilterContainerChanged(Se)}).subscribe(lt.sectionObjectsEvaluated,function(Y,Se){return L.updateFilterCardStyle()}).subscribe(powerbi.events.visualThemeChanged,function(){return L.updateFilterCardStyle()}).subscribe(lt.podParameterChanged,function(Y,Se){return L.onPodParameterChanged(Se)}).subscribe(lt.explorationSettingsLoaded,function(Y,Se){Se.allowChangeFilterTypesChanged&&L.updateAllowChangeFilterTypeSettings(L.explorationNavigation.getCurrentExploration())}).subscribe(lt.applyAllClicked,function(Y,Se){return L.onApplyAllClicked(Se)}).subscribe(lt.applyAllBufferedFilterCardChanged,function(Y,Se){return L.onApplyAllFilterCardBufferedChanges(Se)}).subscribe(lt.explorationSlowDataSourceSettingsLoaded,function(Y,Se){return function(){Se.isApplyAllButtonEnabledChanged&&(L.showInputWarningIconInternal=!1,L.showInputEditIconInternal=!1)}}),this.updateAllowChangeFilterTypeSettings(this.explorationNavigation.getCurrentExploration()),this.initializeDefaultValue(),this.updateRestatement(),this.updateFilterCardStyle(),this.isInOutspacePane&&5===this.viewModel.contract.howCreated&&de.setDrillthroughMetadata(this.viewModel,this.explorationNavigation),this.pbiEditableLabelOptions={disableClick:!0,customTooltip:!0,inputMatchLabelWidth:!1,onEdit:function(){return L.editLabelModern()},onBlur:function(){L.blurLabel(),L.rename()}}},q.prototype.rename=function(){if(!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(this.editablelabelInputName)){this.viewModel.contract.displayName=this.editablelabelInputName;var L=this.viewModel;this.visualAuthoring.renameFilter(L.getFilterContainerScope(),L.contract,this.editablelabelInputName),this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Rename",isInOutspacePane:this.isInOutspacePane})}},q.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},q.prototype.ngOnChanges=function(L){L.searchFiltersInput&&(this.hiddenBySearchInput=de.shouldHideFilterBySearchInput(this.viewModel,this.searchFiltersInput,this.featureSwitchService))},q.prototype.compareCardType=function(L,H){return L.type===H.type},q.prototype.updateLinkAsAggregation=function(){var L=this.viewModel;this.visualAuthoring.setLinkFieldAsAggregation(L.contract,L.getFilterContainerScope(),L.isLinkedAsAggregation),this.updateLinkAsAggregationOnViewModel()},q.prototype.getLabelForAsAggregationOption=function(L){return this.localizationService.get(L?"LinkField_AsAggregationEnabledText":"LinkField_AsAggregationDisabledText")},q.prototype.getResourceIdForAsAggregationDropdown=function(){return 1===this.explorationNavigation.getCurrentSection().type?"LinkField_AsAggregationForTooltip":"LinkField_AsAggregationForDrillthrough"},q.prototype.isIncludeExclude=function(){return this.viewModel.contract.type===ee.Include||this.viewModel.contract.type===ee.Exclude},q.prototype.getDisplayName=function(){return this.viewModel.contract.displayName?this.viewModel.contract.displayName:this.viewModel.displayName},q.prototype.getRestatement=function(){var L;return this.viewModel.contract.type===ee.Passthrough?L="":(L=this.viewModel.getRestatement())||(L=this.localizationService.get("FilterRestatement_IsAll")),L},q.prototype.isFilterApplied=function(){return this.viewModel.hasRestatement},Object.defineProperty(q.prototype,"isFilterHidden",{get:function(){return this.isEditMode?this.hiddenBySearchInput:this.viewModel.isFilterHidden()||this.hiddenBySearchInput},enumerable:!1,configurable:!0}),q.prototype.getTooltip=function(){return this.viewModel.isInvalidForMappedColumn?this.localizationService.get("DQP_Invalid_FilterCard_Tooltip"):this.isIncludeExclude()||this.viewModel.contract.type===ee.Passthrough?this.getDisplayName():this.viewModel.tooltip},q.prototype.getIconClassName=function(){var L=this.viewModel;if(5===L.howCreated&&L.contract&&!L.contract.isTransient){if(L.isMeasure)return"fieldListMeasure";if(L.isLinkedAsAggregation)return"fieldListNumeric"}},Object.defineProperty(q.prototype,"canExpand",{get:function(){return this.isEditMode?this.viewModel.canExpandManually:this.viewModel.canExpandManually&&!this.viewModel.isFilterLocked()},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"showDeleteIcon",{get:function(){return!(!this.isEditMode&&!this.isIncludeExclude()&&this.viewModel.contract.type!==ee.Passthrough)&&(this.featureSwitchService.featureSwitches.onObject&&5===this.viewModel.howCreated?this.viewModel.contract.isTransient:this.viewModel.canDeleteManually)},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"showVisibilityIcon",{get:function(){return!this.useMobileFilterConfig()&&this.viewModel.canHideManually&&(this.isEditMode||this.viewModel.isFilterHidden())},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"showLockIcon",{get:function(){return this.viewModel.canLockManually&&(this.isEditMode||this.viewModel.isFilterLocked())},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"showMobileInvalidIcon",{get:function(){return!!this.isMobileFilter()&&this.showInputWarningIcon},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"showMobileEditIcon",{get:function(){return!!this.isMobileFilter()&&this.showInputEditIconInternal},enumerable:!1,configurable:!0}),q.prototype.isFilterExpanded=function(){return!(this.viewModel.isFilterLocked()&&!this.isEditMode)&&this.viewModel.isFilterExpanded()},q.prototype.showFilterTypeSelection=function(){return(this.allowChangeFilterTypes||this.isEditMode)&&this.viewModel.availableTypes&&this.viewModel.availableTypes.length>1&&(!this.viewModel.isSingleSelectionRequired||this.viewModel.isMappedToMParameter()&&!this.viewModel.supportsMultipleValues())&&!this.viewModel.isInvalid()&&!this.isIncludeExclude()},q.prototype.getFilterLockTooltip=function(){return this.viewModel.isFilterLocked()?"FilterPane_FilterLocked":this.viewModel.isFilterLocked()?"FilterPane_UnlockFilter":"FilterPane_LockFilter"},q.prototype.getFilterHiddenTooltip=function(){return this.viewModel.contract.isHiddenInViewMode?"FilterPane_ShowFilter":"FilterPane_HideFilter"},q.prototype.getFilterTypeTooltip=function(){return this.allowChangeFilterTypes?"FilterPane_FilterType_Shown":"FilterPane_FilterType_Hidden"},q.prototype.getFilterTypeTooltipConfig=function(){return{tooltipArrowVerticalPosition:tt.bottom,tooltipLocalizeTitle:this.getFilterTypeTooltip(),tooltipShowOnFocus:!0}},q.prototype.getExpandTooltipConfig=function(){return{tooltipArrowVerticalPosition:tt.bottom,tooltipTitle:this.viewModel.chevronExpandCollapseDescription,tooltipShowOnFocus:!0}},q.prototype.getDeleteTooltipConfig=function(){return{tooltipArrowVerticalPosition:tt.bottom,tooltipLocalizeTitle:"FilterPane_DeleteFilter",tooltipShowOnFocus:!0}},q.prototype.getClearFilterTooltipConfig=function(){return{tooltipArrowVerticalPosition:tt.bottom,tooltipLocalizeTitle:this.clearFilterTooltip,tooltipShowOnFocus:!0}},q.prototype.getLockTooltipConfig=function(){return{tooltipArrowVerticalPosition:tt.bottom,tooltipLocalizeTitle:this.getFilterLockTooltip(),tooltipShowOnFocus:!0}},q.prototype.getHiddenTooltipConfig=function(){return{tooltipArrowVerticalPosition:tt.bottom,tooltipLocalizeTitle:this.getFilterHiddenTooltip(),tooltipShowOnFocus:!0}},q.prototype.getAriaLabelString=function(){var L=this.getDisplayName(),H=this.getRestatement();return H&&(L=L+" "+H),L},q.prototype.onFilterChanged=function(L){this.viewModel.useDefaultFilter&&(L.filter.filter=Ye.getDefaultValueFilter(this.viewModel.contract.expression)),X.notifyFilterContainerChangedByUser(this.eventBridge,L),this.updateRestatement(),this.updateFilterCardStyle()},q.prototype.toggle=function(L){if(void 0===L&&(L=!0),this.canExpand&&!this.shouldHideExpandForEmptyContent()){var H=this.visualTimeSynchronizationService?this.visualTimeSynchronizationService.getAnchorTime():void 0;te.updateRelativeTimeRestatementOnToggle(this.dataSources.get(),this.conceptualSchemaProxy,this.localizationService,this.viewModel,H,this.networkAvailabilityService.isNetworkAvailable());var Y=this.viewModel.contract;if(Y.expanded=!Y.expanded,this.telemetryService.logEvent(powerbi.telemetry.EXToggleFilterCardExpanded,{filterType:powerbi.explore.util.getTelemetryFilterType(Y.type),filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(this.viewModel.getFilterContainerScope().scopeType),fieldKind:powerbi.explore.util.getTelemetryFieldKind(Y.expression),expanded:Y.expanded,viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode()),isInOutspacePane:this.isInOutspacePane}),this.viewModel.updateViewState(),L){var Se=this.viewModel,Re={filter:Se.contract,changeType:16,scope:Se.getFilterContainerScope()};this.eventBridge.publishToChannel(lt.filterContainerChanged,Re)}}},q.prototype.clearFilter=function(L){var H=this;if(L&&L.stopPropagation(),this.viewModel.clearDQPWarning(),this.viewModel.hasDefaultValue)this.restoreDefaultFilter();else if(this.viewModel.contract.filter){var Y={filter:this.viewModel.contract,changeType:10,scope:this.viewModel.getFilterContainerScope()};if(this.isApplyAllOnForThisFilter())X.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.cardType.type,this.viewModel.id,!0,!1),X.notifyFilterContainerChangedByUser(this.eventBridge,Y);else if(this.explorationActivity.tryDoRootActivity(function(He){var _t,Ct=H.viewModel;Y.parentActivity=He,Ct.clearRestatement(),H.visualAuthoring.clearFilter(Ct.getFilterContainerScope(),Ct.contract,He),H.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(_t=X.createChangeFilterActivity(H.contextActivityService,"Clear Filter"),Y.changeFilterActivity=_t),X.notifyFilterContainerChangedByUser(H.eventBridge,Y),_t&&_t.resolve()},function(){return H.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneFilterCleared)})&&(this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Clear",isInOutspacePane:this.isInOutspacePane,viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode())}),L)){var Re=xe.getFocusNextElement(!0,L.target);Be.focus(Re,!0)}}},Object.defineProperty(q.prototype,"showInputWarningIcon",{get:function(){return this.showInputWarningIconInternal},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"clearFilterTooltip",{get:function(){return this.viewModel.hasDefaultValue?"FilterPane_ResetDefaultFilter":"FilterPane_ClearFilter"},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"showTopRowClearIcon",{get:function(){return this.viewModel.canClearManually&&!this.viewModel.isFilterLocked()&&!this.isEditMode},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"showBottomRowClearIcon",{get:function(){return this.viewModel.canClearManually&&this.isEditMode&&this.viewModel.hasRestatement},enumerable:!1,configurable:!0}),q.prototype.toggleFilterVisibility=function(L){if(L&&L.stopPropagation(),this.isEditMode){var H=this.viewModel;this.visualAuthoring.toggleFilterVisibility(H.getFilterContainerScope(),H.contract),this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Visibility",isInOutspacePane:this.isInOutspacePane})}},q.prototype.toggleFilterLockState=function(L){if(L&&L.stopPropagation(),this.isEditMode){var H=this.viewModel;this.visualAuthoring.toggleFilterLock(H.getFilterContainerScope(),H.contract),this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Lock",isInOutspacePane:this.isInOutspacePane})}},q.prototype.deleteFilter=function(L){var H=this;L&&L.stopPropagation(),this.isApplyAllOnForThisFilter()&&X.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.cardType?this.viewModel.cardType.type:null,this.viewModel.id,!1,!0),this.explorationActivity.doRootActivity(function(Se){var Re;H.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Re=X.createChangeFilterActivity(H.contextActivityService,"Remove Filter"));var He=H.viewModel.getFilterContainerScope();H.visualAuthoring.removeFilter(H.viewModel.contract,He,Se,Re),Re&&Re.resolve()},function(){return H.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneFilterDeleted)}),this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Delete",isInOutspacePane:this.isInOutspacePane,viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode())});var Y=this.localizationService.get("FilterPane_DeleteFilterDeleted");this.screenReaderService.alertPolite(Y)},q.prototype.switchCardType=function(L){switch(void 0===L&&(L=this.viewModel.cardType),this.viewModel.cardType=L,this.viewModel.contract.type=L.type,this.viewModel.cardType.type){case ee.Advanced:case ee.Categorical:case ee.TopN:case ee.RelativeTime:case ee.RelativeDate:this.viewModel.switchType(this.viewModel.cardType.type),this.viewModel.updateViewState()}var Y,H={filter:this.viewModel.contract,changeType:32,scope:this.viewModel.getFilterContainerScope()};this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Y=X.createChangeFilterActivity(this.contextActivityService,"Switch Filter Type"),H.changeFilterActivity=Y),X.notifyFilterContainerChangedByUser(this.eventBridge,H),Y&&Y.resolve(),this.isApplyAllOnForThisFilter()&&X.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.cardType.type,this.viewModel.id,!1,!0),this.toggle(!1),this.toggle(!1)},q.prototype.showLinkFieldOptions=function(){return this.hasNoLinkFieldOptions()&&this.viewModel.readOnlyState.expanded},q.prototype.shouldHideExpandForEmptyContent=function(){return!!this.featureSwitchService.featureSwitches.onObject&&!this.hasNoLinkFieldOptions()&&this.hasNoFilterContent()},q.prototype.shouldHideFilterContent=function(){return this.hasNoFilterContent()||!this.canExpand||!this.isFilterExpanded()},q.prototype.hasNoLinkFieldOptions=function(){return this.viewModel.canToggleLinkAsAggregation&&!this.isInOutspacePane&&!this.isMobileFilter()},q.prototype.hasNoFilterContent=function(){return this.viewModel.isLinkField&&this.viewModel.isLinkedAsAggregation},q.prototype.getFilterClass=function(){var L=[];if(L.push("unselectable"),this.viewModel.cardType)switch(this.viewModel.cardType.type){case ee.Visual:L.push("visual");break;case ee.Advanced:L.push("advanced");break;case ee.Categorical:L.push("categorical");break;case ee.TopN:L.push("topN");break;case ee.RelativeDate:L.push("relativeDate");break;case ee.RelativeTime:L.push("relativeTime")}return L.push(this.isInOutspacePane?"filterOutspaceModern":"filter"),this.isFilterApplied()&&L.push("hasRestateHighlight"),!this.viewModel.canSortManually&&this.isInOutspacePane&&L.push("italicized"),L.join(" ")},q.prototype.editLabel=function(){this.isEditMode&&this.viewModel.canRenameManually&&this.isInOutspacePane&&(this.viewModel.isEditingLabel=!0)},q.prototype.editLabelModern=function(){this.viewModel.canRenameManually&&this.isInOutspacePane&&(this.viewModel.isEditingLabel=!0)},q.prototype.blurLabel=function(){this.viewModel.isEditingLabel=!1},Object.defineProperty(q.prototype,"restatementLineStyleRule",{get:function(){return this.isFilterExpanded()||this.isEditMode?"trimmedTextWithEllipsis":"multiLineText"},enumerable:!1,configurable:!0}),q.prototype.showContextMenu=function(L){if(this.isEditMode&&this.isInOutspacePane){L.preventDefault();var H=this.getMenuitems();this.dropdown.showContextMenu(H,void 0,this.onMenuItemSelected.bind(this),!1,void 0,void 0,!0,{anchorElement:$(L.currentTarget)})}},q.prototype.getMenuitems=function(){var L=[{type:0,disabled:!this.viewModel.canDeleteManually,text:this.localizationService.get("FilterPane_DeleteFilter"),key:{action:0}},{type:0,disabled:!this.canExpand,text:this.viewModel.isFilterExpanded()?this.localizationService.get("Collapse"):this.localizationService.get("Expand"),key:{action:this.viewModel.isFilterExpanded()?2:1}}];return this.customSortEnabled&&L.push({type:0,disabled:!this.viewModel.canSortManually,text:this.localizationService.get("ItemAction_Move"),key:{action:3},children:[{type:0,disabled:!this.viewModel.canSortManually||0===this.index,text:this.localizationService.get("ItemAction_Move_Up"),key:{action:3,moveDirection:0}},{type:0,disabled:!this.viewModel.canSortManually||this.index===this.lastIndex-1,text:this.localizationService.get("ItemAction_Move_Down"),key:{action:3,moveDirection:1}},{type:0,disabled:!this.viewModel.canSortManually||0===this.index,text:this.localizationService.get("ItemAction_Move_Top"),key:{action:3,moveDirection:2}},{type:0,disabled:!this.viewModel.canSortManually||this.index===this.lastIndex-1,text:this.localizationService.get("ItemAction_Move_Bottom"),key:{action:3,moveDirection:3}}]}),L.push({type:1},{type:0,disabled:!this.viewModel.canRenameManually,text:this.localizationService.get("ItemAction_Rename"),key:{action:4}},{type:0,disabled:!this.viewModel.canLockManually,text:this.viewModel.isFilterLocked()?this.localizationService.get("FilterPane_UnlockFilter"):this.localizationService.get("FilterPane_LockFilter"),key:{action:this.viewModel.isFilterLocked()?6:5}},{type:0,disabled:!this.viewModel.canHideManually,text:this.viewModel.isFilterHidden()?this.localizationService.get("FilterPane_ShowFilter"):this.localizationService.get("FilterPane_HideFilter"),key:{action:this.viewModel.isFilterHidden()?7:8}},{type:0,disabled:!this.viewModel.canClearManually,text:this.localizationService.get("FilterPane_ClearFilter"),key:{action:9}}),{items:L}},q.prototype.onMenuItemSelected=function(L){switch(L.action){case 0:this.deleteFilter();break;case 4:this.editLabel();break;case 3:this.customSortEnabled&&this.moveFilterInDirection(L.moveDirection);break;case 1:case 2:this.toggle();break;case 5:case 6:this.toggleFilterLockState();break;case 7:case 8:this.toggleFilterVisibility();break;case 9:this.clearFilter();break;default:return}},Object.defineProperty(q.prototype,"isEditMode",{get:function(){return 1===this.viewModeState.getMode()},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"isFluentDesignEnabled",{get:function(){return this.explorationCapabilities.getCapabilities().showFluentDesign&&0===this.viewModeState.getMode()},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"customSortEnabled",{get:function(){return this.viewModel.getFilterContainerScope(),this.isEditMode&&this.isInOutspacePane},enumerable:!1,configurable:!0}),q.prototype.isApplyAllOnForThisFilter=function(){var L=this.viewModel.isInOutspacePane||this.isMobileFilter();return X.isApplyAllEnabled(L,this.explorationNavigation)},q.prototype.updateFilterCardStyle=function(){var L=this.themeService.getVisualStyle(this.explorationNavigation.getCurrentExploration().themeCollection);this.viewModel.updateFilterCardStyle(this.explorationNavigation.getCurrentSection(),L)},q.prototype.isMobileFilter=function(){var L;return null===(L=this.viewModeState)||void 0===L?void 0:L.getConfig().displayOptions.enableMobileFilters},q.prototype.updateLinkAsAggregationOnViewModel=function(){var L=this.viewModel;if(L.isLinkedAsAggregation&&L.contract.filter){this.viewModel.clearRestatement(),this.visualAuthoring.updateFilter(L.getFilterContainerScope(),L.contract,void 0);var H={filter:L.contract,changeType:10,scope:L.getFilterContainerScope()};this.eventBridge.publishToChannel(lt.filterContainerChanged,H)}var Y={filter:L.contract,changeType:16,scope:L.getFilterContainerScope()};this.eventBridge.publishToChannel(lt.filterContainerChanged,Y)},q.prototype.useMobileFilterConfig=function(){return this.viewModeState.getConfig().displayOptions.useMobileExplorationFooter},q.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".themeableElement .visual .slicer-container .slicer-content-wrapper .searchHeader","{ border-color: @buttonForegroundColor !important; }"),this.highContrastCssGenerationService.addRule(".themeableElement .cardHeader .title:focus .textLabel","{ color: @selectedForegroundColor !important; background-color: @selectedBackgroundColor !important; }"),this.highContrastCssGenerationService.addRule(".themeableElement .cardHeader button[aria-disabled=true].clear","{ opacity: 0.5 !important; }")},q.prototype.onFilterContainerChanged=function(L){var H=this.viewModel;if(L.filter===H.contract){if(jsCommon.EnumExtensions.hasFlag(L.changeType,2)&&(this.updateRestatement(),this.viewModel.updateViewState()),H.cardType&&L.filter.type!==H.cardType.type&&jsCommon.EnumExtensions.hasFlag(L.changeType,32)&&((L.filter.type===ee.TopN&&H.cardType.type!==ee.TopN||L.filter.type!==ee.TopN&&H.cardType.type===ee.TopN)&&this.viewModel.clearRestatement(),H.updateCardType(L.filter.type)),jsCommon.EnumExtensions.hasFlag(L.changeType,10)){var Y=this.localizationService.get("FilterPane_ClearFilterCleared");this.screenReaderService.alertPolite(Y)}jsCommon.EnumExtensions.hasFlag(L.changeType,16)&&this.viewModel.updateViewState()}this.updateFilterCardStyle()},q.prototype.restoreDefaultFilter=function(){var L=this;this.explorationActivity.doRootActivity(function(H){var Y=L.viewModel,Se=L.viewModel.contract.expression;L.visualAuthoring.updateFilter(Y.getFilterContainerScope(),Y.contract,Ye.getDefaultValueFilter(Se));var He,Re={filter:Y.contract,changeType:10,scope:Y.getFilterContainerScope(),parentActivity:H};L.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(He=X.createChangeFilterActivity(L.contextActivityService,"Restore Default Filter"),Re.changeFilterActivity=He),X.notifyFilterContainerChangedByUser(L.eventBridge,Re),He&&He.resolve(),Y.useDefaultFilter=!0,L.updateRestatement()},function(){return L.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneFilterDefaultRestored)})},q.prototype.moveFilterInDirection=function(L){var H=this.viewModel.getFilterContainerScope(),Y=H.container.filters,Se={filterScopeType:H.scopeType,startIndex:this.index,targetIndex:void 0};switch(L){case 0:Se.targetIndex=this.index-1;break;case 1:Se.targetIndex=this.index+2;break;case 2:Se.targetIndex=0;break;case 3:Se.targetIndex=Y.length}this.moveFilter.emit(Se)},q.prototype.updateRestatement=function(){var L=this,H=this.viewModel;if(H.useDefaultFilter)H.setRestatement(je.fromDefault(H.defaultValue.value));else if(H.contract.type===ee.Passthrough)H.displayName=H.getRestatement(),H.updateViewState();else if(this.isIncludeExclude()){var Y=this.dataSources.get();this.conceptualSchemaProxy.get(Y).then(function(Se){var Re=L.viewModel.contract,He=L.includeExcludeService.buildViewModel(Re.filter,Re.type,Se,L.displayNameService,Re.filterExpressionMetadata);H.setRestatement(He.restatement),H.displayName=He.displayName,H.updateViewState()})}},q.prototype.onPodParameterChanged=function(L){!L||L.filter!==this.viewModel.contract||2===L.type&&(this.viewModel.updateIsLinkedAsAggregation(L.asAggregation),this.updateLinkAsAggregationOnViewModel())},q.prototype.initializeDefaultValue=function(){var L=this.viewModel;(L.hasDefaultValue&&!L.contract.filter||Ye.isDefaultFilter(L.contract.filter))&&(L.useDefaultFilter=!0,this.updateRestatement())},q.prototype.updateAllowChangeFilterTypeSettings=function(L){L&&L.settings&&(this.allowChangeFilterTypes=L.settings.allowChangeFilterTypes)},q.prototype.onApplyAllFilterCardBufferedChanges=function(L){this.viewModel.id===L.id&&(this.showInputWarningIconInternal=!L.wasDeleted&&!L.canApply&&(this.showInputWarningIcon||this.isMobileFilter()),this.showInputEditIconInternal=this.isMobileFilter()&&!this.showInputWarningIconInternal)},q.prototype.onApplyAllClicked=function(L){L.idsInError&&(this.showInputWarningIconInternal=-1!==L.idsInError.indexOf(this.viewModel.id.toString()))},q.\u0275fac=function(H){return new(H||q)(e.\u0275\u0275directiveInject(n.r),e.\u0275\u0275directiveInject(f.i),e.\u0275\u0275directiveInject(i.D),e.\u0275\u0275directiveInject(M.O),e.\u0275\u0275directiveInject(y.V),e.\u0275\u0275directiveInject(E.J),e.\u0275\u0275directiveInject(I.Z),e.\u0275\u0275directiveInject(b.U),e.\u0275\u0275directiveInject(d.z),e.\u0275\u0275directiveInject(a.vZ),e.\u0275\u0275directiveInject(o.Y),e.\u0275\u0275directiveInject(l.g),e.\u0275\u0275directiveInject(c.o),e.\u0275\u0275directiveInject(O.SW),e.\u0275\u0275directiveInject(x.y0),e.\u0275\u0275directiveInject(V.f),e.\u0275\u0275directiveInject(s.g),e.\u0275\u0275directiveInject(w.kc),e.\u0275\u0275directiveInject(T.$),e.\u0275\u0275directiveInject(P.a))},q.\u0275cmp=e.\u0275\u0275defineComponent({type:q,selectors:[["filter"]],inputs:{viewModel:"viewModel",isInOutspacePane:"isInOutspacePane",index:"index",lastIndex:"lastIndex",searchFiltersInput:"searchFiltersInput",filterCardStyleArguments:"filterCardStyleArguments"},outputs:{moveFilter:"moveFilter"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"ngStyle","class",4,"ngIf"],[3,"ngStyle"],["customClick","",1,"filterCardTitleSection",3,"singleClickDisabled","singleClickTimeout","singleClickAction"],[1,"cardHeader","flex",3,"pbi-tooltip"],[1,"title","trimmedTextWithEllipsis","unselectable",3,"ngClass","ngStyle","contextmenu"],["class","filterPaneIcon error",4,"ngIf"],["localizeTooltip","Filter_CantBeApplied","class","filterPaneIcon glyphicon pbi-glyph-warning glyph-small no-bold",4,"ngIf"],[3,"class",4,"ngIf"],["class","editableLabel",3,"ngModel","ngModelChange","blur",4,"pbiEditableLabel","pbiEditableLabelValue","pbiEditableLabelMode","pbiEditableLabelEditable","pbiEditableLabelSearchString"],["class","glyphicon glyph-mini","type","button",3,"ngStyle","ngClass","pbi-tooltip",4,"ngIf"],["class","delete glyphicon pbi-glyph-close glyph-micro",3,"ngStyle","pbi-tooltip","click",4,"ngIf"],["class","filterPaneIcon clear glyphicon glyph-mini pbi-glyph-eraser",3,"disabled","ngStyle","pbi-tooltip","click",4,"ngIf"],["class","filterPaneIcon lock glyphicon glyph-mini",3,"ngClass","disabled","ngStyle","pbi-tooltip","click",4,"ngIf"],["use-tooltip-as-aria-label","","class","filterPaneIcon glyphicon glyph-mini pbi-glyph-error","localizeTooltip","Filter_CantBeApplied",4,"ngIf"],["use-tooltip-as-aria-label","","class","filterPaneIcon glyphicon glyph-mini pbi-glyph-edit","localizeTooltip","Filter_Edited",4,"ngIf"],[1,"controlPanel","flex",3,"ngClass"],[1,"controlIcons"],["class","filterPaneIcon hide glyphicon glyph-mini",3,"ngClass","ngStyle","pbi-tooltip","click",4,"ngIf"],["class","linkFieldOptions",4,"ngIf"],[1,"filterContent",3,"hidden"],["class","filterTypeSelection",4,"ngIf"],[4,"ngIf"],[3,"filterViewModel",4,"ngIf"],[1,"filterPaneIcon","error"],["sheet","filterPaneIcons","symbolId","fieldListError"],["localizeTooltip","Filter_CantBeApplied",1,"filterPaneIcon","glyphicon","pbi-glyph-warning","glyph-small","no-bold"],["sheet","filterPaneIcons",3,"symbolId"],[1,"editableLabel",3,"ngModel","ngModelChange","blur"],["type","button",1,"glyphicon","glyph-mini",3,"ngStyle","ngClass","pbi-tooltip"],[1,"delete","glyphicon","pbi-glyph-close","glyph-micro",3,"ngStyle","pbi-tooltip","click"],[1,"filterPaneIcon","clear","glyphicon","glyph-mini","pbi-glyph-eraser",3,"disabled","ngStyle","pbi-tooltip","click"],[1,"filterPaneIcon","lock","glyphicon","glyph-mini",3,"ngClass","disabled","ngStyle","pbi-tooltip","click"],["use-tooltip-as-aria-label","","localizeTooltip","Filter_CantBeApplied",1,"filterPaneIcon","glyphicon","glyph-mini","pbi-glyph-error"],["use-tooltip-as-aria-label","","localizeTooltip","Filter_Edited",1,"filterPaneIcon","glyphicon","glyph-mini","pbi-glyph-edit"],[1,"filterPaneIcon","hide","glyphicon","glyph-mini",3,"ngClass","ngStyle","pbi-tooltip","click"],[1,"linkFieldOptions"],[1,"asAggregationTitle","smallFontSize","trimmedTextWithEllipsis",3,"localize"],[1,"asAggregation",3,"ngModel","disabled","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"filterTypeSelection"],[1,"flex"],["use-tooltip-as-aria-label","","localize","FilterCardTypeSwitchLabel","localizeTooltip","FilterCardTypeSwitchLabel",1,"typeSelectTitle","trimmedTextWithEllipsis","smallFontSize",3,"ngStyle"],["id","focusableLabelIcon","tabindex","0","class","filterPaneIcon pbi-glyph-info glyphicon glyph-mini",3,"pbi-tooltip",4,"ngIf"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","panelClass","pbi-modern-select-panel themeableElement","disableOptionCentering","true",1,"typeSwitchOptions","pbi-modern-select",3,"aria-label","ngClass","ngModel","compareWith","ngStyle","ngModelChange","selectionChange"],[3,"value","ngStyle","disabled",4,"ngFor","ngForOf"],["id","focusableLabelIcon","tabindex","0",1,"filterPaneIcon","pbi-glyph-info","glyphicon","glyph-mini",3,"pbi-tooltip"],[3,"value","ngStyle","disabled"],[3,"viewModel","onFilterChanged",4,"ngIf"],[3,"viewModel","isInOutspacePane","expanded",4,"ngIf"],[3,"viewModel","filterType","onFilterChanged",4,"ngIf"],[3,"viewModel","onFilterChanged"],[3,"viewModel","isInOutspacePane","expanded"],[3,"viewModel","filterType","onFilterChanged"],[3,"filterViewModel"]],template:function(H,Y){1&H&&e.\u0275\u0275template(0,an,25,56,"div",0),2&H&&e.\u0275\u0275property("ngIf",Y.viewModel&&!Y.isFilterHidden)},directives:[v.NgIf,v.NgStyle,g.f,r.i,v.NgClass,u.D,C.k,F.r,A.Fj,A.JJ,A.On,W.X,A.EJ,v.NgForOf,A.YN,A.Kr,k.gD,R.x,G.ey,et,dt.A,Fe.z,be.E,Le],pipes:[Ve.F],styles:['.filter.card[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color, #333333);margin:2px;border:1px solid var(--neutral-dark-color, #212121);border-radius:4px;overflow:hidden}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]{padding:0 4px 4px 8px}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]{padding:0 8px 4px 4px}.filter.card[_ngcontent-%COMP%]:hover   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.filter.card[_ngcontent-%COMP%]:hover   .controlPanel[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%], .filter.card[_ngcontent-%COMP%]:hover   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%], .filter.card[_ngcontent-%COMP%]:hover   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{visibility:visible}.filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]{cursor:pointer}.filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8);background:transparent}.filter.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   .asAggregationTitle[_ngcontent-%COMP%]{display:inline-block;width:100%}.filter.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:var(--neutral-secondary-color, #666666);border:1px solid var(--black-color, #000);width:100%;margin:2px 0;padding:2px}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]{width:100%;line-height:21px;display:flex;flex-direction:row}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:pointer;font-weight:inherit;flex-grow:1;outline:none;font-size:12px;display:flex}html[data-focus-source=key][_ngcontent-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin:4px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin:4px 0 0 2px}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{margin:2px 0 0 2px}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{margin:2px 0 0 2px}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{width:16px;height:16px;display:inline-block;padding:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin:2px 0 0 2px}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .no-bold[_ngcontent-%COMP%]{font-weight:normal}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{height:16px;width:16px;background:transparent;flex-grow:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{margin:1px 4px 3px 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{margin:1px 0 3px 4px}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]:before{content:"\\e70d"}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]:before{content:"\\e70e"}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{height:16px;width:16px;background:transparent;flex-grow:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{margin:1px 4px 3px 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{margin:1px 0 3px 4px}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .controlIcons[_ngcontent-%COMP%]{display:inline-flex}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .multiLineText[_ngcontent-%COMP%]{white-space:normal;display:block;display:-webkit-box;word-wrap:break-word;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{margin:0 4px;visibility:hidden}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{visibility:hidden}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{margin:0 0 0 4px}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{margin:0 4px 0 0}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{visibility:hidden}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:right}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:left}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{margin:0 0 0 4px}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{margin:0 4px 0 0}.filter.card[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{background-color:transparent;cursor:pointer;vertical-align:top}.filter.card[_ngcontent-%COMP%]   .typeSelectTitle[_ngcontent-%COMP%]{display:inline-block}.filter.card[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%]{background-color:var(--neutral-secondary-color, #666666);border:1px solid var(--neutral-dark-color, #212121);width:100%;margin:2px 0;padding:2px}.filter.card[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color-alt, #444444);border:1px solid var(--black-color, #000);height:24px;padding:2px}.filterOutspaceModern.card.hasRestateHighlight[_ngcontent-%COMP%]{box-shadow:0 0 2px rgba(0,0,0,.2)}.filterOutspaceModern.card[_ngcontent-%COMP%]{background-color:inherit;border-radius:2px;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);overflow:hidden;flex-grow:1;margin:0 0 6px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]{padding:4px 4px 4px 8px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]{padding:4px 8px 4px 4px}.filterOutspaceModern.card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition-duration:0s}.filterOutspaceModern.card.italicized[_ngcontent-%COMP%]{font-style:italic}.filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .expand[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .expand[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .collapse[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .collapse[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .delete[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .delete[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .lock[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .lock[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .clear[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .clear[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .hide[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .hide[_ngcontent-%COMP%]{visibility:visible!important}.filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .expand[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .collapse[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .delete[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .lock[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .clear[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .hide[_ngcontent-%COMP%]{visibility:visible!important}.filterOutspaceModern.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   .asAggregationTitle[_ngcontent-%COMP%]{display:inline-block}.filterOutspaceModern.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);width:100%;margin:2px 0;padding:2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]{width:100%;cursor:pointer}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:4px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:4px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .filterCardTitle[_ngcontent-%COMP%]:focus{outline:none}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:inherit}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:4px;height:16px;width:16px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:2px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .controlIcons[_ngcontent-%COMP%]{display:inline-flex}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .multiLineText[_ngcontent-%COMP%]{white-space:normal;display:block;display:-webkit-box;word-wrap:break-word;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{visibility:hidden}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{visibility:hidden}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:2px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:pointer;font-weight:inherit;flex-grow:1;font-size:14px;display:flex}  html[data-focus-source=key] .filterOutspaceModern.card .cardHeader .title:focus,   html[data-focus-source=key] .filterOutspaceModern.card .cardHeader .title *:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}  html[data-focus-source=mouse] .filterOutspaceModern.card .cardHeader .title:focus,   html[data-focus-source=mouse] .filterOutspaceModern.card .cardHeader .title *:focus,   html[data-focus-source=program] .filterOutspaceModern.card .cardHeader .title:focus,   html[data-focus-source=program] .filterOutspaceModern.card .cardHeader .title *:focus{outline:none}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterCardTitle[_ngcontent-%COMP%]{display:inline-block;background:var(--white-color, #FFF);width:100%;border:none}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterCardTitle[_ngcontent-%COMP%]::selection{background:var(--input-selection-color, #0078d7);color:var(--white-color, #FFF)}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin:4px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin:4px 0 0 2px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{margin:2px 0 0 2px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{margin:2px 0 0 2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{width:16px;height:16px;display:inline-block;padding:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin:2px 0 0 2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .no-bold[_ngcontent-%COMP%]{font-weight:normal}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .editableLabel[_ngcontent-%COMP%]{width:100%;border:none}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]     pbi-text-label{width:100%}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[aria-disabled=true].clear[_ngcontent-%COMP%]{opacity:.5}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[aria-disabled=false].clear[_ngcontent-%COMP%]{opacity:1}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{opacity:.5;height:16px;width:16px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]:enabled{opacity:1}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]:before{content:"\\e70d"}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]:before{content:"\\e70e"}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{color:inherit;height:16px;width:16px;background:transparent;flex-grow:0;visibility:hidden;font-weight:inherit}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .hasRestateHighlight[_ngcontent-%COMP%]{background-color:transparent;font-weight:bolder}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{height:16px;width:16px;color:inherit;background:transparent;visibility:hidden}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:right}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:left}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{color:inherit;height:16px;width:16px;background:transparent;flex-grow:0;visibility:hidden}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{background-color:transparent;color:inherit;cursor:pointer;vertical-align:top}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]{margin-top:8px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSelectTitle[_ngcontent-%COMP%]{display:block}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{display:block}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin-right:4px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border:1px solid var(--neutral-dark-color, #212121);width:100%;margin:4px 0 0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%]{padding-left:2px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%]{padding-right:2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);min-height:24px}.newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]{background-color:var(--gray-30, #EDEBE9);border-color:var(--gray-60, #C8C6C4);border-radius:2px}.newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4);border-radius:2px}.newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%], .newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4);border-radius:2px}[_nghost-%COMP%]     .filterOutspaceModern.card select, [_nghost-%COMP%]     .filterOutspaceModern.card mat-select{background-color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);min-height:24px!important;box-sizing:border-box;font-family:inherit}[_nghost-%COMP%]     .filterOutspaceModern.card input[type=number]{background-color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);min-height:24px;padding:2px 6px;text-align:left}[_nghost-%COMP%]     .filterOutspaceModern.card input[type=number].ng-invalid{border:1px solid var(--warning-color, #A4262C)!important}[_nghost-%COMP%]     .filterOutspaceModern.card input[type=number][type=number]::-webkit-outer-spin-button, [_nghost-%COMP%]     .filterOutspaceModern.card input[type=number][type=number]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}[_nghost-%COMP%]     .filterOutspaceModern.card .filterInputWarningBorder{border:1px solid var(--warning-color, #A4262C)!important}[_nghost-%COMP%]     .filterOutspaceModern.card .applyFilter{margin-top:6px;margin-bottom:6px;color:inherit;font-size:inherit;font-family:inherit;background-color:transparent;opacity:.5;position:relative;float:right}[_nghost-%COMP%]     .filterOutspaceModern.card .applyFilter:hover{background-color:transparent}[_nghost-%COMP%]     .filterOutspaceModern.card .applyFilter:enabled{color:inherit;opacity:1}[_nghost-%COMP%]     .filterOutspaceModern.card .description{font-size:inherit}[_nghost-%COMP%]     .filter.card select, [_nghost-%COMP%]     .filter.card mat-select{border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);background-color:var(--white-color, #FFF);height:24px;padding:2px}[_nghost-%COMP%]     .filter.card input[type=number]{background-color:var(--neutral-dark-color, #212121);border:1px solid var(--black-color, #000);height:24px;padding:2px 6px;text-align:left}[_nghost-%COMP%]     .filter.card input[type=number].ng-invalid{border:1px solid var(--warning-color, #A4262C)}[_nghost-%COMP%]     .filter.card input[type=number][type=number]::-webkit-outer-spin-button, [_nghost-%COMP%]     .filter.card input[type=number][type=number]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}[_nghost-%COMP%]     .filter.card .applyFilter{color:var(--neutral-tertiary-alt-color, #C8C8C8);background-color:transparent;position:relative;float:right;font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif}[_nghost-%COMP%]     .filter.card .applyFilter:hover{background-color:transparent}[_nghost-%COMP%]     .filter.card .applyFilter:enabled{color:var(--theme-primary-color, #F2C811)}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]{float:left;width:100%;box-sizing:border-box;padding:0 6px 4px 4px;font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif;overflow:visible}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]:focus{outline:none}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:var(--white-color, #FFF);display:flex;margin:6px 5px 6px 0;box-sizing:border-box;font-weight:inherit}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-left:12px;font-size:12px}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]:focus{outline:none}html[data-focus-source=key][_ngcontent-%COMP%]   .explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color-alt2, #4a4a4a);float:left;width:100%;border:1px dashed var(--neutral-secondary-color, #666666);border-radius:4px;box-sizing:border-box}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards.append[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811)}html[data-focus-source=key][_ngcontent-%COMP%]   .explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .filterWell[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8);padding:4px 8px}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]:focus{outline:none}html[data-focus-source=key][_ngcontent-%COMP%]   .explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .end-dropzone[_ngcontent-%COMP%]{height:8px}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4);border-radius:2px}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards.append[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C)}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:inherit;padding:4px 8px;border-radius:2px;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);overflow:hidden}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:6px;margin-top:4px;height:16px;width:16px}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .controlIcons[_ngcontent-%COMP%]{display:inline-flex}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{background:transparent}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{background:transparent}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:6px}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:pointer;font-weight:inherit;flex-grow:1;outline:none;font-size:14px}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{width:16px;height:16px;display:inline-block;padding:0;margin:2px 2px 0 0}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]:before{content:"\\e70d"}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]:before{content:"\\e70e"}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .hasRestateHighlight[_ngcontent-%COMP%]{background-color:transparent;font-weight:bolder}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{color:inherit;height:16px;width:16px;background:transparent;flex-grow:0;font-weight:inherit}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:right;height:16px;width:16px;color:inherit;background:transparent}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], .explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{color:inherit;height:16px;width:16px;background:transparent;flex-grow:0}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPaneOutspace[_ngcontent-%COMP%]   .relativeDateFilter[_ngcontent-%COMP%]   .relativeDateFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   pbi-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:inherit}','.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]{position:relative;background-color:var(--fluentThemeWhiteColor);border-color:var(--fluentThemeNeutralTertiaColor);box-sizing:border-box;padding:0 8px;margin-bottom:20px;color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%]{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.hasRestateHighlight[_ngcontent-%COMP%]:not(.expanded), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.hasRestateHighlight[_ngcontent-%COMP%]:not(.expanded){background-color:var(--fluentThemeNeutralLighterColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.expanded[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.expanded[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.expanded.advanced[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.expanded.advanced[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.expanded.relativeDate[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.expanded.relativeDate[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.expanded.topN[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.expanded.topN[_ngcontent-%COMP%]{overflow-y:auto}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]{max-height:100px;line-height:initial;position:relative;-webkit-tap-highlight-color:transparent;margin-bottom:10px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%]{order:1}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[aria-disabled=true][_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[aria-disabled=true][_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[disabled][_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[disabled][_ngcontent-%COMP%]{visibility:hidden}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-error[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-error[_ngcontent-%COMP%]{order:2;margin-left:20px;color:var(--fluentThemeErrorDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-edit[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-edit[_ngcontent-%COMP%]{order:2;margin-left:20px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.expand[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.expand[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]{order:3;margin-left:20px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]:before, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]:before{content:"\\e76c"}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]{float:initial;margin-top:5px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{height:auto;width:auto}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%]{position:absolute;right:28px;padding:12px 4px;visibility:visible}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .restatement[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .restatement[_ngcontent-%COMP%]{font-size:18px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel.cardExpanded[_ngcontent-%COMP%]   .restatement[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel.cardExpanded[_ngcontent-%COMP%]   .restatement[_ngcontent-%COMP%]{display:none;-webkit-line-clamp:unset;-webkit-box-orient:unset}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]{font-size:14px!important;line-height:initial;-webkit-tap-highlight-color:transparent;padding-top:10px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.expand[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.expand[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.collapse[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.collapse[_ngcontent-%COMP%]{display:block!important;right:0;position:absolute}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0;font-size:14px!important;font-weight:bold;letter-spacing:normal}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not([ng-bind]), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not([ng-bind]){display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title.withMobileInvalidIcon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title.withMobileInvalidIcon[_ngcontent-%COMP%]{color:var(--fluentThemeErrorDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]     pbi-text-label, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]     pbi-text-label{width:100%}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .typeSelectTitle[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .typeSelectTitle[_ngcontent-%COMP%]{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select{height:32px;border-radius:4px;border:1px solid var(--fluentThemeNeutralTertiaColor);border-width:1px!important;width:100%;padding:0 8px!important;line-height:32px;background-color:var(--fluentThemeWhiteColor);margin:0 0 10px;color:var(--fluentThemeNeutralDarkColor);font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-trigger, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-trigger{line-height:28px;vertical-align:middle}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select.typeSwitchOptions, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select.typeSwitchOptions{border:2px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow{width:auto;height:auto;color:inherit;font-weight:initial;font-size:14px;padding-right:0}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow:before, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow:before{content:"\\ec8f"}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow-wrapper, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow-wrapper{line-height:30px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .slicer-container, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .slicer-container, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .slicer-container, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .slicer-container{display:initial;height:auto!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .slicer-container .slicer-content-wrapper, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .slicer-container .slicer-content-wrapper, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .slicer-container .slicer-content-wrapper, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .slicer-container .slicer-content-wrapper{-webkit-tap-highlight-color:transparent}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row{display:inline-block;margin-top:8px;min-width:50px;max-width:90%}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCheckbox, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCheckbox, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCheckbox, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCheckbox{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCheckbox.selected+.slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCheckbox.selected+.slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCheckbox.selected+.slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCheckbox.selected+.slicerText{background-color:transparent;color:var(--fluentThemeNeutralDarkColor);border-color:var(--fluentThemeNeutralDarkColor);border-width:2px!important;font-weight:bold}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCountText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCountText, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCountText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCountText{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerText{padding:10px;border-radius:100px;background-color:transparent;text-align:center;color:var(--fluentThemeNeutralDarkColor);border-width:1px!important;border-style:solid!important;border-color:var(--fluentThemeGrayRat);font-family:inherit!important;font-size:inherit!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerItemContainer, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerItemContainer, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerItemContainer, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerItemContainer{padding:2px 0 0 10px;height:44px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-date-picker, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-date-picker{width:initial}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .mat-select, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .mat-select{margin:0 8px 2px;width:100px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker input, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker input{border-radius:4px!important;border:1px solid var(--fluentThemeNeutralTertiaColor);height:32px;padding-top:8px;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .time-picker-body-item:last-child, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .time-picker-body-item:last-child{padding-top:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .time-picker-body-item:first-child, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .time-picker-body-item:first-child{padding-bottom:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker button, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker button{color:var(--fluentThemeNeutralSecondaryAltColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchHeader, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchHeader{height:32px;border:0;border-bottom:1px solid var(--fluentThemeNeutralTertiaColor);border-radius:2px;color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchHeader, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchHeader{background-color:var(--fluentThemeWhiteColor)!important;margin-bottom:10px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchIcon, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchIcon{transform:rotateY(-180deg);margin:auto 30px auto auto;position:absolute;right:0px;color:var(--fluentThemeNeutralSecondaryColor)!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput{background:none;color:var(--fluentThemeNeutralDarkColor);height:100%;margin:auto 0;padding:0 30px 0 8px;z-index:2;border-radius:initial;font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput::-webkit-input-placeholder, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput::-webkit-input-placeholder{color:var(--fluentThemeNeutralSecondaryAltColor);font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker{margin-bottom:15px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker .datePickerSelector, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker .datePickerSelector{background-color:var(--fluentThemeWhiteColor);color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker .datePickerSelector .condition-value, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker .datePickerSelector .condition-value{border:0px;border-bottom:1px solid var(--fluentThemeNeutralTertiaColor);width:220px;color:inherit;background:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker input, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker input{height:32px;border:0;border-radius:2px;padding:0 8px;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker input[type=text]::-webkit-input-placeholder, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker input[type=text]::-webkit-input-placeholder{color:inherit;opacity:.5}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table{margin-top:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table button, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table button{margin-left:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .applyFilter, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .applyFilter{height:32px;font-weight:500;padding:0 16px;margin:8px 0 24px;border-radius:4px;color:inherit;border-width:2px;border-style:solid;border-color:inherit;font-size:14px;letter-spacing:normal;font-weight:bold;background-color:transparent;opacity:.6}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .applyFilter:enabled, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .applyFilter:enabled{opacity:1}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .cardFooter, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .cardFooter{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select{width:100%;padding-left:8px;-webkit-appearance:none;border-radius:4px;border:1px solid var(--fluentThemeNeutralTertiaryColor);display:initial;margin:4px 0;background:url(data:image/svg+xml;utf8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8%202.49707L3.93262%206.55762L3.31738%205.94238L8%201.25293L12.6826%205.94238L12.0674%206.55762L8%202.49707ZM8%2013.5029L12.0674%209.44238L12.6826%2010.0576L8%2014.7471L3.31738%2010.0576L3.93262%209.44238L8%2013.5029Z%22%20fill%3D%22%23201F1E%22%2F%3E%3C%2Fsvg%3E) center right 10px no-repeat var(--fluentThemeWhiteColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions{padding-right:35px;border:2px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions+.ui-selectmenu-button, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions+.ui-selectmenu-button{width:200px!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     input[type=number].ng-invalid, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     input[type=number].ng-invalid{border-color:var(--fluentThemeErrorDarkColor);color:var(--fluentThemeErrorDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterInputWarningBorder:not(.topNInputArea) input, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterInputWarningBorder:not(.topNInputArea) input, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterInputWarningBorder:not(.topNInputArea), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterInputWarningBorder:not(.topNInputArea){border-color:var(--fluentThemeErrorDarkColor)!important;color:var(--fluentThemeErrorDarkColor)!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     *, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     *{font-size:14px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.expand[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.expand[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]{margin-right:20px;margin-left:unset}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-error[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-error[_ngcontent-%COMP%]{margin-right:20px;margin-left:unset}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-edit[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-edit[_ngcontent-%COMP%]{margin-right:20px;margin-left:unset}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]:before, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]:before{content:"\\e76b"}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%]{right:initial;left:28px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.expand[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.expand[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.collapse[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.collapse[_ngcontent-%COMP%]{right:initial;left:0}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select-arrow, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select-arrow{padding-left:0}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerItemContainer, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerItemContainer, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerItemContainer, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerItemContainer{padding:2px 0 0 12px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchIcon, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchIcon{margin:auto auto auto 30px;right:initial;left:0}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput{padding:0 30px 0 10px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table button, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table button{margin-right:8px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker .time-picker-body-item, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker .time-picker-body-item{direction:ltr}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select{padding-right:8px;background:url(data:image/svg+xml;utf8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8%202.49707L3.93262%206.55762L3.31738%205.94238L8%201.25293L12.6826%205.94238L12.0674%206.55762L8%202.49707ZM8%2013.5029L12.0674%209.44238L12.6826%2010.0576L8%2014.7471L3.31738%2010.0576L3.93262%209.44238L8%2013.5029Z%22%20fill%3D%22%23201F1E%22%2F%3E%3C%2Fsvg%3E) center left 10px no-repeat var(--fluentThemeWhiteColor)}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions{padding-left:35px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     input[type=number], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     input[type=number]{text-align:right}*[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}']}),q}()},22767:function(Ee,ne,t){t.d(ne,{I:function(){return V}});var e=t(76430),n=t(86385),f=function(){function w(){var T=this;this.onClick=function(v){return T.onButtonClick(v)},this.onKeydown=function(v){return T.onButtonKeydown(v)},this.onDocumentMouseDown=function(v){T.popup.contains(v.target)||T.popupButton.contains(v.target)||T.close()}}return w.prototype.subscribe=function(T,v){this.popup=T,this.popupButton=v,this.popup.style.position="fixed",this.close(),this.popupButton.addEventListener("click",this.onClick),this.popupButton.addEventListener("keydown",this.onKeydown),document.addEventListener("mousedown",this.onDocumentMouseDown,!0)},w.prototype.unsubscribe=function(){this.popupButton.removeEventListener("click",this.onClick),this.popupButton.removeEventListener("keydown",this.onKeydown),document.removeEventListener("mousedown",this.onDocumentMouseDown,!0),this.close(),this.popup=void 0,this.popupButton=void 0},w.prototype.onButtonClick=function(T){this.togglePopup()},w.prototype.onButtonKeydown=function(T){switch(T.keyCode){case n.K5:this.open();break;case n.hY:this.close();break;default:return}T.preventDefault(),T.stopPropagation()},w.prototype.togglePopup=function(){this.closed?this.open():this.close()},w.prototype.open=function(){this.popup.style.display="block";var g,T=this.popup.getBoundingClientRect(),v=this.popupButton.getBoundingClientRect();this.popup.style.left=v.right-T.width+"px",g=v.bottom+T.height>window.innerHeight?Math.max(v.top-T.height,0):v.bottom,this.popup.style.top=g+"px",this.closed=!1},w.prototype.close=function(){this.popup.style.display="none",this.closed=!0},w}(),i=t(71367),M=t(60660),E=t(68244),I=t(60400),d=t(51225),P=["button"],y=["popup"],b=["noIcon"],a=["icon"];function o(w,T){if(1&w&&e.\u0275\u0275element(0,"img",14),2&w){var v=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("src",v.selectedIcon.imageUrl,e.\u0275\u0275sanitizeUrl)}}function l(w,T){if(1&w&&e.\u0275\u0275element(0,"pbi-svg-use-symbol",15),2&w){var v=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("symbolId",v.selectedIcon.svgId)}}function s(w,T){if(1&w&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275template(1,o,1,1,"img",12),e.\u0275\u0275template(2,l,1,1,"pbi-svg-use-symbol",13),e.\u0275\u0275elementEnd()),2&w){var v=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("aria-label",v.getIconDescription(v.selectedIcon)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!v.selectedIcon&&!!v.selectedIcon.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!v.selectedIcon&&!!v.selectedIcon.svgId)}}function c(w,T){if(1&w&&e.\u0275\u0275element(0,"img",14),2&w){var v=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("src",v.imageUrl,e.\u0275\u0275sanitizeUrl)}}function O(w,T){if(1&w&&e.\u0275\u0275element(0,"pbi-svg-use-symbol",15),2&w){var v=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("symbolId",v.svgId)}}function x(w,T){if(1&w){var v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16,17),e.\u0275\u0275listener("click",function(){var A=e.\u0275\u0275restoreView(v).$implicit;return e.\u0275\u0275nextContext().onIconClick(A)})("keydown",function(F){var W=e.\u0275\u0275restoreView(v).$implicit;return e.\u0275\u0275nextContext().onIconKeydown(F,W)}),e.\u0275\u0275template(2,c,1,1,"img",12),e.\u0275\u0275template(3,O,1,1,"pbi-svg-use-symbol",13),e.\u0275\u0275elementEnd()}if(2&w){var g=T.$implicit,r=T.index,u=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",u.getIconDescription(g)),e.\u0275\u0275attribute("key",r)("tabindex",0==r?0:-1)("aria-selected",u.selectedIconId===g.id)("aria-posinset",r+1)("aria-setsize",g.length)("data-unique-id","icon-"+g.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!g.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!g.svgId)}}var V=function(){function w(T,v,g){this.eventBridge=T,this.localizationService=v,this.itemPickerService=g,this.iconChanged=new e.EventEmitter,this.closed=new e.EventEmitter,this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager()}return w.prototype.ngOnInit=function(){var T=this;this.noIconLabel=this.localizationService.get("IconPicker_NoIcon"),this.subscriptionManager.subscribe(powerbi.events.visualThemeChanged,function(){return T.onVisualThemeChanged()}),this.updateIcons(),this.selectedIcon=this.icons.find(function(v){return v.id===T.selectedIconId})},w.prototype.ngAfterViewInit=function(){this.popupHandler=new f,this.popupHandler.subscribe(this.popup.nativeElement,this.headerButton.nativeElement)},w.prototype.ngOnDestroy=function(){this.popupHandler.unsubscribe(),this.subscriptionManager.unsubscribeAll()},w.prototype.onIconClick=function(T){this.selectIcon(T)},w.prototype.onIconKeydown=function(T,v){switch(T.keyCode){case n.hY:this.popupHandler.close();break;case n.K5:this.selectIcon(v);break;case n.Mf:this.noIcon.nativeElement.focus();break;case n.LH:case n.JH:case n.oh:case n.SV:this.focusOnNextIcon(T.keyCode,this.icons.indexOf(v))}T.preventDefault(),T.stopPropagation()},w.prototype.onNoPickClick=function(){this.selectIcon(void 0)},w.prototype.onNoPickKeyDown=function(T){switch(T.keyCode){case n.Mf:var v;v=T.shiftKey?this.icons.length-1:0,this.iconElementRefs.map(function(g){return g.nativeElement}).find(function(g){return g.getAttribute("key")===v.toString()}).focus();break;case n.K5:this.selectIcon(void 0)}T.preventDefault(),T.stopPropagation()},w.prototype.getIconDescription=function(T){if(T.description){if("string"==typeof T.description)return T.description;if(T.description.resourceKey)return this.localizationService.get(T.description.resourceKey)}},w.prototype.onVisualThemeChanged=function(){this.updateIcons()},w.prototype.updateIcons=function(){var T=_.cloneDeep(this.itemPickerService.getIcons());for(var v in this.icons=[],T){var g=T[v];g.id=v,this.icons.push(g)}},w.prototype.selectIcon=function(T){this.selectedIcon=T,this.selectedIconId=T?T.id:void 0,this.popupHandler.close(),this.iconChanged.emit(this.selectedIconId)},w.prototype.focusOnNextIcon=function(T,v){var g=this.getNextIconIndex(T,v);this.focusOnIconByIndex(g)},w.prototype.focusOnIconByIndex=function(T){this.getElementFromIndex(T).focus()},w.prototype.getElementFromIndex=function(T){return this.iconElementRefs.map(function(v){return v.nativeElement}).find(function(v){return v.getAttribute("key")===T.toString()})},w.prototype.getNextIconIndex=function(T,v){var u,C,g=v%w.columnCount,r=Math.floor(v/w.columnCount);return T===n.LH||T===n.JH?(u=g,C=this.getNextIndex(this.getColumnItemCount(g),r,T)):(T===n.oh||T===n.SV)&&(u=this.getNextIndex(this.getRowItemCount(r),g,T),C=r),this.getIndexFromPosition(u,C)},w.prototype.getRowItemCount=function(T){var v=this.icons.length;return T<Math.floor(v/w.columnCount)?w.columnCount:v%w.columnCount},w.prototype.getColumnItemCount=function(T){var v=this.icons.length/w.columnCount,g=Math.floor(v);return T<(v-g)*w.columnCount-1&&g++,g},w.prototype.getNextIndex=function(T,v,g){return g===n.SV||g===n.JH?v=++v>=T?0:v:(g===n.oh||g===n.LH)&&(v=--v<0?T-1:v),v},w.prototype.getIndexFromPosition=function(T,v){return T+v*w.columnCount},w.columnCount=10,w.\u0275fac=function(v){return new(v||w)(e.\u0275\u0275directiveInject(i.J),e.\u0275\u0275directiveInject(M.o),e.\u0275\u0275directiveInject(E.a))},w.\u0275cmp=e.\u0275\u0275defineComponent({type:w,selectors:[["icon-picker"]],viewQuery:function(v,g){if(1&v&&(e.\u0275\u0275viewQuery(P,7),e.\u0275\u0275viewQuery(y,7),e.\u0275\u0275viewQuery(b,7),e.\u0275\u0275viewQuery(a,5)),2&v){var r=void 0;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(g.headerButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(g.popup=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(g.noIcon=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(g.iconElementRefs=r)}},inputs:{selectedIconId:"selectedIconId",labelId:"labelId"},outputs:{iconChanged:"iconChanged",closed:"closed"},decls:12,vars:4,consts:[["role","button","tabindex","0",1,"popoutButton"],["button",""],["class","icon",4,"ngIf"],[1,"glyphicon","pbi-glyph-flickup","glyph-micro","dropdown-icon"],[1,"popup"],["popup",""],["role","listbox",1,"icon-container"],[1,"icon-container-scroll"],["class","icon","role","option",3,"title","click","keydown",4,"ngFor","ngForOf"],["tabindex","0",1,"noIcon",3,"click","keydown"],["noIcon",""],[1,"icon"],["role","presentation",3,"src",4,"ngIf"],["sheet","conditionalFormattingDialogIcons",3,"symbolId",4,"ngIf"],["role","presentation",3,"src"],["sheet","conditionalFormattingDialogIcons",3,"symbolId"],["role","option",1,"icon",3,"title","click","keydown"],["icon",""]],template:function(v,g){1&v&&(e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275template(2,s,3,3,"div",2),e.\u0275\u0275element(3,"i",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4,5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"div",7),e.\u0275\u0275template(8,x,4,9,"div",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",9,10),e.\u0275\u0275listener("click",function(){return g.onNoPickClick()})("keydown",function(u){return g.onNoPickKeyDown(u)}),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&v&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!g.selectedIconId),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",g.icons),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("aria-selected",void 0===g.selectedIconId),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(g.noIconLabel))},directives:[I.NgIf,I.NgForOf,d.R],styles:["[_nghost-%COMP%]{display:flex;white-space:nowrap;user-select:none}.popoutButton[_ngcontent-%COMP%]{display:flex;width:44px;height:28px;margin-left:4px;background-color:var(--white-color, #FFF);border:1px solid var(--fluent-theme-neutral-dark-color, #201F1E);box-sizing:border-box}.popoutButton[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:relative}.dropdown-icon[_ngcontent-%COMP%]{margin-left:6px;margin-top:6px}.popup[_ngcontent-%COMP%]{position:fixed;color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39);background-color:var(--white-color, #FFF);box-shadow:0 4.8px 14.4px rgba(0,0,0,.11),0 25.6px 57.6px rgba(0,0,0,.13);font-size:12px;padding:5px;z-index:1}.icon-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.icon-container-scroll[_ngcontent-%COMP%]{overflow:auto;max-height:200px}.icon[_ngcontent-%COMP%]{margin-left:4px;margin-top:4px;width:16px;height:16px;float:left}.icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.noIcon[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),w}()},98471:function(Ee,ne,t){t.d(ne,{Z:function(){return V}});var e=t(92109),n=t(43041),f=t(69104),i=t(60660),M=t(68244),E=t(62240),I=t(76430),d=t(71367),P=t(48830),y=t(60400),b=t(9488),a=t(29595),o=t(9784);function l(w,T){if(1&w&&I.\u0275\u0275element(0,"img"),2&w){var v=I.\u0275\u0275nextContext().$implicit;I.\u0275\u0275attribute("src",v.imageUrl,I.\u0275\u0275sanitizeUrl)}}function s(w,T){if(1&w&&I.\u0275\u0275element(0,"svg-use-symbol",10),2&w){var v=I.\u0275\u0275nextContext().$implicit;I.\u0275\u0275property("symbolId",v.svgId)}}function c(w,T){if(1&w&&(I.\u0275\u0275elementStart(0,"div",7),I.\u0275\u0275template(1,l,1,1,"img",8),I.\u0275\u0275template(2,s,1,1,"svg-use-symbol",9),I.\u0275\u0275elementEnd()),2&w){var v=T.$implicit;I.\u0275\u0275advance(1),I.\u0275\u0275property("ngIf",v.url),I.\u0275\u0275advance(1),I.\u0275\u0275property("ngIf",v.svgId)}}function O(w,T){if(1&w&&(I.\u0275\u0275elementStart(0,"div",5),I.\u0275\u0275template(1,c,3,2,"div",6),I.\u0275\u0275elementEnd()),2&w){var v=I.\u0275\u0275nextContext();I.\u0275\u0275advance(1),I.\u0275\u0275property("ngForOf",v.selectedIcons)}}function x(w,T){1&w&&I.\u0275\u0275element(0,"div",11)}var V=function(){function w(T,v,g,r,u,C){this.elementRef=T,this.eventBridge=v,this.injector=g,this.itemPickerService=r,this.localizationService=u,this.overlay=C}return w.prototype.ngOnInit=function(){var T=this;this.updateIconSets(),this.visibilityPicker=new f.X(!1),this.isPickerOpened$=this.visibilityPicker.asObservable(),this.iconSelected=new f.X(this.iconSetId),this.onIconSetSelected$=this.iconSelected.asObservable(),this.eventsSubscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(powerbi.events.visualThemeChanged,function(){T.iconSets=null,T.updateIconSets()})},w.prototype.ngOnDestroy=function(){this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.dispose(),this.eventsSubscriptionManager.unsubscribeAll()},w.prototype.setIcons=function(T){var v;this.iconSetId=T,this.selectedIcons=null===(v=this.iconSets[this.iconSetId])||void 0===v?void 0:v.icons,this.onIconSetSelected(T),this.iconSelected.next(T),this.overlayRef&&this.overlayRef.hasAttached()&&this.closePicker()},w.prototype.toggle=function(){this.overlayRef&&this.overlayRef.hasAttached()?this.closePicker():this.openIconPicker()},w.prototype.closePicker=function(){this.overlayRef.dispose(),this.onClose&&this.onClose(),this.visibilityPicker.next(!1)},w.prototype.updateIconSets=function(){var T;for(var v in this.iconSets=this.itemPickerService.getIconSets(),this.icons=this.itemPickerService.getIcons(),this.iconSets){var g=this.iconSets[v];g.icons=[];for(var r=0,u=g.iconIds;r<u.length;r++)g.icons.push(this.icons[u[r]])}this.selectedIcons=null===(T=this.iconSets[this.iconSetId])||void 0===T?void 0:T.icons},w.prototype.openIconPicker=function(){var T=this;if(!this.isDisabled){var v=this.overlay.position().flexibleConnectedTo(this.elementRef).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"}]);this.overlayRef=this.overlay.create({width:"262px",height:"360px",hasBackdrop:!0,backdropClass:"invisible-backdrop",positionStrategy:v});var g=new WeakMap;g.set(this.itemPickerService,M.a),g.set(this.localizationService,i.o),g.set(n.Iu,this.overlayRef);var r=new e.nK(this.injector,g),u=new e.C5(E.V,null,r),C=this.overlayRef.attach(u);C.instance.labelId=this.labelId,C.instance.iconSetId=this.iconSetId,C.instance.iconSets=this.iconSets,C.instance.onClose=this.onClose,this.overlayRef.backdropClick().subscribe(function(F){return T.closePicker()}),C.instance.iconSetChanged.subscribe(function(F){return T.setIcons(F)}),this.visibilityPicker.next(!0)}},w.\u0275fac=function(v){return new(v||w)(I.\u0275\u0275directiveInject(I.ElementRef),I.\u0275\u0275directiveInject(d.J),I.\u0275\u0275directiveInject(I.Injector),I.\u0275\u0275directiveInject(M.a),I.\u0275\u0275directiveInject(i.o),I.\u0275\u0275directiveInject(n.aV))},w.\u0275cmp=I.\u0275\u0275defineComponent({type:w,selectors:[["icon-set-picker-input"]],inputs:{isDisabled:"isDisabled",labelId:"labelId",iconSetId:"iconSetId",onIconSetSelected:"onIconSetSelected",onClose:"onClose"},decls:6,vars:8,consts:[["role","combobox",1,"iconSetPicker",3,"tabindex","accessible-click"],[1,"iconsetpicker-anchor"],["class","selectedIconSet",4,"ngIf"],["class","iconSet-custom","localize","ConditionalFormattingDialog_RuleBased_IconStyleCustom",4,"ngIf"],["name","flickup","size","micro",1,"iconSetPicker-icon"],[1,"selectedIconSet"],["class","iconSet-icon",4,"ngFor","ngForOf"],[1,"iconSet-icon"],[4,"ngIf"],["class","iconSvg","sheet","conditionalFormattingDialogIcons",3,"symbolId",4,"ngIf"],["sheet","conditionalFormattingDialogIcons",1,"iconSvg",3,"symbolId"],["localize","ConditionalFormattingDialog_RuleBased_IconStyleCustom",1,"iconSet-custom"]],template:function(v,g){1&v&&(I.\u0275\u0275elementStart(0,"div",0),I.\u0275\u0275listener("accessible-click",function(){return g.toggle()}),I.\u0275\u0275pipe(1,"async"),I.\u0275\u0275elementStart(2,"div",1),I.\u0275\u0275template(3,O,2,1,"div",2),I.\u0275\u0275template(4,x,1,0,"div",3),I.\u0275\u0275element(5,"pbi-icon",4),I.\u0275\u0275elementEnd(),I.\u0275\u0275elementEnd()),2&v&&(I.\u0275\u0275propertyInterpolate("tabindex",g.isDisabled?-1:0),I.\u0275\u0275attribute("aria-labelledby",g.labelId)("aria-expanded",!!I.\u0275\u0275pipeBind1(1,6,g.isPickerOpened$))("aria-disabled",!!g.isDisabled),I.\u0275\u0275advance(3),I.\u0275\u0275property("ngIf",g.iconSetId),I.\u0275\u0275advance(1),I.\u0275\u0275property("ngIf",!g.iconSetId))},directives:[P.t,y.NgIf,b._,y.NgForOf,a.k,o.X],pipes:[y.AsyncPipe],styles:["[_nghost-%COMP%]{height:28px}.iconSetPicker[_ngcontent-%COMP%]{position:relative;border:1px solid var(--black-color, #000);box-sizing:border-box;width:262px;margin-top:0;height:28px;padding-left:8px;vertical-align:middle;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.iconsetpicker-anchor[_ngcontent-%COMP%]{display:flex;align-items:center}.iconsetpicker-anchor[_ngcontent-%COMP%]   .selectedIconSet[_ngcontent-%COMP%]{display:inline-block;width:226px;overflow:hidden}.iconsetpicker-anchor[_ngcontent-%COMP%]   .iconSet-custom[_ngcontent-%COMP%]{display:inline-block;margin:4px}.iconsetpicker-anchor[_ngcontent-%COMP%]   .iconSetPicker-icon[_ngcontent-%COMP%]{position:absolute;margin-top:3px;margin-right:10px;right:0}  .iconSet-icon{display:inline-block;margin:6px;width:16px;height:16px}  .iconSet-icon img{max-width:100%;max-height:100%}"]}),w}()},62240:function(Ee,ne,t){t.d(ne,{V:function(){return l}});var e=t(76430),n=t(86385),f=t(60660),i=t(43041),M=t(60400),E=t(48830),I=t(29595),d=["popup"],P=["icons"];function y(c,O){if(1&c&&e.\u0275\u0275element(0,"img"),2&c){var x=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275attribute("src",x.imageUrl,e.\u0275\u0275sanitizeUrl)}}function b(c,O){if(1&c&&e.\u0275\u0275element(0,"svg-use-symbol",12),2&c){var x=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("symbolId",x.svgId)}}function a(c,O){if(1&c&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275template(1,y,1,1,"img",10),e.\u0275\u0275template(2,b,1,1,"svg-use-symbol",11),e.\u0275\u0275elementEnd()),2&c){var x=O.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",x.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",x.svgId)}}function o(c,O){if(1&c){var x=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",6,7),e.\u0275\u0275listener("keydown",function(g){var u=e.\u0275\u0275restoreView(x).index;return e.\u0275\u0275nextContext().onIconSetKeyDown(g,u)})("accessible-click",function(g){var u=e.\u0275\u0275restoreView(x).$implicit;return e.\u0275\u0275nextContext().iconSetSelected(g,u.key)}),e.\u0275\u0275template(2,a,3,2,"div",8),e.\u0275\u0275elementEnd()}if(2&c){var V=O.$implicit,w=O.index,T=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("tabindex",0===w?0:-1),e.\u0275\u0275attribute("aria-posinset",w+1)("key",w)("aria-label",T.ariaLabels[V.key]),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",V.value.icons)}}var l=function(){function c(O,x){this.localizationService=O,this.overlayRef=x,this.iconSetChanged=new e.EventEmitter}return c.prototype.ngOnInit=function(){this.ariaLabels={};for(var O=0,x=Object.keys(this.iconSets);O<x.length;O++){var V=x[O];this.ariaLabels[V]=this.setAriaLabel(this.iconSets[V])}},c.prototype.ngAfterViewInit=function(){this.focusManager=new s(this.iconElementRefs,Object.keys(this.iconSets).length),this.focusManager.focusFirstIcon()},c.prototype.setIcons=function(O){this.iconSetId=O},c.prototype.iconSetSelected=function(O,x){this.setIcons(x),this.iconSetChanged.emit(x),O.preventDefault(),O.stopPropagation()},c.prototype.close=function(){this.overlayRef.dispose(),this.onClose&&this.onClose()},c.prototype.onIconSetKeyDown=function(O,x){O.keyCode===n.hY?this.close():this.focusManager.onIconSetKeyDown(O,x),O.preventDefault(),O.stopPropagation()},c.prototype.setAriaLabel=function(O){for(var x="",V=0,w=O.icons;V<w.length;V++){var T=w[V];x+=this.localizationService.get("string"==typeof T.description?T.description:T.description.resourceKey)+", "}return x},c.\u0275fac=function(x){return new(x||c)(e.\u0275\u0275directiveInject(f.o),e.\u0275\u0275directiveInject(i.Iu))},c.\u0275cmp=e.\u0275\u0275defineComponent({type:c,selectors:[["icon-set-picker"]],viewQuery:function(x,V){if(1&x&&(e.\u0275\u0275viewQuery(d,7),e.\u0275\u0275viewQuery(P,5,e.ElementRef)),2&x){var w=void 0;e.\u0275\u0275queryRefresh(w=e.\u0275\u0275loadQuery())&&(V.popup=w.first),e.\u0275\u0275queryRefresh(w=e.\u0275\u0275loadQuery())&&(V.iconElementRefs=w)}},inputs:{labelId:"labelId",iconSetId:"iconSetId",iconSets:"iconSets",onClose:"onClose"},outputs:{iconSetChanged:"iconSetChanged"},decls:7,vars:3,consts:[[1,"popup","themeableElement"],["popup",""],[1,"iconSet-flyout"],["role","listbox",1,"iconSet-container"],[1,"iconSet-container-scroll"],["class","iconSet","role","option",3,"tabindex","keydown","accessible-click",4,"ngFor","ngForOf"],["role","option",1,"iconSet",3,"tabindex","keydown","accessible-click"],["icons",""],["class","iconSet-icon",4,"ngFor","ngForOf"],[1,"iconSet-icon"],[4,"ngIf"],["class","iconSvg","sheet","conditionalFormattingDialogIcons",3,"symbolId",4,"ngIf"],["sheet","conditionalFormattingDialogIcons",1,"iconSvg",3,"symbolId"]],template:function(x,V){1&x&&(e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275template(5,o,3,5,"div",5),e.\u0275\u0275pipe(6,"keyvalue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&x&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(6,1,V.iconSets)))},directives:[M.NgForOf,E.t,M.NgIf,I.k],pipes:[M.KeyValuePipe],styles:["[_nghost-%COMP%]{position:relative}.popup[_ngcontent-%COMP%]{position:fixed;color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39);background-color:var(--white-color, #FFF);box-shadow:var(--fluent-shadow-depth64, 0 25.6px 57.6px 0 rgba(0, 0, 0, .22), 0 4.8px 14.4px 0 rgba(0, 0, 0, .18));font-size:12px}.iconSet-container[_ngcontent-%COMP%]{overflow-y:auto;max-height:360px}.iconSet-flyout[_ngcontent-%COMP%]{width:262px;margin-left:0}.iconSet[_ngcontent-%COMP%]{padding-left:8px}.iconSet[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}"]}),c}(),s=function(){function c(O,x){this.iconElementRefs=O,this.totalIconSets=x}return c.prototype.onIconSetKeyDown=function(O,x){switch(O.keyCode){case n.Mf:this.focusOnNextIcon(O.shiftKey?n.LH:n.JH,x);break;case n.LH:case n.JH:case n.oh:case n.SV:this.focusOnNextIcon(O.keyCode,x)}},c.prototype.focusFirstIcon=function(){this.getElementFromIndex(0).focus()},c.prototype.focusOnNextIcon=function(O,x){var V=this.getNextColorIndex(O,x);this.getElementFromIndex(V).focus()},c.prototype.getElementFromIndex=function(O){return this.iconElementRefs.map(function(x){return x.nativeElement}).find(function(x){return x.getAttribute("key")===O.toString()})},c.prototype.getNextColorIndex=function(O,x){return(x+(O===n.JH||O===n.SV?1:-1)+this.totalIconSets)%this.totalIconSets},c}()},23053:function(Ee,ne,t){t.d(ne,{O:function(){return v}});var e=t(76430),n=t(60354),f=t(71367),i=t(66075),M=t(7078),E=t(24824),I=t(76963),d=t(60660),P=t(79224),y=t(4928),b=t(60400),a=t(86592),o=powerbi.explore.services.createVisualHostServices,l=powerbi.data.DataViewObjectDefinitions,s=powerbi.explore.services.events,c=powerbi.data.SemanticFilter,O=powerbi.data.SemanticQuery,x=powerbi.data.SQExprBuilder,V=powerbi.explore.util.VisualContainerUtils,w=powerbi.explore.contracts.VisualQuery;function T(g,r){if(1&g&&e.\u0275\u0275element(0,"single-visual-host",3),2&g){var u=e.\u0275\u0275nextContext();e.\u0275\u0275property("visual",u.visual)("visualViewport",u.viewport)("themeCollection",u.themeCollection)("config",u.singleVisualHostConfig)}}var v=function(){function g(r,u,C,F,A,W,k,R,G){var le=this;this.eventBridge=r,this.explorationNavigation=u,this.filterGenerator=C,this.geocoder=F,this.geolocationService=A,this.localizationService=W,this.moduleLoader=k,this.promiseFactory=R,this.visualHostTooltipServiceFactory=G,this.modelChange=new e.EventEmitter,this.queryError=new e.EventEmitter,this.slicerWidth=146,this.slicerHeight=28,this.singleVisualHostConfig={notifyStart:_.noop,notifyEnd:_.noop,clearQueryErrors:_.noop,handleQueryErrors:function(re){return le.handleQueryErrors(re)},handleQueryWarnings:_.noop,queryVisualHostServices:{getFilters:function(){if(le.filter){for(var re=new powerbi.explore.services.FilterBuilder,ie=0,Z=c.unmerge(le.filter);ie<Z.length;ie++)re.addVisualFilter({filter:Z[ie]});return re.getFilters()}},getDataSourceVariables:function(){var re=le.explorationNavigation.getCurrentExploration();return null==re?void 0:re.dataSourceVariables},disableAnchorTime:!0},visualHostServices:powerbi.Prototype.inherit(o({geocoder:this.geocoder,geolocation:this.geolocationService,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.create()}),function(ge){ge.persistProperties=function(re){return le.persistProperties(re)},ge.getLocalizedString=function(re){return le.getLocalizedString(re)}}),interactivityOptions:{selection:!0},additionalObjectUpdates:void 0,disableQueryCacheUpdates:!1,noLoadMore:!1},this.viewport={width:this.slicerWidth,height:this.slicerHeight,scale:1},this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(powerbi.events.visualThemeChanged,function(){return le.updateTheme()})}return g.prototype.ngOnInit=function(){this.updateTheme(),this.createVisualContainer(),this.isInitialized=!0},g.prototype.ngOnChanges=function(r){if(this.isInitialized){if(r.filter&&!c.isSameFilter(r.filter.currentValue,r.filter.previousValue)){var C=this.createQuery(this.field,r.filter.currentValue);this.visual.config.singleVisual.query=C,this.triggerChanges()}r.field&&(C=this.createQuery(r.field.currentValue,this.filter),this.visual.config.singleVisual.query=C,r.selectedValue||this.setFilterObject(this.visual,void 0),this.triggerChanges()),r.selectedValue&&(this.setFilterObject(this.visual,r.selectedValue.currentValue),this.triggerChanges())}},g.prototype.ngOnDestroy=function(){this.subscriptionManager&&(this.subscriptionManager.unsubscribeAll(),this.subscriptionManager=null)},g.prototype.createVisualContainer=function(){if(this.field){var r={},u=powerbi.visuals.slicerProps.data.mode,C=powerbi.visuals.slicerProps.selection.selectAllCheckboxEnabled,F=powerbi.visuals.slicerProps.selection.singleSelect,A=powerbi.visuals.slicerProps.header.show,W=powerbi.visuals.slicerProps.items.textSize;l.setValue(r,u,null,x.text(this.mode)),l.setValue(r,C,null,x.boolean(!1)),l.setValue(r,F,null,x.boolean(!0)),l.setValue(r,A,null,x.boolean(!1)),l.setValue(r,W,null,x.integer(powerbi.explore.constants.smallFontSizeInPoint)),this.visualName=jsCommon.Utility.generateGuid();var k={name:this.visualName,config:{singleVisual:{visualType:powerbi.visuals.plugins.slicer.name,objects:r}}},R=this.createQuery(this.field,this.filter);k.config.singleVisual.query=R,this.selectedValue&&this.setFilterObject(k,this.selectedValue),this.visual=k}},g.prototype.persistProperties=function(r){var F,u=this.filterGenerator.tryGetFilterPropertyIdentifier(powerbi.visuals.plugins.slicer.capabilities),C=_.isArray(r)?{merge:r}:r;C&&!_.isEmpty(C.merge)&&(F=_.find(C.merge,function(W){return W.objectName===u.objectName}).properties[u.propertyName]),this.setFilterObject(this.visual,F),this.triggerChanges(),this.modelChange.emit({field:this.field,filter:F})},g.prototype.getLocalizedString=function(r){return this.localizationService.get("All"===r?"InstancePicker_Slicer_Restatement_All":r)},g.prototype.handleQueryErrors=function(r){this.queryError.emit(r)},g.prototype.createQuery=function(r,u){var C=new w(O.create(),{},[]);return C.add(r,powerbi.visuals.slicerRoles.value),u&&(C.defn=C.defn.where(u.where(),u.from())),C},g.prototype.setFilterObject=function(r,u){var C=this.filterGenerator.tryGetFilterPropertyIdentifier(powerbi.visuals.plugins.slicer.capabilities),F=V.getObjectDefinitions(r);u?l.setValue(F,C,null,u):l.deleteProperty(F,C.objectName,null,C.propertyName)},g.prototype.triggerChanges=function(){var r=this;this.eventBridge.publishToChannel(s.visualContainerChanged,{affectContainer:function(C){return C.name===r.visualName}})},g.prototype.updateTheme=function(){var r=this.explorationNavigation.getCurrentExploration();this.themeCollection=null==r?void 0:r.themeCollection},g.\u0275fac=function(u){return new(u||g)(e.\u0275\u0275directiveInject(f.J),e.\u0275\u0275directiveInject(i.z),e.\u0275\u0275directiveInject(M.r),e.\u0275\u0275directiveInject(E.i),e.\u0275\u0275directiveInject(I._1),e.\u0275\u0275directiveInject(d.o),e.\u0275\u0275directiveInject(P.m),e.\u0275\u0275directiveInject(n.t),e.\u0275\u0275directiveInject(y.q))},g.\u0275cmp=e.\u0275\u0275defineComponent({type:g,selectors:[["instance-picker-modern"]],inputs:{mode:"mode",filter:"filter",field:"field",selectedValue:"selectedValue"},outputs:{modelChange:"modelChange",queryError:"queryError"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:1,consts:[[1,"instancePicker"],[1,"singleVisualHostContainer"],[3,"visual","visualViewport","themeCollection","config",4,"ngIf"],[3,"visual","visualViewport","themeCollection","config"]],template:function(u,C){1&u&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275template(2,T,1,4,"single-visual-host",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&u&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",C.field&&C.visual&&C.singleVisualHostConfig))},directives:[b.NgIf,a.v],styles:[".instancePicker[_ngcontent-%COMP%]   .singleVisualHostContainer[_ngcontent-%COMP%]{position:relative}.instancePicker[_ngcontent-%COMP%]   .singleVisualHostContainer[_ngcontent-%COMP%]   single-visual-host[_ngcontent-%COMP%]     visual-modern{width:100%}"]}),g}()},56812:function(Ee,ne,t){t.d(ne,{s:function(){return l}});var e=t(40582),n=t(76430),f=t(60660),i=t(60400),M=t(76681),E=t(48830),I=powerbi.visuals.FontProperties,d=powerbi.Promise;function P(s,c){if(1&s){var O=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mobile-tooltip-child-menu",3),n.\u0275\u0275listener("onHide",function(){return n.\u0275\u0275restoreView(O),n.\u0275\u0275nextContext().onHide}),n.\u0275\u0275elementEnd()}if(2&s){var x=n.\u0275\u0275nextContext();n.\u0275\u0275property("commandsMenu",x.childMenu)("actionIconStyle",x.styles.actionIconStyle)("actionTitleStyle",x.styles.actionTitleStyle)("ngStyle",x.styles.mobileContainerStyle)}}function y(s,c){if(1&s&&n.\u0275\u0275element(0,"hr",4),2&s){var O=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",O.styles.dividerStyle)}}var b=function(c,O){return[c,O]};function a(s,c){if(1&s){var O=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",7),n.\u0275\u0275listener("accessible-click",function(){var v=n.\u0275\u0275restoreView(O).$implicit;return n.\u0275\u0275nextContext(2).execute(v.command)}),n.\u0275\u0275element(1,"div",8),n.\u0275\u0275elementStart(2,"div",9),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}if(2&s){var x=c.$implicit,V=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("disabled",!x.enabled),n.\u0275\u0275attribute("aria-label",x.command.title(V.localizationService)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(6,b,x.command.glyph,x.command.title().toLowerCase()))("ngStyle",V.styles.actionIconStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",V.styles.actionTitleStyle),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(x.command.title(V.localizationService))}}function o(s,c){if(1&s&&(n.\u0275\u0275elementStart(0,"div",5),n.\u0275\u0275template(1,a,4,9,"button",6),n.\u0275\u0275elementEnd()),2&s){var O=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",O.styles.mobileContainerStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",O.commands)}}var l=function(){function s(c){this.localizationService=c,this.onHide=new n.EventEmitter,this.showChildMenu=new n.EventEmitter,this.styles={dividerStyle:{},actionTitleStyle:{},actionIconStyle:{},mobileContainerStyle:{}}}return s.prototype.ngOnChanges=function(c){(c.tooltipShown&&c.tooltipShown.currentValue||this.tooltipShown&&c.identities&&c.identities.currentValue)&&(this.childMenu=void 0,this.commands=this.getCommands()),this.setupStyle()},s.prototype.hide=function(){this.childMenu=void 0,this.showChildMenu.emit({show:!1}),this.onHide.emit()},s.prototype.execute=function(c){return(0,e.mG)(this,void 0,d,function(){var O;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return[4,c.getChildren()];case 1:return O=x.sent(),_.isEmpty(O)?[3,2]:(this.toggleChildMenu(O),[3,4]);case 2:return c.execute?[4,c.execute()]:[3,4];case 3:x.sent(),this.hide(),x.label=4;case 4:return[2]}})})},s.prototype.toggleChildMenu=function(c){this.childMenu=this.childMenu?void 0:c,this.showChildMenu.emit({show:!!this.childMenu})},s.prototype.getCommands=function(){return this.actionsProvider&&this.actionsProvider.updateAndGetTooltipCommands()},s.prototype.setupStyle=function(){var c=this.tooltipStyle;if(c){if(c.actionFontProperties){var O=I.toHTMLStyle(c.actionFontProperties);this.styles.actionIconStyle.color=O.color,this.styles.actionTitleStyle.color=O.color,this.styles.actionTitleStyle["font-family"]=O["font-family"]}this.styles.dividerStyle["background-color"]=c.dividerColor,this.styles.mobileContainerStyle["background-color"]=c.background.solid.color;var x=null!=c.transparency?1-c.transparency/100:1;this.styles.dividerStyle.opacity=x,this.styles.mobileContainerStyle.opacity=x}},s.\u0275fac=function(O){return new(O||s)(n.\u0275\u0275directiveInject(f.o))},s.\u0275cmp=n.\u0275\u0275defineComponent({type:s,selectors:[["mobile-tooltip-actions"]],inputs:{actionsProvider:"actionsProvider",identities:"identities",tooltipShown:"tooltipShown",tooltipStyle:"tooltipStyle"},outputs:{onHide:"onHide",showChildMenu:"showChildMenu"},features:[n.\u0275\u0275NgOnChangesFeature],decls:3,vars:3,consts:[[3,"commandsMenu","actionIconStyle","actionTitleStyle","ngStyle","onHide",4,"ngIf"],["class","tooltip-divider",3,"ngStyle",4,"ngIf"],["class","mobile-tooltip-actions-container",3,"ngStyle",4,"ngIf"],[3,"commandsMenu","actionIconStyle","actionTitleStyle","ngStyle","onHide"],[1,"tooltip-divider",3,"ngStyle"],[1,"mobile-tooltip-actions-container",3,"ngStyle"],["class","action-button",3,"disabled","accessible-click",4,"ngFor","ngForOf"],[1,"action-button",3,"disabled","accessible-click"],[1,"glyphicon",3,"ngClass","ngStyle"],[1,"title",3,"ngStyle"]],template:function(O,x){1&O&&(n.\u0275\u0275template(0,P,1,4,"mobile-tooltip-child-menu",0),n.\u0275\u0275template(1,y,1,1,"hr",1),n.\u0275\u0275template(2,o,2,2,"div",2)),2&O&&(n.\u0275\u0275property("ngIf",!!x.childMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==x.commands?null:x.commands.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==x.commands?null:x.commands.length))},directives:[i.NgIf,M.d,i.NgStyle,i.NgForOf,E.t,i.NgClass],styles:['.tooltip-divider[_ngcontent-%COMP%]{width:100%;height:1px;border:none;margin:0}.mobile-tooltip-actions-container[_ngcontent-%COMP%]{pointer-events:auto;height:48px;background-color:#121212;opacity:.87;display:flex;flex-direction:row;justify-content:flex-start}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover, .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus{padding:0;border:none;background-color:transparent;width:80px;height:48px;margin-left:4px;color:#e1e1e1}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover   .glyphicon[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus   .glyphicon[_ngcontent-%COMP%]{width:20px;height:20px;font-size:20px;margin-top:4px;color:#e1e1e1}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus   .title[_ngcontent-%COMP%]{font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif;font-size:10px}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   .glyphicon[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertiary-color, #A19F9D)!important;touch-action:none}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   .title[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertiary-color, #A19F9D)!important}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-left:auto}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:focus{margin-left:auto}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px;margin-top:0}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .hide-action-button[_ngcontent-%COMP%]{display:none}']}),s}()},76681:function(Ee,ne,t){t.d(ne,{d:function(){return b}});var e=t(40582),n=t(76430),f=t(95781),i=t(60400),M=t(48830);function E(a,o){if(1&a){var l=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",2),n.\u0275\u0275listener("accessible-click",function(){return n.\u0275\u0275restoreView(l),n.\u0275\u0275nextContext().back()}),n.\u0275\u0275element(1,"div",3),n.\u0275\u0275elementStart(2,"label",4),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}if(2&a){var s=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",s.actionIconStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",s.actionTitleStyle),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(s.commandsMenuTitle)}}function I(a,o){if(1&a&&n.\u0275\u0275element(0,"span",9),2&a){var l=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",l.actionIconStyle)}}function d(a,o){if(1&a&&n.\u0275\u0275element(0,"div",10),2&a){var l=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",l.actionIconStyle)}}var P=function(o){return{"border-bottom-color":o}};function y(a,o){if(1&a){var l=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",5),n.\u0275\u0275listener("accessible-click",function(){var V=n.\u0275\u0275restoreView(l).$implicit;return n.\u0275\u0275nextContext().execute(V)}),n.\u0275\u0275template(1,I,1,1,"span",6),n.\u0275\u0275elementStart(2,"label",7),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(4,d,1,1,"div",8),n.\u0275\u0275elementEnd()}if(2&a){var s=o.$implicit,c=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(5,P,c.dividerStyle.background-c.color)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",c.isNewMobileTooltip),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",c.actionTitleStyle),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(s.title()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!c.isNewMobileTooltip)}}var b=function(){function a(o){this.featureSwitchService=o,this.actionIconStyle={},this.actionTitleStyle={},this.dividerStyle={},this.onHide=new n.EventEmitter,this.onBack=new n.EventEmitter}return Object.defineProperty(a.prototype,"isNewMobileTooltip",{get:function(){return this.featureSwitchService.featureSwitches.newMobileTooltip},enumerable:!1,configurable:!0}),a.prototype.execute=function(o){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var l;return(0,e.Jh)(this,function(s){switch(s.label){case 0:return[4,o.getChildren()];case 1:return l=s.sent(),_.isEmpty(l)?[3,2]:(this.commandsMenu=l,[3,4]);case 2:return o.execute?[4,o.execute()]:[3,4];case 3:s.sent(),this.onHide.emit(),s.label=4;case 4:return[2]}})})},a.prototype.back=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(o){return this.onBack.emit(),[2]})})},a.\u0275fac=function(l){return new(l||a)(n.\u0275\u0275directiveInject(f.vZ))},a.\u0275cmp=n.\u0275\u0275defineComponent({type:a,selectors:[["mobile-tooltip-child-menu"]],inputs:{commandsMenu:"commandsMenu",commandsMenuTitle:"commandsMenuTitle",actionIconStyle:"actionIconStyle",actionTitleStyle:"actionTitleStyle",dividerStyle:"dividerStyle"},outputs:{onHide:"onHide",onBack:"onBack"},decls:2,vars:2,consts:[["class","child-action",3,"accessible-click",4,"ngIf"],["class","child-action",3,"ngStyle","accessible-click",4,"ngFor","ngForOf"],[1,"child-action",3,"accessible-click"],[1,"chevron","glyphicon","pbi-glyph-chevronleftmedium",3,"ngStyle"],[1,"title-label",3,"ngStyle"],[1,"child-action",3,"ngStyle","accessible-click"],["class","glyphicon glyph-small pbi-glyph-file",3,"ngStyle",4,"ngIf"],[3,"ngStyle"],["class","chevron glyphicon pbi-glyph-chevronrightmedium",3,"ngStyle",4,"ngIf"],[1,"glyphicon","glyph-small","pbi-glyph-file",3,"ngStyle"],[1,"chevron","glyphicon","pbi-glyph-chevronrightmedium",3,"ngStyle"]],template:function(l,s){1&l&&(n.\u0275\u0275template(0,E,4,3,"button",0),n.\u0275\u0275template(1,y,5,7,"button",1)),2&l&&(n.\u0275\u0275property("ngIf",s.isNewMobileTooltip),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",s.commandsMenu))},directives:[i.NgIf,i.NgForOf,M.t,i.NgStyle],styles:['@media (orientation: landscape){.tooltip-container.truncate-tooltip-height.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%], .tooltip-container.truncate-tooltip-height.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]{max-height:80px}}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]{height:auto;max-height:160px}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]:first-child, .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]:first-child{border-bottom:none;padding:6px 56px 2px 0;font-weight:700}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]:last-child, .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]:last-child{border-bottom:none}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]{justify-content:left;margin:0 16px;padding:6px 56px 6px 0}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .title-label[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .title-label[_ngcontent-%COMP%]{padding-left:16px}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .pbi-glyph-file[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .pbi-glyph-file[_ngcontent-%COMP%]{color:#201f1e;padding:6px 16px 6px 0}[_nghost-%COMP%]{display:flex;flex-direction:column;background-color:var(--fluent-theme-neutral-dark-color, #201F1E);height:100px;overflow-y:auto}[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]{display:flex;justify-content:space-between;min-height:40px;background-color:transparent;border:none;border-bottom:1px solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);padding:12px 56px 12px 16px}[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);font-size:12px;font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif;padding-top:4px}[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{float:right;color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);width:16px;height:16px;font-size:14px;margin:auto 0}']}),a}()},8824:function(Ee,ne,t){t.d(ne,{Q:function(){return P}});var e=t(76430),n=t(95781),f=t(60400),i=t(14989),M=t(48830),E=powerbi.visuals.FontProperties;function I(y,b){if(1&y&&(e.\u0275\u0275elementStart(0,"span",4),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&y){var a=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngStyle",a.headerTextStyle),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",a.mobileTooltipHeaderText," ")}}var d=function(){return{"aria-label":"Close"}},P=function(){function y(b){this.featureSwitchService=b,this.onHide=new e.EventEmitter,this.mobileTooltipHeaderStyle={},this.closeButtonStyle={},this.headerTextStyle={}}return Object.defineProperty(y.prototype,"isNewMobileTooltip",{get:function(){return this.featureSwitchService.featureSwitches.newMobileTooltip},enumerable:!1,configurable:!0}),y.prototype.ngOnChanges=function(b){var a,o,l=this.tooltipStyle;if(l&&this.isNewMobileTooltip){var s=E.toHTMLStyle(l.titleFontProperties);this.mobileTooltipHeaderStyle["background-color"]=null===(o=null===(a=null==l?void 0:l.background)||void 0===a?void 0:a.solid)||void 0===o?void 0:o.color,this.mobileTooltipHeaderStyle.opacity=null!=l.transparency?1-l.transparency/100:1,this.closeButtonStyle.color=l.valueFontProperties.color,this.headerTextStyle.color=l.valueFontProperties.color,this.headerTextStyle["font-size"]=s["font-size"],this.headerTextStyle["font-weight"]="700"}},y.prototype.hide=function(){this.onHide.emit()},y.\u0275fac=function(a){return new(a||y)(e.\u0275\u0275directiveInject(n.vZ))},y.\u0275cmp=e.\u0275\u0275defineComponent({type:y,selectors:[["mobile-tooltip-header"]],inputs:{tooltipStyle:"tooltipStyle",mobileTooltipHeaderText:"mobileTooltipHeaderText"},outputs:{onHide:"onHide"},features:[e.\u0275\u0275NgOnChangesFeature],decls:4,vars:5,consts:[[1,"mobile-tooltip-header-container",3,"ngStyle"],["class","mobile-tooltip-header-text trimmedTextWithEllipsis",3,"ngStyle",4,"ngIf"],[1,"close-button",3,"localizeAttr","accessible-click"],[1,"glyphicon","pbi-glyph-close",3,"ngStyle"],[1,"mobile-tooltip-header-text","trimmedTextWithEllipsis",3,"ngStyle"]],template:function(a,o){1&a&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,I,2,2,"span",1),e.\u0275\u0275elementStart(2,"button",2),e.\u0275\u0275listener("accessible-click",function(){return o.hide()}),e.\u0275\u0275element(3,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275property("ngStyle",o.mobileTooltipHeaderStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.isNewMobileTooltip),e.\u0275\u0275advance(1),e.\u0275\u0275property("localizeAttr",e.\u0275\u0275pureFunction0(4,d)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",o.closeButtonStyle))},directives:[f.NgStyle,f.NgIf,i.b,M.t],styles:['.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]{float:none;position:relative}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}html:not([dir="rtl"]).tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html:not([dir="rtl"]).tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html:not([dir="rtl"])   .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html:not([dir="rtl"])   .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   html:not([dir="rtl"])[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   html:not([dir="rtl"])   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]{padding-left:16px}html[dir="rtl"].tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html[dir="rtl"].tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html[dir="rtl"]   .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html[dir="rtl"]   .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   html[dir="rtl"][_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   html[dir="rtl"]   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]{padding-right:16px}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]   .mobile-tooltip-header-text[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]   .mobile-tooltip-header-text[_ngcontent-%COMP%]{max-width:calc(100% - 41px)}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .close-button[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:focus, .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:focus{margin:0 0 0 auto}[_nghost-%COMP%]{float:right;width:40px;height:40px;position:absolute;right:0;z-index:1}.mobile-tooltip-header-container[_ngcontent-%COMP%]{pointer-events:auto;background-color:transparent}.mobile-tooltip-header-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   .glyphicon[_ngcontent-%COMP%]{color:#6e6e6e!important;touch-action:none}.mobile-tooltip-header-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   title[_ngcontent-%COMP%]{color:#6e6e6e!important}.mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:focus{padding:0;border:none;background-color:transparent;color:var(--fluent-theme-neutral-dark-color, #201F1E);width:40px;height:40px;margin:auto}.mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover   .glyphicon[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:focus   .glyphicon[_ngcontent-%COMP%]{width:16px;height:16px;font-size:12px;margin:auto;color:#e1e1e1}.mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:focus   .title[_ngcontent-%COMP%]{font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif;font-size:10px}'],changeDetection:0}),y}()},62998:function(Ee,ne,t){t.d(ne,{P:function(){return M}});var e=t(76430),n=t(50568),f=t(60400),i=function(I){return{regionOutlines:I}},M=function(){function E(){this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/format-mode/format-mode.module#FormatModeModule",this.componentId="OutlineOverlayComponentId"}return E.\u0275fac=function(d){return new(d||E)},E.\u0275cmp=e.\u0275\u0275defineComponent({type:E,selectors:[["outline-overlay-lazy"]],inputs:{regionOutlinesData:"regionOutlinesData"},decls:2,vars:7,consts:[[3,"inputArgs","modulePath","componentId"]],template:function(d,P){1&d&&(e.\u0275\u0275element(0,"pbi-lazy-load",0),e.\u0275\u0275pipe(1,"async")),2&d&&e.\u0275\u0275property("inputArgs",e.\u0275\u0275pureFunction1(5,i,e.\u0275\u0275pipeBind1(1,3,P.regionOutlinesData.regionOutlines$)))("modulePath",P.modulePath)("componentId",P.componentId)},directives:[n.R],pipes:[f.AsyncPipe],encapsulation:2,changeDetection:0}),E}()},35237:function(Ee,ne,t){t.d(ne,{t:function(){return K}});var e=t(75335),n=t(76430),f=t(498),i=t(71367),M=t(66075),E=t(23246),I=t(95781),d=t(43851),P=t(59116),y=t(93993),b=t(40629),a=t(60660),o=t(82882),l=t(61226),s=t(60400),c=t(9784),O=t(41062),x=t(56126),V=t(85654),w=t(83757),T=powerbi.common.ArrowVerticalPosition,v=powerbi.explore.services.events,g=powerbi.visuals.ColorHelper,r=powerbi.common.utils.ColorUtility,u=powerbi.DataViewObject,C=powerbi.data.DataViewObjectDefinitions,F=powerbi.explore.constants.ExploreCanvasConstants,A=powerbi.data.SQExprBuilder,W=powerbi.explore.util,k=["collapseIcon"],R=function(h,m){return{"pbi-glyph-view":h,"pbi-glyph-hide3":m}},G=function(h){return{color:h}};function le(p,h){if(1&p){var m=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",14),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(m),n.\u0275\u0275nextContext().toggleOutspacePaneVisibility()}),n.\u0275\u0275elementEnd()}if(2&p){var S=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(4,R,S.isOutspacePaneVisible,!S.isOutspacePaneVisible))("pbi-tooltip",S.showHidePaneTooltipConfig)("ngStyle",n.\u0275\u0275pureFunction1(7,G,S.color)),n.\u0275\u0275attribute("aria-label",S.hideShowTooltip)}}var ge=function(h,m,S){return{backgroundColor:h,"font-size":m,borderColor:S}};function re(p,h){if(1&p){var m=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"search-box-modern",15),n.\u0275\u0275listener("searchText",function(ce){return n.\u0275\u0275restoreView(m),n.\u0275\u0275nextContext().updateFilterSearchText(ce)}),n.\u0275\u0275elementEnd()}if(2&p){var S=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction3(2,ge,S.inputBoxColor,S.searchTextSize,S.borderColor))("initialValue",S.searchFiltersInput)}}function j(p,h){1&p&&n.\u0275\u0275element(0,"hr",16)}var ie=function(h){return{borderColor:h}};function Z(p,h){if(1&p&&(n.\u0275\u0275elementStart(0,"div",17),n.\u0275\u0275element(1,"filter-pane-modern",18,19),n.\u0275\u0275elementEnd()),2&p){var m=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(4,ie,m.borderColor))("isInOutspacePane",!0)("sectionObjects",m.sectionObjects)("searchFiltersInput",m.searchFiltersInput)}}var fe=function(h,m){return{outspacePaneCollapsed:h,outspacePaneExpanded:m}},Q=function(h,m,S,N,ce){return{backgroundColor:h,borderColor:m,borderWidth:S,width:N,color:ce}},J=function(){return{leftOrRight:"ew-resize"}},se=function(h,m,S){return{color:h,"font-size":m,"font-family":S}},oe=function(h,m){return{"pbi-glyph-doublechevronright":h,"pbi-glyph-doublechevronleft":m}},K=function(){function p(h,m,S,N,ce,he,Ce,me,Ze,Je,it){this.dir=h,this.eventBridge=m,this.featureSwitchService=S,this.gettingStartedService=N,this.navigationService=ce,this.telemetryService=he,this.themeService=Ce,this.undoRedoService=me,this.viewModeState=Ze,this.localizationService=Je,this.screenSizeService=it,this.headerTitle="VisualizationPane_Filters",this.isPaneExpanded=!0,this.backgroundColorSelector={objectName:"outspacePane",propertyName:"backgroundColor"},this.foregroundColorSelector={objectName:"outspacePane",propertyName:"foregroundColor"},this.inputBoxColorSelector={objectName:"outspacePane",propertyName:"inputBoxColor"},this.expandCollapsePaneEditModeLabel=this.localizationService.get("FilterPane_ExpandCollapse"),this.expandCollapsePaneEditModeTooltipConfig={tooltipArrowVerticalPosition:T.bottom,tooltipTitle:this.expandCollapsePaneEditModeLabel,tooltipShowOnFocus:!0},this.expandCollapsePaneReadModeLabel=this.localizationService.get("Pane_Toggle"),this.expandCollapsePaneReadModeTooltipConfig={tooltipArrowVerticalPosition:T.bottom,tooltipTitle:this.expandCollapsePaneReadModeLabel,tooltipShowOnFocus:!0},this.showHidePaneLabel=this.localizationService.get("FilterPane_ShowHide"),this.showHidePaneTooltipConfig={tooltipArrowVerticalPosition:T.bottom,tooltipTitle:this.showHidePaneLabel,tooltipShowOnFocus:!0}}return Object.defineProperty(p.prototype,"contractWidth",{get:function(){return powerbi.explore.util.CanvasVisualsUtility.getOutspacePaneWidth(this.navigationService)},enumerable:!1,configurable:!0}),p.prototype.paneWidth=function(){return this.isPaneExpanded?null!=this.manuallyResizedWidth?this.manuallyResizedWidth+"px":this.contractWidth+"px":F.OutspacePaneCollapsedWidth+"px"},Object.defineProperty(p.prototype,"showFilterPaneSearch",{get:function(){var m=this.navigationService.getCurrentExploration(),N=!(m.settings&&m.settings.disableFilterPaneSearch)&&this.isPaneExpanded;return!N&&""!==this.searchFiltersInput&&(this.searchFiltersInput=""),N},enumerable:!1,configurable:!0}),p.prototype.ngOnInit=function(){var h=this;this.autoCollapseSubscription=this.screenSizeService.observeMaxScreenSize(e._.Large).subscribe(function(S){S&&(h.isPaneExpanded=!1)});var m=this.navigationService.getCurrentExploration();m&&this.updateIsPaneExpanded(m.evaluatedObjects,this.isPaneExpanded),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(v.explorationObjectsLoaded,function(S,N){return h.updateIsPaneExpanded(N.evaluatedObjects,h.isPaneExpanded&&!h.screenSizeService.queryMaxWidth(e._.Large))}).subscribe(v.sectionChanged,function(S,N){h.onSectionChange()}),this.searchFiltersInput="",this.visibilitySubscription=this.gettingStartedService.filterPaneVisibility$.subscribe(function(S){h.updateIsPaneExpanded(h.navigationService.getCurrentExploration().evaluatedObjects,S.value,S.isForced)})},p.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.visibilitySubscription.unsubscribe(),this.autoCollapseSubscription.unsubscribe()},Object.defineProperty(p.prototype,"hideShowTooltip",{get:function(){return this.localizationService.get(this.isOutspacePaneVisible?"FilterPane_HidePane":"FilterPane_ShowPane")+", "+this.showHidePaneLabel},enumerable:!1,configurable:!0}),p.prototype.ngOnChanges=function(h){h.sectionObjects&&(this.updateStyle(h.sectionObjects.currentValue),this.isEditMode()&&void 0!==this.manuallyResizedWidth&&this.setResizedWidth())},p.prototype.toggle=function(){var h=this;this.isPaneExpanded=!this.isPaneExpanded,this.collapseIcon.nativeElement.focus();var m=A.boolean(this.isPaneExpanded),S=this.navigationService.getCurrentExploration();void 0===S.objects&&(S.objects={}),this.undoRedoService.register("ToggleOutspacePane",function(){C.setValue(S.objects,{objectName:"outspacePane",propertyName:"expanded"},null,m),h.eventBridge.publishToChannel(v.explorationObjectsChanged)}),this.telemetryService.logEvent(powerbi.telemetry.EXImprovedFilterExperienceToggleOutspacePaneExpansion,{expanded:this.isPaneExpanded,viewMode:W.getTelemetryViewMode(this.viewModeState.getMode())})},p.prototype.updateIsPaneExpanded=function(h,m,S){this.isPaneExpanded=S?m:u.getValue(h&&h.outspacePane,"expanded",m)},p.prototype.toggleOutspacePaneVisibility=function(){var h=this;this.isOutspacePaneVisible=!this.isOutspacePaneVisible;var m=A.boolean(this.isOutspacePaneVisible),S=this.navigationService.getCurrentExploration();this.undoRedoService.register("ToggleOutspacePaneVisibility",function(){void 0===S.objects&&(S.objects={}),C.setValue(S.objects,{objectName:"outspacePane",propertyName:"visible"},null,m),h.eventBridge.publishToChannel(v.explorationObjectsChanged)}),this.telemetryService.logEvent(powerbi.telemetry.EXImprovedFilterExperienceToggleOutspacePaneVisibility,{visible:this.isOutspacePaneVisible})},p.prototype.updateStyle=function(h){var m=h&&h.outspacePane,S=this.navigationService.getCurrentExploration(),ce=this.themeService.getVisualStyle(S.themeCollection),he=g.create(ce);this.setBackground(h,he),this.setText(m),this.setBorderColor(m),this.setBorderVisibility(m),this.setColor(h,he),this.setSearchTextSize(m),this.setInputBoxColor(h,he)},p.prototype.setBackground=function(h,m){var S=m.getColorForProperty(h,this.backgroundColorSelector,"background"),N=r.convertTransparencyToOpacity(u.getValue(h&&h.outspacePane,"transparency",F.DefaultOutspacePaneTransparency));this.backgroundColor=r.hexToRGBString(S,N)},p.prototype.setText=function(h){var m=u.getValue(h,"titleSize",F.DefaultOutspacePaneTitleSizePt);this.titleFontSize=m+"pt";var S=u.getValue(h,"fontFamily",F.DefaultOutspacePaneFontFamily);this.titleFontFamily=S},p.prototype.setSearchTextSize=function(h){var m=u.getValue(h,"searchTextSize",F.DefaultOutspaceSearchTextSizePt);this.searchTextSize=m+"pt"},p.prototype.setBorderColor=function(h){this.borderColor=u.getFillColorByPropertyName(h,"borderColor",F.DefaultOutspacePaneBorderColor)},p.prototype.setBorderVisibility=function(h){this.borderVisibility=u.getValue(h,"border",F.DefaultOutspacePaneBorder)},p.prototype.setColor=function(h,m){var S=m.getColorForProperty(h,this.foregroundColorSelector,"foreground");this.color=r.hexToRGBString(S)},p.prototype.setInputBoxColor=function(h,m){var S;S=m.getColorForProperty(h,h&&h.outspacePane&&h.outspacePane.inputBoxColor?this.inputBoxColorSelector:this.backgroundColorSelector,"background"),this.inputBoxColor=r.hexToRGBString(S)},p.prototype.onSectionChange=function(){this.setResizedWidth()},Object.defineProperty(p.prototype,"resizeEdges",{get:function(){return"rtl"===this.dir.value?{right:this.isPaneExpanded}:{left:this.isPaneExpanded}},enumerable:!1,configurable:!0}),p.prototype.onResizing=function(h){h.rectangle.width&&(this.isEditMode()?this.setContractWidth(h.rectangle.width):this.setResizedWidth(h.rectangle.width))},p.prototype.updateFilterSearchText=function(h){this.searchFiltersInput=h},p.prototype.onResizeEnd=function(){this.recurringActionInfo=void 0},p.prototype.setContractWidth=function(h){var m=this,S=this.getValueBoundByMinMax(h),N=A.integer(S),ce=this.navigationService.getCurrentSection();void 0===this.recurringActionInfo&&(this.recurringActionInfo=new D),this.undoRedoService.register("SetOutspacePaneContractWidth",function(){void 0===ce.objects&&(ce.objects={}),C.setValue(ce.objects,{objectName:"outspacePane",propertyName:"width"},null,N),m.eventBridge.publishToChannel(v.sectionObjectsChanged)},this.recurringActionInfo)},p.prototype.setResizedWidth=function(h){this.manuallyResizedWidth=h?this.getValueBoundByMinMax(h):void 0},p.prototype.getValueBoundByMinMax=function(h){return h>F.OutspacePaneMaxWidth?F.OutspacePaneMaxWidth:h<F.OutspacePaneMinWidth?F.OutspacePaneMinWidth:Math.round(h)},p.prototype.getValidationFunction=function(){return function(h){if(h.rectangle&&h.rectangle.width){var m=h.rectangle.width;return m<=F.OutspacePaneMaxWidth&&m>=F.OutspacePaneMinWidth}return!1}},p.prototype.isEditMode=function(){return 1===this.viewModeState.getMode()},p.\u0275fac=function(m){return new(m||p)(n.\u0275\u0275directiveInject(f.Is),n.\u0275\u0275directiveInject(i.J),n.\u0275\u0275directiveInject(I.vZ),n.\u0275\u0275directiveInject(d.c),n.\u0275\u0275directiveInject(M.z),n.\u0275\u0275directiveInject(P.y0),n.\u0275\u0275directiveInject(y.f),n.\u0275\u0275directiveInject(E.z),n.\u0275\u0275directiveInject(b.kc),n.\u0275\u0275directiveInject(a.o),n.\u0275\u0275directiveInject(e.O))},p.\u0275cmp=n.\u0275\u0275defineComponent({type:p,selectors:[["outspace-pane"]],viewQuery:function(m,S){var N;(1&m&&n.\u0275\u0275viewQuery(k,7),2&m)&&(n.\u0275\u0275queryRefresh(N=n.\u0275\u0275loadQuery())&&(S.collapseIcon=N.first))},inputs:{sectionObjects:"sectionObjects",isOutspacePaneVisible:"isOutspacePaneVisible"},features:[n.\u0275\u0275NgOnChangesFeature],decls:17,vars:50,consts:[["role","presentation","data-automation-type","outspacePaneGroup","mwlResizable","","keyboard-shortcuts","ctrl-F6","focus-priority","6","focus-nav-mode","Group",1,"outspacePane",3,"ngClass","ngStyle","enableGhostResize","resizeEdges","resizeCursorPrecision","resizeCursors","validateResize","resizing","resizeEnd"],[1,"paneHeader"],["role","heading","aria-level","2",1,"hiddenHeading",3,"localize"],[1,"btn","toggleBtn","pbi-borderless-button",3,"tabindex","pbi-tooltip","click"],[1,"title"],[1,"glyphicon","pbi-glyph-filter","filterBtnIcon",3,"ngStyle"],[1,"titleContainer"],["id","outspace-pane-title",1,"unselectable","sidePaneTitle",3,"localize","ngStyle"],["class","btn enableFilterPane pbi-borderless-button glyphicon glyph-mini",3,"ngClass","pbi-tooltip","ngStyle","click",4,"ngIf"],[1,"btn","collapseIcon","pbi-borderless-button","glyphicon","glyph-mini",3,"ngClass","pbi-tooltip","ngStyle","click"],["collapseIcon",""],["id","searchBoxTheme","class","themeableElement","focus-nav-mode","Hierarchy",3,"ngStyle","initialValue","searchText",4,"ngIf"],["class","searchFiltersLineBreak",4,"ngIf"],["class","paneContents",4,"ngIf"],[1,"btn","enableFilterPane","pbi-borderless-button","glyphicon","glyph-mini",3,"ngClass","pbi-tooltip","ngStyle","click"],["id","searchBoxTheme","focus-nav-mode","Hierarchy",1,"themeableElement",3,"ngStyle","initialValue","searchText"],[1,"searchFiltersLineBreak"],[1,"paneContents"],[3,"ngStyle","isInOutspacePane","sectionObjects","searchFiltersInput"],["filterPane",""]],template:function(m,S){1&m&&(n.\u0275\u0275elementStart(0,"article",0),n.\u0275\u0275listener("resizing",function(ce){return S.onResizing(ce)})("resizeEnd",function(){return S.onResizeEnd()}),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275element(2,"span",2),n.\u0275\u0275pipe(3,"localize"),n.\u0275\u0275elementStart(4,"button",3),n.\u0275\u0275listener("click",function(){return S.toggle()}),n.\u0275\u0275elementStart(5,"div",4),n.\u0275\u0275element(6,"div",5),n.\u0275\u0275elementStart(7,"div",6),n.\u0275\u0275element(8,"div",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(9,le,1,9,"button",8),n.\u0275\u0275elementStart(10,"button",9,10),n.\u0275\u0275listener("click",function(){return S.toggle()}),n.\u0275\u0275pipe(12,"localize"),n.\u0275\u0275pipe(13,"localize"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(14,re,1,6,"search-box-modern",11),n.\u0275\u0275template(15,j,1,0,"hr",12),n.\u0275\u0275template(16,Z,3,6,"div",13),n.\u0275\u0275elementEnd()),2&m&&(n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(29,fe,!S.isPaneExpanded,S.isPaneExpanded))("ngStyle",n.\u0275\u0275pureFunction5(32,Q,S.backgroundColor,S.borderColor,S.borderVisibility?"1px":"0",S.paneWidth(),S.color))("enableGhostResize",!1)("resizeEdges",S.resizeEdges)("resizeCursorPrecision",5)("resizeCursors",n.\u0275\u0275pureFunction0(38,J))("validateResize",S.getValidationFunction()),n.\u0275\u0275advance(2),n.\u0275\u0275property("localize",S.headerTitle),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(3,23,S.headerTitle)),n.\u0275\u0275advance(2),n.\u0275\u0275propertyInterpolate("tabindex",S.isPaneExpanded?0:-1),n.\u0275\u0275property("pbi-tooltip",S.isEditMode()?S.expandCollapsePaneEditModeTooltipConfig:S.expandCollapsePaneReadModeTooltipConfig),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(39,G,S.color)),n.\u0275\u0275advance(2),n.\u0275\u0275property("localize",S.headerTitle)("ngStyle",n.\u0275\u0275pureFunction3(41,se,S.color,S.isPaneExpanded?S.titleFontSize:"",S.titleFontFamily)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",S.isPaneExpanded&&S.isEditMode()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(45,oe,S.isPaneExpanded,!S.isPaneExpanded))("pbi-tooltip",S.isEditMode()?S.expandCollapsePaneEditModeTooltipConfig:S.expandCollapsePaneReadModeTooltipConfig)("ngStyle",n.\u0275\u0275pureFunction1(48,G,S.color)),n.\u0275\u0275attribute("aria-label",S.isEditMode()?n.\u0275\u0275pipeBind1(12,25,S.headerTitle)+" "+S.expandCollapsePaneEditModeLabel:n.\u0275\u0275pipeBind1(13,27,S.headerTitle)+" "+S.expandCollapsePaneReadModeLabel)("aria-expanded",S.isPaneExpanded),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",S.showFilterPaneSearch),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",S.showFilterPaneSearch),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",S.isPaneExpanded))},directives:[o.E$,l.q,s.NgClass,s.NgStyle,c.X,O.i,s.NgIf,x.E,V.v],pipes:[w.F],styles:['.outspacePane[_ngcontent-%COMP%]{height:100%;color:#333;position:relative;display:flex;flex-direction:column}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{border-left-style:solid;border-right-style:none}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{border-left-style:none;border-right-style:solid}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{border-left-width:1px;border-right-width:0}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{border-left-width:0;border-right-width:1px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{transform-origin:top left}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{transform-origin:top right}.outspacePane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]{cursor:pointer}.outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%]{margin-top:7px;border-color:inherit;border:1px solid;border-radius:2px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%]{margin-left:8px;margin-right:12px}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%]{margin-left:12px;margin-right:8px}.outspacePane[_ngcontent-%COMP%]   .searchFiltersLineBreak[_ngcontent-%COMP%]{border:0;width:100%;border-bottom:1px solid;border-color:inherit;margin-top:4px}.outspacePane[_ngcontent-%COMP%]   .paneContents[_ngcontent-%COMP%]{display:block;overflow-y:auto;overflow-y:overlay;height:100%}.outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%]{margin:11px 8px 0;width:16px;background:transparent;font-weight:var(--font-weight-semi-bold, 600)}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%]{float:right}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%]{float:left}.outspacePane[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-semi-bold, 600);vertical-align:middle}.outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif;cursor:pointer}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{text-align:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{text-align:right}.outspacePane[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]{display:inline-block;text-align:center;vertical-align:middle;margin-bottom:4px}.outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{background-color:transparent;width:calc(100% - 60px)}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{float:right}.outspacePane[_ngcontent-%COMP%]   .enableFilterPane[_ngcontent-%COMP%]{margin:11px 8px 0;font-weight:var(--font-weight-semi-bold, 600);background-color:transparent}.hiddenHeading[_ngcontent-%COMP%]{font-size:0}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{height:initial;padding-bottom:initial}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{line-height:normal;display:inline-block;width:100%;padding-top:8px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:right}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]{width:calc(100% - 8px)}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:block;font-size:24px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{margin:0 20px 5px 8px}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{margin:0 8px 5px 20px}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin-top:0;margin-bottom:8px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin-left:12px;margin-right:unset}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin-left:unset;margin-right:12px}@media screen and (max-height: 320px){.outspacePaneExpanded[_ngcontent-%COMP%]{overflow-y:scroll!important}.outspacePaneExpanded[_ngcontent-%COMP%]   .paneContents[_ngcontent-%COMP%]{height:unset!important;overflow-y:visible!important}.outspacePaneExpanded[_ngcontent-%COMP%]   .filterPaneScrollWrapper.scroll-content[_ngcontent-%COMP%]{max-height:none!important}}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:column-reverse;padding-bottom:20px}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]:focus{outline:none}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{float:right}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{line-height:normal;font-size:24px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:18px;margin-right:unset}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:unset;margin-right:18px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:right}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:6px;padding-right:unset}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:unset;padding-right:6px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform:rotate(90deg)}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform:rotate(-90deg)}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform-origin:0}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform-origin:100%}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{display:inline-block;font-size:16px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{margin:0 0 4px 8px}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{margin:0 8px 4px 0}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{font-size:12px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin:8px 0 9px 16px}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin:8px 16px 9px 0}',".exploreHost.landingController   .explorationContainer[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], .exploreHost.landingController   .explorationContainer   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{-webkit-transition:all .3s;transition:right .3s;right:0}.exploreHost.landingController.commentsMenuOpenTablet[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], .exploreHost.landingController.commentsMenuOpenTablet   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{right:350px;z-index:50000}.exploreHost.landingController.commentsMenuOpenTablet.inFocus   .canvasFlexBox[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], .exploreHost.landingController.commentsMenuOpenTablet.inFocus   .canvasFlexBox   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{right:0}"]}),p}(),D=function(){function p(){}return p.prototype.equals=function(h){return!!h&&this===h},p}()},38291:function(Ee,ne,t){t.d(ne,{A:function(){return f}});var e=t(76430),n=t(50568),f=function(){function i(){this.modulePath="@powerbi/ExploreUI/pane-switcher.module#PaneSwitcherModule",this.componentId="PaneSwitcherComponentId"}return i.\u0275fac=function(E){return new(E||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["pane-switcher-lazy"]],decls:1,vars:2,consts:[[3,"modulePath","componentId"]],template:function(E,I){1&E&&e.\u0275\u0275element(0,"pbi-lazy-load",0),2&E&&e.\u0275\u0275property("modulePath",I.modulePath)("componentId",I.componentId)},directives:[n.R],encapsulation:2}),i}()},98184:function(Ee,ne,t){t.d(ne,{S:function(){return l}});var e=function(){function s(c){this.annotations=c}return s.prototype.clear=function(){this.annotations=[]},s.prototype.length=function(){return this.annotations.length},s.prototype.removeAt=function(c){this.annotations.splice(c,1)},s.prototype.getAnnotation=function(c){return this.annotations[c]},s.prototype.takeAll=function(){return _.take(this.annotations,this.annotations.length)},s.prototype.push=function(c){this.annotations.push(c)},s.prototype.eraseAnnotations=function(c,O){var x=this.annotations.length;return _.remove(this.annotations,function(V){return V.polygon.lineIntersectionPoint(c,O)}),x-this.annotations.length},s}(),n=function(){function s(c){this.rect=c,this.rectContext=this.rect.getContext("2d")}return s.prototype.validateRectPos=function(c){this.loadCanvasClientRects(),0===c&&(this.rect.width!==Math.floor(this.rectPosition.width)||this.rect.height!==Math.floor(this.rectPosition.height))&&(this.rect.width=this.rectPosition.width,this.rect.height=this.rectPosition.height)},s.prototype.drawLine=function(c,O){this.rectContext.moveTo(c.x,c.y),this.rectContext.lineTo(O.x,O.y),this.rectContext.stroke()},s.prototype.loadCanvasClientRects=function(){this.rectPosition=this.rect.getBoundingClientRect(),this.canvasLeft=this.rectPosition.left,this.canvasTop=this.rectPosition.top},s.prototype.redrawAnnotations=function(c){this.loadCanvasClientRects(),this.rectContext.clearRect(0,0,this.rectPosition.width,this.rectPosition.height);for(var O=0,x=this.getAnnotations(c);O<x.length;O++)this.drawAnnotation(x[O])},s.prototype.getAnnotations=function(c){var O=c.annotationsList.takeAll(),x=[];for(var V in c.currentAnnotations)x.push(c.currentAnnotations[V]);return O.concat(x)},s.prototype.drawAnnotation=function(c){this.rectContext.beginPath(),this.setupNewPath(c);var O=c.polygon.polygonPoints;this.rectContext.moveTo(O[0].x,O[0].y);for(var x=1;x<O.length;x++)this.rectContext.lineTo(O[x].x,O[x].y);this.rectContext.stroke()},s.prototype.setupNewPath=function(c){this.rectContext.lineWidth=c.lineWidth,this.rectContext.strokeStyle=c.strokeStyle,this.rectContext.globalAlpha=c.opacity,this.rectContext.lineCap="round",this.rectContext.lineJoin="round"},s.prototype.convertToCanvasPosition=function(c,O){return{x:c-this.canvasLeft,y:O-this.canvasTop}},s}(),f=function(){function s(){this.pensAnnotationsData=[]}return s.prototype.getAnnotationMode=function(c){return this.pensAnnotationsData[c]?this.pensAnnotationsData[c].penAnnotationMode:0},s.prototype.createPenAnnotationData=function(c,O){this.pensAnnotationsData[c]={pointerId:c,penAnnotationMode:O,points:[]}},s.prototype.addPoint=function(c,O){!this.pensAnnotationsData[c]||this.pensAnnotationsData[c].points.push(O)},s.prototype.remove=function(c){delete this.pensAnnotationsData[c]},s.prototype.getPoints=function(c){return this.pensAnnotationsData[c]?this.pensAnnotationsData[c].points:[]},s.prototype.clear=function(){this.pensAnnotationsData=[]},s}(),i=t(76430),M=t(71367),E=t(66075),I=t(40629),d=powerbi.explore.services.events,P=powerbi.visuals.shapes.Polygon,y=["penAnnotationCanvas"],b="pen",l=function(){function s(c,O,x){this.eventBridge=c,this.explorationNavigation=O,this.viewModeState=x}return s.prototype.ngOnInit=function(){var c=this;this.pensAnnotationsDataHelper=new f,this.penAnnotationDrawer=new n(this.penAnnotationCanvas.nativeElement),interact.on("pointerdown",function(O){c.onPointerDown(O)}),interact.on("pointermove",function(O){c.onPointerMove(O)}),interact.on("pointerup",function(O){c.onPointerUp(O)}),this.resetViewModel(),this.eventBridge.createChannelSubscriptionManager().subscribe(d.sectionChanged,function(){return c.invalidateAnnotations()}).subscribe(d.clearAnnotations,function(){return c.clearAnnotations()})},s.prototype.ngOnDestroy=function(){var c=this;interact.off("pointerdown",function(O){c.onPointerDown(O)}),interact.off("pointermove",function(O){c.onPointerMove(O)}),interact.off("pointerup",function(O){c.onPointerUp(O)}),this.clearAnnotationsFromExploration()},s.prototype.eraseAnnotations=function(c,O){this.viewModel.annotationsList.eraseAnnotations(O,c)>0&&(this.penAnnotationDrawer.redrawAnnotations(this.viewModel),this.persistOnSection(this.viewModel.annotationsList.takeAll()))},s.prototype.onPointerDown=function(c){if(c.pointerType===b){this.penAnnotationDrawer.validateRectPos(this.viewModel.annotationsList.length());var O=this.penAnnotationDrawer.convertToCanvasPosition(c.pageX,c.pageY),x=this.isEraseEvent(c)?2:1;switch(this.pensAnnotationsDataHelper.createPenAnnotationData(c.pointerId,x),x){case 1:this.pensAnnotationsDataHelper.addPoint(c.pointerId,O),this.viewModel.currentAnnotations[c.pointerId]=this.createPenAnnotationCurve(c.pointerId);break;case 2:this.erasePrevPoint=O,this.eraseAnnotations(O,this.erasePrevPoint)}}},s.prototype.onPointerMove=function(c){if(c.pointerType===b){var O=this.penAnnotationDrawer.convertToCanvasPosition(c.pageX,c.pageY);switch(this.pensAnnotationsDataHelper.getAnnotationMode(c.pointerId)){case 1:this.pensAnnotationsDataHelper.addPoint(c.pointerId,O);var V=this.viewModel.currentAnnotations[c.pointerId];V&&(V.polygon=this.createPolygon(c.pointerId)),this.drawAnnotationAddedPoints(V);break;case 2:this.eraseAnnotations(O,this.erasePrevPoint),this.erasePrevPoint=O}}},s.prototype.onPointerUp=function(c){if(c.pointerType===b){if(1===this.pensAnnotationsDataHelper.getAnnotationMode(c.pointerId)){var x=this.viewModel.currentAnnotations[c.pointerId];x&&(x.polygon.polygonPoints.length>=10&&(this.viewModel.annotationsList.push(x),this.persistOnSection(this.viewModel.annotationsList.takeAll())),delete this.viewModel.currentAnnotations[c.pointerId])}this.pensAnnotationsDataHelper.remove(c.pointerId)}},s.prototype.drawAnnotationAddedPoints=function(c){var O=c.polygon.polygonPoints,x=O.length;x<10||(10===x?this.penAnnotationDrawer.drawAnnotation(c):this.penAnnotationDrawer.drawLine(O[x-2],O[x-1]))},s.prototype.resetViewModel=function(c){void 0===c&&(c=[]),this.viewModel={currentAnnotations:[],annotationsList:new e(c)},this.pensAnnotationsDataHelper.clear()},s.prototype.clearAnnotationsFromExploration=function(){for(var O=0,x=this.explorationNavigation.getCurrentExploration().sections;O<x.length;O++)x[O].penAnnotations=[]},s.prototype.isEraseEvent=function(c){return 5===c.button||!c.isPrimary&&0===c.pressure},s.prototype.persistOnSection=function(c){var O=this.explorationNavigation.getCurrentSection();O&&(O.penAnnotations=c)},s.prototype.getAnnotationsFromSection=function(){return this.explorationNavigation.getCurrentSection().penAnnotations||[]},s.prototype.clearAnnotations=function(){this.persistOnSection([]),this.invalidateAnnotations()},s.prototype.invalidateAnnotations=function(){var c=this.getAnnotationsFromSection();this.resetViewModel(c),this.penAnnotationDrawer.redrawAnnotations(this.viewModel)},s.prototype.createPenAnnotationCurve=function(c){var O=this.viewModeState.getConfig();return{polygon:this.createPolygon(c),lineWidth:O.penProperties.lineWidth,strokeStyle:O.penProperties.strokeStyle,opacity:O.penProperties.opacity}},s.prototype.createPolygon=function(c){for(var O=[],x=0,V=this.pensAnnotationsDataHelper.getPoints(c);x<V.length;x++){var w=V[x];O.push(w.x),O.push(w.y)}return new P(new Float64Array(O))},s.\u0275fac=function(O){return new(O||s)(i.\u0275\u0275directiveInject(M.J),i.\u0275\u0275directiveInject(E.z),i.\u0275\u0275directiveInject(I.kc))},s.\u0275cmp=i.\u0275\u0275defineComponent({type:s,selectors:[["pen-annotation"]],viewQuery:function(O,x){var V;(1&O&&i.\u0275\u0275viewQuery(y,7),2&O)&&(i.\u0275\u0275queryRefresh(V=i.\u0275\u0275loadQuery())&&(x.penAnnotationCanvas=V.first))},decls:2,vars:0,consts:[[1,"penAnnotationCanvas"],["penAnnotationCanvas",""]],template:function(O,x){1&O&&i.\u0275\u0275element(0,"canvas",0,1)},styles:[".penAnnotationCanvas[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;z-index:9999;pointer-events:none}"]}),s}()},31138:function(Ee,ne,t){t.d(ne,{C:function(){return f}});var e=t(76430),n=t(50568),f=function(){function i(){this.modulePath="@powerbi/ExploreUI/performance-pane.module#PerformancePaneModule",this.componentId="PerformancePaneComponentId"}return i.\u0275fac=function(E){return new(E||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["performance-pane-lazy"]],decls:1,vars:2,consts:[[3,"modulePath","componentId"]],template:function(E,I){1&E&&e.\u0275\u0275element(0,"pbi-lazy-load",0),2&E&&e.\u0275\u0275property("modulePath",I.modulePath)("componentId",I.componentId)},directives:[n.R],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex;flex-direction:column}"]}),i}()},33162:function(Ee,ne,t){t.d(ne,{i:function(){return b}});var e=t(76430),n=t(86777),f=t(31494),i=t(60400),M=t(50568),E=t(9784),I=t(46448),d=t(83757);function P(a,o){1&a&&e.\u0275\u0275element(0,"pbi-lazy-load",3)}function y(a,o){1&a&&(e.\u0275\u0275elementStart(0,"section",4),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275elementStart(2,"header"),e.\u0275\u0275element(3,"div",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",6),e.\u0275\u0275element(5,"pbi-spinner",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&a&&e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,1,"DataLoaderSpinner_LoadingMessage1"))}var b=function(){function a(o,l){this.lazyProvider=o,this.pbiLazyLoad=l}return a.prototype.ngOnInit=function(){var o=this;this.loaded=this.pbiLazyLoad.load(powerbi.explore.modules.ExploreUIShellModule).then(function(){return o.lazyProvider.get("@powerbi/ExploreUIAuthoring/lazy-modules/field-well-view-model/field-well-view-model.module#FieldWellViewModelModule","fieldWellViewModelService")}).then(function(){return o.lazyProvider.getModule("./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule")})},a.\u0275fac=function(l){return new(l||a)(e.\u0275\u0275directiveInject(n.E),e.\u0275\u0275directiveInject(f.Q))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["ng-component"]],decls:5,vars:4,consts:[[1,"no-outline","themeableElement"],["modulePath","./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule","componentId","PersonalizeVisualComponentId",4,"ngIf","ngIfElse"],["loading",""],["modulePath","./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule","componentId","PersonalizeVisualComponentId"],["tabindex","0",1,"pbi-depth-2","themeableElement"],["localize","PersonalizeVisual_MainMenuLabel",1,"fluentTheme-vlg-semibold"],[1,"loading"],[1,"pbi-spinner-medium"]],template:function(l,s){if(1&l&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,P,1,0,"pbi-lazy-load",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,y,6,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&l){var c=e.\u0275\u0275reference(4);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,2,s.loaded))("ngIfElse",c)}},directives:[i.NgIf,M.R,E.X,I.k],pipes:[i.AsyncPipe,d.F],styles:["section[_ngcontent-%COMP%]{width:240px;background:var(--fluent-theme-neutral-lighter-color, #F3F2F1);border-radius:2px;box-sizing:border-box;height:300px;display:flex;flex-direction:column;padding:12px 24px 24px}header[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-alt-color, #333333);margin-bottom:16px}.loading[_ngcontent-%COMP%]{display:flex;height:100%}.loading[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin:auto}.no-outline[_ngcontent-%COMP%]{outline:none}"],changeDetection:0}),a}()},33839:function(Ee,ne,t){t.d(ne,{E:function(){return Ft}});var e=t(16686),n=powerbi.data.RelativeDateFilterPattern,f=powerbi.data.RelativeDateQualifier,i=powerbi.data.RelativeDateUnit,M={relativeQualifier:f.Last,duration:null,relativeUnit:i.Day,includeToday:!0},E=function(){function ke(){}return ke.prototype.getDefaultOptions=function(){return M},ke.prototype.getRelativeUnitsAll=function(Ae){return[{value:i.Day,text:Ae.get("RelativeDateUnit_Days")},{value:i.Week,text:Ae.get("RelativeDateUnit_Weeks")},{value:i.CalendarWeek,text:Ae.get("RelativeDateUnit_CalendarWeeks")},{value:i.Month,text:Ae.get("RelativeDateUnit_Months")},{value:i.CalendarMonth,text:Ae.get("RelativeDateUnit_CalendarMonths")},{value:i.Year,text:Ae.get("RelativeDateUnit_Years")},{value:i.CalendarYear,text:Ae.get("RelativeDateUnit_CalendarYears")}]},ke.prototype.getCurrentRelativeUnits=function(Ae){return[{value:i.Day,text:Ae.get("RelativeDateUnit_Day")},{value:i.Week,text:Ae.get("RelativeDateUnit_Week")},{value:i.Month,text:Ae.get("RelativeDateUnit_Month")},{value:i.Year,text:Ae.get("RelativeDateUnit_Year")}]},ke.prototype.isIncludeTodayApplicable=function(Ae,Le){return Ae.value!==f.Current&&!n.isCalendarPeriod(Le.value)},ke.prototype.onRelativeQualifierChanged=function(Ae,Le,Ve){if(Ae.value===f.Current){var tt=Le.value;switch(Le.value){case i.CalendarWeek:tt=i.Week;break;case i.CalendarMonth:tt=i.Month;break;case i.CalendarYear:tt=i.Year}return _.find(Ve,function(lt){return lt.value===tt})}},ke}(),I=powerbi.data.RelativeDateQualifier,d=powerbi.data.RelativeDateUnit,P={relativeQualifier:I.Last,duration:null,relativeUnit:d.Hour,includeToday:!0},y=function(){function ke(){}return ke.prototype.getDefaultOptions=function(){return P},ke.prototype.getRelativeUnitsAll=function(Ae){return[{value:d.Minute,text:Ae.get("TimeUnit_Minutes_Lowercase")},{value:d.Hour,text:Ae.get("TimeUnit_Hours_Lowercase")}]},ke.prototype.getCurrentRelativeUnits=function(Ae){return[{value:d.Minute,text:Ae.get("Insights_MinutesSingular")},{value:d.Hour,text:Ae.get("Insights_HoursSingular")}]},ke.prototype.isIncludeTodayApplicable=function(){return!1},ke.prototype.onRelativeQualifierChanged=function(Ae,Le,Ve){if(Ae.value===I.Current){var tt=Le.value;Le=_.find(Ve,function(lt){return lt.value===tt})}},ke}(),b=powerbi.explore.contracts.FilterType,a=powerbi.data.RelativeDateFilterPattern,o=powerbi.data.RelativeDateQualifier,l=powerbi.data.RelativeFilterType,T=t(99864),v=t(32956),g=t(80763),r=t(76430),u=jsCommon.NumberExtensions,C=powerbi.data.RelativeDateRangeHelper,F=powerbi.data.RelativeDateQualifier,A=powerbi.data.RelativeFilterType,W=function(){function ke(Ae,Le,Ve,tt){this.relativeFilterViewModelComponent=function(ke){switch(ke){case l.Time:return new y;case l.Date:return new E;default:return null}}(Ve),tt||(tt=this.relativeFilterViewModelComponent.getDefaultOptions()),this.dateField=Ae,this.duration=tt.duration,this.anchorDate=tt.anchorDate,this.localizationService=Le,this.includeToday=function(ke,Ae){switch(ke){case l.Time:return!0;case l.Date:return Ae;default:return!1}}(Ve,tt.includeToday),this.showInputWarning=!1,this.populateRelativeQualifiers(tt.relativeQualifier),this.populateRelativeUnits(tt.relativeUnit)}return ke.prototype.populateRelativeQualifiers=function(Ae){this.relativeQualifiers=[{value:F.Last,text:this.localizationService.get("RelativeDateQualifier_Last")},{value:F.Current,text:this.localizationService.get("RelativeDateQualifier_Current")},{value:F.Next,text:this.localizationService.get("RelativeDateQualifier_Next")}],this.relativeQualifier=_.find(this.relativeQualifiers,function(Le){return Le.value===Ae})},ke.prototype.populateRelativeUnits=function(Ae){this.relativeUnitsAll=this.relativeFilterViewModelComponent.getRelativeUnitsAll(this.localizationService),this.relativeUnitsCurrent=this.relativeFilterViewModelComponent.getCurrentRelativeUnits(this.localizationService),this.relativeUnit=_.find(this.relativeUnitsAll,function(Le){return Le.value===Ae})},ke.prototype.isDurationApplicable=function(){return this.relativeQualifier.value!==F.Current},ke.prototype.isDurationWithinRange=function(){return this.duration>0&&this.duration<=this.getDurationMax()&&!u.isDecimal(this.duration)||this.relativeQualifier.value===F.Current},ke.prototype.isIncludeTodayApplicable=function(){return this.relativeFilterViewModelComponent.isIncludeTodayApplicable(this.relativeQualifier,this.relativeUnit)},ke.prototype.onRelativeQualifierChanged=function(){var Ae=this.relativeFilterViewModelComponent.onRelativeQualifierChanged(this.relativeQualifier,this.relativeUnit,this.relativeUnitsAll);Ae&&(this.relativeUnit=Ae)},ke.prototype.getDurationMax=function(){return C.getDurationMax(this.relativeQualifier.value,this.relativeUnit.value)},ke.prototype.getRestatement=function(Ae,Le){var Ve=this,tt=this.getRelativeDateRangeOptions();return C.getRestatement(tt,Ae,function(te,ee){return Ve.localizationService.format(te,ee)},Le)},ke.prototype.getRelativeDateRangeOptions=function(){return{duration:this.duration,includeToday:this.includeToday,relativeUnit:this.relativeUnit.value,relativeQualifier:this.relativeQualifier.value,anchorDate:this.anchorDate}},ke.prototype.clearShowInputWarningAndPendingClear=function(){this.hasPendingClear=void 0,this.showInputWarning=void 0},ke.prototype.updateShowInputWarning=function(Ae,Le){this.showInputWarning=Ae&&Le?Ae&&-1!==Ae.indexOf(Le.toString()):this.showInputWarning&&(this.duration<=0||u.isDecimal(this.duration))},ke.prototype.setupPendingClear=function(){this.showInputWarning=!1,this.duration=void 0,this.hasPendingClear=!0},ke.createRelativeFilterViewModel=function(Ae,Le,Ve,tt){switch(Ae){case A.Time:return new ke(Le,Ve,A.Time,tt);case A.Date:return new ke(Le,Ve,A.Date,tt);default:return null}},ke}(),k=t(19156),R=t(38942),G=t(4486),le=t(10883),ge=t(71367),re=t(66075),j=t(23246),ie=t(9474),Z=t(23580),fe=t(95781),Q=t(60660),J=t(76963),se=t(59116),oe=t(40629),K=t(59804),D=t(80815),p=t(60400),h=t(9784),m=t(47236),S=t(65287),N=t(70286),ce=t(74262),he=t(90683),Ce=t(36896),me=t(52555),Ze=powerbi.explore.contracts.FilterType,Je=powerbi.explore.FilterUtils,it=powerbi.data.RelativeDateFilterPattern,Te=powerbi.data.RelativeFilterType,ue=jsCommon.Utility,ve=function(Ae,Le,Ve,tt){return{"background-color":Ae,color:Le,"border-color":Ve,"font-family":tt}};function Me(ke,Ae){if(1&ke&&(r.\u0275\u0275elementStart(0,"mat-option",11),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&ke){var Le=Ae.$implicit,Ve=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("value",Le)("ngStyle",r.\u0275\u0275pureFunction4(3,ve,Ve.viewModel.inputBoxBackgroundColor,Ve.viewModel.inputBoxForegroundColor,Ve.viewModel.inputBoxBorderColor,Ve.viewModel.fontFamily)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",Le.text,"")}}var we=function(Ae,Le,Ve){return{"background-color":Ae,color:Le,"border-color":Ve}};function $e(ke,Ae){if(1&ke){var Le=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"input",12),r.\u0275\u0275listener("ngModelChange",function(lt){return r.\u0275\u0275restoreView(Le),r.\u0275\u0275nextContext(2).vm.duration=lt}),r.\u0275\u0275elementEnd()}if(2&ke){var Ve=r.\u0275\u0275nextContext(2);r.\u0275\u0275classProp("filterInputWarningBorder",Ve.vm.showInputWarning),r.\u0275\u0275propertyInterpolate("placeholder","1-"+Ve.vm.getDurationMax()),r.\u0275\u0275property("ngModel",Ve.vm.duration)("ngStyle",r.\u0275\u0275pureFunction3(6,we,Ve.viewModel.inputBoxBackgroundColor,Ve.viewModel.inputBoxForegroundColor,Ve.viewModel.inputBoxBorderColor))("pbiTooltip",Ve.slicerDurationName)}}function et(ke,Ae){if(1&ke&&(r.\u0275\u0275elementStart(0,"mat-option",11),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&ke){var Le=Ae.$implicit,Ve=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("value",Le)("ngStyle",r.\u0275\u0275pureFunction4(3,ve,Ve.viewModel.inputBoxBackgroundColor,Ve.viewModel.inputBoxForegroundColor,Ve.viewModel.inputBoxBorderColor,Ve.viewModel.fontFamily)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",Le.text,"")}}function at(ke,Ae){if(1&ke){var Le=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"mat-select",13),r.\u0275\u0275listener("ngModelChange",function(lt){return r.\u0275\u0275restoreView(Le),r.\u0275\u0275nextContext(2).vm.relativeUnit=lt}),r.\u0275\u0275template(1,et,2,8,"mat-option",5),r.\u0275\u0275elementEnd()}if(2&ke){var Ve=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngModel",Ve.vm.relativeUnit)("ngStyle",r.\u0275\u0275pureFunction4(6,ve,Ve.viewModel.inputBoxBackgroundColor,Ve.viewModel.inputBoxForegroundColor,Ve.viewModel.inputBoxBorderColor,Ve.viewModel.fontFamily))("pbiTooltip",Ve.slicerPeriodFieldName)("compareWith",Ve.compareRelativeUnit)("panelClass",Ve.newPaneColors),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",Ve.vm.relativeUnitsAll)}}function dt(ke,Ae){if(1&ke&&(r.\u0275\u0275elementStart(0,"mat-option",11),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&ke){var Le=Ae.$implicit,Ve=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("value",Le)("ngStyle",r.\u0275\u0275pureFunction4(3,ve,Ve.viewModel.inputBoxBackgroundColor,Ve.viewModel.inputBoxForegroundColor,Ve.viewModel.inputBoxBorderColor,Ve.viewModel.fontFamily)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",Le.text,"")}}function Fe(ke,Ae){if(1&ke){var Le=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"mat-select",14),r.\u0275\u0275listener("ngModelChange",function(lt){return r.\u0275\u0275restoreView(Le),r.\u0275\u0275nextContext(2).vm.relativeUnit=lt}),r.\u0275\u0275template(1,dt,2,8,"mat-option",5),r.\u0275\u0275elementEnd()}if(2&ke){var Ve=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngModel",Ve.vm.relativeUnit)("ngStyle",r.\u0275\u0275pureFunction4(5,ve,Ve.viewModel.inputBoxBackgroundColor,Ve.viewModel.inputBoxForegroundColor,Ve.viewModel.inputBoxBorderColor,Ve.viewModel.fontFamily))("compareWith",Ve.compareRelativeUnit)("panelClass",Ve.newPaneColors),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",Ve.vm.relativeUnitsCurrent)}}var be=function(Ae,Le){return{color:Ae,"font-family":Le}};function _e(ke,Ae){if(1&ke){var Le=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",15),r.\u0275\u0275elementStart(1,"mat-checkbox",16),r.\u0275\u0275listener("ngModelChange",function(lt){return r.\u0275\u0275restoreView(Le),r.\u0275\u0275nextContext(2).vm.includeToday=lt}),r.\u0275\u0275element(2,"span",17),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&ke){var Ve=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate("aria-label",Ve.includeTodayLabel),r.\u0275\u0275property("matCheckBoxColor",Ve.viewModel.checkboxAndApplyColor)("matCheckBoxColorIsChecked",Ve.vm.includeToday)("ngModel",Ve.vm.includeToday)("ngStyle",r.\u0275\u0275pureFunction2(7,be,Ve.viewModel.inputBoxForegroundColor,Ve.viewModel.fontFamily))("pbiTooltip",Ve.includeTodayName)("pbiTooltipAlwaysShow",!0)}}function Oe(ke,Ae){if(1&ke&&r.\u0275\u0275element(0,"button",18),2&ke){var Le=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("disabled",!Le.canApplyFilter())("pbiTooltip",Le.applyFilterDescriptionName)}}var Xe=function(Ae){return{invalid:Ae}},nt=function(Ae){return{"font-size":Ae}};function ht(ke,Ae){if(1&ke){var Le=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"form",1),r.\u0275\u0275listener("ngSubmit",function(){return r.\u0275\u0275restoreView(Le),r.\u0275\u0275nextContext().handleSubmit()}),r.\u0275\u0275element(1,"h3",2),r.\u0275\u0275elementStart(2,"div",3),r.\u0275\u0275elementStart(3,"mat-select",4),r.\u0275\u0275listener("ngModelChange",function(lt){return r.\u0275\u0275restoreView(Le),r.\u0275\u0275nextContext().vm.relativeQualifier=lt})("ngModelChange",function(){return r.\u0275\u0275restoreView(Le),r.\u0275\u0275nextContext().vm.onRelativeQualifierChanged()}),r.\u0275\u0275template(4,Me,2,8,"mat-option",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(5,$e,1,10,"input",6),r.\u0275\u0275template(6,at,2,11,"mat-select",7),r.\u0275\u0275template(7,Fe,2,10,"mat-select",8),r.\u0275\u0275template(8,_e,3,10,"div",9),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(9,Oe,1,2,"button",10),r.\u0275\u0275elementEnd()}if(2&ke){var Ve=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(14,Xe,Ve.viewModel.isInvalidCardType()))("ngStyle",r.\u0275\u0275pureFunction1(16,nt,Ve.viewModel.fontSize))("formGroup",Ve.relativeFilterForm),r.\u0275\u0275advance(1),r.\u0275\u0275property("pbiTooltip",Ve.showItemsWhenValueName),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngModel",Ve.vm.relativeQualifier)("ngStyle",r.\u0275\u0275pureFunction4(18,ve,Ve.viewModel.inputBoxBackgroundColor,Ve.viewModel.inputBoxForegroundColor,Ve.viewModel.inputBoxBorderColor,Ve.viewModel.fontFamily))("pbiTooltip",Ve.slicerDateRangeName)("panelClass",Ve.newPaneColors),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",Ve.vm.relativeQualifiers),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",Ve.vm.isDurationApplicable()),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",Ve.vm.isDurationApplicable()),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!Ve.vm.isDurationApplicable()),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",Ve.vm.isIncludeTodayApplicable()),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!Ve.isApplyAllOnForThisFilter())}}var Ft=function(){function ke(Ae,Le,Ve,tt,lt,de,te,ee,X,Be,xe,je,Ye,Ie,rt,st,ct){var ft=this;this.aggrOps=Ae,this.conceptualSchemaProxy=Le,this.contextActivityService=Ve,this.dataSources=tt,this.eventBridge=lt,this.explorationCapabilities=de,this.explorationNavigation=te,this.featureSwitchService=ee,this.localizationService=X,this.networkAvailabilityService=Be,this.ngZone=xe,this.telemetryService=je,this.undoRedo=Ye,this.viewModeState=Ie,this.visualAuthoring=rt,this.visualPlugin=st,this.visualTimeSynchronizationService=ct,this.onFilterChanged=new r.EventEmitter,this.slicerDateRangeName=this.localizationService.get("Slicer_DateRange"),this.slicerDurationName=this.localizationService.get("Duration"),this.slicerPeriodFieldName=this.localizationService.get("DaxTemplates_PeriodField"),this.showItemsWhenValueName=this.localizationService.get("ShowItemsWhenValue"),this.applyFilterDescriptionName=this.localizationService.get("Filter_ApplyFilterDescription"),this.includeTodayName=this.localizationService.get("RelativeDateFilter_IncludeToday"),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(powerbi.explore.services.events.applyAllClicked,function(Pt,Mt){return ft.onApplyAllClicked(Mt)}).subscribe(powerbi.explore.services.events.explorationSlowDataSourceSettingsLoaded,function(Pt,Mt){return ft.ngZone.run(function(){Mt.isApplyAllButtonEnabledChanged&&ft.vm.clearShowInputWarningAndPendingClear()})}).subscribe(powerbi.explore.services.events.filterContainerChanged,function(Pt,Mt){return ft.onFilterContainerChanged(Mt)}),this.newPaneColors=this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign?"pbi-modern-select-panel themeableElement":"pbi-modern-select-old-panel themeableElement"}return ke.prototype.ngOnInit=function(){var Ae=this;this.relativeFilterType=function(ke){switch(ke){case b.RelativeTime:return l.Time;case b.RelativeDate:return l.Date;default:return l.Unsupported}}(this.filterType),this.relativeFilterForm=new g.cw({qualifier:new g.NI,duration:new g.NI,unitsAll:new g.NI,unitsCurrent:new g.NI,includeToday:new g.NI}),this.isApplyAllOnForThisFilter()&&(this.formChanges$=this.relativeFilterForm.valueChanges.pipe((0,T.b)(500),(0,v.b)(function(){return Ae.onModelChanged()})).subscribe()),this.filterForm=new e.h(this.relativeFilterForm),this.currentZone=this.explorationNavigation.getCurrentZone(),this.ngZone.run(function(){return Ae.onInitImpl()})},ke.prototype.onInitImpl=function(){this.viewModel.setServices(void 0,void 0,this.viewModeState),this.initializeViewModel(this.viewModel.contract),this.includeTodayLabel=this.localizationService.get("RelativeDateFilter_IncludeToday")},ke.prototype.ngOnDestroy=function(){this.formChanges$&&this.formChanges$.unsubscribe(),this.subscriptionManager.unsubscribeAll()},ke.prototype.handleSubmit=function(){this.isApplyAllOnForThisFilter()||this.applyFilter()},ke.prototype.compareRelativeUnit=function(Ae,Le){return Ae.value===Le.value},ke.prototype.applyFilter=function(Ae){var Le=this;if(this.canApplyFilter()){var Ve;this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Ve=Je.createChangeFilterActivity(this.contextActivityService,this.relativeFilterType===Te.Date?"Relative Date Filter":"Relative Time Filter")),document.activeElement.blur(),this.viewModel.contract.type=function(ke){switch(ke){case l.Time:return b.RelativeTime;case l.Date:return b.RelativeDate;default:return null}}(this.relativeFilterType);var lt=function(ke){switch(ke){case l.Time:return"ApplyRelativeTimeFilter";case l.Date:return"ApplyRelativeDateFilter";default:return"unknown command"}}(this.relativeFilterType),de=this.dataSources.get();this.conceptualSchemaProxy.get(de).then(function(te){Le.undoRedo.register(lt,function(){var ee=Le.vm.getRelativeDateRangeOptions();Le.logFilterAppliedTelemetry(ee,function(){var X=Le.vm.isDurationWithinRange()?it.buildSemanticFilter({field:Le.vm.dateField,options:ee}):void 0;Le.visualAuthoring.updateFilter(Le.viewModel.getFilterContainerScope(),Le.viewModel.contract,X),Le.viewModel.useDefaultFilter=!1,Le.filterForm.setPristine(),X?Le.updateRestatement():Le.clearRestatement(),Le.onFilterChanged.emit({args:{filter:Le.viewModel.contract,changeType:2,scope:Le.viewModel.getFilterContainerScope(),changeFilterActivity:Ve}}),Ve&&Ve.resolve()})},Ae)})}},ke.prototype.canApplyFilter=function(){return this.viewModel&&!this.viewModel.isInvalidCardType()&&this.vm&&this.vm.relativeUnit&&this.vm.relativeQualifier&&(this.vm.hasPendingClear||this.vm.isDurationWithinRange()&&this.filterForm&&this.filterForm.isDirty()&&this.filterForm.isValid())},ke.prototype.isApplyAllOnForThisFilter=function(){var Ae=this.viewModeState.getConfig().displayOptions.enableMobileFilters;return Je.isApplyAllEnabled(this.viewModel.isInOutspacePane||Ae,this.explorationNavigation)},ke.prototype.onApplyAllClicked=function(Ae){this.isApplyAllOnForThisFilter()&&(Ae.idsInError?this.vm.updateShowInputWarning(Ae.idsInError,this.viewModel.id):(this.applyFilter(Ae.undoRedoActionId),this.vm.clearShowInputWarningAndPendingClear()))},ke.prototype.onModelChanged=function(){!this.isApplyAllOnForThisFilter()||!this.filterForm.isDirty()||(this.vm.isDurationApplicable()&&null===this.vm.duration&&!this.vm.hasPendingClear?Je.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.contract.type,this.viewModel.id,!0,!0):Je.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.contract.type,this.viewModel.id,this.canApplyFilter()),this.vm.updateShowInputWarning())},ke.prototype.initializeViewModel=function(Ae){var Le=this,Ve=this.dataSources.get();this.conceptualSchemaProxy.get(Ve).then(function(tt){var lt=it.extractParametersFromSemanticFilter(Ae.filter,Le.relativeFilterType);Le.vm=W.createRelativeFilterViewModel(Le.relativeFilterType,Ae.expression||lt&&lt.field,Le.localizationService,lt&&lt.options),Le.viewModel.updateFilterProperties(tt,Le.visualPlugin,Le.aggrOps),Le.viewModel.updateViewState(),lt?Le.updateRestatement():(Le.filterForm.setDirty(),Ae.filter||Le.clearRestatement())})},ke.prototype.logFilterAppliedTelemetry=function(Ae,Le){var Ve=function(ke,Ae,Le,Ve,tt){switch(ke){case l.Time:return Ae.startEvent(powerbi.telemetry.EXFilterPaneRelativeTimeFilterApplied,{relativeQualifier:o[tt.relativeQualifier],duration:tt.duration,relativeUnit:powerbi.data.RelativeDateUnit[tt.relativeUnit],viewMode:powerbi.explore.util.getTelemetryViewMode(Le.getMode()),isInOutspacePane:Ve});case l.Date:return Ae.startEvent(powerbi.telemetry.EXFilterPaneRelativeDateFilterApplied,{relativeQualifier:o[tt.relativeQualifier],duration:tt.duration,relativeUnit:powerbi.data.RelativeDateUnit[tt.relativeUnit],includeToday:tt.includeToday,isCalendarPeriod:a.isCalendarPeriod(tt.relativeUnit),viewMode:powerbi.explore.util.getTelemetryViewMode(Le.getMode()),isInOutspacePane:Ve});default:return null}}(this.relativeFilterType,this.telemetryService,this.viewModeState,this.viewModel.isInOutspacePane,Ae);try{Le(),Ve.resolve()}catch(tt){throw Ve.reject(),ue.ensureError(tt)}},ke.prototype.onFilterContainerChanged=function(Ae){Ae.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(Ae.changeType,10)?this.onFilterClear(Ae):Ae.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(Ae.changeType,2)&&this.initializeViewModel(Ae.filter)},ke.prototype.onFilterClear=function(Ae){this.isApplyAllOnForThisFilter()?(this.vm.setupPendingClear(),this.filterForm.setDirty(),this.vm.isDurationApplicable()||(this.vm.relativeQualifier.value=powerbi.data.RelativeDateQualifier.Last),Je.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,Ze.TopN,this.viewModel.id,!0)):this.initializeViewModel(Ae.filter)},ke.prototype.updateRestatement=function(){var Ae=this.visualTimeSynchronizationService?this.visualTimeSynchronizationService.getAnchorTime():void 0,Le=this.viewModel.isFilterExpanded()&&this.networkAvailabilityService.isNetworkAvailable();this.viewModel.setRestatement(this.vm.getRestatement(Le,Ae))},ke.prototype.clearRestatement=function(){this.viewModel.setRestatement(void 0)},ke.\u0275fac=function(Le){return new(Le||ke)(r.\u0275\u0275directiveInject(k.C),r.\u0275\u0275directiveInject(R.i),r.\u0275\u0275directiveInject(G.r),r.\u0275\u0275directiveInject(le.D),r.\u0275\u0275directiveInject(ge.J),r.\u0275\u0275directiveInject(Z.U),r.\u0275\u0275directiveInject(re.z),r.\u0275\u0275directiveInject(fe.vZ),r.\u0275\u0275directiveInject(Q.o),r.\u0275\u0275directiveInject(J.SW),r.\u0275\u0275directiveInject(r.NgZone),r.\u0275\u0275directiveInject(se.y0),r.\u0275\u0275directiveInject(j.z),r.\u0275\u0275directiveInject(oe.kc),r.\u0275\u0275directiveInject(K.$),r.\u0275\u0275directiveInject(D.D),r.\u0275\u0275directiveInject(ie.a))},ke.\u0275cmp=r.\u0275\u0275defineComponent({type:ke,selectors:[["relative-filter"]],inputs:{filterType:"filterType",viewModel:"viewModel"},outputs:{onFilterChanged:"onFilterChanged"},decls:1,vars:1,consts:[["class","relativeFilter",3,"ngClass","ngStyle","formGroup","ngSubmit",4,"ngIf"],[1,"relativeFilter",3,"ngClass","ngStyle","formGroup","ngSubmit"],["localize","ShowItemsWhenValue",1,"description",3,"pbiTooltip"],[1,"relativeFilterSettings"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","formControlName","qualifier","disableOptionCentering","true",1,"filterInput","pbi-modern-select",3,"ngModel","ngStyle","pbiTooltip","panelClass","ngModelChange"],[3,"value","ngStyle",4,"ngFor","ngForOf"],["class","filterInput pbi-modern-input","type","number","formControlName","duration",3,"ngModel","filterInputWarningBorder","ngStyle","pbiTooltip","placeholder","ngModelChange",4,"ngIf"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","class","filterInput pbi-modern-select","formControlName","unitsAll","disableOptionCentering","true",3,"ngModel","ngStyle","pbiTooltip","compareWith","panelClass","ngModelChange",4,"ngIf"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","class","filterInput pbi-modern-select","formControlName","unitsCurrent","disableOptionCentering","true",3,"ngModel","ngStyle","compareWith","panelClass","ngModelChange",4,"ngIf"],["class","footerSection",4,"ngIf"],["type","submit","class","applyFilter smallFontSize","localize","Filter_ApplyFilter",3,"disabled","pbiTooltip",4,"ngIf"],[3,"value","ngStyle"],["type","number","formControlName","duration",1,"filterInput","pbi-modern-input",3,"ngModel","ngStyle","pbiTooltip","placeholder","ngModelChange"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","formControlName","unitsAll","disableOptionCentering","true",1,"filterInput","pbi-modern-select",3,"ngModel","ngStyle","pbiTooltip","compareWith","panelClass","ngModelChange"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","formControlName","unitsCurrent","disableOptionCentering","true",1,"filterInput","pbi-modern-select",3,"ngModel","ngStyle","compareWith","panelClass","ngModelChange"],[1,"footerSection"],["pbiTooltipCheckChildren","true","localizeTooltip","RelativeDateFilter_IncludeToday","formControlName","includeToday",1,"pbi-checkbox",3,"matCheckBoxColor","matCheckBoxColorIsChecked","ngModel","ngStyle","aria-label","pbiTooltip","pbiTooltipAlwaysShow","ngModelChange"],["localize","RelativeDateFilter_IncludeToday"],["type","submit","localize","Filter_ApplyFilter",1,"applyFilter","smallFontSize",3,"disabled","pbiTooltip"]],template:function(Le,Ve){1&Le&&r.\u0275\u0275template(0,ht,10,23,"form",0),2&Le&&r.\u0275\u0275property("ngIf",void 0!==Ve.vm)},directives:[p.NgIf,g._Y,g.JL,p.NgClass,p.NgStyle,g.sg,h.X,m.V,S.gD,N.x,g.JJ,g.u,p.NgForOf,ce.ey,g.wV,g.Fj,he.oG,Ce.N,me.r],styles:['.invalid[_ngcontent-%COMP%]   .applyFilter[_ngcontent-%COMP%]{color:var(--neutral-secondary-color, #666666)}.description[_ngcontent-%COMP%]{margin:12px 0 6px}.relativeFilterSettings[_ngcontent-%COMP%]   .filterInput[_ngcontent-%COMP%]{margin-bottom:4px;width:100%;box-sizing:border-box;border:1px solid var(--neutral-dark-color, #212121);min-height:24px}html:not([dir="rtl"])[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]{margin:6px 0 3px 3px}html[dir="rtl"][_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]{margin:6px 3px 3px 0}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]    {margin-bottom:0;display:inline-block;vertical-align:middle}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label{color:inherit}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label span.mat-checkbox-label{font-size:inherit;font-family:inherit}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label div.mat-checkbox-inner-container{width:16px;height:16px}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{vertical-align:middle}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{vertical-align:middle}html:not([dir="rtl"])[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0 0 0 4px}html[dir="rtl"][_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0 4px 0 0}.relativeFilterSettings[_ngcontent-%COMP%]   input.filterInput.pbi-modern-input[_ngcontent-%COMP%]{font-size:inherit;font-family:inherit}.filterPaneModern   .card[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label, .filterPaneModern   .card   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label{color:inherit;font-family:inherit;line-height:unset}.filterPaneModern   .card[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .formLabel, .filterPaneModern   .card   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .formLabel, .filterPaneModern   .card[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .checkbox, .filterPaneModern   .card   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .checkbox{font-size:unset}.newPaneColors.explorationContainer[_nghost-%COMP%]   .relativeFilter.invalid[_ngcontent-%COMP%]   .applyFilter[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .relativeFilter.invalid[_ngcontent-%COMP%]   .applyFilter[_ngcontent-%COMP%]{color:var(--gray-80, #B3B0AD)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%], .newPaneColors.explorationContainer[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .filterInput[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .filterInput[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]    , .newPaneColors.explorationContainer   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]    {color:inherit}',".exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]{color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:32px;padding:0 8px;background-color:var(--fluentThemeNeutralLighterAltColor);margin:0 0 15px;border:0px;border-bottom:1px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--fluentThemeNeutralSecondaryAltColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-select-value, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-select-value{padding:0}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-select-arrow-wrapper, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-select-arrow-wrapper{display:block}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-background, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-background{background-color:var(--fluentThemeNeutralLighterAltColor);border:solid 1px var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-checked, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-checked, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-checkmark-path, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-checkmark-path{stroke:var(--fluentThemeNeutralDarkColor)!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox:not(.mat-checkbox-checked) .mat-checkbox-checkmark-path, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox:not(.mat-checkbox-checked) .mat-checkbox-checkmark-path{display:none}*[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}"]}),ke}()},50439:function(Ee,ne,t){t.d(ne,{T:function(){return ge}});var e=t(40582),n=t(76430),f=t(38942),i=t(10883),M=t(95762),E=t(71367),I=t(23580),d=t(95781),P=t(61624),y=t(78600),b=t(21231),a=t(60660),o=t(40629),l=t(59804),s=t(49099),c=t(80815),O=t(63724),x=t(60400),V=t(55037),w=t(52555),T=powerbi.explore.services.events,v=powerbi.explore.contracts,g=powerbi.explore.viewModels,r=powerbi.explore.contracts.VisualContainer,u=powerbi.explore.contracts.VisualContainerGroup,C=powerbi.explore.util.VisualContainerUtils,F=function(j,ie,Z){return{showSkipIconAlways:j,hiddenStyle:ie,newPaneColors:Z}};function A(re,j){if(1&re){var ie=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",6),n.\u0275\u0275listener("click",function(Q){return n.\u0275\u0275restoreView(ie),n.\u0275\u0275nextContext().toggleSkipped(Q)}),n.\u0275\u0275element(1,"div",7),n.\u0275\u0275elementStart(2,"div",8),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}if(2&re){var Z=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction3(5,F,Z.isSkipped,Z.isShowItemHiddenStyle,Z.isNewPaneColorsEnabled()))("disabled",!Z.isEditMode()),n.\u0275\u0275attribute("title",Z.actionTitle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",Z.actionIconClass),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(Z.order)}}function W(re,j){if(1&re){var ie=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",9),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(ie),n.\u0275\u0275nextContext().refreshVisual()}),n.\u0275\u0275elementEnd()}if(2&re){var Z=n.\u0275\u0275nextContext();n.\u0275\u0275attribute("title",Z.refreshTitle)}}function k(re,j){if(1&re){var ie=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",10),n.\u0275\u0275listener("click",function(Q){return n.\u0275\u0275restoreView(ie),n.\u0275\u0275nextContext().toggleVisibility(Q)}),n.\u0275\u0275elementEnd()}if(2&re){var Z=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",Z.actionIconClass+(Z.isNewPaneColorsEnabled()?" newPaneColors":""))("disabled",Z.isDisabled()),n.\u0275\u0275attribute("title",Z.actionTitle)}}function R(re,j){if(1&re){var ie=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",11),n.\u0275\u0275listener("click",function(fe){return n.\u0275\u0275restoreView(ie),n.\u0275\u0275nextContext().showContextMenu(fe)}),n.\u0275\u0275element(1,"i",12),n.\u0275\u0275elementEnd()}}var G=function(j){return{hiddenStyle:j}},ge=function(){function re(j,ie,Z,fe,Q,J,se,oe,K,D,p,h,m,S,N){var ce=this;this.conceptualSchemaProxy=j,this.dataSources=ie,this.displayNameService=Z,this.eventBridge=fe,this.explorationCapabilities=Q,this.featureSwitchService=J,this.formFactor=se,this.highContrastCssGenerationService=oe,this.localizationService=K,this.screenReaderService=D,this.viewModeState=p,this.visualAuthoring=h,this.visualContainerMenuFactory=m,this.visualPlugin=S,this.pauseQueriesService=N,this.renameAction=new n.EventEmitter,this.isEditing=new n.EventEmitter,this.skipFunction=new n.EventEmitter,this.editableTextLabelStyles={margin:"0 6px"},this.editableTextLabelClasses="trimmedTextWithEllipsis",this.refreshLabel=this.localizationService.get("Refresh"),this.initializeHighContrastRules(),this.isListOrderSection=function(){return void 0===ce.isSkipped},this.isShowItemHiddenStyle=!1}return re.prototype.ngOnInit=function(){var j=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager(),g.isVisualContainer(this.item)?this.subscriptionManager.subscribe(T.visualContainerChanged,function(ie,Z){return j.onVisualContainerChanged(Z)}):this.subscriptionManager.subscribe(T.visualContainerGroupChanged,function(ie,Z){return j.onVisualContainerGroupChanged(Z)}),this.subscriptionManager.subscribe(T.visualContainerDataRendered,function(ie,Z){return j.onVisualContainerDataRendered(Z)})},re.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},re.prototype.onMouseEnter=function(j){this.onHover(!0)},re.prototype.onMouseLeave=function(j){this.onHover(!1)},re.prototype.ngOnChanges=function(j){j.item&&(this.item=j.item.currentValue,this.generateTitle(),this.isListOrderSection()?this.updateVisibility():g.isVisualContainer(this.item)&&this.updateSkipped(this.item))},re.prototype.onContextMenu=function(j){this.isEditable()&&this.isListOrderSection()&&(j.preventDefault(),this.showContextMenu(j,!0))},re.prototype.onHover=function(j){C.notifyContainerHoverEvent(j,this.item.name,this.eventBridge)},re.prototype.refreshVisual=function(){this.pauseQueriesService.refreshVisuals(this.item.name)},re.prototype.isItemInPausedState=function(){return!(!this.featureSwitchService.featureSwitches.optimizeTabRibbon||!g.isVisualContainer(this.item)||!this.item.visualPausedWarning)},re.prototype.isNewPaneColorsEnabled=function(){return this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign},re.prototype.toggleSkipped=function(j){this.skipFunction&&this.skipFunction.emit({isSkippedSection:this.isSkipped,visualContainer:this.item}),j.stopPropagation()},re.prototype.toggleVisibility=function(j){g.isVisualContainer(this.item)?this.toggleVisualContainerVisibility(this.item):this.toggleVisualContainerGroupVisibility(this.item),j.stopPropagation()},re.prototype.toggleVisualContainerVisibility=function(j){var Z=!r.isHidden(j.contract.config.singleVisual);this.visualAuthoring.setVisibility(Z,[j.contract])},re.prototype.toggleVisualContainerGroupVisibility=function(j){var ie=!u.isHidden(j.contract);this.visualAuthoring.setVisualContainerGroupVisibility(ie,[j.contract]),this.updateVisibility()},re.prototype.onVisualContainerChanged=function(j){g.isVisualContainer(this.item)&&(j&&j.affectContainer(this.item.contract)||this.isPhoneLayout())&&(this.generateTitle(),this.isListOrderSection()?this.updateVisibility():this.updateSkipped(this.item))},re.prototype.onVisualContainerGroupChanged=function(j){g.isVisualContainerGroup(this.item)&&j&&j.affectContainer(this.item.contract)&&(this.generateTitle(),this.isListOrderSection()&&this.updateVisibility())},re.prototype.onVisualContainerDataRendered=function(j){j.name===this.item.contract.name&&this.generateTitle()},re.prototype.generateTitle=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var j;return(0,e.Jh)(this,function(ie){switch(ie.label){case 0:return g.isVisualContainer(this.item)?(j=this,[4,C.getVisualContainerDisplayName(this.item.contract,{dataSources:this.dataSources,conceptualSchemaProxy:this.conceptualSchemaProxy,visualPlugin:this.visualPlugin,displayNameService:this.displayNameService})]):[3,2];case 1:return j.title=ie.sent(),[3,3];case 2:this.title=this.item.contract.displayName,ie.label=3;case 3:return[2]}})})},re.prototype.editLabel=function(){this.isEditable()&&(this.isEditingLabel=!0,this.isEditing.emit(!0))},re.prototype.isDisabled=function(){if(this.isEditable()){for(var j=this.item.parentGroup;j;){if(j.isHidden)return!0;j=j.parentGroup}return j&&j.isHidden}return!0},re.prototype.isPhoneLayout=function(){return 1===this.formFactor.getCurrentLayout()},re.prototype.rename=function(j){var ie=j.newName;""!==ie&&null!=ie?(this.isEditing.emit(!1),g.isVisualContainer(this.item)?this.visualAuthoring.persistVCProperties(this.createNewNameChangeObject(ie),this.item.contract):this.visualAuthoring.setVisualContainerGroupDisplayName(ie,[this.item.contract]),this.title=ie,this.renameAction.emit(ie),this.isEditingLabel=!1):this.cancelRename()},re.prototype.cancelRename=function(){this.isEditingLabel=!1,this.isEditing.emit(!1)},re.prototype.createNewNameChangeObject=function(j){return[{merge:[{objectName:"title",properties:{text:j},selector:null}]}]},re.prototype.isEditMode=function(){return 1===this.viewModeState.getMode()},re.prototype.isEditable=function(){return this.isEditMode()&&!this.isPhoneLayout()},re.prototype.showContextMenu=function(j,ie){void 0===ie&&(ie=!1),ie||j.stopPropagation(),this.visualContainerMenuFactory.createMenu(this.item,{data:void 0,position:{x:j.pageX,y:j.pageY}},void 0,void 0,!1,{},j.target)},re.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".themeableElement canvas-items-list .canvas-items-list.scroll-content li.append","{ border-bottom-color: @selectedBackgroundColor !important; }")},re.prototype.updateSkipped=function(j){this.actionIconClass="glyphicon pbi-glyph-disable",this.isShowItemHiddenStyle=!!v.VisualContainer.isHidden(j.contract.config.singleVisual)},re.prototype.isHidden=function(){return v.isVisualContainer(this.item.contract)?this.isPhoneLayout()?C.isVisualHiddenOrInHiddenGroup(this.item.contract):v.VisualContainer.isHidden(this.item.contract.config.singleVisual):this.item.contract.isHidden},re.prototype.updateVisibility=function(){var j,ie,Z=this.actionIconClass;if(this.isHidden()?(this.actionIconClass="glyphicon pbi-glyph-hide3",j=this.isPhoneLayout()?"ExplorationCanvasItemsPane_Hidden_Visual":"ExplorationCanvasItemsPane_Show",ie="ExplorationCanvasItemsPane_Hidden"):(this.actionIconClass="glyphicon pbi-glyph-view",j=this.isPhoneLayout()?"ExplorationCanvasItemsPane_Shown_Visual":"ExplorationCanvasItemsPane_Hide",ie="ExplorationCanvasItemsPane_Shown"),this.actionTitle=this.localizationService.get(j),Z&&Z!==this.actionIconClass){var fe=this.localizationService.format(ie,[this.title]);this.screenReaderService.alertWithDebounce("canvas-item-visibility-"+this.item.contract.name,fe)}},re.\u0275fac=function(ie){return new(ie||re)(n.\u0275\u0275directiveInject(f.i),n.\u0275\u0275directiveInject(i.D),n.\u0275\u0275directiveInject(M.O),n.\u0275\u0275directiveInject(E.J),n.\u0275\u0275directiveInject(I.U),n.\u0275\u0275directiveInject(d.vZ),n.\u0275\u0275directiveInject(P.F),n.\u0275\u0275directiveInject(y.g),n.\u0275\u0275directiveInject(a.o),n.\u0275\u0275directiveInject(b.g),n.\u0275\u0275directiveInject(o.kc),n.\u0275\u0275directiveInject(l.$),n.\u0275\u0275directiveInject(s.p),n.\u0275\u0275directiveInject(c.D),n.\u0275\u0275directiveInject(O.F))},re.\u0275cmp=n.\u0275\u0275defineComponent({type:re,selectors:[["selection-pane-item"]],hostBindings:function(ie,Z){1&ie&&n.\u0275\u0275listener("mouseenter",function(Q){return Z.onMouseEnter(Q)})("mouseleave",function(Q){return Z.onMouseLeave(Q)})},inputs:{isSkipped:"isSkipped",item:"item",order:"order"},outputs:{renameAction:"renameAction",isEditing:"isEditing",skipFunction:"skipFunction"},features:[n.\u0275\u0275NgOnChangesFeature],decls:6,vars:14,consts:[[1,"selectionPaneItem",3,"contextmenu"],["class","actionIcon","tabindex","-1",3,"ngClass","disabled","click",4,"ngIf"],[3,"textLabelClasses","textLabelStyles","ngClass","displayName","editable","disableClick","maxInputLength","customTooltip","dblclick","onBlur","cancel"],["class","refreshIcon glyphicon pbi-glyph-refresh","tabindex","-1",3,"click",4,"ngIf"],["class","actionIcon glyphicon","tabindex","-1",3,"ngClass","disabled","click",4,"ngIf"],["class","optionsMenu menuContainer item-auto","tabindex","-1","localizeTooltip","Options_Menu",3,"click",4,"ngIf"],["tabindex","-1",1,"actionIcon",3,"ngClass","disabled","click"],[1,"glyphicon","left",3,"ngClass"],[1,"tabOrderNumber"],["tabindex","-1",1,"refreshIcon","glyphicon","pbi-glyph-refresh",3,"click"],["tabindex","-1",1,"actionIcon","glyphicon",3,"ngClass","disabled","click"],["tabindex","-1","localizeTooltip","Options_Menu",1,"optionsMenu","menuContainer","item-auto",3,"click"],[1,"glyphicon","pbi-glyph-more"]],template:function(ie,Z){1&ie&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275listener("contextmenu",function(Q){return Z.onContextMenu(Q)}),n.\u0275\u0275template(1,A,4,9,"button",1),n.\u0275\u0275elementStart(2,"editable-label",2),n.\u0275\u0275listener("dblclick",function(){return Z.editLabel()})("onBlur",function(Q){return Z.rename(Q)})("cancel",function(){return Z.cancelRename()}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,W,1,1,"button",3),n.\u0275\u0275template(4,k,1,3,"button",4),n.\u0275\u0275template(5,R,2,0,"button",5),n.\u0275\u0275elementEnd()),2&ie&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!Z.isListOrderSection()),n.\u0275\u0275advance(1),n.\u0275\u0275property("textLabelClasses",Z.editableTextLabelClasses)("textLabelStyles",Z.editableTextLabelStyles)("ngClass",n.\u0275\u0275pureFunction1(12,G,Z.isShowItemHiddenStyle))("displayName",Z.title)("editable",Z.isEditingLabel)("disableClick",!0)("maxInputLength",250)("customTooltip",!1),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Z.isItemInPausedState()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Z.isListOrderSection()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Z.isEditable()&&Z.isListOrderSection()))},directives:[x.NgIf,V.V,x.NgClass,w.r],styles:['[_nghost-%COMP%]{width:100%}.selectionPaneItem[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;height:24px}.selectionPaneItem[_ngcontent-%COMP%]:focus{outline:none}.selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border-color:inherit;color:inherit;border:none;padding:0 0 0 5px}.selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0}.selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%], .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus:hover{background-color:transparent;border-color:inherit}.selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover{color:inherit}.selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%], .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus:hover{color:var(--neutral-tertiary-color, #A6A6A6)}.selectionPaneItem[_ngcontent-%COMP%]   button.refreshIcon[_ngcontent-%COMP%]{padding-right:5px}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon[_ngcontent-%COMP%]{padding:0}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-right:14px;display:none;font-size:12px}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon.hiddenStyle[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color2, #B7B7B7)}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon[_ngcontent-%COMP%]   .tabOrderNumber[_ngcontent-%COMP%]{padding-right:14px;min-width:12px;font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif;display:block}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon.showSkipIconAlways[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:block}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon.showSkipIconAlways[_ngcontent-%COMP%]   .tabOrderNumber[_ngcontent-%COMP%]{display:none}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon[_ngcontent-%COMP%]:not(.showSkipIconAlways):hover   .left[_ngcontent-%COMP%]{display:block}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon[_ngcontent-%COMP%]:not(.showSkipIconAlways):hover   .tabOrderNumber[_ngcontent-%COMP%]{display:none}.selectionPaneItem[_ngcontent-%COMP%]   editable-label[_ngcontent-%COMP%]{flex-grow:1}.selectionPaneItem[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{opacity:1}.selectionPaneItem[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]:focus{outline:none}.selectionPaneItem[_ngcontent-%COMP%]   button.newPaneColors[_ngcontent-%COMP%]:disabled, .selectionPaneItem[_ngcontent-%COMP%]   button.newPaneColors[disabled][_ngcontent-%COMP%], .selectionPaneItem[_ngcontent-%COMP%]   button.newPaneColors[_ngcontent-%COMP%]:disabled:hover, .selectionPaneItem[_ngcontent-%COMP%]   button.newPaneColors[disabled][_ngcontent-%COMP%]:hover, .selectionPaneItem[_ngcontent-%COMP%]   button.newPaneColors[_ngcontent-%COMP%]:disabled:focus, .selectionPaneItem[_ngcontent-%COMP%]   button.newPaneColors[disabled][_ngcontent-%COMP%]:focus, .selectionPaneItem[_ngcontent-%COMP%]   button.newPaneColors[_ngcontent-%COMP%]:disabled:active, .selectionPaneItem[_ngcontent-%COMP%]   button.newPaneColors[disabled][_ngcontent-%COMP%]:active, .selectionPaneItem[_ngcontent-%COMP%]   button.newPaneColors[_ngcontent-%COMP%]:disabled:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button.newPaneColors[disabled][_ngcontent-%COMP%]:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button.newPaneColors[_ngcontent-%COMP%]:disabled:focus:hover, .selectionPaneItem[_ngcontent-%COMP%]   button.newPaneColors[disabled][_ngcontent-%COMP%]:focus:hover{color:var(--gray-80, #B3B0AD)}.selectionPaneItem[_ngcontent-%COMP%]   button.newPaneColors.actionIcon.hiddenStyle[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}']}),re}()},38633:function(Ee,ne,t){t.d(ne,{rr:function(){return qt}});var e=t(40582),n=t(59229),f=t(22134),i=t(69104),M=t(78369),E=t(15855),I=t(73680),d=t(97894),P=t(16524),y=t(11586),b=t(10994),a=t(60354),o=t(76430),l=t(59886),s=powerbi.explore.services.selectionUtils,c=function(){function pe(B){this.selectionService=B}return pe.prototype.click=function(B){var U=B.flatNode.node.data.canvasItem.contract,z=B.flatNode,ae=B.sourceEvent;ae.ctrlKey?s.isCanvasItemSelected(U,this.selectionService)?s.unselectCanvasItem(U,this.selectionService):(s.selectCanvasItem(U,this.selectionService,1),this.startRangeSelectionNode=z.node):ae.shiftKey&&this.startRangeSelectionNode?z.node.parent===this.startRangeSelectionNode.parent?(this.selectionService.clearSelection(),this.selectNodesRange(this.startRangeSelectionNode,z.node)):this.singleSelection(z.node,U):s.isCanvasItemSelected(U,this.selectionService)?(this.selectionService.clearSelection(),this.startRangeSelectionNode=void 0):this.singleSelection(z.node,U),B.tree.renderNodeChanges()},pe.prototype.setTree=function(B){this.tree=B},pe.prototype.singleSelection=function(B,U){this.selectionService.clearSelection(),s.selectCanvasItem(U,this.selectionService),this.startRangeSelectionNode=B},pe.prototype.selectNodesRange=function(B,U){var z,ae,ye;B.parent&&U.parent?(z=B.parent.children.findIndex(function(De){return B.data.canvasItem.name===De.data.canvasItem.name}),ae=U.parent.children.findIndex(function(De){return U.data.canvasItem.name===De.data.canvasItem.name}),ye=U.parent.children):(z=this.tree.nodes.findIndex(function(De){return B.data.canvasItem.name===De.data.canvasItem.name}),ae=this.tree.nodes.findIndex(function(De){return U.data.canvasItem.name===De.data.canvasItem.name}),ye=this.tree.nodes),s.selectCanvasItems(ye.slice(Math.min(z,ae),Math.max(z,ae)+1).map(function(De){return De.data.canvasItem.contract}),this.selectionService)},pe.\u0275fac=function(U){return new(U||pe)(o.\u0275\u0275inject(l.z))},pe.\u0275prov=o.\u0275\u0275defineInjectable({token:pe,factory:pe.\u0275fac}),pe}(),O=t(59804),x=powerbi.explore.viewModels,V=function(){function pe(B){this.visualAuthoring=B}return pe.prototype.beginEdit=function(B){B.sourceEvent&&B.sourceEvent.stopPropagation(),B.flatNode.node.grayedOut||(B.flatNode.node.displayName=B.flatNode.node.displayName.substr(B.flatNode.node.data.index.length+1)),this.previousLabel=B.flatNode.node.displayName,B.flatNode.node.editing=!0},pe.prototype.edit=function(B){B.flatNode.node.displayName=B.value},pe.prototype.endEdit=function(B){if(B.sourceEvent.stopPropagation(),B.flatNode.node.editing=!1,0!==B.flatNode.node.displayName.length&&this.previousLabel!==B.flatNode.node.displayName){var U=B.flatNode.node.displayName;B.flatNode.node.displayName=B.flatNode.node.grayedOut?""+U:B.flatNode.node.data.index+" "+U,B.flatNode.node.ariaLabel=U,x.isVisualContainer(B.flatNode.node.data.canvasItem)?this.visualAuthoring.persistVCProperties(this.createNewNameChangeObject(U),B.flatNode.node.data.canvasItem.contract):this.visualAuthoring.setVisualContainerGroupDisplayName(U,[B.flatNode.node.data.canvasItem.contract]),B.tree.renderNodeChanges()}else B.flatNode.node.displayName=B.flatNode.node.grayedOut?""+this.previousLabel:B.flatNode.node.data.index+" "+this.previousLabel},pe.prototype.createNewNameChangeObject=function(B){return[{merge:[{objectName:"title",properties:{text:B},selector:null}]}]},pe.\u0275fac=function(U){return new(U||pe)(o.\u0275\u0275inject(O.$))},pe.\u0275prov=o.\u0275\u0275defineInjectable({token:pe,factory:pe.\u0275fac}),pe}(),w=t(26334),T=t(44627),v=t(48478),g=powerbi.explore.util.CanvasVisualsUtility,r=powerbi.ItemGroupingManager,u=powerbi.explore.services.selectionUtils,C=powerbi.explore.viewModels,F=function(){function pe(B,U,z){this.lazyScoped=B,this.layoutAuthoring=U,this.selectionService=z,this.dragDropChange$=new w.xQ,this.tabOrderPromise=this.lazyScoped.get("tabOrderService")}return pe.prototype.dragStart=function(B){var U=B.sourceEvent,z=B.flatNode;this.dragSourceNode=z.node,U.dataTransfer.setData(y.L$,JSON.stringify({id:z.node.id,label:z.node.displayName})),u.isCanvasItemSelected(z.node.data.canvasItem.contract,this.selectionService)||u.selectCanvasItem(z.node.data.canvasItem.contract,this.selectionService),this.flattenedVisibleNodes=this.getFlattenedVisibleNodes(this.tree.nodes),this.startIndex=this.flattenedVisibleNodes.findIndex(function(De){return De.data.canvasItem.name===z.node.data.canvasItem.name})},pe.prototype.drop=function(B){var U=B.sourceEvent,z=B.flatNode;if(this.dragSourceNode&&(z.node.dragBorderTop=!1,z.node.dragBorderBottom=!1,U.dataTransfer.getData(y.L$)&&!(this.dragSourceNode.data.canvasItem.name===z.node.data.canvasItem.name||C.isVisualContainerGroup(this.dragSourceNode.data.canvasItem)&&r.find(z.node.data.canvasItem.name,this.dragSourceNode.data.canvasItem.children)))){var ae=this.flattenedVisibleNodes.findIndex(function(ye){return ye.data.canvasItem.name===z.node.data.canvasItem.name});ae>this.startIndex&&z.node.grayedOut||ae<this.startIndex&&ae-1>=0&&this.flattenedVisibleNodes[ae-1].grayedOut||(U.preventDefault(),this.dropHelper(z,ae))}},pe.prototype.dropHelper=function(B,U){return(0,e.mG)(this,void 0,void 0,function(){var z,ae,ye,De,Ke,Qe;return(0,e.Jh)(this,function(pt){switch(pt.label){case 0:return[4,this.tabOrderPromise];case 1:return z=pt.sent(),ye=this.dragSourceNode.data.canvasItem.contract,De=(ae=B.node.data.canvasItem).contract.parentGroup?ae.contract.parentGroup.children:this.tree.nodes.map(function(mt){return mt.data.canvasItem.contract}),Ke=g.filterContractsByTabOrderSign(De,!0),Qe=!1,U<this.startIndex?B.node.grayedOut&&U-1>0&&!this.flattenedVisibleNodes[U-1].grayedOut&&C.isVisualContainerGroup(this.flattenedVisibleNodes[U-1].data.canvasItem)&&B.node.data.canvasItem.parentGroup===this.flattenedVisibleNodes[U-1].data.canvasItem?(Ke=g.filterContractsByTabOrderSign(De,!1),z.moveAfter(Ke,ae,[ye],!1),z.changeSection([],[ye],!0,!0,!1)):B.node.grayedOut&&U-1>0&&!this.flattenedVisibleNodes[U-1].grayedOut||this.isDroppedAtEndOfList(U,this.flattenedVisibleNodes)?(Ke=g.filterContractsByTabOrderSign((ae=this.flattenedVisibleNodes[U-1].data.canvasItem).contract.parentGroup.children,!0),z.moveBefore(Ke,ae,[ye],!0),Qe=this.isDroppedAtEndOfList(U,this.flattenedVisibleNodes)):z.moveAfter(Ke,ae,[ye],!0):C.isVisualContainerGroup(B.node.data.canvasItem)&&B.node.expanded?(Ke=g.filterContractsByTabOrderSign((ae=this.flattenedVisibleNodes[U+1].data.canvasItem).contract.parentGroup.children,!0),z.moveAfter(Ke,ae,[ye],!0)):(De.findIndex(function(mt){return mt.name===ae.name})===De.length-1&&(Qe=!0),z.moveBefore(Ke,ae,[ye],!0)),ae.contract.parentGroup===ye.parentGroup||this.layoutAuthoring.moveCanvasItemInTree(ye,ae.contract,Qe),this.dragDropChange$.next(!0),[2]}})})},pe.prototype.dragOver=function(B){this.dragSourceNode&&B.sourceEvent.preventDefault()},pe.prototype.dragEnter=function(B){!this.dragSourceNode||this.dragEnterHelper(B.flatNode)},pe.prototype.dragEnterHelper=function(B){if(!(this.dragSourceNode.data.canvasItem.name===B.node.data.canvasItem.name||C.isVisualContainerGroup(this.dragSourceNode.data.canvasItem)&&r.find(B.node.data.canvasItem.name,this.dragSourceNode.data.canvasItem.children))){var U=this.flattenedVisibleNodes.findIndex(function(z){return z.data.canvasItem.name===B.node.data.canvasItem.name});if(U<this.startIndex){if(U-1>=0&&this.flattenedVisibleNodes[U-1].grayedOut)return;B.node.dragBorderTop=!0}else{if(B.node.grayedOut)return;B.node.dragBorderBottom=!0}}},pe.prototype.dragLeave=function(B){var U=B.flatNode;U.node.dragBorderTop=!1,U.node.dragBorderBottom=!1},pe.prototype.dragEnd=function(B){var U=B.flatNode;this.dragSourceNode&&(this.dragSourceNode=void 0,U.node.dragBorderTop=!1,U.node.dragBorderBottom=!1,this.startIndex=void 0)},pe.prototype.getDragDropChange$=function(){return this.dragDropChange$.asObservable()},pe.prototype.setTree=function(B){this.tree=B},pe.prototype.getFlattenedVisibleNodes=function(B){for(var U=[],z=0,ae=B;z<ae.length;z++){var ye=ae[z];U.push(ye),ye.expanded&&C.isVisualContainerGroup(ye.data.canvasItem)&&(U=U.concat(this.getFlattenedVisibleNodes(ye.children)))}return U},pe.prototype.isDroppedAtEndOfList=function(B,U){if(B<=0)return!1;var z=U[B-1];return this.isTheLastChild(z)&&z&&(C.isVisualContainer(z.data.canvasItem)||!z.expanded)},pe.prototype.isTheLastChild=function(B){return B.parent&&B.data.canvasItem.name===B.parent.children[B.parent.children.length-1].data.canvasItem.name},pe.\u0275fac=function(U){return new(U||pe)(o.\u0275\u0275inject(T.H),o.\u0275\u0275inject(v.U),o.\u0275\u0275inject(l.z))},pe.\u0275prov=o.\u0275\u0275defineInjectable({token:pe,factory:pe.\u0275fac}),pe}(),A=t(71367),W=powerbi.explore.util.VisualContainerUtils,k=function(){function pe(B){this.eventBridge=B}return pe.prototype.enter=function(B){W.notifyContainerHoverEvent(!0,B.flatNode.node.data.canvasItem.contract.name,this.eventBridge)},pe.prototype.leave=function(B){W.notifyContainerHoverEvent(!1,B.flatNode.node.data.canvasItem.contract.name,this.eventBridge)},pe.\u0275fac=function(U){return new(U||pe)(o.\u0275\u0275inject(A.J))},pe.\u0275prov=o.\u0275\u0275defineInjectable({token:pe,factory:pe.\u0275fac}),pe}(),R=t(95726),G=t(23246),le=powerbi.explore.contracts,ge=powerbi.explore.util.CanvasVisualsUtility,re=powerbi.explore.services.selectionUtils,j=function(){function pe(B,U,z){this.lazyScoped=B,this.selectionService=U,this.undoRedoService=z,this.inlineItemChange$=new w.xQ,this.tabOrderPromise=this.lazyScoped.get("tabOrderService")}return pe.prototype.click=function(B){return(0,e.mG)(this,void 0,void 0,function(){var U;return(0,e.Jh)(this,function(z){switch(z.label){case 0:return U=B.flatNode,B.item.id!==R.Zw?[3,5]:!U.node.parent||U.node.parent&&!this.isItemHidden(U.node.parent.data.canvasItem)?this.isItemHidden(U.node.data.canvasItem)?[4,this.setTabStateAwaitService([U.node],!0)]:[3,2]:[3,4];case 1:return z.sent(),[3,4];case 2:return[4,this.setTabStateAwaitService([U.node],!1)];case 3:z.sent(),z.label=4;case 4:this.selectionService.clearSelection(),re.selectCanvasItem(U.node.data.canvasItem.contract,this.selectionService),this.inlineItemChange$.next(!0),z.label=5;case 5:return[2]}})})},pe.prototype.setTree=function(B){this.tree=B},pe.prototype.isItemHidden=function(B){var U,z;return!(void 0===(null===(U=B.position)||void 0===U?void 0:U.tabOrder)||(null===(z=B.position)||void 0===z?void 0:z.tabOrder)>=0)},pe.prototype.getInlineItemChange$=function(){return this.inlineItemChange$.asObservable()},pe.prototype.setTabStateAwaitService=function(B,U){return(0,e.mG)(this,void 0,void 0,function(){var z,ae=this;return(0,e.Jh)(this,function(ye){switch(ye.label){case 0:return[4,this.tabOrderPromise];case 1:return z=ye.sent(),this.undoRedoService.register("Update Visual Containers for tabOrder - skipping items",function(){ae.setTabState(B.map(function(De){return De.data.canvasItem.contract}),U,z)}),[2]}})})},pe.prototype.setTabState=function(B,U,z){if(B&&0!==B.length){var ye=(B[0].parentGroup?B[0].parentGroup.children:this.tree.nodes.map(function(Ge){return Ge.data.canvasItem.contract})).filter(function(Ge){var pt=ge.getPosition(Ge,0).tabOrder;return U?pt>=0||void 0===pt:pt&&pt<0});z.changeSection(ye,B,U,!0,!0);for(var De=0,Ke=B;De<Ke.length;De++){var Qe=Ke[De];le.isVisualContainerGroup(Qe)&&this.setTabState(Qe.children,U,z)}}},pe.\u0275fac=function(U){return new(U||pe)(o.\u0275\u0275inject(T.H),o.\u0275\u0275inject(l.z),o.\u0275\u0275inject(G.z))},pe.\u0275prov=o.\u0275\u0275defineInjectable({token:pe,factory:pe.\u0275fac}),pe}(),ie=t(1537),Z=t(38942),fe=t(10883),Q=t(95762),J=t(91054),se=t(23580),oe=t(95781),K=t(61624),D=t(60660),p=t(21231),h=t(59116),m=t(40629),S=t(80815),N=t(9784),ce=t(60400),he=jsCommon.CssConstants.createClassAndSelector,Ce=function(){function pe(){this.onActiveSection=new o.EventEmitter}return pe.prototype.onKeyDown=function(B){var U=this.sectionTabKeyHandler.sectionLength;switch(B.keyCode){case $.ui.keyCode.LEFT:case $.ui.keyCode.UP:var z=(this.sectionTabKeyHandler.currentSection-1+U)%U;this.focusOnSection(z,B);break;case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:this.focusOnSection(z=(this.sectionTabKeyHandler.currentSection+1)%U,B)}},pe.prototype.focusOnSection=function(B,U){var z=he("sectionTab");this.onActiveSection.emit({nextSection:B}),$(U.target).parent("ul").find(z.selector).eq(B).focus(),U.stopPropagation()},pe.\u0275fac=function(U){return new(U||pe)},pe.\u0275dir=o.\u0275\u0275defineDirective({type:pe,selectors:[["","section-tab-key-handler",""]],hostBindings:function(U,z){1&U&&o.\u0275\u0275listener("keydown",function(ye){return z.onKeyDown(ye)})},inputs:{sectionTabKeyHandler:["section-tab-key-handler","sectionTabKeyHandler"]},outputs:{onActiveSection:"onActiveSection"}}),pe}(),me=t(47236),Ze=t(48830),Je=t(3085),it=t(16838),Te=t(3124),ue=t(50439),ve=t(64417),Me=t(50651),we=t(52555),$e=jsCommon.BrowserUtils,et=powerbi.explore.services.events,at=powerbi.explore.contracts,dt=powerbi.explore.viewModels,Fe=powerbi.explore.util.CanvasVisualsUtility,be=jsCommon.DropPosition,_e=powerbi.ItemGroupingManager,Oe=powerbi.explore.services.selectionUtils,Xe=at.VisualContainer,nt=powerbi.explore.util.VisualContainerUtils;function ht(pe,B){if(1&pe){var U=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",17),o.\u0275\u0275elementStart(1,"button",18),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext().setVisibility(!0)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(2,"button",19),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext().setVisibility(!1)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&pe){var z=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("disabled",!z.isEditable()),o.\u0275\u0275advance(1),o.\u0275\u0275property("disabled",!z.isEditable())}}function bt(pe,B){if(1&pe){var U=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",20),o.\u0275\u0275elementStart(1,"button",21),o.\u0275\u0275listener("accessible-click",function(){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext().expandAllTree()}),o.\u0275\u0275element(2,"i",22),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"button",23),o.\u0275\u0275listener("accessible-click",function(){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext().collapseAllTree()}),o.\u0275\u0275element(4,"i",24),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"button",25),o.\u0275\u0275listener("accessible-click",function(){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext().orderTabsByPosition()}),o.\u0275\u0275element(6,"i",26),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(7,"div",27),o.\u0275\u0275elementEnd()}if(2&pe){var z=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("pbiTooltip",z.expandAllName),o.\u0275\u0275attribute("aria-label",z.expandAllName),o.\u0275\u0275advance(2),o.\u0275\u0275property("pbiTooltip",z.collapseAllName),o.\u0275\u0275attribute("aria-label",z.collapseAllName),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!z.isEditable())("pbiTooltip",z.reorderItemsName),o.\u0275\u0275attribute("aria-label",z.orderTabsByPositionName)}}var Ft=function(B){return{newPaneColors:B}};function ke(pe,B){if(1&pe&&(o.\u0275\u0275elementStart(0,"div",28),o.\u0275\u0275element(1,"div",29),o.\u0275\u0275elementEnd()),2&pe){var U=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(1,Ft,U.isNewPaneColorsEnabled))}}function Ae(pe,B){if(1&pe&&o.\u0275\u0275element(0,"pbi-tree",31),2&pe){var U=B.ngIf,z=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("tree",U)("options",z.treeOptions)}}function Le(pe,B){if(1&pe&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Ae,1,2,"pbi-tree",30),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275elementContainerEnd()),2&pe){var U=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(2,1,U.tabCanvasItemContainerTree$))}}function Ve(pe,B){if(1&pe&&o.\u0275\u0275element(0,"i",37),2&pe){var U=o.\u0275\u0275nextContext().$implicit,z=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",z.treeControl.isExpanded(U)?"pbi-glyph-chevronupsmall":"pbi-glyph-chevrondownsmall")}}var tt=function(B,U,z){return{selected:B,newPaneColors:U,droppable:z}},lt=function(B){return{groupNode:B}};function de(pe,B){if(1&pe){var U=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"mat-tree-node",34),o.\u0275\u0275listener("keydown",function(De){var Qe=o.\u0275\u0275restoreView(U).$implicit;return o.\u0275\u0275nextContext(2).onKeyDown(De,null==Qe?null:Qe.canvasItem)})("click",function(De){var Qe=o.\u0275\u0275restoreView(U).$implicit;return o.\u0275\u0275nextContext(2).onItemClick(De,null==Qe?null:Qe.canvasItem)})("cdkDragStarted",function(De){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext(2).dragStarted(De)})("cdkDragReleased",function(){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext(2).dragEnd()}),o.\u0275\u0275template(1,Ve,1,1,"i",35),o.\u0275\u0275elementStart(2,"selection-pane-item",36),o.\u0275\u0275listener("isEditing",function(De){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext(2).updateIsEditing(De)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&pe){var z=B.$implicit,ae=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("cdkDragData",z)("ngClass",o.\u0275\u0275pureFunction3(6,tt,ae.isSelected[null==z||null==z.canvasItem?null:z.canvasItem.name],ae.isNewPaneColorsEnabled,ae.isDroppable(null==z?null:z.canvasItem))),o.\u0275\u0275attribute("tabindex",ae.getTabIndex(null==z||null==z.canvasItem?null:z.canvasItem.name)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",ae.treeControl.isExpandable(z)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(10,lt,ae.treeControl.isExpandable(z)))("item",null==z?null:z.canvasItem)}}function te(pe,B){if(1&pe){var U=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"mat-tree",32),o.\u0275\u0275listener("cdkDropListDropped",function(ye){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext().drop(ye)}),o.\u0275\u0275template(2,de,3,12,"mat-tree-node",33),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&pe){var z=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("dataSource",z.dataSource)("treeControl",z.treeControl)("cdkDropListDisabled",!z.isEditable()||z.isEditingLabel),o.\u0275\u0275attribute("focus-nav-mode",z.isListActive?"Group":void 0)}}function ee(pe,B){if(1&pe){var U=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"selection-pane-item",43),o.\u0275\u0275listener("skipFunction",function(Ke){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext(4).toggleTabOrderSection(Ke)})("isEditing",function(Ke){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext(4).updateIsEditing(Ke)}),o.\u0275\u0275elementEnd()}if(2&pe){var z=o.\u0275\u0275nextContext(2),ye=z.index;o.\u0275\u0275property("item",z.$implicit)("order",ye+1)("isSkipped",!1)}}function X(pe,B){if(1&pe){var U=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"selection-pane-item",44),o.\u0275\u0275listener("isEditing",function(ye){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext(4).updateIsEditing(ye)}),o.\u0275\u0275elementEnd()}if(2&pe){var z=o.\u0275\u0275nextContext(2).$implicit;o.\u0275\u0275property("item",z)}}var Be=function(B,U){return{selected:B,newPaneColors:U}};function xe(pe,B){if(1&pe){var U=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li",40),o.\u0275\u0275listener("click",function(Qe){o.\u0275\u0275restoreView(U);var Ge=o.\u0275\u0275nextContext().$implicit;return o.\u0275\u0275nextContext(2).onItemClick(Qe,Ge)})("keydown",function(Qe){o.\u0275\u0275restoreView(U);var Ge=o.\u0275\u0275nextContext().$implicit;return o.\u0275\u0275nextContext(2).onKeyDown(Qe,Ge)})("dropHandler",function(Qe){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext(3).dropOntoSibling(Qe.event,Qe.ui,Qe.dropAction)}),o.\u0275\u0275template(1,ee,1,3,"selection-pane-item",41),o.\u0275\u0275template(2,X,1,1,"selection-pane-item",42),o.\u0275\u0275elementEnd()}if(2&pe){var z=o.\u0275\u0275nextContext(),ae=z.$implicit,ye=z.index,De=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction2(9,Be,De.isSelected[null==ae?null:ae.name],De.isNewPaneColorsEnabled))("drag","visualContainer")("getDragContext",De.getDragContext(ae))("drop",De.dropConfig)("dropAction",De.dropActionHandler),o.\u0275\u0275attribute("tabindex",De.getTabIndex(null==ae?null:ae.name,ye))("data-name",null==ae?null:ae.name),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",De.isActiveSection(De.SectionType.tabOrderSection)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!De.isActiveSection(De.SectionType.tabOrderSection))}}function je(pe,B){if(1&pe&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,xe,3,12,"li",39),o.\u0275\u0275elementContainerEnd()),2&pe){var U=B.$implicit,z=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!z.isShowingTabOrderSection()||z.isPositiveTabOrder(U))}}var Ye=function(B){return{selected:B}};function Ie(pe,B){if(1&pe){var U=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li",46),o.\u0275\u0275listener("click",function(Qe){o.\u0275\u0275restoreView(U);var Ge=o.\u0275\u0275nextContext().$implicit;return o.\u0275\u0275nextContext(3).onItemClick(Qe,Ge)})("keydown",function(Qe){o.\u0275\u0275restoreView(U);var Ge=o.\u0275\u0275nextContext().$implicit;return o.\u0275\u0275nextContext(3).onKeyDown(Qe,Ge,!1)}),o.\u0275\u0275elementStart(1,"selection-pane-item",47),o.\u0275\u0275listener("skipFunction",function(Qe){return o.\u0275\u0275restoreView(U),o.\u0275\u0275nextContext(4).toggleTabOrderSection(Qe)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&pe){var z=o.\u0275\u0275nextContext(),ae=z.$implicit,ye=z.index,De=o.\u0275\u0275nextContext(3);o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(4,Ye,De.isSelected[null==ae?null:ae.name])),o.\u0275\u0275attribute("tabindex",De.getTabIndex(null==ae?null:ae.name,ye)),o.\u0275\u0275advance(1),o.\u0275\u0275property("item",ae)("isSkipped",!0)}}function rt(pe,B){if(1&pe&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Ie,2,6,"li",45),o.\u0275\u0275elementContainerEnd()),2&pe){var U=B.$implicit,z=o.\u0275\u0275nextContext(3);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!z.isPositiveTabOrder(U))}}function st(pe,B){if(1&pe&&(o.\u0275\u0275elementStart(0,"ul"),o.\u0275\u0275template(1,rt,2,1,"ng-container",38),o.\u0275\u0275elementEnd()),2&pe){var U=o.\u0275\u0275nextContext(2);o.\u0275\u0275attribute("focus-nav-mode",U.isListActive?"Group":void 0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",U.getSortedVisualContainers(!1))("ngForTrackBy",null==U.visualContainer?null:U.visualContainer.name)}}function ct(pe,B){if(1&pe&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"ul"),o.\u0275\u0275template(2,je,2,1,"ng-container",38),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,st,2,3,"ul",15),o.\u0275\u0275elementContainerEnd()),2&pe){var U=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275attribute("focus-nav-mode",U.isListActive?"Group":void 0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",U.getSortedVisualContainers())("ngForTrackBy",null==U.visualContainer?null:U.visualContainer.name),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",U.isShowingTabOrderSection())}}var ft=function(B){return{active:B}},Pt=function(B,U){return{sectionLength:B,currentSection:U}},Mt=function(pe){return pe[pe.listOrderSection=0]="listOrderSection",pe[pe.tabOrderSection=1]="tabOrderSection",pe}({}),St=function(pe){return pe[pe.grouping=0]="grouping",pe[pe.flatten=1]="flatten",pe}({}),zt={type:y.Q_.Button,id:R.Zw,icon:{type:0,glyph:R.qV},label:"",displayOnHover:!0},Yt={type:y.Q_.Button,id:R.Zw,icon:{type:0,glyph:R.cD},label:"",displayOnHover:!1},qt=function(){function pe(B,U,z,ae,ye,De,Ke,Qe,Ge,pt,mt,xt,Bt,Qt,en,Nt,$t,Zt,Ht,Kt,dn,hn,gn){var Gt=this;this.conceptualSchemaProxy=B,this.clickStrategy=U,this.dataSources=z,this.displayNameService=ae,this.dragDataService=ye,this.dragDropStrategy=De,this.editLabelStrategy=Ke,this.eventBridge=Qe,this.explorationCapabilities=Ge,this.hoverStrategy=pt,this.featureSwitchService=mt,this.formFactor=xt,this.inlineItemStrategy=Bt,this.layoutAuthoring=Qt,this.lazyScoped=en,this.localizationService=Nt,this.promiseFactory=$t,this.screenReaderService=Zt,this.selection=Ht,this.telemetryService=Kt,this.viewModeState=dn,this.visualAuthoring=hn,this.visualPlugin=gn,this.SectionType=Mt,this.OrderStrategy=St,this.getDragContext=function(L){return function(){return Gt.getDragContextInternal(L)}},this.isEditingLabel=!1,this.isSorted={tabOrder:!1,z:!1},this.expandedNodeSet={},this.isDragging=!1,this.tabCanvasItemContainerTree$=new i.X({nodes:void 0}),this.treeOptions={click:this.clickStrategy,dragDrop:this.dragDropStrategy,editLabel:this.editLabelStrategy,hover:this.hoverStrategy,inlineItem:this.inlineItemStrategy},this.atlnAndNotPhoneLayout=!1,this.tabNodeSet={},this.bringForwardName=this.localizationService.get("ExplorationCanvasItemsPane_BringForward"),this.sendBackwardName=this.localizationService.get("ExplorationCanvasItemsPane_SendBackward"),this.orderTabsByPositionName=this.localizationService.get("Tab_Order_Reorder_Items"),this.expandAllName=this.localizationService.get("FieldListMenuItem_ExpandAll"),this.collapseAllName=this.localizationService.get("FieldListMenuItem_CollapseAll"),this.moveUpName=this.localizationService.get("FieldListMenuItem_MoveUp"),this.moveDownName=this.localizationService.get("FieldListMenuItem_MoveDown"),this.reorderItemsName=this.localizationService.get("Tab_Order_Reorder_Items_Hint"),this.layerOrderName=this.localizationService.get("ExplorationCanvasItemsPane_LayerOrder_Tooltip"),this.tabOrderName=this.localizationService.get("ExplorationCanvasItemsPane_TabOrder_Tooltip");var an=function(H){return H.level},ln=function(H){return H.expandable};this.treeFlattener=new n.JZ(function(H,Y){return{canvasItem:H,expandable:dt.isVisualContainerGroup(H),level:Y}},an,ln,function(H){if(dt.isVisualContainerGroup(H))return(0,M.of)(H.children)}),this.treeControl=new f.C2(an,ln),this.dataSource=new n.kc(this.treeControl,this.treeFlattener),this.dropActionHandler=function(L){return Gt.getDropAction(L)},this.dropConfig={accept:"visualContainer"},this.isSelected={},this.zIndexPromise=this.lazyScoped.get("zIndexService"),this.tabOrderPromise=this.lazyScoped.get("tabOrderService"),this.isListActive=!1,this.scrollbarsConfig={ignoreOverlay:!1,ignoreMobile:!1},this.activeSection=Mt.listOrderSection,this.isNewPaneColorsEnabled=this.explorationCapabilities.getCapabilities().showFluentDesign,this.featureSwitches$=this.featureSwitchService.featureSwitches$,this.listChangeObserver=new MutationObserver(function(L,H){for(var Y=0,Se=L;Y<Se.length;Y++)if(_.indexOf(Se[Y].addedNodes,Gt.currentFocusElement)>-1){Gt.currentFocusElement.focus(),Gt.currentFocusElement=null;break}H.disconnect()})}return pe.prototype.bringForwardTextTooltip=function(){return this.isShowingTabOrderSection()?this.moveUpName:this.bringForwardName},pe.prototype.sendBackwardTextTooltip=function(){return this.isShowingTabOrderSection()?this.moveDownName:this.sendBackwardName},pe.prototype.refreshTree=function(B){var U;return(0,e.mG)(this,void 0,void 0,function(){var z,ae,ye,De,Ke=this;return(0,e.Jh)(this,function(Qe){switch(Qe.label){case 0:return this.accessibilityTopLevelNavFS?(z=this.dataSources.get(),[4,this.conceptualSchemaProxy.get(z)]):[2];case 1:return ae=Qe.sent(),ye=this.sortItemsByProperty(B,function(Ge){return Ke.isShowingTabOrderSection()?Ge.position.tabOrder:Ge.position.z}),De={nodes:_.map(ye.sortedItems,function(Ge,pt){return Ke.refreshTreeNode(Ge,ae,""+(pt+1))})},this.inlineItemStrategy.setTree(De),this.clickStrategy.setTree(De),this.dragDropStrategy.setTree(De),null===(U=this.tabCanvasItemContainerTree)||void 0===U||U.renderNodeChangesImmediate(),this.tabCanvasItemContainerTree$.next(De),[2,De]}})})},pe.prototype.refreshTreeNode=function(B,U,z,ae,ye){var De=this;void 0===ye&&(ye=!0);var Ke=this.getCanvasItemDisplayName(B,U),Qe=B.position.tabOrder<0,Ge=this.tabNodeSet[B.name]=this.tabNodeSet[B.name]||{displayName:void 0};return Ge.displayName=Qe?Ke:z+" "+Ke,Ge.ariaLabel=Ke,Ge.data={index:z,canvasItem:B},Ge.id=B.name,Ge.selected=this.isSelected[B.name],Ge.editable=this.isEditable(),this.setNodeInlineItems(Ge,Qe,Ke),Ge.alwaysShowInlineItems=Qe,Ge.grayedOut=Qe,Ge.parent=ae,Ge.children=[],dt.isVisualContainerGroup(B)&&ye&&_.forEach(B.children,function(pt,mt){Ge.children.push(De.refreshTreeNode(pt,U,z+"."+(mt+1),Ge))}),Ge},pe.prototype.refreshTreeNodesByName=function(B){var U;return(0,e.mG)(this,void 0,void 0,function(){var z,ae,ye,De,Ke,Qe;return(0,e.Jh)(this,function(Ge){switch(Ge.label){case 0:return this.accessibilityTopLevelNavFS?(z=this.dataSources.get(),[4,this.conceptualSchemaProxy.get(z)]):[2];case 1:for(ae=Ge.sent(),ye=0,De=B;ye<De.length;ye++)Qe=this.tabNodeSet[Ke=De[ye]]=this.tabNodeSet[Ke]||{displayName:void 0},this.refreshTreeNode(Qe.data.canvasItem,ae,Qe.data.index,Qe.parent,!1);return null===(U=this.tabCanvasItemContainerTree)||void 0===U||U.renderNodeChanges(),[2]}})})},pe.prototype.getCanvasItemDisplayName=function(B,U){var z;if(dt.isVisualContainer(B)){var ae=nt.getSingleVisualConfig(B.contract),ye=this.visualPlugin.capabilities(nt.getVisualType(B.contract));return null===(z=this.displayNameService.getVisualTitle(ae,U,ye,void 0,void 0,!0))||void 0===z?void 0:z.text}return B.contract.displayName},pe.prototype.setNodeInlineItems=function(B,U,z){_.isEmpty(B.inlineItems)&&(B.inlineItems=[{type:void 0,id:void 0,icon:void 0,label:void 0}]);var ae=B.inlineItems[0];U?(Object.assign(ae,Yt),ae.label=this.localizationService.format("ExplorationCanvasItemsPane_Hidden",z),B.draggable=!1):(Object.assign(ae,zt),ae.label=this.localizationService.format("ExplorationCanvasItemsPane_Shown_Hide",z),B.draggable=!0)},pe.prototype.getExpandedNodeSet=function(){return this.expandedNodeSet},pe.prototype.getFlattenedVisibleNodesInDOM=function(B){for(var U=[],z=0,ae=B;z<ae.length;z++){var ye=ae[z];U.push(ye),_.has(this.expandedNodeSet,ye.name)&&dt.isVisualContainerGroup(ye)&&(U=U.concat(this.getFlattenedVisibleNodesInDOM(ye.children)))}return U},pe.prototype.rememberExpandedTreeNodes=function(B){var U={};return B.dataNodes&&B.dataNodes.forEach(function(z){B.isExpandable(z)&&B.isExpanded(z)&&(U[z.canvasItem.name]=!0)}),U},pe.prototype.isDroppable=function(B){return!(this.currentDraggingNode&&!dt.isVisualContainer(this.currentDraggingNode)&&this.currentDraggingNode!==B&&_e.find(B.name,this.currentDraggingNode.children))},pe.prototype.dragStarted=function(B){this.isDragging=!0;var U=B.source.data.canvasItem;this.currentDraggingNode=U,Oe.isCanvasItemSelected(U.contract,this.selection)||Oe.selectCanvasItem(U.contract,this.selection)},pe.prototype.dragEnd=function(){this.currentDraggingNode=void 0},pe.prototype.isTheLastChild=function(B){if(!B)return!1;var U=this.sortItemsByProperty(_e.getSiblingList(B,this.dataSource.data),function(z){return z.position.z}).sortedItems;return U&&_.last(U)===B},pe.prototype.isDroppedAtEndOfList=function(B,U){var z=U[B-1],ae=_.find(this.treeControl.dataNodes,function(ye){return ye.canvasItem===z});return this.isTheLastChild(z)&&z&&(dt.isVisualContainer(z)||!this.treeControl.isExpanded(ae))},pe.prototype.findRelativeIndex=function(B,U,z,ae){var ye=B,De=U.parentGroup;if(De)ye=B-(_.findIndex(ae,function(xt){return xt.name===De.name})+1);else for(var Ge=0,pt=ae;Ge<pt.length;Ge++){var mt=pt[Ge];if(U===mt)break;mt.parentGroup&&z!==mt&&ye--}return ye},pe.prototype.dropAtZIndexOperation=function(B,U,z,ae){return void 0===ae&&(ae=!0),(0,e.mG)(this,void 0,void 0,function(){var ye;return(0,e.Jh)(this,function(De){switch(De.label){case 0:return[4,this.zIndexPromise];case 1:return ye=De.sent(),ae?ye.moveAfter(B,U,[z.contract]):ye.moveBefore(B,U,[z.contract]),[2]}})})},pe.prototype.dropAtZIndexAndMoveGroup=function(B,U,z,ae,ye,De){return(0,e.mG)(this,void 0,void 0,function(){var Ke,Qe,Ge,pt,mt;return(0,e.Jh)(this,function(xt){switch(xt.label){case 0:return Ke=ae.parentGroup===ye.parentGroup,Qe=this.findRelativeIndex(B,ae,ye,z),Ge=_e.getSiblingList(ae,this.dataSource.data),pt=Ke?Ge.length-1:Ge.length,mt=0!==Qe&&Qe>=pt,void 0===De&&(De=!U&&!mt),[4,this.dropAtZIndexOperation(_.map(Ge,function(Bt){return Bt.contract}),ae,ye,De)];case 1:return xt.sent(),Ke||this.layoutAuthoring.moveCanvasItemInTree(ye.contract,ae.contract,mt),[2]}})})},pe.prototype.drop=function(B){return(0,e.mG)(this,void 0,void 0,function(){var U,z,ye,De,Ke,Qe,Ge,pt;return(0,e.Jh)(this,function(mt){switch(mt.label){case 0:return this.expandedNodeSet=this.rememberExpandedTreeNodes(this.treeControl),U=this.getFlattenedVisibleNodesInDOM(this.dataSource.data),(De=U[z=B.currentIndex]).name===(ye=B.item.data.canvasItem).name||dt.isVisualContainerGroup(ye)&&_e.find(De.name,ye.children)?[2]:(Ke=_.findIndex(U,function(xt){return xt===ye}),Qe=z>Ke,pt=_.find(this.treeControl.dataNodes,function(xt){return xt.canvasItem===De}),Qe&&dt.isVisualContainerGroup(De)&&this.treeControl.isExpanded(pt)?(De=U[z+1],Ge=!0):!Qe&&this.isDroppedAtEndOfList(z,U)&&(De=U[z-1],Ge=!1),[4,this.dropAtZIndexAndMoveGroup(z,Qe,U,De,ye,Ge)]);case 1:return mt.sent(),this.rebuildTreeForData(this.groups),this.isDragging=!1,[2]}})})},pe.prototype.areCanvasItemsEqual=function(B,U){if(B.length!==U.length)return!1;for(var z=0;z<B.length;z++){var ae=B[z],ye=U[z];if(dt.isVisualContainer(ae)!==dt.isVisualContainer(ye)||ae.name!==ye.name)return!1}return!0},pe.prototype.sortItemsByProperty=function(B,U,z){var ae=_.orderBy(B,U,"desc"),ye={sortedItems:ae};z&&(ye.isDirty=!this.areCanvasItemsEqual(z,ae));for(var De=0;De<ae.length;De++){var Ke=ae[De],Qe=z&&z[De];if(dt.isVisualContainerGroup(Ke)){var Ge=Qe&&dt.isVisualContainerGroup(Qe)&&Qe.children||[],pt=this.sortItemsByProperty(Ke.children,U,z?Ge:void 0);z&&(ye.isDirty=ye.isDirty||pt.isDirty),Ke.children=pt.sortedItems}}return ye},pe.prototype.getSortedVisualContainers=function(B){void 0===B&&(B=!0);var U=this.isShowingTabOrderSection(),z=this.activePositionListOrder;if(!this.isSorted[z]){if(U){var ye=this.sortItemsByProperty(this.visualContainers,function(Ge){return Ge.position[z]}).sortedItems,De=_.partition(ye,function(Ge){return void 0===Ge.position.tabOrder||Ge.position.tabOrder>=0}),Qe=De[1];this.sortedVisualContainersByPositiveTabOrder=De[0],this.sortedVisualContainersByNegativeTabOrder=Qe}else this.sortedVisualContainersByZIndex=this.sortItemsByProperty(this.visualContainers,function(Ge){return Ge.position[z]}).sortedItems;this.isSorted[z]=!0}return U?B?this.sortedVisualContainersByPositiveTabOrder:this.sortedVisualContainersByNegativeTabOrder:this.sortedVisualContainersByZIndex},pe.prototype.rebuildTreeForData=function(B,U){void 0===U&&(U=!1);var z=this.sortItemsByProperty(B,function(ae){return ae.position.z},U?this.dataSource.data:void 0);(!U||z.isDirty)&&(this.expandedNodeSet=this.rememberExpandedTreeNodes(this.treeControl),this.dataSource.data=z.sortedItems,this.forgetMissingExpandedNodes(this.treeControl,this.expandedNodeSet),this.expandNodesByName(this.treeControl.dataNodes))},pe.prototype.forgetMissingExpandedNodes=function(B,U){B.dataNodes&&_.keys(U).forEach(function(z){B.dataNodes.find(function(ae){return ae.canvasItem.name===z})||_.unset(U,z)})},pe.prototype.expandNodesByName=function(B){var U=this;!B||0===B.length||B.forEach(function(z){_.has(U.expandedNodeSet,z.canvasItem.name)&&U.treeControl.expand(z)})},pe.prototype.ngOnInit=function(){var B=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(et.selectionChanged,function(){B.setNodesSelectedState(B.tabNodeSet,B.isSelected,!1),B.updateSelection(),B.setNodesSelectedState(B.tabNodeSet,B.isSelected,!0)}).subscribe(et.visualTypeChanged,function(){B.updateSelection(),B.refreshTreeNodesByName(Object.keys(B.isSelected))}).subscribe(et.arrangeVisualsOrder,function(U,z){return B.isSorted.z=!1}).subscribe(et.visualContainerChanged,function(){B.updateZindexListOrder(),B.refreshTree(B.groups)}).subscribe(et.visualContainerGroupChanged,function(){B.updateZindexListOrder(),B.updateTabOrderTree()}).subscribe(et.visualContainerDataRendered,function(U,z){B.refreshTreeNodesByName([z.name])}),this.featureSwitchSubscription=this.featureSwitches$.pipe((0,I.n)(function(U){return!U}),(0,d.q)(1)).subscribe(function(U){return(0,e.mG)(B,void 0,void 0,function(){var z=this;return(0,e.Jh)(this,function(ae){return this.accessibilityTopLevelNavFS=U.accessibilityTopLevelNav,this.isNewPaneColorsEnabled=this.isNewPaneColorsEnabled||U.paneColorRefresh,this.accessibilityTopLevelNavFS&&(this.refreshTree(this.groups),this.atlnAndNotPhoneLayout=!this.isPhoneLayout(),this.treeRebuildSubscription=(0,E.T)(this.viewModeState.getMode$(),this.inlineItemStrategy.getInlineItemChange$()).subscribe(function(){return z.refreshTree(z.groups)})),[2]})})})},pe.prototype.updateZindexListOrder=function(){this.activeOrderStrategy===St.grouping&&(this.ensureNormalization(!0,!1),this.rebuildTreeForData(this.groups,!0))},pe.prototype.updateTabOrderTree=function(){this.atlnAndNotPhoneLayout&&(this.ensureNormalization(!1,!0),this.refreshTree(this.groups))},pe.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.featureSwitchSubscription.unsubscribe(),this.accessibilityTopLevelNavFS&&this.treeRebuildSubscription&&this.treeRebuildSubscription.unsubscribe()},pe.prototype.setActiveSection=function(B){this.activeSection=B,B===Mt.listOrderSection?this.isSorted.z=!1:this.isSorted.tabOrder=!1,this.setOrderStrategy(),this.isShowingTabOrderSection()?this.refreshTree(this.groups):this.rebuildTreeForData(this.groups)},pe.prototype.setOrderStrategy=function(){this.activeOrderStrategy=!this.isPhoneLayout()&&(this.activeSection===Mt.listOrderSection||this.activeSection===Mt.tabOrderSection&&this.accessibilityTopLevelNavFS)?St.grouping:St.flatten,this.activePositionListOrder=this.isShowingTabOrderSection()?"tabOrder":"z"},pe.prototype.isActiveSection=function(B){return this.activeSection===B},pe.prototype.isActiveOrderStrategy=function(B){return this.activeOrderStrategy===B},pe.prototype.isShowingTabOrderSection=function(){return this.isActiveSection(this.SectionType.tabOrderSection)},pe.prototype.isContentPresent=function(){return this.activeOrderStrategy===St.flatten?this.isNoVisualContainersList():this.isNoGroupsList()},pe.prototype.isPhoneLayout=function(){return 1===this.formFactor.getCurrentLayout()},pe.prototype.isZOrder=function(){return"z"===this.activePositionListOrder},pe.prototype.isNoVisualContainersList=function(){return!this.visualContainers||0===this.visualContainers.length},pe.prototype.isNoGroupsList=function(){return!this.groups||0===this.groups.length},pe.prototype.updateIsEditing=function(B){this.isEditingLabel=B},pe.prototype.ngOnChanges=function(B){this.setOrderStrategy(),B.groups&&B.groups.currentValue&&(this.listContracts=_.map(this.groups,function(U){return U.contract}),this.ensureNormalization(),this.updateSelection(),this.rebuildTreeForData(B.groups.currentValue),this.accessibilityTopLevelNavFS&&this.refreshTree(B.groups.currentValue),this.isSorted.tabOrder=!1,this.isSorted.z=!1),B.visualContainers&&B.visualContainers.currentValue&&(this.isSorted.tabOrder=!1,this.ensureNormalization(!1),this.updateSelection())},pe.prototype.ensureNormalization=function(B,U){return void 0===B&&(B=!0),void 0===U&&(U=!0),(0,e.mG)(this,void 0,void 0,function(){var z,ae;return(0,e.Jh)(this,function(ye){switch(ye.label){case 0:return B?[4,this.zIndexPromise]:[3,2];case 1:z=ye.sent(),this.ensureNormalizedZIndex(z),ye.label=2;case 2:return U?[4,this.tabOrderPromise]:[3,4];case 3:ae=ye.sent(),this.ensureNormalizedTabOrder(ae),ye.label=4;case 4:return[2]}})})},pe.prototype.isPositiveTabOrder=function(B){return B&&(void 0===B.position.tabOrder||B.position.tabOrder>=0)},pe.prototype.onItemClick=function(B,U){var ae=this.selection;if(B&&B.shiftKey){var Ke=[],Qe=void 0,Ge=void 0;if(this.previousFocusedItem)for(var pt=!1,Bt=0,Qt=this.activeOrderStrategy===St.flatten?this.isShowingTabOrderSection()?(0,e.ev)((0,e.ev)([],this.sortedVisualContainersByPositiveTabOrder||[]),this.sortedVisualContainersByNegativeTabOrder||[]):(0,e.ev)([],this.sortedVisualContainersByZIndex||[]):this.previousFocusedItem.parentGroup?this.sortItemsByProperty(this.previousFocusedItem.parentGroup.children,function(Ht){return Ht.position.z}).sortedItems:this.dataSource.data;Bt<Qt.length;Bt++){var Nt=Qt[Bt].contract,$t=Nt.name===this.previousFocusedItem.name,Zt=Nt.name===U.name;if(Qe=Qe||$t,Ge=Ge||Zt,$t||Zt){if(Ke.push(Nt),pt)break;pt=!0}else pt&&Ke.push(Nt)}!_.isEmpty(Ke)&&Qe&&Ge?Oe.selectCanvasItems(Ke,ae):this.flipSelection(U,!1)}else this.flipSelection(U,$e.isCtrlOrMeta(B)),this.previousFocusedItem=U},pe.prototype.flipSelection=function(B,U){var z=this.selection;this.isCanvasItemSelected(B)?U?Oe.unselectCanvasItem(B.contract,z):z.clearSelection():Oe.selectCanvasItem(B.contract,this.selection,U?3:0)},pe.prototype.bringForward=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(U){switch(U.label){case 0:switch(this.activeOrderStrategy){case St.grouping:return[3,1];case St.flatten:return[3,6]}return[3,8];case 1:return this.atlnAndNotPhoneLayout&&this.isShowingTabOrderSection()?(this.notifyTabOrderChanges(),[4,this.sendTabChangeGroupingOrder(0)]):[3,3];case 2:return U.sent(),[3,5];case 3:return this.bringForwardGroupingOrder(),[4,this.notifyUserLayerChanged(!0)];case 4:U.sent(),U.label=5;case 5:return[3,9];case 6:return this.bringForwardFlattenOrder(),[4,this.notifyUserLayerChanged(!0)];case 7:return U.sent(),[3,9];case 8:return[3,9];case 9:return[2]}})})},pe.prototype.notifyUserLayerChanged=function(B){return(0,e.mG)(this,void 0,void 0,function(){var U,z,ae,ye=this;return(0,e.Jh)(this,function(De){switch(De.label){case 0:return[4,Promise.all(this.dataSource.data.map(function(Ke){if(ye.isCanvasItemSelected(Ke))return dt.isVisualContainer(Ke)?nt.getVisualContainerDisplayName(Ke.contract,{dataSources:ye.dataSources,conceptualSchemaProxy:ye.conceptualSchemaProxy,visualPlugin:ye.visualPlugin,displayNameService:ye.displayNameService}):Promise.resolve(Ke.contract.displayName)}))];case 1:return U=De.sent(),(z=U.filter(function(Ke){return Ke}).join(", "))&&(ae=this.localizationService.format(B?"ExplorationCanvasItemsPane_SentForward":"ExplorationCanvasItemsPane_SentBackward",z),this.screenReaderService.alertPolite(ae)),[2]}})})},pe.prototype.bringForwardFlattenOrder=function(){return(0,e.mG)(this,void 0,void 0,function(){var B,U,z;return(0,e.Jh)(this,function(ae){switch(ae.label){case 0:return[4,(B=this.isZOrder())?this.zIndexPromise:this.tabOrderPromise];case 1:return U=ae.sent(),this.ensureNormalization(B,!B),z=B?this.listContracts:this.filterVisualContainersByTabOrderSign(!0),U.bringForward(z,Oe.getSelectedVisualContainers(this.selection),!0),this.isSorted[this.activePositionListOrder]=!1,[2]}})})},pe.prototype.bringForwardGroupingOrder=function(){return(0,e.mG)(this,void 0,void 0,function(){var B;return(0,e.Jh)(this,function(U){switch(U.label){case 0:return[4,this.zIndexPromise];case 1:return B=U.sent(),this.ensureNormalizedZIndex(B),B.sendZIndexCommandsByLevel(this.selection,this.listContracts,3),this.rebuildTreeForData(this.dataSource.data),[2]}})})},pe.prototype.sendBackward=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(U){switch(U.label){case 0:switch(this.activeOrderStrategy){case St.grouping:return[3,1];case St.flatten:return[3,6]}return[3,8];case 1:return this.atlnAndNotPhoneLayout&&this.isShowingTabOrderSection()?(this.notifyTabOrderChanges(),[4,this.sendTabChangeGroupingOrder(1)]):[3,3];case 2:return U.sent(),[3,5];case 3:return this.sendBackwardGroupingOrder(),[4,this.notifyUserLayerChanged(!1)];case 4:U.sent(),U.label=5;case 5:return[3,9];case 6:return this.sendBackwardFlattenOrder(),[4,this.notifyUserLayerChanged(!1)];case 7:return U.sent(),[3,9];case 8:return[3,9];case 9:return[2]}})})},pe.findNode=function(B,U){for(var z,ae=0,ye=B;ae<ye.length;ae++){var De=ye[ae];if(De.id===U){z=De;break}z=pe.findNode(De.children,U)}return z},pe.prototype.notifyTabOrderChanges=function(){var B=this.eventBridge.createChannelSubscriptionManager(),U=Oe.getSelectedVisualContainers(this.selection),z=[];U.length>0&&z.push(this.handleTabOrderChangesForContainer(B,et.visualContainerChanged,U));var ae=Oe.getSelectedVisualContainerGroups(this.selection);ae.length>0&&z.push(this.handleTabOrderChangesForContainer(B,et.visualContainerGroupChanged,ae)),Promise.all(z).then(function(){return B.unsubscribeAll()})},pe.prototype.handleTabOrderChangesForContainer=function(B,U,z){var ae=this;return new Promise(function(ye){B.subscribe(U,function(De,Ke){return(0,e.mG)(ae,void 0,void 0,function(){var Qe,Ge=this;return(0,e.Jh)(this,function(pt){return Qe=this.tabCanvasItemContainerTree$.pipe((0,P.T)(1)).subscribe(function(mt){z.forEach(function(xt){if(Ke.affectContainer(xt)){var Bt=pe.findNode(mt.nodes,xt.name);Bt&&Ge.screenReaderService.alertPolite(Bt.displayName)}}),Qe.unsubscribe(),ye()}),[2]})})})})},pe.prototype.sendBackwardFlattenOrder=function(){return(0,e.mG)(this,void 0,void 0,function(){var B,U,z;return(0,e.Jh)(this,function(ae){switch(ae.label){case 0:return[4,(B=this.isZOrder())?this.zIndexPromise:this.tabOrderPromise];case 1:return U=ae.sent(),this.ensureNormalization(B,!B),z=B?this.listContracts:this.filterVisualContainersByTabOrderSign(!0),U.sendBackward(z,Oe.getSelectedVisualContainers(this.selection),!0),this.isSorted[this.activePositionListOrder]=!1,[2]}})})},pe.prototype.sendBackwardGroupingOrder=function(){return(0,e.mG)(this,void 0,void 0,function(){var B;return(0,e.Jh)(this,function(U){switch(U.label){case 0:return[4,this.zIndexPromise];case 1:return B=U.sent(),this.ensureNormalizedZIndex(B),B.sendZIndexCommandsByLevel(this.selection,this.listContracts,4),this.rebuildTreeForData(this.dataSource.data),[2]}})})},pe.prototype.sendTabChangeGroupingOrder=function(B){return(0,e.mG)(this,void 0,void 0,function(){var U;return(0,e.Jh)(this,function(z){switch(z.label){case 0:return[4,this.tabOrderPromise];case 1:return U=z.sent(),this.ensureNormalizedTabOrder(U),U.sendTabOrderCommandsByLevel(this.selection,this.listContracts,B),[2]}})})},pe.prototype.toggleTabOrderSection=function(B){return(0,e.mG)(this,void 0,void 0,function(){var U;return(0,e.Jh)(this,function(z){switch(z.label){case 0:return[4,this.tabOrderPromise];case 1:return U=z.sent(),this.ensureNormalizedTabOrder(U),U.changeSection(this.filterVisualContainersByTabOrderSign(B.isSkippedSection),[B.visualContainer.contract],B.isSkippedSection),this.selection.clearSelection(),Oe.selectCanvasItem(B.visualContainer.contract,this.selection),this.isSorted.tabOrder=!1,[2]}})})},pe.prototype.setVisibility=function(B){var U=this.getSelectedItems(),z=_.isEmpty(U);this.setCanvasItemsVisibility(z?this.listContracts:U,B,z)},pe.prototype.setCanvasItemsVisibility=function(B,U,z){for(var ae=!U,ye=[],De=[],Ke=0,Qe=B;Ke<Qe.length;Ke++){var Ge=Qe[Ke];at.isVisualContainer(Ge)?Xe.isHidden(Ge.config.singleVisual)!==ae&&ye.push(Ge):(at.VisualContainerGroup.isHidden(Ge)!==ae&&De.push(Ge),z&&this.setCanvasItemsVisibility(Ge.children,U,z))}_.isEmpty(ye)||this.visualAuthoring.setVisibility(ae,ye),_.isEmpty(De)||this.visualAuthoring.setVisualContainerGroupVisibility(ae,De)},pe.prototype.isEditable=function(){return 1===this.viewModeState.getMode()},pe.prototype.getDragContextInternal=function(B){var z;return Oe.isCanvasItemSelected(B.contract,this.selection)?z=this.getSelectedViewModels():(Oe.selectCanvasItem(B.contract,this.selection),z=[B]),{visualContainers:z}},pe.prototype.getDropAction=function(B){var U=this.promiseFactory.defer(),z=this.dragDataService.getDragContext();return z&&!_.isEmpty(z.visualContainers)&&this.isEditable()?be.isAbove(B)?U.resolve(2):U.resolve(3):U.resolve(0),U.promise},pe.prototype.dropOntoSibling=function(B,U,z){var ae=this.dragDataService.getDragContext();if(ae&&!_.isEmpty(ae.visualContainers)&&this.isEditable()){var ye=B.target.dataset.name,De=_.find(this.visualContainers,function(Qe){return Qe.name===ye});switch(this.activeOrderStrategy){case St.grouping:this.dropOntoSiblingHelper(this.listContracts,z,ae,De);break;case St.flatten:var Ke=this.isZOrder()?this.listContracts:this.filterVisualContainersByTabOrderSign(!0);this.dropOntoSiblingHelper(Ke,z,ae,De)}}},pe.prototype.dropOntoSiblingHelper=function(B,U,z,ae){return(0,e.mG)(this,void 0,void 0,function(){var ye,De;return(0,e.Jh)(this,function(Ke){switch(Ke.label){case 0:return[4,(ye=this.isZOrder())?this.zIndexPromise:this.tabOrderPromise];case 1:return De=Ke.sent(),this.ensureNormalization(ye,!ye),2===U?De.moveAfter(B,ae,_.map(z.visualContainers,function(Qe){return Qe.contract}),!0):3===U&&De.moveBefore(B,ae,_.map(z.visualContainers,function(Qe){return Qe.contract}),!0),this.isSorted[this.activePositionListOrder]=!1,[2]}})})},pe.prototype.getSelectedViewModels=function(){var B=Oe.getSelectedVisualContainers(this.selection);return _.filter(this.visualContainers,function(z){return _.some(B,function(ae){return z.contract===ae})})},pe.prototype.onKeyDown=function(B,U,z){return void 0===z&&(z=!0),(0,e.mG)(this,void 0,void 0,function(){var ae;return(0,e.Jh)(this,function(ye){switch(ye.label){case 0:return 117===B.keyCode?(this.isListActive=!0,B.stopPropagation(),B.preventDefault()):9===B.keyCode&&this.isListActive?this.isListActive=!1:(13===B.keyCode||32===B.keyCode)&&z&&this.onItemClick(B,U),this.isEditable()?70===B.keyCode&&$e.isCtrlOrMeta(B)&&B.shiftKey&&z?(this.trackFocusElement(B.target),[4,this.bringForward()]):[3,2]:[3,5];case 1:return ye.sent(),[3,5];case 2:return 66===B.keyCode&&$e.isCtrlOrMeta(B)&&B.shiftKey&&z?(this.trackFocusElement(B.target),[4,this.sendBackward()]):[3,4];case 3:return ye.sent(),[3,5];case 4:if(this.isListActive&&37===B.keyCode&&z)ae=_.find(this.treeControl.dataNodes,function(De){return U.name===De.canvasItem.name}),this.treeControl.isExpandable(ae)&&this.treeControl.isExpanded(ae)&&(this.treeControl.collapse(ae),B.stopPropagation());else if(this.isListActive&&39===B.keyCode&&z)ae=_.find(this.treeControl.dataNodes,function(De){return U.name===De.canvasItem.name}),this.treeControl.isExpandable(ae)&&!this.treeControl.isExpanded(ae)&&(this.treeControl.expand(ae),B.stopPropagation());else if(57===B.keyCode&&B.shiftKey&&B.altKey&&z)this.treeControl.expandAll();else if(49===B.keyCode&&B.shiftKey&&B.altKey&&z)this.treeControl.collapseAll();else if(83===B.keyCode&&$e.isCtrlOrMeta(B)&&B.shiftKey)switch(this.activeSection){case Mt.listOrderSection:this.toggleSelectedVisibility();break;case Mt.tabOrderSection:this.toggleTabOrderSection({isSkippedSection:z,visualContainer:U})}ye.label=5;case 5:return[2]}})})},pe.prototype.trackFocusElement=function(B){this.currentFocusElement=B,this.listChangeObserver.observe(B.parentElement,{childList:!0,subtree:!1,attributes:!1})},pe.prototype.getTabIndex=function(B,U){return this.isListActive?0:_.isEmpty(this.isSelected)?(void 0===U&&(U=this.treeControl.dataNodes.findIndex(function(z){return z.canvasItem.name===B})),0===U?0:-1):B===_.last(Object.keys(this.isSelected))?0:-1},pe.prototype.toggleSelectedVisibility=function(){var B=this.getSelectedItems(),U=_.partition(B,function(mt){return at.isVisualContainerGroup(mt)}),z=U[0],ae=U[1];if(!_.isEmpty(z)){var ye=_.partition(z,function(mt){return at.VisualContainerGroup.isHidden(mt)}),De=ye[0],Ke=ye[1];_.isEmpty(De)||this.visualAuthoring.setVisualContainerGroupVisibility(!1,De),_.isEmpty(Ke)||this.visualAuthoring.setVisualContainerGroupVisibility(!0,Ke)}if(!_.isEmpty(ae)){var Qe=_.partition(ae,function(mt){return Xe.isHidden(mt.config.singleVisual)}),Ge=Qe[0],pt=Qe[1];_.isEmpty(Ge)||this.visualAuthoring.setVisibility(!1,Ge),_.isEmpty(pt)||this.visualAuthoring.setVisibility(!0,pt)}},pe.prototype.isCanvasItemSelected=function(B){return Oe.isCanvasItemSelected(B.contract,this.selection)},pe.prototype.getSelectedItems=function(){return Oe.getSelectedCanvasItems(this.selection)},pe.prototype.updateSelection=function(){_.isEmpty(this.visualContainers)&&(this.isSelected={});var B=this.getSelectedItems();_.isEmpty(B)&&(this.isSelected={}),this.isSelected=_.zipObject(_.map(B,function(U){return U.name}),_.map(B,_.constant(!0)))},pe.prototype.ensureNormalizedZIndex=function(B){var U=this.listContracts;B.shouldNormalize(U)&&(B.normalize(U),this.isSorted.z=!1)},pe.prototype.filterVisualContainersByTabOrderSign=function(B){return this.visualContainers?Fe.filterContractsByTabOrderSign(this.visualContainers.map(function(U){return U.contract}),B):[]},pe.prototype.ensureNormalizedTabOrder=function(B){if(this.atlnAndNotPhoneLayout)B.shouldNormalize(this.listContracts,!0)&&(B.normalizeHierarchy(this.listContracts),this.isSorted.tabOrder=!1);else{var U=this.filterVisualContainersByTabOrderSign(!0);B.shouldNormalize(U,!0)&&(B.normalize(U,!0),this.isSorted.tabOrder=!1);var z=this.filterVisualContainersByTabOrderSign(!1);B.shouldNormalize(z,!1)&&(B.normalize(z,!1),this.isSorted.tabOrder=!1)}},pe.prototype.orderTabsByPosition=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(U){switch(U.label){case 0:return this.telemetryService.logEvent(ie.pz),[4,this.tabOrderPromise];case 1:return U.sent().orderByPosition(this.listContracts),this.isSorted.tabOrder=!1,this.refreshTree(this.groups),[2]}})})},pe.prototype.expandAllTree=function(){this.tabCanvasItemContainerTree&&(this.tabCanvasItemContainerTree.expandAll(),this.tabCanvasItemContainerTree.renderNodeChanges())},pe.prototype.collapseAllTree=function(){this.tabCanvasItemContainerTree&&(this.tabCanvasItemContainerTree.collapseAll(),this.tabCanvasItemContainerTree.renderNodeChanges())},pe.prototype.setNodesSelectedState=function(B,U,z){if(this.atlnAndNotPhoneLayout){for(var ae in U)B[ae]&&(B[ae].selected=z);this.tabCanvasItemContainerTree&&this.tabCanvasItemContainerTree.renderNodeChanges()}},pe.\u0275fac=function(U){return new(U||pe)(o.\u0275\u0275directiveInject(Z.i),o.\u0275\u0275directiveInject(c),o.\u0275\u0275directiveInject(fe.D),o.\u0275\u0275directiveInject(Q.O),o.\u0275\u0275directiveInject(J.x),o.\u0275\u0275directiveInject(F),o.\u0275\u0275directiveInject(V),o.\u0275\u0275directiveInject(A.J),o.\u0275\u0275directiveInject(se.U),o.\u0275\u0275directiveInject(k),o.\u0275\u0275directiveInject(oe.vZ),o.\u0275\u0275directiveInject(K.F),o.\u0275\u0275directiveInject(j),o.\u0275\u0275directiveInject(v.U),o.\u0275\u0275directiveInject(T.H),o.\u0275\u0275directiveInject(D.o),o.\u0275\u0275directiveInject(a.t),o.\u0275\u0275directiveInject(p.g),o.\u0275\u0275directiveInject(l.z),o.\u0275\u0275directiveInject(h.y0),o.\u0275\u0275directiveInject(m.kc),o.\u0275\u0275directiveInject(O.$),o.\u0275\u0275directiveInject(S.D))},pe.\u0275cmp=o.\u0275\u0275defineComponent({type:pe,selectors:[["selection-pane-list"]],viewQuery:function(U,z){var ae;(1&U&&o.\u0275\u0275viewQuery(b.u,5),2&U)&&(o.\u0275\u0275queryRefresh(ae=o.\u0275\u0275loadQuery())&&(z.tabCanvasItemContainerTree=ae.first))},inputs:{groups:"groups",visualContainers:"visualContainers"},features:[o.\u0275\u0275ProvidersFeature([c,F,V,k,j]),o.\u0275\u0275NgOnChangesFeature],decls:21,vars:47,consts:[[1,"sectionHeader","item-auto","pivotNav","canvasItemsPane"],["role","tablist"],["role","tab","attr.aria-controls","section-layerOrder","localize","ExplorationCanvasItemsPane_LayerOrder",1,"sectionTab","trimmedTextWithEllipsis","themeableElement",3,"ngClass","section-tab-key-handler","pbiTooltip","onActiveSection","accessible-click"],["role","tab","ariaControls","section-tabOrder","localize","ExplorationCanvasItemsPane_TabOrder",1,"sectionTab","trimmedTextWithEllipsis","themeableElement",3,"ngClass","section-tab-key-handler","pbiTooltip","onActiveSection","accessible-click"],[1,"navMarker"],[1,"selection-pane-list-actions",3,"ngClass"],[1,"selection-pane-list-actions-move"],["id","bringForward",3,"disabled","pbiTooltip","click"],[1,"glyphicon","pbi-glyph-flickup","glyph-small"],["id","sendBackward",3,"disabled","pbiTooltip","click"],["class","selection-pane-list-actions-visibility",4,"ngIf"],["class","selection-pane-list-tab-actions",4,"ngIf"],["class","no-content-container","tabindex","0",3,"ngClass",4,"ngIf"],[1,"scroll-container-flex-grow"],[1,"selection-pane-list",3,"pbiScrollbar","ngClass"],[4,"ngIf"],["role","tabpanel","section-animation-slider","","autoWidth","true","navMarkerParent","canvasItemsPane",1,"sectionHost","item-fill",3,"sectionNumber"],[1,"selection-pane-list-actions-visibility"],["id","show","localize","Show",3,"disabled","click"],["id","hide","localize","Hide",3,"disabled","click"],[1,"selection-pane-list-tab-actions"],["id","expandAll",3,"pbiTooltip","accessible-click"],[1,"glyphicon","pbi-glyph-expand-all","glyph-small"],["id","collapseAll",3,"pbiTooltip","accessible-click"],[1,"glyphicon","pbi-glyph-collapse-all","glyph-small"],["id","orderTabsByPosition","aria-describedby","orderTabsByPositionDescription",3,"disabled","pbiTooltip","accessible-click"],[1,"glyphicon","pbi-glyph-horizontal-tab-key","glyph-small"],["id","orderTabsByPositionDescription","localize","Tab_Order_Reorder_Items_Hint",1,"aria-hint"],["tabindex","0",1,"no-content-container",3,"ngClass"],["localize","ExplorationCanvasItemsPane_NoCanvasItems"],["focus-nav-mode","Browser",3,"tree","options",4,"ngIf"],["focus-nav-mode","Browser",3,"tree","options"],["cdkDropList","",3,"dataSource","treeControl","cdkDropListDisabled","cdkDropListDropped"],["matTreeNodePadding","","matTreeNodePaddingIndent","20","cdkDrag","","class","selection-pane-item themeableElement",3,"cdkDragData","ngClass","keydown","click","cdkDragStarted","cdkDragReleased",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodePaddingIndent","20","cdkDrag","",1,"selection-pane-item","themeableElement",3,"cdkDragData","ngClass","keydown","click","cdkDragStarted","cdkDragReleased"],["matTreeNodeToggle","","class","caret glyphicon glyph-mini smallFontSize item-auto",3,"ngClass",4,"ngIf"],["tabindex","-1",3,"ngClass","item","isEditing"],["matTreeNodeToggle","",1,"caret","glyphicon","glyph-mini","smallFontSize","item-auto",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","ui-droppable dropzone selection-pane-item themeableElement",3,"ngClass","drag","getDragContext","drop","dropAction","click","keydown","dropHandler",4,"ngIf"],[1,"ui-droppable","dropzone","selection-pane-item","themeableElement",3,"ngClass","drag","getDragContext","drop","dropAction","click","keydown","dropHandler"],["tabindex","-1",3,"item","order","isSkipped","skipFunction","isEditing",4,"ngIf"],["tabindex","-1",3,"item","isEditing",4,"ngIf"],["tabindex","-1",3,"item","order","isSkipped","skipFunction","isEditing"],["tabindex","-1",3,"item","isEditing"],["class","ui-droppable dropzone selection-pane-item themeableElement","localizeTooltip","ExplorationCanvasItemsPane_TabOrder_Element_Skipped_Tooltip",3,"ngClass","click","keydown",4,"ngIf"],["localizeTooltip","ExplorationCanvasItemsPane_TabOrder_Element_Skipped_Tooltip",1,"ui-droppable","dropzone","selection-pane-item","themeableElement",3,"ngClass","click","keydown"],["tabindex","-1",3,"item","isSkipped","skipFunction"]],template:function(U,z){var ae;(1&U&&(o.\u0275\u0275elementStart(0,"nav",0),o.\u0275\u0275elementStart(1,"ul",1),o.\u0275\u0275elementStart(2,"li",2),o.\u0275\u0275listener("onActiveSection",function(De){return z.setActiveSection(De.nextSection)})("accessible-click",function(){return z.setActiveSection(z.SectionType.listOrderSection)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"li",3),o.\u0275\u0275listener("onActiveSection",function(De){return z.setActiveSection(De.nextSection)})("accessible-click",function(){return z.setActiveSection(z.SectionType.tabOrderSection)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(4,"div",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",5),o.\u0275\u0275elementStart(6,"div",6),o.\u0275\u0275elementStart(7,"button",7),o.\u0275\u0275listener("click",function(){return z.bringForward()}),o.\u0275\u0275element(8,"i",8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"button",9),o.\u0275\u0275listener("click",function(){return z.sendBackward()}),o.\u0275\u0275element(10,"i",8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(11,ht,3,2,"div",10),o.\u0275\u0275template(12,bt,8,7,"div",11),o.\u0275\u0275pipe(13,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(14,ke,2,3,"div",12),o.\u0275\u0275elementStart(15,"div",13),o.\u0275\u0275elementStart(16,"div",14),o.\u0275\u0275template(17,Le,3,3,"ng-container",15),o.\u0275\u0275elementStart(18,"section",16),o.\u0275\u0275template(19,te,3,4,"ng-container",15),o.\u0275\u0275template(20,ct,4,4,"ng-container",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&U)&&(o.\u0275\u0275advance(2),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(33,ft,z.isActiveSection(z.SectionType.listOrderSection)))("section-tab-key-handler",o.\u0275\u0275pureFunction2(35,Pt,z.SectionType.tabOrderSection+1,z.SectionType.listOrderSection))("pbiTooltip",z.layerOrderName),o.\u0275\u0275attribute("tabindex",z.isActiveSection(z.SectionType.listOrderSection)?0:-1)("aria-posinset",z.SectionType.listOrderSection+1)("aria-setsize",z.SectionType.tabOrderSection+1)("aria-selected",z.isActiveSection(z.SectionType.listOrderSection)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(38,ft,z.isShowingTabOrderSection()))("section-tab-key-handler",o.\u0275\u0275pureFunction2(40,Pt,z.SectionType.tabOrderSection+1,z.SectionType.tabOrderSection))("pbiTooltip",z.tabOrderName),o.\u0275\u0275attribute("tabindex",z.isActiveSection(z.SectionType.tabOrderSection)?0:-1)("aria-posinset",z.SectionType.tabOrderSection+1)("aria-setsize",z.SectionType.tabOrderSection+1)("aria-selected",z.isShowingTabOrderSection()),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(43,Ft,z.isNewPaneColorsEnabled)),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!z.isEditable())("pbiTooltip",z.bringForwardTextTooltip()),o.\u0275\u0275attribute("aria-label",z.isShowingTabOrderSection()?z.bringForwardName:z.moveUpName),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!z.isEditable())("pbiTooltip",z.sendBackwardTextTooltip()),o.\u0275\u0275attribute("aria-label",z.isShowingTabOrderSection()?z.sendBackwardName:z.moveDownName),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",z.isActiveOrderStrategy(z.OrderStrategy.grouping)&&z.isActiveSection(z.SectionType.listOrderSection)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",(null==(ae=o.\u0275\u0275pipeBind1(13,31,z.featureSwitches$))?null:ae.accessibilityTopLevelNav)&&z.isActiveSection(z.SectionType.tabOrderSection)&&z.isActiveOrderStrategy(z.OrderStrategy.grouping)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",z.isContentPresent()),o.\u0275\u0275advance(2),o.\u0275\u0275property("pbiScrollbar",z.scrollbarsConfig)("ngClass",o.\u0275\u0275pureFunction1(45,Ft,z.isNewPaneColorsEnabled)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",z.isActiveOrderStrategy(z.OrderStrategy.grouping)&&z.isShowingTabOrderSection()&&z.accessibilityTopLevelNavFS),o.\u0275\u0275advance(1),o.\u0275\u0275property("sectionNumber",z.activeSection),o.\u0275\u0275attribute("id",z.isShowingTabOrderSection()?"section-tabOrder":"section-layerOrder"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",z.isActiveOrderStrategy(z.OrderStrategy.grouping)&&z.isActiveSection(z.SectionType.listOrderSection)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!z.isActiveOrderStrategy(z.OrderStrategy.grouping)))},directives:[N.X,ce.NgClass,Ce,me.V,Ze.t,ce.NgIf,Je.r,it.R,b.u,n.gi,Te.Wj,n.fQ,n.uo,n.ah,Te.Zt,ue.T,n.eu,ce.NgForOf,ve.w,Me.W,we.r],pipes:[ce.AsyncPipe],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1 0 auto;text-align:left;width:100%;height:100%}[_nghost-%COMP%]:focus{outline:none}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:0 10px;height:32px;border-bottom:1px solid var(--neutral-primary-color, #333333);flex:none}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-move[_ngcontent-%COMP%]{justify-content:flex-start;font-size:11px;margin-right:6px}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-move[_ngcontent-%COMP%]   #bringForward[_ngcontent-%COMP%]{margin-right:6px}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-move[_ngcontent-%COMP%]   #sendBackward[_ngcontent-%COMP%]{margin-left:6px}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-visibility[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;font-size:11px;margin-left:6px;overflow:hidden}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-visibility[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;min-width:25px}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-visibility[_ngcontent-%COMP%]   button#show[_ngcontent-%COMP%]{margin-right:6px}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-visibility[_ngcontent-%COMP%]   button#hide[_ngcontent-%COMP%]{margin-left:6px}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-tab-actions[_ngcontent-%COMP%]{font-size:12px;justify-content:flex-end;margin-left:6px}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border-color:inherit;color:inherit;font-size:12px}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%], [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus:hover{background-color:transparent;border-color:inherit}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover{color:inherit}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%], [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus:hover, [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus:hover{color:var(--neutral-tertiary-color, #A6A6A6)}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .glyph-small[_ngcontent-%COMP%]{font-size:14px}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button#sendBackward[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:10px 0 0;margin:0}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button#bringForward[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:5px 0 0;margin:0;transform:scaleY(-1);-webkit-transform:scale(1,-1)}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button#orderTabsByPosition[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:5px 0 0}[_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button#expandAll[_ngcontent-%COMP%], [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button#collapseAll[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:2px 12px 0 0;margin:0}[_nghost-%COMP%]   .no-content-container[_ngcontent-%COMP%]{display:flex;flex:1 0 auto;justify-content:center;align-items:start;color:var(--neutral-light-color, #EAEAEA);padding-top:6px}[_nghost-%COMP%]   .scroll-container-flex-grow[_ngcontent-%COMP%]{flex:1 0 0px;overflow:hidden}[_nghost-%COMP%]   .selection-pane-list.scroll-wrapper[_ngcontent-%COMP%]{height:100%;flex:1 0 0px}[_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]{display:block;list-style:none;padding:0 2px}[_nghost-%COMP%]   .selection-pane-list.scroll-content.scroll-scrolly_visible[_ngcontent-%COMP%]{padding-right:10px}[_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%], [_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;margin:0 2px;align-items:center;justify-content:space-between;background-color:var(--neutral-secondary-color, #666666);color:var(--neutral-lighter-color, #F4F4F4);cursor:pointer;background-color:var(--theme-secondary-alt-color, #444444);border:1px solid transparent;padding:0 6px}[_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node.append[_ngcontent-%COMP%], [_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   li.append[_ngcontent-%COMP%]{border-bottom-color:var(--theme-primary-color, #F2C811)!important}[_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node.prepend[_ngcontent-%COMP%], [_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   li.prepend[_ngcontent-%COMP%]{border-top-color:var(--theme-primary-color, #F2C811)!important}[_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node.selected[_ngcontent-%COMP%], [_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:var(--neutral-secondary-color, #666666)}[_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node.droppable[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   li.droppable[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node.ui-droppable[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   li.ui-droppable[_ngcontent-%COMP%]:hover{background-color:var(--neutral-primary-color-alt3, #515151)}[_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node.selected[_ngcontent-%COMP%]   .menuContainer[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], [_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]   .menuContainer[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], [_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]:hover   .menuContainer[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], [_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .menuContainer[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{outline:none}[_nghost-%COMP%]   .selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]{margin:0}i.caret.glyphicon[_ngcontent-%COMP%]{margin:0 4px}selection-pane-item.groupNode[_ngcontent-%COMP%]{width:calc(100% - 6px - 4px)}selection-pane-item[_ngcontent-%COMP%]:focus{outline:none}li.selection-pane-item.ui-draggable-dragging[_ngcontent-%COMP%], .mat-tree-node.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;margin:0 2px;align-items:center;justify-content:space-between;background-color:var(--neutral-secondary-color, #666666);color:var(--neutral-lighter-color, #F4F4F4);padding:0 6px}.mat-tree-node.cdk-drag-preview[_ngcontent-%COMP%]{font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif;font-size:12px}.mat-tree-node.newPaneColors.cdk-drag-preview[_ngcontent-%COMP%]{background-color:var(--gray-20, #F3F2F1);color:var(--gray-180, #252423);border-radius:2px}.newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%]{border-color:var(--gray-40, #E1DFDD)}.newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%], .newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover, .newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:hover, .newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus, .newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus, .newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active, .newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active, .newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active:hover, .newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active:hover, .newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus:hover, .newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus:hover{color:var(--gray-80, #B3B0AD)}html[data-focus-source="key"][_nghost-%COMP%]   .newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .newPaneColors.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.newPaneColors.no-content-container[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.newPaneColors.selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%], .newPaneColors.selection-pane-list.scroll-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:var(--gray-20, #F3F2F1);color:var(--gray-180, #252423);border-radius:2px}.newPaneColors.selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node.selected[_ngcontent-%COMP%], .newPaneColors.selection-pane-list.scroll-content[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:var(--gray-50, #D2D0CE)}.newPaneColors.selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node.droppable[_ngcontent-%COMP%]:hover, .newPaneColors.selection-pane-list.scroll-content[_ngcontent-%COMP%]   li.droppable[_ngcontent-%COMP%]:hover, .newPaneColors.selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node.ui-droppable[_ngcontent-%COMP%]:hover, .newPaneColors.selection-pane-list.scroll-content[_ngcontent-%COMP%]   li.ui-droppable[_ngcontent-%COMP%]:hover{background-color:var(--gray-30, #EDEBE9)}html[data-focus-source="key"][_nghost-%COMP%]   .newPaneColors.selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .newPaneColors.selection-pane-list.scroll-content[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]:focus, html[data-focus-source="key"][_nghost-%COMP%]   .newPaneColors.selection-pane-list.scroll-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .newPaneColors.selection-pane-list.scroll-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.newPaneColors.selection-pane-item.ui-draggable-dragging[_ngcontent-%COMP%]{background-color:var(--gray-20, #F3F2F1);color:var(--gray-180, #252423);border-radius:2px}.aria-hint[_ngcontent-%COMP%]{display:none}',".mat-tree[_ngcontent-%COMP%]{display:inherit;background:none}.mat-tree-node[_ngcontent-%COMP%]{font-weight:inherit;font-size:inherit;min-height:24px}.mat-tree-node[_ngcontent-%COMP%]{user-select:none;cursor:move}.mat-tree-node.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-tree-node.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]:not(.cdk-drag-placeholder).droppable{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-animating.droppable[_ngcontent-%COMP%]{transition:transform .2s cubic-bezier(0,0,.2,1)}"]}),pe}()},76486:function(Ee,ne,t){t.d(ne,{u:function(){return d}});var e=t(32956),n=t(76430),f=t(90818),i=t(60400),M=t(50568);function E(P,y){if(1&P&&n.\u0275\u0275element(0,"pbi-lazy-load",3),2&P){var b=y.ngIf;n.\u0275\u0275property("modulePath",b.componentManifest.modulePath)("componentId",b.componentManifest.componentId)("inputArgs",b.componentManifest.inputArgs)}}function I(P,y){if(1&P&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275pipe(1,"async"),n.\u0275\u0275template(2,E,1,3,"pbi-lazy-load",2),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275elementEnd()),2&P){var a,b=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",null==(a=n.\u0275\u0275pipeBind1(1,2,b.sideFlyoutConfig$))?null:a.paneClass),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(3,4,b.sideFlyoutConfig$))}}var d=function(){function P(y,b){this.sideFlyoutService=y,this.changeDetector=b}return P.prototype.ngOnInit=function(){var y=this;this.shouldShowFlyout$=this.sideFlyoutService.shouldShow(),this.sideFlyoutConfig$=this.sideFlyoutService.config().pipe((0,e.b)(function(){return y.changeDetector.detectChanges()}))},P.\u0275fac=function(b){return new(b||P)(n.\u0275\u0275directiveInject(f.p),n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},P.\u0275cmp=n.\u0275\u0275defineComponent({type:P,selectors:[["side-flyout"]],decls:2,vars:3,consts:[["class","flyout",3,"ngClass",4,"ngIf"],[1,"flyout",3,"ngClass"],[3,"modulePath","componentId","inputArgs",4,"ngIf"],[3,"modulePath","componentId","inputArgs"]],template:function(b,a){1&b&&(n.\u0275\u0275template(0,I,4,6,"div",0),n.\u0275\u0275pipe(1,"async")),2&b&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,a.shouldShowFlyout$))},directives:[i.NgIf,i.NgClass,M.R],pipes:[i.AsyncPipe],styles:[".flyout[_ngcontent-%COMP%]{height:100%;width:100%;max-width:fit-content;overflow-x:auto;background:var(--fluent-theme-white-color, #FFF);z-index:10000003;border-left:1px solid var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4);position:absolute;right:0;top:0;bottom:0}"],changeDetection:0}),P}()},90818:function(Ee,ne,t){t.d(ne,{p:function(){return f}});var e=t(69104),n=t(76430),f=function(){function i(){this.shouldShow$=new e.X(!1),this.config$=new e.X(void 0)}return i.prototype.shouldShow=function(){return this.shouldShow$.asObservable()},i.prototype.config=function(){return this.config$.asObservable()},i.prototype.show=function(M){this.config$.next(void 0),this.config$.next(M),this.shouldShow$.next(!!M&&!!M.componentManifest)},i.prototype.hide=function(){this.shouldShow$.next(!1),this.config$.next(void 0)},i.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac=function(E){return new(E||i)},providedIn:"root"}),i}()},86592:function(Ee,ne,t){t.d(ne,{v:function(){return re}});var e=t(40582),n=t(76430),f=t(60354),i=t(31112),M=t(38942),E=t(88201),I=t(10883),d=t(95762),P=t(71367),y=t(7078),b=t(15595),a=t(69306),o=t(46170),l=t(87342),s=t(78663),c=t(16035),O=t(13213),x=t(46091),V=t(66187),w=t(47051),T=t(95781),v=t(76963),g=t(13271),r=t(80815),u=t(59116),C=t(95758),F=t(37105),A=powerbi.explore.services.createExploreVisualDataProxyService,W=powerbi.explore.services.createVisualContainerQueryHandler,k=powerbi.data.DataViewObjectDefinitions,R=powerbi.explore.services.events,G=powerbi.data.SQExpr,le=powerbi.explore.util.VisualContainerUtils,ge=powerbi.explore.helpers.VisualHostInsideZoneAdapter,re=function(){function j(ie,Z,fe,Q,J,se,oe,K,D,p,h,m,S,N,ce,he,Ce,me,Ze,Je,it,Te,ue,ve,Me){this.cachePolicyProviderService=ie,this.conceptualSchemaProxy=Z,this.dataSources=fe,this.displayNameService=Q,this.eventBridge=J,this.explorationNavigation=se,this.featureSwitchService=oe,this.filterGenerator=K,this.networkAvailability=D,this.ngZone=p,this.promiseFactory=h,this.resourceLoader=m,this.resourceRegistration=S,this.singleExecutableDataProxyFactory=N,this.telemetryService=ce,this.visualDataProxyExecutionServiceFactory=he,this.visualInsightsAnalysisHandlerFactory=Ce,this.visualLifecycleService=me,this.visualParameterServiceFactory=Ze,this.visualPlugin=Je,this.visualPluginOps=it,this.visualQueryGenerator=Te,this.visualValidator=ue,this.runningVisual=ve,this.visualContainerUtils=Me,this.visualReady=new n.EventEmitter,this.canDeferQuery=!0}return j.prototype.ngOnInit=function(){var ie=this;this.initializeQueryHandler(),this.initializeVisual(),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(R.visualContainerChanged,function(Z,fe){ie.visual&&(null==fe?void 0:fe.affectContainer(ie.visual))&&ie.onVisualContainerChanged()}),this.onVisualContainerChanged(!0,!this.networkAvailability.isNetworkAvailable()||void 0)},j.prototype.ngOnChanges=function(ie){var Z,fe,Q,J=null==ie?void 0:ie.visualViewport;J&&!J.isFirstChange()&&this.visualDefinition&&(this.visualDefinition.viewport=this.visualViewport);var se=null==ie?void 0:ie.themeCollection;se&&!se.isFirstChange()&&this.visualDefinition&&(this.visualDefinition.themeCollection=this.themeCollection);var oe=null===(Z=null==ie?void 0:ie.visual)||void 0===Z?void 0:Z.currentValue;if((null==oe?void 0:oe.name)&&(null===(fe=this.currentVisual)||void 0===fe?void 0:fe.name)!==oe.name){(null===(Q=this.currentVisual)||void 0===Q?void 0:Q.name)&&this.runningVisual.removeVisual(this.currentVisual);var K=this.visualContainerUtils.wrapRunningVisual(this.visualDefinition,this.getVisualHostServices(),void 0,oe.config.singleVisual,void 0,this.filterGenerator,void 0);this.currentVisual=oe,this.runningVisual.setVisual(oe,K)}},j.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.runningVisual.removeVisual(this.visual)},j.prototype.onVisualReady=function(){this.visualReady.emit()},j.prototype.onVisualContainerChanged=function(ie,Z){return void 0===ie&&(ie=!1),(0,e.mG)(this,void 0,void 0,function(){var fe,Q;return(0,e.Jh)(this,function(J){switch(J.label){case 0:return this.config.clearQueryErrors(),this.visualDefinition.type=le.getVisualType(this.visual),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return fe=J.sent(),[4,this.visualValidator.validate(this.visual,fe)];case 2:return(Q=J.sent())?(this.config.handleQueryErrors({code:Q.code,getDetails:function(){return Q.details}}),[2]):(this.visualQueryGenerator.shouldExecute(this.visual.config.singleVisual,this.dataSources.get())?this.applyUpdate({initialLoad:ie,preferCurrentData:!1,allowResultFromClientCache:Z}):this.queryHandler.updateNonQueryVisual(this.visual,this.visualDefinition.dataTransforms),[2])}})})},j.prototype.initializeQueryHandler=function(){var ie=this;this.queryHandler=this.createQueryHandler({notifyStart:function(Q){return ie.config.notifyStart(Q)},notifyEnd:function(){return ie.config.notifyEnd()},clearErrors:function(){return ie.config.clearQueryErrors()},handleErrors:function(Q){return ie.config.handleQueryErrors(Q)},handleWarnings:function(Q,J){return ie.config.handleQueryWarnings(Q,J)},applyUpdate:function(Q,J,se,oe){return ie.handleQueryResult(Q,J,se,oe)},loadMergedData:function(Q,J){return ie.setVisualData(Q,J)}})},j.prototype.initializeVisual=function(){var Z,ie=this,fe=this.visualPlugin.getPlugin(le.getVisualType(this.visual)),Q=null!==(Z=null==fe?void 0:fe.name)&&void 0!==Z?Z:void 0,J=k.getValue(le.getContainerObjectDefinitions(this.visual),{objectName:"stylePreset",propertyName:"name"},void 0),se=this.getVisualHostServices();this.visualDefinition={interactivityOptions:this.config.interactivityOptions,type:Q,allowInvalidDataView:!0,themeCollection:this.themeCollection,viewport:this.visualViewport,dataTransforms:{objects:le.getObjectDefinitions(this.visual)},hostServices:ge.wrapHostServices(se,this.ngZone),visualAdapterHostServices:{startProgressBar:function(){return ie.config.notifyStart()},stopProgressBar:function(){return ie.config.notifyEnd()},getNextDataSegment:function(){return ie.getNextDataSegment()}},stylePresetName:J&&G.isConstant(J)?J.value:void 0,additionalObjectUpdates:this.config.additionalObjectUpdates,visualPlugin:this.visualPlugin};var oe=this.visualContainerUtils.wrapRunningVisual(this.visualDefinition,se,void 0,this.visual.config.singleVisual,void 0,this.filterGenerator,void 0);this.currentVisual=this.visual,this.runningVisual.setVisual(this.visual,oe)},j.prototype.createQueryHandler=function(ie){var Z=A(this.singleExecutableDataProxyFactory.create(),this.filterGenerator,this.promiseFactory,this.visualPlugin);return W(ie,this.config.queryVisualHostServices,this.promiseFactory,this.conceptualSchemaProxy,this.featureSwitchService,this.telemetryService,this.visualQueryGenerator,this.visualPlugin,this.visualPluginOps,this.filterGenerator,this.displayNameService,this.explorationNavigation,this.visualValidator,this.resourceLoader,this.eventBridge,Z,this.dataSources,this.cachePolicyProviderService,this.visualInsightsAnalysisHandlerFactory.create(this.config.queryVisualHostServices),this.visualParameterServiceFactory.create(),this.visualDataProxyExecutionServiceFactory.create(Z),this.resourceRegistration,this.visualLifecycleService)},j.prototype.getVisualHostServices=function(){var ie=this,Z=this.config.visualHostServices;return this.config.noLoadMore||(Z=powerbi.Prototype.inherit(Z,function(fe){fe.loadMoreData=function(){return ie.loadMoreData()}})),powerbi.Prototype.inherit(Z,function(fe){fe.setShouldDeferData=function(Q){ie.canDeferQuery!==Q&&(ie.canDeferQuery=Q,Q||ie.applyUpdate())}})},j.prototype.applyUpdate=function(ie){void 0===ie&&(ie={});var fe=ie.preferCurrentData,Q=ie.allowResultFromClientCache;this.queryHandler.runQuery({contract:this.visual,viewport:this.visualDefinition.viewport,initialLoad:ie.initialLoad,useVisualContainerCache:this.shouldUseCache(),preferCurrentData:fe,allowResultFromClientCache:Q,currentData:this.visualDefinition.data,canDefer:this.canDeferQuery})},j.prototype.handleQueryResult=function(ie,Z,fe,Q){var J=this.visualDefinition;J.dataTransforms=Z,fe&&(J.dataTransforms=powerbi.Prototype.inherit(J.dataTransforms),J.dataTransforms.objects=fe),this.setVisualData(ie,Q)},j.prototype.setVisualData=function(ie,Z){var fe=this.visualDefinition;fe.data=ie,fe.dataAppliedEvent&&(fe.dataAppliedEvent.reject(),fe.dataAppliedEvent=void 0),fe.dataAppliedEvent=this.telemetryService.startChildActivity(Z&&Z.telemetryActivity&&Z.telemetryActivity.event,powerbi.telemetry.EXVisualDataChanged,{visualName:this.visual.name})},j.prototype.getNextDataSegment=function(){return this.queryHandler.getNextDataSegment({contract:this.visual,viewport:this.visualDefinition.viewport,useVisualContainerCache:this.shouldUseCache()})},j.prototype.loadMoreData=function(){this.queryHandler.loadMoreData({contract:this.visual,currentData:this.visualDefinition.data,useVisualContainerCache:this.shouldUseCache(),viewport:this.visualDefinition.viewport})},j.prototype.shouldUseCache=function(){return le.shouldUseQueryCache(this.visual,this.config.disableQueryCacheUpdates)},j.\u0275fac=function(Z){return new(Z||j)(n.\u0275\u0275directiveInject(i.g),n.\u0275\u0275directiveInject(M.i),n.\u0275\u0275directiveInject(I.D),n.\u0275\u0275directiveInject(d.O),n.\u0275\u0275directiveInject(P.J),n.\u0275\u0275directiveInject(w.I),n.\u0275\u0275directiveInject(T.vZ),n.\u0275\u0275directiveInject(y.r),n.\u0275\u0275directiveInject(v.SW),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(f.t),n.\u0275\u0275directiveInject(g.l6),n.\u0275\u0275directiveInject(b.j),n.\u0275\u0275directiveInject(E.U),n.\u0275\u0275directiveInject(u.y0),n.\u0275\u0275directiveInject(a.Y),n.\u0275\u0275directiveInject(o.b),n.\u0275\u0275directiveInject(l.U),n.\u0275\u0275directiveInject(s.P),n.\u0275\u0275directiveInject(r.D),n.\u0275\u0275directiveInject(c.f),n.\u0275\u0275directiveInject(O.S),n.\u0275\u0275directiveInject(x.R),n.\u0275\u0275directiveInject(V.s),n.\u0275\u0275directiveInject(C.K))},j.\u0275cmp=n.\u0275\u0275defineComponent({type:j,selectors:[["single-visual-host"]],inputs:{visual:"visual",visualViewport:"visualViewport",themeCollection:"themeCollection",config:"config"},outputs:{visualReady:"visualReady"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[1,"visualSite"],[3,"viewModel","allowDeferredRendering","visualReady"]],template:function(Z,fe){1&Z&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"visual-modern",1),n.\u0275\u0275listener("visualReady",function(){return fe.onVisualReady()}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&Z&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("viewModel",fe.visualDefinition)("allowDeferredRendering",!0))},directives:[F.y],styles:["single-visual-host[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color, #FFF)}single-visual-host[_ngcontent-%COMP%]   .visualSite[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;transform-origin:0 0;display:flex}single-visual-host[_ngcontent-%COMP%]   .visualSite[_ngcontent-%COMP%]   .visual.allow-deferred-rendering[_ngcontent-%COMP%]{opacity:0;transition:opacity .25s}single-visual-host[_ngcontent-%COMP%]   .visualSite[_ngcontent-%COMP%]   .visual.allow-deferred-rendering[initialized][_ngcontent-%COMP%]{opacity:1}"]}),j}()},29026:function(Ee,ne,t){t.d(ne,{W:function(){return i}});var e=t(86269),n=t(76430),f=t(65880),i=function(){function M(E){this.smartNarrativeData=E,this.visual=E.visual}return M.\u0275fac=function(I){return new(I||M)(n.\u0275\u0275directiveInject(e.M))},M.\u0275cmp=n.\u0275\u0275defineComponent({type:M,selectors:[["smart-narrative-overlay"]],decls:2,vars:1,consts:[[1,"pbi-depth-2"],[3,"visual"]],template:function(I,d){1&I&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"smart-narrative",1),n.\u0275\u0275elementEnd()),2&I&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("visual",d.visual))},directives:[f.I],encapsulation:2,changeDetection:0}),M}()},65880:function(Ee,ne,t){t.d(ne,{I:function(){return I}});var e=t(40582),n=t(76430),f=t(44627),i=t(60660),M=t(60400);function E(d,P){if(1&d&&(n.\u0275\u0275elementStart(0,"li"),n.\u0275\u0275elementStart(1,"p"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&d){var y=P.$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(y)}}var I=function(){function d(P,y,b){this.lazyScoped=P,this.changeDetector=y,this.localizationService=b,this.summaryDisplays=[],this.emptySummaryCode="EmptySummary"}return d.prototype.ngOnInit=function(){this.ariaLabelString=this.localizationService.get("SmartNarratives_ToolTip"),this.summaryDisplays[0]=this.localizationService.get("SmartNarratives_Visual_Loading_Message"),this.update()},d.prototype.ngOnChanges=function(P){P.visual&&this.update()},d.prototype.update=function(){return(0,e.mG)(this,void 0,void 0,function(){var P,y,b;return(0,e.Jh)(this,function(a){switch(a.label){case 0:return this.visual?(P=this,[4,this.lazyScoped.get("smartNarratives")]):[3,3];case 1:return P.smartNarrativeService=a.sent(),[4,this.smartNarrativeService.getVisualSummary(this.visual)];case 2:(y=a.sent()).error&&y.error.code!==this.emptySummaryCode?this.summaryDisplays=[this.localizationService.get("SmartNarratives_Visual_Fail_Message")]:_.isEmpty(y.summaryText)?this.summaryDisplays=[this.localizationService.get("SmartNarratives_Visual_CouldNotFind_Message")]:(b=(b=y.summaryText.split("\n")).slice(0,3),this.summaryDisplays=b),this.changeDetector.detectChanges(),a.label=3;case 3:return[2]}})})},d.\u0275fac=function(y){return new(y||d)(n.\u0275\u0275directiveInject(f.H),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(i.o))},d.\u0275cmp=n.\u0275\u0275defineComponent({type:d,selectors:[["smart-narrative"]],inputs:{visual:"visual"},features:[n.\u0275\u0275NgOnChangesFeature],decls:4,vars:2,consts:[[2,"background-color","white"],["autofocus","autofocus","tabindex","0","role","region","aria-live","polite",1,"smartNarrative","themeableElement",2,"z-index","999"],[4,"ngFor","ngForOf"]],template:function(y,b){1&y&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275elementStart(2,"ul"),n.\u0275\u0275template(3,E,3,1,"li",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&y&&(n.\u0275\u0275advance(1),n.\u0275\u0275attribute("aria-label",b.ariaLabelString),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",b.summaryDisplays))},directives:[M.NgForOf],styles:[".smartNarrative[_ngcontent-%COMP%]{font-size:14px;width:260px;max-height:374px;overflow-y:auto;padding:12px 16px}.smartNarrative[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle}.smartNarrative[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{vertical-align:middle;margin-bottom:4px;margin-left:2px}.smartNarrative[_ngcontent-%COMP%]   .noFilter[_ngcontent-%COMP%]{padding:5px}.smartNarrative[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:0}.smartNarrative[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;margin:0}.no-outline[_ngcontent-%COMP%]{outline:none}"],changeDetection:0}),d}()},78054:function(Ee,ne,t){t.d(ne,{$:function(){return o}});var e=t(40582),n=t(15855),f=t(11105),i=t(66571),M=t(2564),E=t(6038),I=t(76430),d=t(71367),P=t(66075),y=t(60660),b=t(60400),a=powerbi.explore.services.events,o=function(l){function s(c,O,x){var V=l.call(this)||this;return V.eventBridge=c,V.localizationService=O,V.navigationService=x,V}return(0,e.ZT)(s,l),s.prototype.ngOnInit=function(){var c=this,O=this.eventBridge.on(a.sectionChanged),x=this.eventBridge.on(a.sectionDeleted);this.sectionStatus$=(0,n.T)(O,x).pipe((0,f.O)(this.getSectionStatus()),(0,i.U)(function(){return c.getSectionStatus()}),(0,M.R)(this.onDestroy$))},s.prototype.getSectionStatus=function(){var c=this.navigationService.getCurrentSection(),O=this.navigationService.getAllSections();return c&&0!==(null==O?void 0:O.length)?this.localizationService.format("ReportStatusBarReportPageCount",O.indexOf(c)+1,O.length):""},s.\u0275fac=function(O){return new(O||s)(I.\u0275\u0275directiveInject(d.J),I.\u0275\u0275directiveInject(y.o),I.\u0275\u0275directiveInject(P.z))},s.\u0275cmp=I.\u0275\u0275defineComponent({type:s,selectors:[["status-bar-section-status"]],features:[I.\u0275\u0275InheritDefinitionFeature],decls:4,vars:3,consts:[[1,"statusBarSection"]],template:function(O,x){1&O&&(I.\u0275\u0275elementStart(0,"div",0),I.\u0275\u0275elementStart(1,"span"),I.\u0275\u0275text(2),I.\u0275\u0275pipe(3,"async"),I.\u0275\u0275elementEnd(),I.\u0275\u0275elementEnd()),2&O&&(I.\u0275\u0275advance(2),I.\u0275\u0275textInterpolate(I.\u0275\u0275pipeBind1(3,1,x.sectionStatus$)))},pipes:[b.AsyncPipe],styles:[".statusBarSection[_ngcontent-%COMP%]{display:flex}"],changeDetection:0}),s}(E.w)},13838:function(Ee,ne,t){t.d(ne,{f:function(){return M},q:function(){return E}});var e=t(76430),n=t(72127),f=t(44453),i=t(60400),M=Object.freeze({maxZoomScale:4,midZoomScale:1,minZoomScale:.1,zoomScaleStepAmount:.1}),E=function(){function I(d){this.canvasZoomService=d,this.zoomScaleConfig=M}return I.prototype.ngOnInit=function(){this.zoomScale$=this.canvasZoomService.getZoomScale()},I.prototype.onFitToContent=function(){this.canvasZoomService.fitToPage()},I.prototype.onZoomStep=function(d){d?this.canvasZoomService.zoomIn():this.canvasZoomService.zoomOut()},I.prototype.onZoomScaleChange=function(d){this.canvasZoomService.setZoomScale(d)},I.\u0275fac=function(P){return new(P||I)(e.\u0275\u0275directiveInject(n.w))},I.\u0275cmp=e.\u0275\u0275defineComponent({type:I,selectors:[["status-bar-zoom"]],decls:2,vars:6,consts:[[3,"zoomScale","showFitToPage","enableZoomDialog","zoomScaleConfig","fitToPage","zoomStep","zoomScaleChange"]],template:function(P,y){1&P&&(e.\u0275\u0275elementStart(0,"pbi-zoom-control",0),e.\u0275\u0275listener("fitToPage",function(){return y.onFitToContent()})("zoomStep",function(a){return y.onZoomStep(a)})("zoomScaleChange",function(a){return y.onZoomScaleChange(a)}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()),2&P&&e.\u0275\u0275property("zoomScale",e.\u0275\u0275pipeBind1(1,4,y.zoomScale$))("showFitToPage",!0)("enableZoomDialog",!0)("zoomScaleConfig",y.zoomScaleConfig)},directives:[f.i],pipes:[i.AsyncPipe],encapsulation:2,changeDetection:0}),I}()},29595:function(Ee,ne,t){t.d(ne,{k:function(){return f}});var e=t(76430),n=t(91350),f=function(){function i(M){this.svgProvider=M}return i.prototype.ngOnInit=function(){this.svgProvider.loadSheet(this.sheet)},i.prototype.getSymbolRef=function(){return"#"+this.symbolId+(this.disabled?"_disabled":"")},i.\u0275fac=function(E){return new(E||i)(e.\u0275\u0275directiveInject(n.g))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["svg-use-symbol"]],inputs:{disabled:"disabled",sheet:"sheet",symbolId:"symbolId"},decls:2,vars:2,consts:[["height","100%","width","100%"],[2,"pointer-events","none"]],template:function(E,I){1&E&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",0),e.\u0275\u0275element(1,"use",1),e.\u0275\u0275elementEnd()),2&E&&(e.\u0275\u0275advance(1),e.\u0275\u0275attribute("href",I.getSymbolRef())("href",I.getSymbolRef(),null,"xlink"))},encapsulation:2}),i}()},24373:function(Ee,ne,t){t.d(ne,{o:function(){return i}});var e=t(40582),n=t(53922),f=t(76430),i=function(M){function E(I,d){return M.call(this,"taskPane",I,d)||this}return(0,e.ZT)(E,M),E.\u0275fac=function(d){return new(d||E)(f.\u0275\u0275directiveInject(f.ElementRef),f.\u0275\u0275directiveInject(f.Injector))},E.\u0275dir=f.\u0275\u0275defineDirective({type:E,selectors:[["task-pane"]],inputs:{viewModel:"viewModel"},features:[f.\u0275\u0275InheritDefinitionFeature]}),E}(n.iB)},45064:function(Ee,ne,t){t.d(ne,{E:function(){return r}});var e=t(40582),n=t(76430),f=t(65657),i=t(97894),M=t(66571),E=t(69104),I=t(68552),d=t(60234),P=t(88471),y=t(6038),b=t(60660),a=t(59116),o=t(95781),l=t(60400),s=t(93578),c=t(76681),O=powerbi.visuals.FontProperties,x=powerbi.Promise;function V(u,C){if(1&u&&n.\u0275\u0275element(0,"div",5),2&u){var F=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",F.bufferSpaceStyle)}}function w(u,C){if(1&u){var F=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"pbi-menu-container",8),n.\u0275\u0275listener("menuButtonClick",function(R){return n.\u0275\u0275restoreView(F),n.\u0275\u0275nextContext(3).handleActionClicked(R)})("onOpenSubMenu",function(R){return n.\u0275\u0275restoreView(F),n.\u0275\u0275nextContext(3).openTouchSubMenu(R)})("isPointerWithin",function(R){return n.\u0275\u0275restoreView(F),n.\u0275\u0275nextContext(3).receiveIsPointerWithin(R)}),n.\u0275\u0275elementEnd()}if(2&u){var A=n.\u0275\u0275nextContext(2).ngIf,W=n.\u0275\u0275nextContext();n.\u0275\u0275property("menu",A)("menuMode",W.menuMode)}}function T(u,C){if(1&u){var F=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mobile-tooltip-child-menu",9),n.\u0275\u0275listener("onHide",function(){return n.\u0275\u0275restoreView(F),n.\u0275\u0275nextContext(3).onHide})("onBack",function(){return n.\u0275\u0275restoreView(F),n.\u0275\u0275nextContext(3).closeTouchSubMenu()}),n.\u0275\u0275elementEnd()}if(2&u){var A=n.\u0275\u0275nextContext().ngIf,W=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("commandsMenu",A)("commandsMenuTitle",W.touchSubMenuTitle)("actionIconStyle",W.touchSubMenuStyles.actionIconStyle)("actionTitleStyle",W.touchSubMenuStyles.actionTitleStyle)("dividerStyle",W.touchSubMenuStyles.dividerStyle)("ngStyle",W.touchSubMenuStyles.mobileContainerStyle)}}function v(u,C){if(1&u&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,w,1,2,"pbi-menu-container",6),n.\u0275\u0275template(2,T,1,6,"mobile-tooltip-child-menu",7),n.\u0275\u0275elementContainerEnd()),2&u){var F=C.ngIf,A=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",0==F.length||!A.isNewMobileTooltip),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",F.length>0&&A.isNewMobileTooltip)}}function g(u,C){if(1&u&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275element(1,"hr",2),n.\u0275\u0275template(2,V,1,1,"div",3),n.\u0275\u0275template(3,v,3,2,"ng-container",4),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275elementEnd()),2&u){var F=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",F.dividerStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!F.isOptimizedTouchEvent),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(4,3,F.touchSubMenu$))}}var r=function(u){function C(F,A,W){var k=u.call(this)||this;return k.localizationService=F,k.telemetryService=A,k.featureSwitchService=W,k.onHide=new n.EventEmitter,k.isPointerWithin=new n.EventEmitter,k.menuMode=P.Kb.Full,k.dividerStyle={},k.bufferSpaceStyle={},k.touchSubMenuStyles={dividerStyle:{},actionTitleStyle:{},actionIconStyle:{},mobileContainerStyle:{}},k.pbiMenuStyle={},k.touchSubMenu$=new E.X([]),k.subscriptionChange=(0,I.aj)([u.prototype.changes$.call(k,"tooltipShown"),u.prototype.changes$.call(k,"identities"),u.prototype.changes$.call(k,"tooltipStyle")]).pipe((0,f.h)(function(R){return R[0]||!!R[1]})).subscribe(function(R){k.setupActionComponent(R[2])}),k}return(0,e.ZT)(C,u),Object.defineProperty(C.prototype,"isNewMobileTooltip",{get:function(){return this.featureSwitchService.featureSwitches.newMobileTooltip},enumerable:!1,configurable:!0}),C.prototype.setupActionComponent=function(F){F?(this.dividerStyle=this.constructDividerStyle(F),this.bufferSpaceStyle=this.constructBufferSpaceStyle(F),this.pbiMenuStyle=this.constructPbiMenuStyle(F),this.touchSubMenuStyles=this.setupTouchTooltipStyle(F)):this.telemetryService.logEvent(powerbi.telemetry.EXUndefinedTooltipStyleInActionBar);var A=this.getCommands();this.menu$=this.getPbiMenu(A,this.pbiMenuStyle,!0)},C.prototype.receiveIsPointerWithin=function(F){this.isPointerWithin.emit(F)},C.prototype.ngOnDestroy=function(){return this.isPointerWithin.emit(void 0),this.subscriptionChange.unsubscribe(),u.prototype.ngOnDestroy.call(this)},C.prototype.handleActionClicked=function(F){return(0,e.mG)(this,void 0,x,function(){var A,W;return(0,e.Jh)(this,function(k){switch(k.label){case 0:return(A=F.data).execute?(W=A.getTelemetryInfo(),this.telemetryService.logEvent(powerbi.telemetry.EXExecuteActionCommands,{commandName:W}),[4,A.execute()]):[3,2];case 1:k.sent(),this.onHide.emit(),k.label=2;case 2:return[2]}})})},C.prototype.openTouchSubMenu=function(){return(0,e.mG)(this,void 0,void 0,function(){var F,A,W,k,R;return(0,e.Jh)(this,function(G){switch(G.label){case 0:if(!this.isOptimizedTouchEvent)return[2];W=0,k=this.getCommands(),G.label=1;case 1:return W<k.length?[4,(R=k[W]).getChildren()]:[3,4];case 2:F=G.sent(),_.isEmpty(F)||(_.isEmpty(A),A=F,this.touchSubMenuTitle=R.title(this.localizationService)),G.label=3;case 3:return W++,[3,1];case 4:return _.isEmpty(A)||this.touchSubMenu$.next(A),[2]}})})},C.prototype.closeTouchSubMenu=function(){this.touchSubMenu$.next([])},C.prototype.setupTouchTooltipStyle=function(F){var A=null!=F.transparency?1-F.transparency/100:1,W={dividerStyle:{"background-color":F.dividerColor,opacity:A},actionTitleStyle:{},actionIconStyle:{},mobileContainerStyle:{"background-color":F.background.solid.color,opacity:A}};if(F.actionFontProperties){var k=O.toHTMLStyle(F.actionFontProperties);W.actionIconStyle={color:k.color,"font-size":k["font-size"]},W.actionTitleStyle={color:k.color,"font-size":k["font-size"],"font-family":k["font-family"]}}return W},C.prototype.getCommands=function(){var F;return(null===(F=this.actionsProvider)||void 0===F?void 0:F.updateAndGetTooltipCommands().filter(function(W){return W.enabled}).map(function(W){return W.command}))||[]},C.prototype.constructPbiMenuStyle=function(F){var A={};if(A["background-color"]=F.background.solid.color,A.opacity=null!=F.transparency?1-F.transparency/100:1,A[":hover"]={"background-color":F.hoverColor},F.actionFontProperties){var W=O.toHTMLStyle(F.actionFontProperties);A=(0,e.pi)((0,e.pi)({},A),W)}return A},C.prototype.constructDividerStyle=function(F){var A={};return A["background-color"]=F.dividerColor,A.opacity=null!=F.transparency?1-F.transparency/100:1,A},C.prototype.constructBufferSpaceStyle=function(F){var A={};return A["background-color"]=F.background.solid.color,A.opacity=null!=F.transparency?1-F.transparency/100:1,A},C.prototype.getPbiMenu=function(F,A,W){var k=this,R=A["font-size"],G=A["font-family"],le=A.color,ge=A["background-color"],re=A.opacity,j=A[":hover"],ie=F.map(function(Z,fe){return(0,d.D)(Z.getChildren()).pipe((0,i.q)(1),(0,M.U)(function(Q){var J=Q&&Q.length>0?P.iB.SubMenu:P.iB.Button,se={id:fe,type:J,text:Z.title(k.localizationService),styles:{"font-family":G,"font-size":R,color:le,"background-color":ge,":hover":j},icon:null==Z.glyph?null:{type:0,glyph:Z.glyph,styles:{"font-size":R,color:le}}};return J===P.iB.SubMenu?se.menu=function(){return k.getPbiMenu(Q,k.pbiMenuStyle,!1)}:se.data=Z,se}))});return(0,I.aj)(ie).pipe((0,f.h)(function(Z){return Z&&Z.length>0}),(0,M.U)(function(Z){return k.telemetryService.logEvent(powerbi.telemetry.EXActionBarShown,{isSubmenu:!W}),{items:Z,styles:{"box-shadow":W?"none":"","border-radius":"0px","background-color":ge,opacity:re,"min-width":W?"inherit":"",animation:"none"}}}))},C.\u0275fac=function(A){return new(A||C)(n.\u0275\u0275directiveInject(b.o),n.\u0275\u0275directiveInject(a.y0),n.\u0275\u0275directiveInject(o.vZ))},C.\u0275cmp=n.\u0275\u0275defineComponent({type:C,selectors:[["tooltip-actions"]],inputs:{actionsProvider:"actionsProvider",identities:"identities",tooltipShown:"tooltipShown",tooltipStyle:"tooltipStyle",isOptimizedTouchEvent:"isOptimizedTouchEvent"},outputs:{onHide:"onHide",isPointerWithin:"isPointerWithin"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[["class","tooltip-actions-container",4,"ngIf"],[1,"tooltip-actions-container"],[1,"tooltip-divider",3,"ngStyle"],["class","buffer-space",3,"ngStyle",4,"ngIf"],[4,"ngIf"],[1,"buffer-space",3,"ngStyle"],[3,"menu","menuMode","menuButtonClick","onOpenSubMenu","isPointerWithin",4,"ngIf"],[3,"commandsMenu","commandsMenuTitle","actionIconStyle","actionTitleStyle","dividerStyle","ngStyle","onHide","onBack",4,"ngIf"],[3,"menu","menuMode","menuButtonClick","onOpenSubMenu","isPointerWithin"],[3,"commandsMenu","commandsMenuTitle","actionIconStyle","actionTitleStyle","dividerStyle","ngStyle","onHide","onBack"]],template:function(A,W){1&A&&(n.\u0275\u0275template(0,g,5,5,"div",0),n.\u0275\u0275pipe(1,"async")),2&A&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,W.menu$))},directives:[l.NgIf,l.NgStyle,s.m,c.d],pipes:[l.AsyncPipe],styles:[".tooltip-actions-container[_ngcontent-%COMP%]{pointer-events:auto}.tooltip-actions-container[_ngcontent-%COMP%]   .tooltip-divider[_ngcontent-%COMP%]{width:100%;height:1px;border:none;margin:0}.tooltip-actions-container[_ngcontent-%COMP%]   .buffer-space[_ngcontent-%COMP%]{height:2px}","@media (orientation: landscape){.tooltip-container.truncate-tooltip-height   .visual-tooltip-mobile[_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu, .tooltip-container.truncate-tooltip-height   .visual-tooltip-mobile   [_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu{max-height:80px}}"],changeDetection:0}),C}(y.w)},180:function(Ee,ne,t){t.d(ne,{z:function(){return dt}});var e=t(40582),n=t(76430),f=t(80763),i=t(16686),M=t(60354),E=jsCommon.StringExtensions,I=powerbi.visuals.valueFormatter,d=function(Fe){return Fe[Fe.Top=0]="Top",Fe[Fe.Bottom=1]="Bottom",Fe}({}),P=function(){function Fe(be,_e,Oe){this.filterTypes=be,this.targetType=_e,this.itemCount=Oe}return Fe.prototype.getRestatement=function(be){if(null!=this.itemCount){var _e=I.format(this.itemCount,"#,###"),Oe=this.orderByDisplayName,Xe=this.targetType.type===d.Top;return Oe?E.format(be.get(Xe?"FilterRestatement_TopNBy":"FilterRestatement_BottomNBy"),_e,Oe):E.format(be.get(Xe?"FilterRestatement_TopN":"FilterRestatement_BottomN"),_e)}},Fe.prototype.canApplyPendingClear=function(){return this.hasPendingClear&&!this.orderByField&&!this.itemCount},Fe.prototype.setInitialInputWarningStates=function(be,_e){var Oe=be&&-1!==be.indexOf(_e.toString());this.showItemCountInputWarning=Oe&&!this.itemCount,this.showOrderByFieldWarning=Oe&&!this.orderByField},Fe.prototype.clearOrderByFieldWarning=function(){this.showOrderByFieldWarning=!1},Fe.prototype.updateItemCountInputWarning=function(){this.showItemCountInputWarning=this.showItemCountInputWarning&&this.itemCount<=0},Fe}(),y=powerbi.data.SQExpr,b=powerbi.data.SQExprBuilder;function c(Fe,be,_e,Oe,Xe,nt){return!y.equals(be,Fe.orderByField)&&(Fe.orderByField=be,Fe.availableAggregates=function(Fe,be,_e,Oe){return{items:powerbi.explore.viewModels.MenuItemFactory.createAggregateMenuItems(Fe,be,_e,!1,powerbi.VisualDataRoleKind.Measure,[],Oe)}}(be,_e,nt,Xe),Fe.orderByDisplayName=Oe.getDisplayName(Fe.orderByField,_e,null,null,null,{includeVariationSource:!0}),Fe.selectedAggregate=y.isAggregation(be)?be.func:null,x(Fe),!0)}function x(Fe){for(var be=0,_e=Fe.availableAggregates.items;be<_e.length;be++){var Oe=_e[be];Oe.checked=Oe.key.aggregate===Fe.selectedAggregate}}powerbi;var T=t(19156),v=t(38942),g=t(4486),r=t(10883),u=t(95762),C=t(71367),F=t(66075),A=t(91054),W=t(77540),k=t(95781),R=t(60660),G=t(40629),le=t(59804),ge=t(80815),re=t(60400),j=t(9784),ie=t(50651),Z=t(40758),fe=t(65287),Q=t(70286),J=t(74262),se=t(52555),oe=powerbi.data.FieldExprPattern,K=powerbi.explore.viewModels.FilterEvents,D=powerbi.explore.contracts.FilterType,p=powerbi.explore.FilterUtils,h=powerbi.data.SQExprBuilder,m=powerbi.data.SQExprConverter,S=powerbi.data.SQExprUtils,N=powerbi.data.TopNFilterPattern,ce=function(be,_e){return{"font-size":be,"font-family":_e}};function he(Fe,be){if(1&Fe&&n.\u0275\u0275element(0,"pbi-alert",14),2&Fe){var _e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction2(3,ce,_e.viewModel.fontSize,_e.viewModel.fontFamily))("kind","warning")("messageWarning","TopNFilter_SingleTopNAllowedWarning")}}var Ce=function(be,_e,Oe,Xe){return{"background-color":be,color:_e,"border-color":Oe,"font-family":Xe}};function me(Fe,be){if(1&Fe&&(n.\u0275\u0275elementStart(0,"mat-option",17),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&Fe){var _e=be.$implicit,Oe=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("value",_e)("ngStyle",n.\u0275\u0275pureFunction4(3,Ce,Oe.viewModel.inputBoxBackgroundColor,Oe.viewModel.inputBoxForegroundColor,Oe.viewModel.inputBoxBorderColor,Oe.viewModel.fontFamily)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",_e.text,"")}}var Ze=function(be,_e,Oe){return{"background-color":be,color:_e,"border-color":Oe}};function Je(Fe,be){if(1&Fe){var _e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-select",15),n.\u0275\u0275listener("selectionChange",function(nt){return n.\u0275\u0275restoreView(_e),n.\u0275\u0275nextContext(2).onTargetSelectionChange(nt)})("ngModelChange",function(nt){return n.\u0275\u0275restoreView(_e),n.\u0275\u0275nextContext(2).vm.targetType=nt}),n.\u0275\u0275template(1,me,2,8,"mat-option",16),n.\u0275\u0275elementEnd()}if(2&Fe){var Oe=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction3(3,Ze,Oe.viewModel.inputBoxBackgroundColor,Oe.viewModel.inputBoxForegroundColor,Oe.viewModel.inputBoxBorderColor))("ngModel",Oe.vm.targetType),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",Oe.vm.filterTypes)}}function it(Fe,be){if(1&Fe){var _e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",22),n.\u0275\u0275listener("click",function(Xe){return n.\u0275\u0275restoreView(_e),n.\u0275\u0275nextContext(3).showContextMenu(Xe)}),n.\u0275\u0275elementEnd()}}function Te(Fe,be){if(1&Fe){var _e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",23),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(_e),n.\u0275\u0275nextContext(3).removeOrderBy()}),n.\u0275\u0275elementEnd()}}function ue(Fe,be){if(1&Fe&&(n.\u0275\u0275elementStart(0,"div",18),n.\u0275\u0275elementStart(1,"span",19),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,it,1,0,"button",20),n.\u0275\u0275template(4,Te,1,0,"button",21),n.\u0275\u0275elementEnd()),2&Fe){var _e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction3(5,Ze,_e.viewModel.inputBoxBackgroundColor,_e.viewModel.inputBoxForegroundColor,_e.viewModel.inputBoxBorderColor)),n.\u0275\u0275advance(1),n.\u0275\u0275property("tabindex",_e.isEditMode?0:-1),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(_e.vm.orderByDisplayName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",_e.vm.availableAggregates.items.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",_e.isEditMode)}}function ve(Fe,be){1&Fe&&n.\u0275\u0275element(0,"div",24)}function Me(Fe,be){if(1&Fe&&n.\u0275\u0275element(0,"button",25),2&Fe){var _e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("disabled",!_e.canApplyFilter())}}var we=function(be){return{invalid:be}},$e=function(be){return{"font-size":be}},et=function(be){return{filled:be}};function at(Fe,be){if(1&Fe){var _e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"form",1),n.\u0275\u0275listener("ngSubmit",function(){return n.\u0275\u0275restoreView(_e),n.\u0275\u0275nextContext().applyFilter()}),n.\u0275\u0275template(1,he,1,6,"pbi-alert",2),n.\u0275\u0275elementStart(2,"fieldset",3),n.\u0275\u0275element(3,"legend",4),n.\u0275\u0275elementStart(4,"div",5),n.\u0275\u0275template(5,Je,2,7,"mat-select",6),n.\u0275\u0275elementStart(6,"input",7),n.\u0275\u0275listener("ngModelChange",function(nt){return n.\u0275\u0275restoreView(_e),n.\u0275\u0275nextContext().vm.itemCount=nt})("input",function(nt){return n.\u0275\u0275restoreView(_e),n.\u0275\u0275nextContext().onInputEvent(nt)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"fieldset",8),n.\u0275\u0275element(8,"legend",9),n.\u0275\u0275elementStart(9,"div",10),n.\u0275\u0275listener("dropHandler",function(){return n.\u0275\u0275restoreView(_e),n.\u0275\u0275nextContext().dropFilterTarget()})("dropAction",function(){return n.\u0275\u0275restoreView(_e),n.\u0275\u0275nextContext().getDropAction()})("drop",function(nt){return n.\u0275\u0275restoreView(_e),n.\u0275\u0275nextContext().drop(nt)}),n.\u0275\u0275template(10,ue,5,9,"div",11),n.\u0275\u0275template(11,ve,1,0,"div",12),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(12,Me,1,1,"button",13),n.\u0275\u0275elementEnd()}if(2&Fe){var Oe=n.\u0275\u0275nextContext();n.\u0275\u0275property("formGroup",Oe.topNFilterForm)("ngClass",n.\u0275\u0275pureFunction1(24,we,Oe.viewModel.isInvalidCardType()))("ngStyle",n.\u0275\u0275pureFunction1(26,$e,Oe.viewModel.fontSize)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Oe.viewModel.isInvalidCardType()),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",Oe.viewModel.isInvalidCardType()),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",Oe.vm.targetType),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("filterInputWarningBorder",Oe.vm.showItemCountInputWarning),n.\u0275\u0275propertyInterpolate("placeholder",Oe.viewModel.getInputPlaceholder()),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction3(28,Ze,Oe.viewModel.inputBoxBackgroundColor,Oe.viewModel.inputBoxForegroundColor,Oe.viewModel.inputBoxBorderColor))("ngModel",Oe.vm.itemCount),n.\u0275\u0275attribute("aria-label",Oe.topNEditAriaLabel)("aria-valuemin",Oe.topNMinValue)("aria-valuemax",Oe.topNMaxValue)("aria-invalid",Oe.ariaInvalid),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",Oe.viewModel.isInvalidCardType()),n.\u0275\u0275advance(2),n.\u0275\u0275classProp("filterInputWarningBorder",Oe.vm.showOrderByFieldWarning),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(32,et,Oe.vm.orderByDisplayName))("ngStyle",n.\u0275\u0275pureFunction3(34,Ze,Oe.viewModel.inputBoxBackgroundColor,Oe.viewModel.inputBoxForegroundColor,Oe.viewModel.inputBoxBorderColor))("drop",Oe.dropConfig),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Oe.vm.orderByDisplayName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!Oe.vm.orderByDisplayName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!Oe.isApplyAllOnForThisFilter())}}var dt=function(){function Fe(be,_e,Oe,Xe,nt,ht,bt,Ft,ke,Ae,Le,Ve,tt,lt,de,te){this.aggrOps=be,this.conceptualSchemaProxy=_e,this.contextActivityService=Oe,this.dataSources=Xe,this.displayNameService=nt,this.dragDataService=ht,this.dropdown=bt,this.eventBridge=Ft,this.explorationNavigation=ke,this.featureSwitchService=Ae,this.localizationService=Le,this.ngZone=Ve,this.promiseFactory=tt,this.viewModeState=lt,this.visualAuthoring=de,this.visualPlugin=te,this.onFilterChanged=new n.EventEmitter,this.topNMaxValue=9999999,this.topNMinValue=1,this.ariaInvalid=!1}return Fe.prototype.ngOnInit=function(){var be=this;this.topNFilterForm=new f.cw({targetType:new f.NI,itemCount:new f.NI}),this.topNInteropForm=new i.h(this.topNFilterForm),this.ngZone.run(function(){return be.onInitImpl()}),this.topNEditAriaLabel=this.localizationService.get("Top_N_Edit_Aria_Label")},Fe.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},Object.defineProperty(Fe.prototype,"isEditMode",{get:function(){return 1===this.viewModeState.getMode()},enumerable:!1,configurable:!0}),Fe.prototype.applyFilter=function(be){return(0,e.mG)(this,void 0,void 0,function(){var _e,Oe,Xe,nt;return(0,e.Jh)(this,function(ht){switch(ht.label){case 0:return this.canApplyFilter()?(document.activeElement.blur(),this.viewModel.contract.type=D.TopN,_e={fieldBeingFiltered:this.viewModel.contract.expression,isTop:this.vm.targetType.type===d.Top,itemCount:this.vm.itemCount,orderByField:this.vm.orderByField},this.vm.canApplyPendingClear()?(this.visualAuthoring.updateFilter(this.viewModel.getFilterContainerScope(),this.viewModel.contract,void 0),Oe=!0,[3,3]):[3,1]):[2];case 1:return[4,this.visualAuthoring.updateTopNFilter(this.viewModel.visualContainer,_e,this.viewModel.getFilterContainerScope(),this.viewModel.contract,this.viewModel.isInOutspacePane,be)];case 2:Oe=ht.sent(),ht.label=3;case 3:return Oe&&(Xe=void 0,this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Xe=p.createChangeFilterActivity(this.contextActivityService,"Top N Filter")),nt={filter:this.viewModel.contract,changeType:2,scope:this.viewModel.getFilterContainerScope(),changeFilterActivity:Xe},this.viewModel.useDefaultFilter=!1,this.updateRestatement(),this.topNInteropForm.setPristine(),this.onFilterChanged.emit(nt),Xe&&Xe.resolve()),[2]}})})},Fe.prototype.canApplyFilter=function(){return this.checkDisabled(),!this.viewModel.isInvalidCardType()&&this.vm&&this.vm.canApplyPendingClear()||this.vm.itemCount>0&&null!=this.vm.orderByField&&this.topNInteropForm.isDirty()&&this.topNInteropForm.isValid()},Fe.prototype.dropFilterTarget=function(){var be=this.dragDataService.getDragContext();!be||!be.field||this.dropField(be.field)},Fe.prototype.drop=function(be){var _e=powerbi.explore.helpers.getModernFieldListExpr(be);!_e||this.dropField(_e)},Fe.prototype.dropField=function(be){var _e=this,Oe=this.dataSources.get();this.conceptualSchemaProxy.get(Oe).then(function(Xe){var nt=S.isMeasure(be)?be:h.aggregate(be,_e.aggrOps.defaultAggregate(be,Xe,!0));_e.isValidOrderByExpr(nt,Xe)&&_e.ngZone.run(function(){c(_e.vm,nt,Xe,_e.displayNameService,_e.localizationService,_e.aggrOps)&&_e.topNInteropForm.setDirty()}),_e.isApplyAllOnForThisFilter()&&(_e.vm.clearOrderByFieldWarning(),p.notifyBufferedFilterChanges(_e.eventBridge,_e.viewModel.getFilterContainerScope().scopeType,D.TopN,_e.viewModel.id,_e.canApplyFilter()))})},Fe.prototype.getDropAction=function(){return(0,e.mG)(this,void 0,void 0,function(){var be,_e,Oe,Xe,nt,ht;return(0,e.Jh)(this,function(bt){switch(bt.label){case 0:return be=this.promiseFactory.defer(),_e=0,this.viewModel.isInvalidCardType()?[3,2]:(Oe=this.dragDataService.getDragContext())&&Oe.field?(Xe=Oe.field,nt=this.dataSources.get(),[4,this.conceptualSchemaProxy.get(nt)]):[3,2];case 1:ht=bt.sent(),this.isValidOrderByExpr(Xe,ht)&&!S.isFromVariation(Xe)&&(_e=1),bt.label=2;case 2:return be.resolve(_e),[2,be.promise]}})})},Fe.prototype.removeOrderBy=function(){(function(Fe){Fe.orderByField=null,Fe.availableAggregates=null,Fe.selectedAggregate=null,Fe.orderByDisplayName=null})(this.vm),this.topNInteropForm.setDirty(),this.isApplyAllOnForThisFilter()&&p.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,D.TopN,this.viewModel.id,this.canApplyFilter())},Fe.prototype.selectAggregate=function(be){var _e=this;if(be!==this.vm.selectedAggregate){var Oe=this.dataSources.get();this.conceptualSchemaProxy.get(Oe).then(function(Xe){(function(Fe,be,_e,Oe,Xe){return Fe.selectedAggregate!==be&&(Fe.orderByField=b.setAggregate(Fe.orderByField,be),Fe.selectedAggregate=be,x(Fe),Fe.orderByDisplayName=Oe.getDisplayName(Fe.orderByField,_e,null,null,null,{includeVariationSource:!0}),!0)})(_e.vm,be,Xe,_e.displayNameService)&&(_e.topNInteropForm.setDirty(),_e.isApplyAllOnForThisFilter()&&p.notifyBufferedFilterChanges(_e.eventBridge,_e.viewModel.getFilterContainerScope().scopeType,D.TopN,_e.viewModel.id,_e.canApplyFilter()))})}},Fe.prototype.showContextMenu=function(be){var _e=this,Oe={anchorElement:$(be.currentTarget)};this.dropdown.showContextMenu(this.vm.availableAggregates,void 0,function(Xe){return _e.selectAggregate(Xe.aggregate)},!1,void 0,void 0,!0,Oe)},Fe.prototype.onInputEvent=function(be){this.isApplyAllOnForThisFilter()&&isFinite(be.data)&&(this.vm.updateItemCountInputWarning(),p.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,D.TopN,this.viewModel.id,this.canApplyFilter())),this.ariaInvalid=!this.topNInteropForm.isValid()},Fe.prototype.onTargetSelectionChange=function(be){this.isApplyAllOnForThisFilter()&&p.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,D.TopN,this.viewModel.id,this.canApplyFilter())},Fe.prototype.isApplyAllOnForThisFilter=function(){var be=this.viewModeState.getConfig().displayOptions.enableMobileFilters;return p.isApplyAllEnabled(this.viewModel.isInOutspacePane||be,this.explorationNavigation)},Fe.prototype.onApplyAllClicked=function(be){this.isApplyAllOnForThisFilter()&&(be.idsInError?this.vm.setInitialInputWarningStates(be.idsInError,this.viewModel.id):this.applyFilter(be.undoRedoActionId),this.vm.hasPendingClear=!1)},Fe.prototype.onInitImpl=function(){var be=this;this.initializeViewModel(this.viewModel.contract),this.checkDisabled(),this.dropConfig={accept:"field"},this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(powerbi.explore.services.events.filterContainerChanged,function(_e,Oe){return be.onFilterContainerChanged(Oe)}).subscribe(powerbi.explore.services.events.applyAllClicked,function(_e,Oe){return be.onApplyAllClicked(Oe)}).subscribe(powerbi.explore.services.events.explorationSlowDataSourceSettingsLoaded,function(_e,Oe){return be.ngZone.run(function(){Oe.isApplyAllButtonEnabledChanged&&(be.vm.setInitialInputWarningStates(),be.vm.hasPendingClear=!1)})}).subscribe(K.topNFilterOrderByUpdate,function(_e,Oe){return be.onTopNFilterValueUpdate(Oe)})},Fe.prototype.checkDisabled=function(){var be=this,_e=this.viewModel.getFilterContainerScope().container;this.viewModel.cardType.invalid=this.isApplyAllOnForThisFilter()?_.filter(_e.filters,function(Oe){return Oe&&Oe.type===D.TopN}).length>1:_.some(_e.filters,function(Oe){return Oe&&Oe!==be.viewModel.contract&&N.extractParametersFromFilter(Oe.filter)})},Fe.prototype.initializeViewModel=function(be){var _e=this,Oe=this.dataSources.get();this.conceptualSchemaProxy.get(Oe).then(function(Xe){var nt=be&&be.filter&&N.extractParametersFromFilter(be.filter);_e.vm=function(Fe,be,_e,Oe,Xe){var nt=!Fe||Fe.isTop?d.Top:d.Bottom,ht=function(Fe){return[{type:d.Top,text:Fe.get("Top")},{type:d.Bottom,text:Fe.get("Bottom")}]}(_e),bt=new P(ht,_.find(ht,function(Ft){return Ft.type===nt}),Fe&&Fe.itemCount);return Fe&&c(bt,Fe.orderByField,be,Oe,_e,Xe),bt}(nt,Xe,_e.localizationService,_e.displayNameService,_e.aggrOps),_e.updateRestatement(),_e.viewModel.updateFilterProperties(Xe,_e.visualPlugin,_e.aggrOps),_e.viewModel.updateViewState()})},Fe.prototype.isValidOrderByExpr=function(be,_e){var Oe=m.asFieldPattern(be,_e);return!!(S.isMeasure(be)||oe.getProperty(Oe)||Oe.hierarchyLevel)},Fe.prototype.onTopNFilterValueUpdate=function(be){var _e=this,Oe=be.filterViewModel,Xe=be.orderByField;if(Oe&&Oe.contract===this.viewModel.contract){var nt=this.dataSources.get();this.conceptualSchemaProxy.get(nt).then(function(ht){_e.isValidOrderByExpr(Xe,ht)&&c(_e.vm,Xe,ht,_e.displayNameService,_e.localizationService,_e.aggrOps)&&_e.topNInteropForm.setDirty()})}},Fe.prototype.onFilterContainerChanged=function(be){be.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(be.changeType,10)?this.onFilterClear(be):be.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(be.changeType,2)&&this.initializeViewModel(be.filter),this.checkDisabled()},Fe.prototype.onFilterClear=function(be){this.isApplyAllOnForThisFilter()?(this.vm.hasPendingClear=!0,this.topNInteropForm.setDirty(),this.vm.setInitialInputWarningStates(),this.vm.itemCount=void 0,this.removeOrderBy()):this.initializeViewModel(be.filter)},Fe.prototype.updateRestatement=function(){this.viewModel.setRestatement(this.vm.getRestatement(this.localizationService))},Fe.\u0275fac=function(_e){return new(_e||Fe)(n.\u0275\u0275directiveInject(T.C),n.\u0275\u0275directiveInject(v.i),n.\u0275\u0275directiveInject(g.r),n.\u0275\u0275directiveInject(r.D),n.\u0275\u0275directiveInject(u.O),n.\u0275\u0275directiveInject(A.x),n.\u0275\u0275directiveInject(W.V),n.\u0275\u0275directiveInject(C.J),n.\u0275\u0275directiveInject(F.z),n.\u0275\u0275directiveInject(k.vZ),n.\u0275\u0275directiveInject(R.o),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(M.t),n.\u0275\u0275directiveInject(G.kc),n.\u0275\u0275directiveInject(le.$),n.\u0275\u0275directiveInject(ge.D))},Fe.\u0275cmp=n.\u0275\u0275defineComponent({type:Fe,selectors:[["top-n-filter"]],inputs:{viewModel:"viewModel"},outputs:{onFilterChanged:"onFilterChanged"},decls:1,vars:1,consts:[["class","topNFilterModern",3,"formGroup","ngClass","ngStyle","ngSubmit",4,"ngIf"],[1,"topNFilterModern",3,"formGroup","ngClass","ngStyle","ngSubmit"],["class","pbi-alert-reset",3,"ngStyle","kind","messageWarning",4,"ngIf"],[1,"filterOptions",3,"disabled"],["id","TopNFilter_header","localize","ShowItems"],[1,"topNSelector","topNInputArea","flex"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","aria-labelledby","TopNFilter_header","class","item-fill topNInputBox pbi-modern-select","formControlName","targetType","panelClass","pbi-modern-select-panel themeableElement","disableOptionCentering","true",3,"ngStyle","ngModel","selectionChange","ngModelChange",4,"ngIf"],["pattern","^[1-9][0-9]{0,6}$","formControlName","itemCount","type","number","inputmode","numeric",1,"item-fill","topNInputBox","topNNumber","pbi-modern-input",3,"ngStyle","ngModel","placeholder","ngModelChange","input"],[1,"orderBy",3,"disabled"],["localize","TopNFilter_Value"],[1,"topNInputArea","ui-droppable","dropzone","topNInputBox",3,"ngClass","ngStyle","drop","dropHandler","dropAction"],["class","flex orderByPill",3,"ngStyle",4,"ngIf"],["class","dragHereWatermark trimmedTextWithEllipsis","localize","FieldDropZone_AddFields",4,"ngIf"],["type","submit","class","applyFilter smallFontSize","localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",3,"disabled",4,"ngIf"],[1,"pbi-alert-reset",3,"ngStyle","kind","messageWarning"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","aria-labelledby","TopNFilter_header","formControlName","targetType","panelClass","pbi-modern-select-panel themeableElement","disableOptionCentering","true",1,"item-fill","topNInputBox","pbi-modern-select",3,"ngStyle","ngModel","selectionChange","ngModelChange"],[3,"value","ngStyle",4,"ngFor","ngForOf"],[3,"value","ngStyle"],[1,"flex","orderByPill",3,"ngStyle"],[1,"displayName","trimmedTextWithEllipsis","item-fill",3,"tabindex"],["class","fieldWellIcon dropDown item-auto glyphicon pbi-glyph-chevrondownsmall glyph-mini","type","button",3,"click",4,"ngIf"],["localizeTooltip","FieldWell_Remove","class","delete glyphicon pbi-glyph-close glyph-micro item-auto","type","button",3,"click",4,"ngIf"],["type","button",1,"fieldWellIcon","dropDown","item-auto","glyphicon","pbi-glyph-chevrondownsmall","glyph-mini",3,"click"],["localizeTooltip","FieldWell_Remove","type","button",1,"delete","glyphicon","pbi-glyph-close","glyph-micro","item-auto",3,"click"],["localize","FieldDropZone_AddFields",1,"dragHereWatermark","trimmedTextWithEllipsis"],["type","submit","localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",1,"applyFilter","smallFontSize",3,"disabled"]],template:function(_e,Oe){1&_e&&n.\u0275\u0275template(0,at,13,38,"form",0),2&_e&&n.\u0275\u0275property("ngIf",void 0!==Oe.vm)},directives:[re.NgIf,f._Y,f.JL,f.sg,re.NgClass,re.NgStyle,j.X,f.Fj,f.wV,f.c5,f.JJ,f.u,ie.W,Z.r,fe.gD,Q.x,re.NgForOf,J.ey,se.r],styles:[".topNFilterModern.invalid[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{border-color:var(--neutral-secondary-color, #666666);background-color:inherit}.topNFilterModern.invalid[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%], .topNFilterModern.invalid[_ngcontent-%COMP%]   .applyFilter[_ngcontent-%COMP%], .topNFilterModern.invalid[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{color:var(--neutral-secondary-color, #666666)}.topNFilterModern[_ngcontent-%COMP%]   pbi-alert[_ngcontent-%COMP%]{margin-top:8px}.topNFilterModern[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{min-width:0;border-width:0;margin:8px 0 0;padding:0}.topNFilterModern[_ngcontent-%COMP%]   .topNInputArea[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:4px}.topNFilterModern[_ngcontent-%COMP%]   .topNInputArea.dropzone[_ngcontent-%COMP%]{margin:4px 0;padding:0}.topNFilterModern[_ngcontent-%COMP%]   .topNSelector[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:4px;width:inherit}.topNFilterModern[_ngcontent-%COMP%]   .topNNumber[_ngcontent-%COMP%]{min-width:40px;-moz-appearance:textfield}.topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{box-sizing:border-box;height:28px;border:1px dashed var(--neutral-secondary-color, #666666);border-radius:4px;background-color:var(--neutral-primary-color-alt2, #4a4a4a)}.topNFilterModern[_ngcontent-%COMP%]   .dropzone.dropover[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811);border-style:dashed}.topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]{height:100%;background:var(--neutral-primary-color, #333333);border:1px solid var(--neutral-dark-color, #212121);border-radius:3px;box-sizing:border-box;color:var(--white-color, #FFF)}.topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .displayName[_ngcontent-%COMP%]{margin-left:4px;line-height:21px}.topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{height:16px;width:16px;background:0 0;flex-grow:0;color:inherit}.topNFilterModern[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{display:inline-block;width:100%;line-height:22px;margin-left:4px}.topNFilterModern[_ngcontent-%COMP%]   .removeOrderBy[_ngcontent-%COMP%]{margin:0 4px}.topNFilterModern[_ngcontent-%COMP%]   .removeOrderBy[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--neutral-secondary-alt-color2, #888888)}.topNFilterModern[_ngcontent-%COMP%]   .dropDown[_ngcontent-%COMP%]{background:transparent;color:inherit}.isInOutspacePane   .card[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .displayName[_ngcontent-%COMP%], .isInOutspacePane   .card   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .displayName[_ngcontent-%COMP%]{line-height:initial}.isInOutspacePane   .card[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .topNInputArea[_ngcontent-%COMP%], .isInOutspacePane   .card   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .topNInputArea[_ngcontent-%COMP%]{margin-bottom:0}.isInOutspacePane   .card[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%], .isInOutspacePane   .card   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{height:initial;border-radius:2px;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);color:inherit;text-align:left;padding:2px;margin-bottom:2px}.isInOutspacePane   .card[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%], .isInOutspacePane   .card   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{line-height:initial;vertical-align:middle;min-height:20px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{border-color:var(--gray-80, #B3B0AD)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%], .newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{color:var(--gray-80, #B3B0AD)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{border-color:var(--gray-60, #C8C6C4);background-color:var(--white-color, #FFF);border-radius:2px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone.dropover[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone.dropover[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]{background:var(--gray-30, #EDEBE9);border-color:var(--gray-60, #C8C6C4);border-radius:2px;color:var(--gray-180, #252423)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4)}",".exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{height:32px;background-color:var(--fluentThemeWhiteColor);border:0;padding-left:8px;margin:4px 0;flex-basis:100%}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]{border:1px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]{color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 4px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]{flex-flow:row wrap}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{visibility:hidden!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]:before, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]:before{visibility:visible!important;color:var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]{border:0;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .removeOrderBy[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .removeOrderBy[_ngcontent-%COMP%]{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   input.topNNumber[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   input.topNNumber[_ngcontent-%COMP%]{border-radius:inherit;border-bottom:1px solid var(--fluentThemeNeutralTertiaryColor);color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   input.topNNumber[_ngcontent-%COMP%]::-webkit-input-placeholder, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   input.topNNumber[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--fluentThemeNeutralSecondaryAltColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   select[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   select[_ngcontent-%COMP%]{color:var(--fluentThemeNeutralDarkColor)!important;border-radius:4px;border:1px solid var(--fluentThemeNeutralTertiaryColor);background:url(data:image/svg+xml;utf8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8%202.49707L3.93262%206.55762L3.31738%205.94238L8%201.25293L12.6826%205.94238L12.0674%206.55762L8%202.49707ZM8%2013.5029L12.0674%209.44238L12.6826%2010.0576L8%2014.7471L3.31738%2010.0576L3.93262%209.44238L8%2013.5029Z%22%20fill%3D%22%23201F1E%22%2F%3E%3C%2Fsvg%3E) center right 10px no-repeat var(--fluentThemeWhiteColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .orderBy[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .orderBy[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{padding-left:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   pbi-alert[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   pbi-alert[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-color, #201F1E)}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{padding-right:8px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .orderBy[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .orderBy[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{padding-right:8px}*[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}"]}),Fe}()},91221:function(Ee,ne,t){t.d(ne,{U:function(){return E}});var e=t(40582),n=t(76430),f=t(36119),i=powerbi.common.controllers.TransformElement,M=["*"],E=function(){function I(d,P,y){this.elementRef=d,this.platformCapabilities=P,this.ngZone=y,this.positionChange=new n.EventEmitter}return I.prototype.ngAfterViewInit=function(){this.updatePosition(this.position),this.attachHandlers&&this.updateTransformElement()},I.prototype.ngOnDestroy=function(){this.transformElement&&this.transformElement.destroy()},I.prototype.ngOnChanges=function(d){var P=!1;if(d.autoScrollSelector){var y=d.autoScrollSelector,b=y.currentValue;y.previousValue&&(this.autoScrollElement=void 0),b&&(this.autoScrollElement=$(this.elementRef.nativeElement).closest(b)),P=!d.autoScrollSelector.isFirstChange()}d.attachHandlers&&d.attachHandlers.currentValue&&!d.attachHandlers.isFirstChange()&&(P=!0),d.position&&!d.position.isFirstChange()&&this.updatePosition(d.position.currentValue),d.transformOptions&&!d.transformOptions.isFirstChange()&&(P=!0),this.attachHandlers&&P?this.updateTransformElement():this.transformElement&&!this.attachHandlers&&(this.transformElement.destroy(),this.transformElement=void 0)},I.prototype.updateTransformElement=function(){var d=(0,e.pi)((0,e.pi)({},this.transformOptions),{supportsPointerCapture:this.platformCapabilities.supportsPointerCapture,restrictDraw:this.restrictDraw});this.autoScrollElement&&(d.autoScrollParent=this.autoScrollElement),this.transformElement?this.transformElement.updateOptions(d):this.transformElement=new i($(this.elementRef.nativeElement),this.ngZone,d)},I.prototype.updatePosition=function(d){var P=[];d.angle&&P.push("rotate("+d.angle+"deg)"),P.push("translate("+d.x+"px, "+d.y+"px)"),$(this.elementRef.nativeElement).height(d.height).width(d.width).css("transform",P.join(" ")).css("zIndex",d.z),this.positionChange.emit(d)},I.\u0275fac=function(P){return new(P||I)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(f.E),n.\u0275\u0275directiveInject(n.NgZone))},I.\u0275cmp=n.\u0275\u0275defineComponent({type:I,selectors:[["transform"]],inputs:{attachHandlers:"attachHandlers",autoScrollSelector:"autoScrollSelector",position:"position",restrictDraw:"restrictDraw",transformOptions:"transformOptions"},outputs:{positionChange:"positionChange"},features:[n.\u0275\u0275NgOnChangesFeature],ngContentSelectors:M,decls:1,vars:0,template:function(P,y){1&P&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275projection(0))},styles:["[_nghost-%COMP%]{position:absolute}"]}),I}()},46622:function(Ee,ne,t){t.d(ne,{g:function(){return f}});var e=t(76430),n=t(50568),f=function(){function i(){this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/visual-calc-editor/visual-calc-editor.module#VisualCalcEditorModule",this.componentId="VisualCalcEditorComponentId"}return i.prototype.ngOnChanges=function(){this.inputArgs={input:this.input,visualContainer:this.visualContainer,detailVisual:this.detailVisual,detailVisualSpinnerActionCallback:this.detailVisualSpinnerActionCallback}},i.\u0275fac=function(E){return new(E||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["visual-calc-editor-lazy"]],inputs:{input:"input",visualContainer:"visualContainer",detailVisual:"detailVisual",detailVisualSpinnerActionCallback:"detailVisualSpinnerActionCallback"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:3,consts:[[3,"modulePath","componentId","inputArgs"]],template:function(E,I){1&E&&e.\u0275\u0275element(0,"pbi-lazy-load",0),2&E&&e.\u0275\u0275property("modulePath",I.modulePath)("componentId",I.componentId)("inputArgs",I.inputArgs)},directives:[n.R],encapsulation:2}),i}()},6334:function(Ee,ne,t){t.d(ne,{e:function(){return o}});var e=t(69104),n=t(76430),f=t(4486),i=t(71367),M=t(23580),E=t(60660),I=t(86777),d=t(59116),P=t(8422),y=t(47236),b=t(12904),a=t(60400),o=function(){function l(s,c,O,x,V,w){this.contextActivityService=s,this.eventBridge=c,this.explorationCapabilities=O,this.localizationService=x,this.lazyProvider=V,this.telemetryService=w,this.disableCopyVisualImageButton$=new e.X(!1)}return l.prototype.ngOnInit=function(){var s=this;this.lazyProvider.get("@powerbi/CopyVisualImage/copy-visual-image.module#CopyVisualImageModule","copyVisualImageService").then(function(c){s.copyVisualImageService=c,s.disableCopyVisualImageButton$.next(s.disableCopyVisualImageButton())})},l.prototype.copyVisualContainer=function(){var s,c=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"CopyVisual",source:"VisualHeader"}});this.telemetryService.logEvent(powerbi.telemetry.CopyVisualImageEntryPoint,{visualType:powerbi.explore.util.VisualContainerUtils.getVisualType(this.visual.contract),hasMetadata:!0,entryPoint:"VisualHeader"}),this.eventBridge.publishToChannel(powerbi.explore.services.events.copyVisualAsImage,{visual:this.visual,hasMetadata:!0,useModernClipboard:null===(s=this.explorationCapabilities.getCapabilities())||void 0===s?void 0:s.useModernClipboard}),c.resolve()},l.prototype.getCopyTileTitle=function(){return this.localizationService.get("CopyVisualImage_Caption")},l.prototype.getCopyTooltipTitle=function(){return this.disableCopyVisualImageButton$.value?this.localizationService.get("CopyVisualImage_NotSupported"):this.getCopyTileTitle()},l.prototype.disableCopyVisualImageButton=function(){var s=powerbi.explore.util.VisualContainerUtils.getVisualType(this.visual.contract);return!this.copyVisualImageService.canCopy(s)},l.\u0275fac=function(c){return new(c||l)(n.\u0275\u0275directiveInject(f.r),n.\u0275\u0275directiveInject(i.J),n.\u0275\u0275directiveInject(M.U),n.\u0275\u0275directiveInject(E.o),n.\u0275\u0275directiveInject(I.E),n.\u0275\u0275directiveInject(d.y0))},l.\u0275cmp=n.\u0275\u0275defineComponent({type:l,selectors:[["visual-container-copy-button"]],inputs:{visual:"visual"},decls:4,vars:7,consts:[[3,"dynamicStyle"],[1,"vcCopyBtn",3,"disabled","pbiTooltip","apply-style","click"],[1,"glyphicon","pbi-glyph-copy","glyph-small"]],template:function(c,O){1&c&&(n.\u0275\u0275elementStart(0,"visual-header-item-container",0),n.\u0275\u0275elementStart(1,"button",1),n.\u0275\u0275listener("click",function(){return O.copyVisualContainer()}),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275element(3,"i",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&c&&(n.\u0275\u0275property("dynamicStyle",O.visual.readOnlyState.headerItemContainerStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",n.\u0275\u0275pipeBind1(2,5,O.disableCopyVisualImageButton$))("pbiTooltip",O.getCopyTooltipTitle())("apply-style",O.visual.readOnlyState.headerForegroundStyle),n.\u0275\u0275attribute("aria-label",O.getCopyTileTitle()))},directives:[P.Y,y.V,b.s],pipes:[a.AsyncPipe],encapsulation:2,changeDetection:0}),l}()},62234:function(Ee,ne,t){t.d(ne,{p:function(){return b}});var e=t(76430),n=t(78838),f=t(71367),i=t(60660),M=t(60400),E=t(8422),I=t(47236),d=t(12904),P=powerbi.explore.services.events;function y(o,l){if(1&o){var s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",1),e.\u0275\u0275elementStart(1,"button",2),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275nextContext().toggleDrillDown()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&o){var c=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",c.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("pbi-glyph-drilldownenabled",c.isDrillDownEnabled),e.\u0275\u0275property("ngClass",c.visual.useStylableHeader()?"pbi-glyph-drilldowndisabled-nocircle":"pbi-glyph-drilldowndisabled")("pbiTooltip",c.title)("apply-style",c.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",c.title)}}var b=function(){function o(l,s,c){this.drill=l,this.eventBridge=s,this.localizationService=c}return o.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},o.prototype.ngOnInit=function(){var l=this;this.updateDrillState(),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(P.visualContainerChanged,function(s,c){c&&c.affectContainer(l.visual.contract)&&l.updateDrillState()}).subscribe(P.drillModeChanged,function(s,c){l.updateDrillState()})},o.prototype.updateDrillState=function(){if(!this.visual)return this.canDrillDown=!1,void(this.isDrillDownEnabled=!1);var l=this.visual.contract,s=this.drill;this.canDrillDown=a(1,s,l);var c=l.drillMode,O=!1;(1===c&&!this.canDrillDown||null!=c&&0!==c&&!a(c,s,l))&&(O=!0),O&&this.drill.setDrillMode(l,0),this.isDrillDownEnabled=s.isDrillModeEnabled(l,1),this.title=this.localizationService.get(1===this.visual.contract.drillMode?"DrillMode_ToolTip":"DrillDown_ToolTip")},o.prototype.toggleDrillDown=function(){this.isDrillDownEnabled=!1===this.isDrillDownEnabled,this.drill.setDrillMode(this.visual.contract,this.isDrillDownEnabled?1:0)},o.\u0275fac=function(s){return new(s||o)(e.\u0275\u0275directiveInject(n.s),e.\u0275\u0275directiveInject(f.J),e.\u0275\u0275directiveInject(i.o))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["visual-container-drill-toggle"]],inputs:{visual:"visual"},decls:1,vars:1,consts:[[3,"dynamicStyle",4,"ngIf"],[3,"dynamicStyle"],[1,"drillDownLevelGrouped","glyphicon","glyph-small",3,"ngClass","pbiTooltip","apply-style","click"]],template:function(s,c){1&s&&e.\u0275\u0275template(0,y,2,7,"visual-header-item-container",0),2&s&&e.\u0275\u0275property("ngIf",c.canDrillDown)},directives:[M.NgIf,E.Y,M.NgClass,I.V,d.s],encapsulation:2}),o}();function a(o,l,s){switch(o){case 1:return l.canDrillByDirection(s,2)||l.canDrillByDirection(s,4)||l.canDrillByDirection(s,1);case 3:return l.canDrillthrough(s);case 2:return l.canDrillToDetails(s);case 0:return!0;default:return!1}}},37609:function(Ee,ne,t){t.d(ne,{c:function(){return g}});var e=t(76430),n=t(4486),f=t(78838),i=t(71367),M=t(60660),E=t(59804),I=t(80815),d=t(60400),P=t(8422),y=t(9784),b=t(12904),a=t(80763),o=t(47236),l=t(62234),s=powerbi.explore.services.events,c=powerbi.explore.viewModels.ViewModelFactory;function O(r,u){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"option",6),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&r){var C=u.$implicit,F=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngValue",C.name)("apply-style",F.visual.readOnlyState.headerBackgroundStyle),e.\u0275\u0275attribute("label",C.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(C.name)}}function x(r,u){if(1&r){var C=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",2),e.\u0275\u0275element(1,"span",3),e.\u0275\u0275elementStart(2,"select",4),e.\u0275\u0275listener("ngModelChange",function(W){return e.\u0275\u0275restoreView(C),e.\u0275\u0275nextContext().activeRoleName=W})("ngModelChange",function(){return e.\u0275\u0275restoreView(C),e.\u0275\u0275nextContext().onRoleChanged()})("click",function(W){return W.stopPropagation()})("mousedown",function(W){return e.\u0275\u0275restoreView(C),e.\u0275\u0275nextContext().handleRoleNameMouseDown(W)}),e.\u0275\u0275template(3,O,3,4,"ng-container",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&r){var F=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",F.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("apply-style",F.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",F.activeRoleName)("apply-style",F.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",F.drillableRoles)("ngForTrackBy",F.role&&F.role.name)}}function V(r,u){if(1&r){var C=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",2),e.\u0275\u0275elementStart(1,"button",7),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(C),e.\u0275\u0275nextContext().drillUp()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&r){var F=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",F.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("drillDownLevelGrouped glyphicon glyph-small ",F.visual.useStylableHeader()?"pbi-glyph-drillup-nocircle":"pbi-glyph-drillup",""),e.\u0275\u0275property("pbiTooltip",F.drillUpTitle())("disabled",!F.canDrillUp)("apply-style",F.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",F.drillUpTitle())}}function w(r,u){if(1&r&&e.\u0275\u0275element(0,"visual-container-drill-toggle",8),2&r){var C=e.\u0275\u0275nextContext();e.\u0275\u0275property("visual",C.visual)}}function T(r,u){if(1&r){var C=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",2),e.\u0275\u0275elementStart(1,"button",9),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(C),e.\u0275\u0275nextContext().drillDownLevel()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&r){var F=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",F.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("drillDownLevelGrouped glyphicon glyph-small ",F.visual.useStylableHeader()?"pbi-glyph-expand-nocircle":"pbi-glyph-expand",""),e.\u0275\u0275property("pbiTooltip",F.drillLevelTitle())("disabled",!F.canDrillDownWithoutCurrentGroup)("apply-style",F.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",F.drillLevelTitle())}}function v(r,u){if(1&r){var C=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",2),e.\u0275\u0275elementStart(1,"button",7),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(C),e.\u0275\u0275nextContext().drillDownLevelGrouped()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&r){var F=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",F.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("drillDownLevelGrouped glyphicon glyph-small ",F.visual.useStylableHeader()?"pbi-glyph-inline-drill-nocircle":"pbi-glyph-inline-drill",""),e.\u0275\u0275property("pbiTooltip",F.drillLevelGroupedTitle())("disabled",!F.canDrillDownWithCurrentGroup)("apply-style",F.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",F.drillLevelGroupedTitle())}}var g=function(){function r(u,C,F,A,W,k){this.contextActivityService=u,this.drill=C,this.eventBridge=F,this.localizationService=A,this.visualAuthoring=W,this.visualPlugin=k,this.drillableRoles=[]}return r.prototype.ngOnInit=function(){var u=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(s.visualContainerChanged,function(C,F){u.updateDrillableRoles(),u.updateDrillMode(F)}).subscribe(s.drillModeChanged,function(C,F){u.updateDrillModeCore()}),this.updateDrillableRoles(),this.updateDrillModeCore()},r.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},r.prototype.handleRoleNameMouseDown=function(u){if(jsCommon.BrowserUtils.isFirefox()||jsCommon.BrowserUtils.isInternetExplorer11()){u.preventDefault();var C=1+this.drillableRoles.indexOf(this.activeRole);C>=this.drillableRoles.length&&(C=0),this.activeRole=this.drillableRoles[C],this.onRoleChanged()}},Object.defineProperty(r.prototype,"activeRoleName",{get:function(){return this.activeRole.name},set:function(C){var F=_.find(this.drillableRoles,function(A){return A.name===C});F&&(this.activeRole=F)},enumerable:!1,configurable:!0}),r.prototype.drillUp=function(){var u=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"DrillUp",source:"VisualHeader"}});this.visualAuthoring.drillUp(this.getActiveRoleName(),this.visual.contract),u.resolve()},r.prototype.drillDownLevel=function(){var u=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"DrillDown",source:"VisualHeader"}});this.visualAuthoring.drillDownLevel(this.getActiveRoleName(),this.visual.contract,3),u.resolve()},r.prototype.drillDownLevelGrouped=function(){var u=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"DrillDownLevelGrouped",source:"VisualHeader"}});this.visualAuthoring.drillDownLevel(this.getActiveRoleName(),this.visual.contract,2),u.resolve()},r.prototype.canDrill=function(){var u=this.visualPlugin.capabilities(this.visual.contract.config.singleVisual.visualType);return!(u&&u.drilldown&&u.drilldown.suppresDrillOperations)&&(this.canDrillDownWithCurrentGroup||this.canDrillDownWithoutCurrentGroup||this.canDrillUp)},r.prototype.canDrillOnMoreThanOneRole=function(){return this.drillableRoles.length>1},r.prototype.onRoleChanged=function(){this.updateDrillModeCore()},r.prototype.drillUpTitle=function(){return this.localizationService.get("DrillUp_ToolTip")},r.prototype.drillLevelTitle=function(){return this.localizationService.get(this.canDrillDownWithCurrentGroup||this.canDrillDownWithoutCurrentGroup?"DrillDownLevel_ToolTip":"DrillDownLevelDisabled_ToolTip")},r.prototype.drillLevelGroupedTitle=function(){return this.localizationService.get(this.canDrillDownWithCurrentGroup||this.canDrillDownWithoutCurrentGroup?"DrillDownLevelGrouped_ToolTip":"DrillDownLevelDisabled_ToolTip")},r.prototype.updateDrillMode=function(u){u&&u.affectContainer(this.visual.contract)&&this.updateDrillModeCore()},r.prototype.updateDrillableRoles=function(){this.drillableRoles=[];var u=this.visualPlugin.capabilities(this.visual.contract.config.singleVisual.visualType);if(u){var C=u.dataRoles;if(C)for(var F=0,A=C;F<A.length;F++){var W=A[F],k=W.name;(this.canDrillDownWithCurrentGroupOnRole(k)||this.canDrillDownWithoutCurrentGroupOnRole(k)||this.canDrillUpOnRole(k))&&this.drillableRoles.push({name:k,value:c.getDisplayName(W.displayName)})}}if(_.isEmpty(this.drillableRoles))this.activeRole=void 0;else{var R=this.getActiveRoleName();_.find(this.drillableRoles,function(G){return R===G.name})||(this.activeRole=this.drillableRoles[0])}},r.prototype.canDrillDownWithCurrentGroupOnRole=function(u){return this.drill.canDrillByDirection(this.visual.contract,2,u)},r.prototype.canDrillDownWithoutCurrentGroupOnRole=function(u){return this.drill.canDrillByDirection(this.visual.contract,4,u)},r.prototype.canDrillUpOnRole=function(u){return this.drill.canDrillByDirection(this.visual.contract,1,u)},r.prototype.getActiveRoleName=function(){return this.activeRole?this.activeRole.name:null},r.prototype.updateDrillModeCore=function(){var u=this.getActiveRoleName();this.canDrillDownWithCurrentGroup=this.canDrillDownWithCurrentGroupOnRole(u),this.canDrillDownWithoutCurrentGroup=this.canDrillDownWithoutCurrentGroupOnRole(u),this.canDrillUp=this.canDrillUpOnRole(u)},r.\u0275fac=function(C){return new(C||r)(e.\u0275\u0275directiveInject(n.r),e.\u0275\u0275directiveInject(f.s),e.\u0275\u0275directiveInject(i.J),e.\u0275\u0275directiveInject(M.o),e.\u0275\u0275directiveInject(E.$),e.\u0275\u0275directiveInject(I.D))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["visual-container-drill"]],inputs:{visual:"visual"},decls:5,vars:5,consts:[[3,"dynamicStyle",4,"ngIf"],["class","optionSection",3,"visual",4,"ngIf"],[3,"dynamicStyle"],["localize","Drill_On","id","drillOnText",3,"apply-style"],["aria-labelledby","drillOnText",3,"ngModel","apply-style","ngModelChange","click","mousedown"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngValue","apply-style"],[3,"pbiTooltip","disabled","apply-style","click"],[1,"optionSection",3,"visual"],["data-automation-type","drillDownLevelButton",3,"pbiTooltip","disabled","apply-style","click"]],template:function(C,F){1&C&&(e.\u0275\u0275template(0,x,4,6,"visual-header-item-container",0),e.\u0275\u0275template(1,V,2,8,"visual-header-item-container",0),e.\u0275\u0275template(2,w,1,1,"visual-container-drill-toggle",1),e.\u0275\u0275template(3,T,2,8,"visual-header-item-container",0),e.\u0275\u0275template(4,v,2,8,"visual-header-item-container",0)),2&C&&(e.\u0275\u0275property("ngIf",F.visual.isHeaderItemVisible("drillRoleSelector")&&F.canDrillOnMoreThanOneRole()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",F.visual.isHeaderItemVisible("drillUpButton")&&F.canDrill()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",F.visual.useStylableHeader()&&F.visual.isHeaderItemVisible("drillToggleButton")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",F.visual.isHeaderItemVisible("drillDownLevelButton")&&F.canDrill()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",F.visual.isHeaderItemVisible("drillDownExpandButton")&&F.canDrill()))},directives:[d.NgIf,P.Y,y.X,b.s,a.EJ,a.JJ,a.On,d.NgForOf,a.YN,a.Kr,o.V,l.p],encapsulation:2}),r}()},83685:function(Ee,ne,t){t.d(ne,{m:function(){return T}});var e=t(26334),n=t(99864),f=t(97894),i=t(16524),M=t(51369),E=t(46521),I=t(69475),d=t(76430),P=t(60660),y=t(16035),b=t(71367),a=t(7508),o=t(86269),l=t(60400),s=t(8422),c=t(12904),O=t(47236),x=powerbi.explore.services.events,V=powerbi.explore.util.VisualContainerUtils;function w(v,g){if(1&v){var r=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"visual-header-item-container",1),d.\u0275\u0275elementStart(1,"button",2,3),d.\u0275\u0275listener("click",function(F){d.\u0275\u0275restoreView(r);var A=d.\u0275\u0275reference(2);return d.\u0275\u0275nextContext().handleMouseClick(A,F)})("mouseenter",function(){d.\u0275\u0275restoreView(r);var F=d.\u0275\u0275reference(2);return d.\u0275\u0275nextContext().handleMouseEnter(F)})("mouseleave",function(F){return d.\u0275\u0275restoreView(r),d.\u0275\u0275nextContext().handleMouseLeave(F)}),d.\u0275\u0275element(3,"i",4),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&v){var u=d.\u0275\u0275nextContext();d.\u0275\u0275property("dynamicStyle",u.visual.readOnlyState.headerItemContainerStyle),d.\u0275\u0275advance(1),d.\u0275\u0275property("apply-style",u.visual.readOnlyState.headerForegroundStyle)("pbiTooltip",u.pinTileTitle),d.\u0275\u0275attribute("aria-label",u.ariaLabel)}}var T=function(){function v(g,r,u,C,F,A,W,k){this.el=g,this.localizationService=r,this.visualPluginOps=u,this.canvasScaleService=C,this.overlay=F,this.injector=A,this.componentFactoryResolver=W,this.eventBridge=k,this.close$=new e.xQ,this.showTimeout=500}return v.prototype.ngOnDestroy=function(){this.clearShowRestatementTimeout(),null!=this.subscriptionManager&&this.subscriptionManager.unsubscribeAll(),this.closeStickyOverlay()},v.prototype.ngOnInit=function(){var g=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(x.visibilityChanged,function(){g.closeStickyOverlay()}),this.ariaLabel=this.localizationService.get("FilterRestatementVisual_Button_Label"),this.pinTileTitle=this.localizationService.get("FilterRestatementVisual_Button_Label")},v.prototype.showButton=function(){var g=this.visual.isHeaderItemVisible("filterRestatementButton"),r=V.getVisualType(this.visual.contract),u=this.visualPluginOps.isQueryVisual(r);return g&&u},v.prototype.handleMouseClick=function(g,r){(null==this.overlayRef||!this.sticky)&&(this.clearShowRestatementTimeout(),this.showRestatement(g,0===r.clientX&&0===r.clientY,!0))},v.prototype.handleMouseEnter=function(g){this.setShowRestatementTimeout(g)},v.prototype.handleMouseLeave=function(g){var r,u,C;this.clearShowRestatementTimeout();var F=null===(C=null===(u=null===(r=this.overlayRef)||void 0===r?void 0:r.componentRef)||void 0===u?void 0:u.location)||void 0===C?void 0:C.nativeElement;(null==F?void 0:F.contains(g.relatedTarget))||this.close$.next(!1)},v.prototype.closeStickyOverlay=function(){this.sticky&&(this.sticky=!1,this.close$.next(!1))},v.prototype.listenForHideIntent=function(){var g=this,r=this.close$.pipe((0,n.b)(1e3)).subscribe(function(u){!u&&!g.sticky&&(g.overlayRef&&(g.overlayRef.close(),g.overlayRef=void 0),r.unsubscribe(),r=null)})},v.prototype.setShowRestatementTimeout=function(g){var r=this;null!=this.showTimer||null!=this.overlayRef||(this.showTimer=setTimeout(function(){r.showTimer=void 0,r.showRestatement(g)},this.showTimeout))},v.prototype.clearShowRestatementTimeout=function(){this.showTimer&&(clearTimeout(this.showTimer),this.showTimer=void 0)},v.prototype.showRestatement=function(g,r,u){var C=this;if(null==this.overlayRef||!this.sticky){var F=this.overlayRef;this.sticky=u;var A=this.injector;if(!A)throw new Error("Parent element injector undefined when creating filter restatement overlay");var W={visual:this.visual.contract,options:this.options?this.options:{hideExistingOverlays:!0}},k=this.overlay.position().flexibleConnectedTo(g).withPositions([(0,E.Oq)(-4,0),(0,E.hT)(4,0),(0,E.f6)(4,0),(0,E.w3)(-4,0)]).withFlexibleDimensions(!0).withPush(!0).withGrowAfterOpen(!0);this.overlayRef=this.overlay.open({component:I.k,data:W,options:{positionStrategy:k,hasBackdrop:u,disposeOnNavigation:!0,backdropClass:"cdk-overlay-transparent-backdrop"},focusElementOnClose:r?g:null,hasCaret:!1,injector:A,componentFactoryResolver:this.componentFactoryResolver,closeOnBackdropClick:u}),u&&this.overlayRef.onClose.pipe((0,f.q)(1)).subscribe(function(){C.overlayRef=void 0,C.sticky=!1}),this.overlayRef.isPointerWithin$&&this.overlayRef.isPointerWithin$.pipe((0,i.T)(1),(0,M.x)()).subscribe(function(R){C.close$.next(R)}),this.listenForHideIntent(),F&&F.close()}},v.\u0275fac=function(r){return new(r||v)(d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(P.o),d.\u0275\u0275directiveInject(y.f),d.\u0275\u0275directiveInject(a.Z),d.\u0275\u0275directiveInject(o._c),d.\u0275\u0275directiveInject(d.Injector),d.\u0275\u0275directiveInject(d.ComponentFactoryResolver),d.\u0275\u0275directiveInject(b.J))},v.\u0275cmp=d.\u0275\u0275defineComponent({type:v,selectors:[["visual-container-filter-restatement-button"]],inputs:{visual:"visual",options:"options"},decls:1,vars:1,consts:[[3,"dynamicStyle",4,"ngIf"],[3,"dynamicStyle"],["cdkmonitorelementfocus","","aria-haspopup","true","aria-expanded","false",1,"vcFilterRestatementBtn",3,"apply-style","pbiTooltip","click","mouseenter","mouseleave"],["overlayOrigin",""],[1,"glyphicon","pbi-glyph-filter","glyph-small"]],template:function(r,u){1&r&&d.\u0275\u0275template(0,w,4,4,"visual-header-item-container",0),2&r&&d.\u0275\u0275property("ngIf",u.showButton())},directives:[l.NgIf,s.Y,c.s,O.V],styles:[""]}),v}()},68139:function(Ee,ne,t){t.d(ne,{x:function(){return v}});var e=t(40582),n=t(97894),f=t(33162),i=t(1537),M=t(62279),E=t(46521),I=t(86269),d=t(76430),P=t(4486),y=t(44627),b=t(60660),a=t(59116),o=t(26808),l=t(61995),s=t(8422),c=t(12904),O=t(47236),x=t(60400),V=t(41062),w=powerbi.common.ArrowVerticalPosition;function T(g,r){if(1&g){var u=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"visual-header-item-container",0),d.\u0275\u0275elementStart(1,"button",4),d.\u0275\u0275listener("click",function(){return d.\u0275\u0275restoreView(u),d.\u0275\u0275nextContext().resetVisualContainer()}),d.\u0275\u0275element(2,"i",5),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&g){var C=d.\u0275\u0275nextContext();d.\u0275\u0275property("dynamicStyle",C.visual.readOnlyState.headerItemContainerStyle),d.\u0275\u0275advance(1),d.\u0275\u0275property("apply-style",C.visual.readOnlyState.headerForegroundStyle)("pbi-tooltip",C.resetTooltipConfig),d.\u0275\u0275attribute("aria-label",C.resetLabel)}}var v=function(){function g(r,u,C,F,A,W,k,R){this.contextActivityService=r,this.lazyScopedProviderModern=u,this.localizationService=C,this.overlay=F,this.telemetryService=A,this.injector=W,this.visibility=k,this.visualOverlayPositionService=R,this.resetLabel=this.localizationService.get("InlineExplore_ResetVisualToDefault"),this.resetTooltipConfig={tooltipArrowVerticalPosition:w.bottom,tooltipTitle:this.resetLabel,tooltipShowOnFocus:!0}}return g.prototype.getTitle=function(){return this.localizationService.get(this.isInteractive?"InlineExplore_VisualHeader_Label":"InlineExplore_VisualHeader_Label_NonInteractive")},g.prototype.handleMouseClick=function(){var r=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"PersonalizeVisual",source:"VisualHeader"}});this.isInteractive&&(this.setSpotlight(),this.showExploreMode()),r.resolve()},g.prototype.resetVisualContainer=function(){return(0,e.mG)(this,void 0,void 0,function(){var r;return(0,e.Jh)(this,function(C){switch(C.label){case 0:return r=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"PersonalizeResetVisual",source:"VisualHeader"}}),[4,this.lazyScopedProviderModern.get("persistentState")];case 1:return C.sent().resetVisualContainer(this.visual.contract),this.telemetryService.logChildEvent(this.rootTelemetryEvent,i.iD,{}),r.resolve(),[2]}})})},g.prototype.setSpotlight=function(){this.visibility.set(this.visual.contract,4)},g.prototype.showExploreMode=function(){var r=this,u=this.visualOverlayPositionService.flexibleConnectedTo(this.visual.contract).withPositions([(0,E.Zz)(4,0),(0,E.Iz)(-4,0),(0,E.J7)(4,0),(0,E.Kb)(-4,0)]).withFlexibleDimensions(!0).withPush(!0).withGrowAfterOpen(!0),C=this.telemetryService.startEvent(M.lb,{overlayType:"Main"});this.rootTelemetryEvent=C.event,this.overlay.open({component:f.i,data:{visual:this.visual.contract,rootEvent:this.rootTelemetryEvent},options:{positionStrategy:u,hasBackdrop:!0,backdropClass:I.L6},closeOnBackdropClick:!0,injector:this.injector}).onClose.pipe((0,n.q)(1)).subscribe(function(){C.resolve(),r.visibility.clearForVisualContainers([r.visual.contract])})},g.\u0275fac=function(u){return new(u||g)(d.\u0275\u0275directiveInject(P.r),d.\u0275\u0275directiveInject(y.H),d.\u0275\u0275directiveInject(b.o),d.\u0275\u0275directiveInject(I._c),d.\u0275\u0275directiveInject(a.y0),d.\u0275\u0275directiveInject(d.Injector),d.\u0275\u0275directiveInject(o.w),d.\u0275\u0275directiveInject(l.z))},g.\u0275cmp=d.\u0275\u0275defineComponent({type:g,selectors:[["visual-container-personalize-visual-button"]],inputs:{visual:"visual",isInteractive:"isInteractive",showReset:"showReset"},decls:4,vars:5,consts:[[3,"dynamicStyle"],["aria-haspopup","true","aria-expanded","false",3,"apply-style","pbiTooltip","click"],[1,"glyphicon","pbi-glyph-barchartverticaledit","glyph-small"],[3,"dynamicStyle",4,"ngIf"],[3,"apply-style","pbi-tooltip","click"],[1,"glyphicon","pbi-glyph-undo","glyph-small"]],template:function(u,C){1&u&&(d.\u0275\u0275elementStart(0,"visual-header-item-container",0),d.\u0275\u0275elementStart(1,"button",1),d.\u0275\u0275listener("click",function(){return C.handleMouseClick()}),d.\u0275\u0275element(2,"i",2),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(3,T,3,4,"visual-header-item-container",3)),2&u&&(d.\u0275\u0275property("dynamicStyle",C.visual.readOnlyState.headerItemContainerStyle),d.\u0275\u0275advance(1),d.\u0275\u0275property("apply-style",C.visual.readOnlyState.headerForegroundStyle)("pbiTooltip",C.getTitle()),d.\u0275\u0275attribute("aria-label",C.getTitle()),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",C.showReset))},directives:[s.Y,c.s,O.V,x.NgIf,V.i],encapsulation:2,changeDetection:0}),g}()},25102:function(Ee,ne,t){t.d(ne,{c:function(){return v}});var e=t(40582),n=t(60354),f=t(62340),i=t(76430),M=t(13271),E=t(80815),I=t(60660),d=t(66075),P=t(7078),y=t(5370),b=t(10883),a=t(71367),o=t(38942),l=t(40629),s=t(30224),c=t(4486),O=t(60400),x=t(8422),V=t(47236),w=t(12904);function T(g,r){if(1&g){var u=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"visual-header-item-container",1),i.\u0275\u0275elementStart(1,"button",2),i.\u0275\u0275listener("click",function(A){return i.\u0275\u0275restoreView(u),i.\u0275\u0275nextContext().pinVisualContainer(A)}),i.\u0275\u0275element(2,"i",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&g){var C=i.\u0275\u0275nextContext();i.\u0275\u0275property("dynamicStyle",C.visual.readOnlyState.headerItemContainerStyle)("hidden",!C.showPin()),i.\u0275\u0275advance(1),i.\u0275\u0275property("disabled",C.disablePin)("pbiTooltip",C.getPinTileTitle())("apply-style",C.visual.readOnlyState.headerForegroundStyle),i.\u0275\u0275attribute("aria-label",C.getPinTileTitle())}}var v=function(){function g(r,u,C,F,A,W,k,R,G,le,ge,re,j){this.resourceLoader=r,this.localizationService=u,this.explorationNavigation=C,this.filterGenerator=F,this.conceptualSchemaProxy=A,this.explorationSerializer=W,this.promiseFactory=k,this.dataSources=R,this.viewModeState=G,this.visualPlugin=le,this.pinVisual=ge,this.eventBridge=re,this.contextActivityService=j}return g.prototype.pinVisualContainer=function(r){return(0,e.mG)(this,void 0,void 0,function(){var u,C,F,W=this;return(0,e.Jh)(this,function(k){switch(k.label){case 0:u=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"PinVisual",source:"VisualHeader"}}),C=function(){var ge,G=W.dataSources.get(),le=W.visual;return W.conceptualSchemaProxy.get(G).then(function(re){ge=W.visual.hostServices.getFilters(W.filterGenerator,re)}).then(function(){return(0,f.H)(le.contract,W.explorationNavigation.getCurrentExploration(),W.visualPlugin,W.resourceLoader,W.promiseFactory,W.explorationSerializer)}).then(function(re){return W.pinVisual.pinVisualContainer(G,re,ge,le.themeCollection,W.explorationNavigation.getCurrentExploration().resourcePackages)})},k.label=1;case 1:return k.trys.push([1,5,,6]),this.promptToSaveFirst()?[3,3]:[4,C()];case 2:return k.sent(),[3,4];case 3:F=this.localizationService.get("ReportContainer_NeedToSaveReportBeforePin"),this.eventBridge.publishToChannel(powerbi.explore.events.saveAsExploration,{promptMessage:F}),k.label=4;case 4:return u.resolve(),[3,6];case 5:return k.sent(),u.reject(),[3,6];case 6:return r&&r.stopPropagation&&r.stopPropagation(),[2]}})})},g.prototype.promptToSaveFirst=function(){var r=this.explorationNavigation.getCurrentExploration();return!(!r||r.report)},g.prototype.canPin=function(){return this.viewModeState.getConfig().supportsPinning&&this.pinVisual.canPin(this.visual)},g.prototype.showPin=function(){return this.visual&&this.visual.options.showPin},g.prototype.getPinTileTitle=function(){return this.localizationService.get(this.visual.options.disablePin?"PinTile_NotSupportedTitle":"PinVisual_ToolTip")},g.\u0275fac=function(u){return new(u||g)(i.\u0275\u0275directiveInject(M.l6),i.\u0275\u0275directiveInject(I.o),i.\u0275\u0275directiveInject(d.z),i.\u0275\u0275directiveInject(P.r),i.\u0275\u0275directiveInject(o.i),i.\u0275\u0275directiveInject(y.L),i.\u0275\u0275directiveInject(n.t),i.\u0275\u0275directiveInject(b.D),i.\u0275\u0275directiveInject(l.kc),i.\u0275\u0275directiveInject(E.D),i.\u0275\u0275directiveInject(s.k),i.\u0275\u0275directiveInject(a.J),i.\u0275\u0275directiveInject(c.r))},g.\u0275cmp=i.\u0275\u0275defineComponent({type:g,selectors:[["visual-container-pin-button"]],inputs:{visual:"visual",disablePin:"disablePin"},decls:1,vars:1,consts:[[3,"dynamicStyle","hidden",4,"ngIf"],[3,"dynamicStyle","hidden"],[1,"vcPinBtn",3,"disabled","pbiTooltip","apply-style","click"],[1,"glyphicon","pbi-glyph-pinned","glyph-small"]],template:function(u,C){1&u&&i.\u0275\u0275template(0,T,3,6,"visual-header-item-container",0),2&u&&i.\u0275\u0275property("ngIf",C.canPin())},directives:[O.NgIf,x.Y,V.V,w.s],encapsulation:2}),g}()},91091:function(Ee,ne,t){t.d(ne,{E:function(){return b}});var e=t(76430),n=t(61226),f=t(83092),i=t(9784),M=t(60400),E=["backToReportButton"];function I(a,o){1&a&&e.\u0275\u0275element(0,"div",9)}function d(a,o){if(1&a&&e.\u0275\u0275element(0,"div",10),2&a){var l=e.\u0275\u0275nextContext();e.\u0275\u0275property("innerText",l.viewModel.readOnlyState.popOutBarTitle)}}function P(a,o){if(1&a&&e.\u0275\u0275element(0,"div",11),2&a){var l=e.\u0275\u0275nextContext();e.\u0275\u0275property("innerText",l.viewModel.readOnlyState.popOutBarSubtitle)}}function y(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275element(1,"span",13),e.\u0275\u0275element(2,"span",14),e.\u0275\u0275elementEnd()),2&a){var l=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("innerText",l.viewModel.lastUpdateAttemptTime)}}var b=function(){function a(){this.popout=new e.EventEmitter,this.closeButtonRendered=new e.EventEmitter}return a.prototype.onClosePopOut=function(o){this.popout.emit(o)},a.prototype.ngAfterViewInit=function(){this.closeButtonRendered.emit(this.backToReportButton.nativeElement)},a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["visual-container-pop-out-bar"]],viewQuery:function(l,s){var c;(1&l&&e.\u0275\u0275viewQuery(E,5),2&l)&&(e.\u0275\u0275queryRefresh(c=e.\u0275\u0275loadQuery())&&(s.backToReportButton=c.first))},inputs:{viewModel:"viewModel"},outputs:{popout:"onClosePopOut",closeButtonRendered:"onCloseButtonRendered"},decls:10,vars:5,consts:[["keyboard-shortcuts","",1,"popOutBar"],["type","button","data-automation-type","backToReportButton",3,"focus-on","click"],["backToReportButton",""],[1,"glyphicon","iconBox","pbi-glyph-chevronleftmedium","glyph-small"],["localize","VisualContainer_PopOut_BackToReportButton",1,"menuItem"],["class","divider",4,"ngIf"],["class","title trimmedTextWithEllipsis",3,"innerText",4,"ngIf"],["class","subtitle trimmedTextWithEllipsis",3,"innerText",4,"ngIf"],["class","visualLastRefreshTime trimmedTextWithEllipsis",4,"ngIf"],[1,"divider"],[1,"title","trimmedTextWithEllipsis",3,"innerText"],[1,"subtitle","trimmedTextWithEllipsis",3,"innerText"],[1,"visualLastRefreshTime","trimmedTextWithEllipsis"],["localize","ReportAppBar_LastRefresh"],[1,"dataUpdatedTime",3,"innerText"]],template:function(l,s){1&l&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275elementStart(2,"button",1,2),e.\u0275\u0275listener("click",function(O){return s.onClosePopOut(O)}),e.\u0275\u0275element(4,"i",3),e.\u0275\u0275element(5,"span",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,I,1,0,"div",5),e.\u0275\u0275template(7,d,1,1,"div",6),e.\u0275\u0275template(8,P,1,1,"div",7),e.\u0275\u0275template(9,y,3,1,"div",8),e.\u0275\u0275elementEnd()),2&l&&(e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("focus-on",8!==s.viewModel.contract.visibility),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",s.viewModel.readOnlyState.popOutBarTitle||s.viewModel.readOnlyState.popOutBarSubtitle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",s.viewModel.readOnlyState.popOutBarTitle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",s.viewModel.readOnlyState.popOutBarSubtitle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",s.viewModel.lastUpdateAttemptTime))},directives:[n.q,f.j,i.X,M.NgIf],styles:['.popOutBar[_ngcontent-%COMP%]{position:absolute;top:20px;left:0;right:0;margin:0;padding:0;height:40px;line-height:40px;list-style-type:none;font-size:12px;overflow:hidden;display:flex;flex-direction:row;align-items:center}.popOutBar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .popOutBar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{vertical-align:top;text-transform:uppercase;letter-spacing:.04375em}html[data-focus-source="key"][_nghost-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:focus, html[data-focus-source="key"][_nghost-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px;background-color:transparent}.popOutBar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-family:"wf_standard-font",helvetica,arial,sans-serif;color:var(--neutral-secondary-color, #666666)}.popOutBar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--bold-secondary-font-family, "wf_standard-font_bold", helvetica, arial, sans-serif);color:var(--theme-secondary-alt-color, #444444);max-width:500px;padding-right:5px}.popOutBar[_ngcontent-%COMP%]   .visualLastRefreshTime[_ngcontent-%COMP%]{float:right;margin-left:auto}.popOutBar[_ngcontent-%COMP%]   .menuItem[_ngcontent-%COMP%]{font-family:"Segoe UI","wf_segoe-ui_normal",helvetica,arial,sans-serif;font-size:12px}.popOutBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;padding:0;line-height:16px;height:38px;background-color:transparent;color:var(--neutral-secondary-color, #666666);margin-top:1px}.popOutBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.popOutBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-left:12px;margin-right:6px}.popOutBar[_ngcontent-%COMP%]   .iconBox[_ngcontent-%COMP%]{padding:0;margin:0;cursor:pointer}html[dir=rtl][_ngcontent-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .iconBox[_ngcontent-%COMP%]{transform:rotate(90deg)}.popOutBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;font-size:12px;display:inline-block;cursor:default;vertical-align:top;line-height:40px;padding:0 15px;outline:none}.popOutBar[_ngcontent-%COMP%] > div.divider[_ngcontent-%COMP%]{display:inline-block;width:1px;height:30px;background-color:var(--neutral-secondary-alt-color3, #999999);margin-top:5px;padding:0}.popOutBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .popOutBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:top}']}),a}()},83270:function(Ee,ne,t){t.d(ne,{Y:function(){return P}});var e=t(76430),n=t(4486),f=t(60660),i=t(71367),M=t(8422),E=t(47236),I=t(12904),d=powerbi.explore.services.events,P=function(){function y(b,a,o){this.contextActivityService=b,this.localizationService=a,this.eventBridge=o,this.onVisualContainerRefresh=new e.EventEmitter,this.label=this.localizationService.get("VisualContainer_Analyze")}return y.prototype.refreshVisual=function(){var b=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"RefreshVisual",source:"VisualHeader"}});this.eventBridge.publishToChannel(d.userActionTriggered,{source:"UserAction_Refresh"}),this.onVisualContainerRefresh.emit(),b.resolve()},y.\u0275fac=function(a){return new(a||y)(e.\u0275\u0275directiveInject(n.r),e.\u0275\u0275directiveInject(f.o),e.\u0275\u0275directiveInject(i.J))},y.\u0275cmp=e.\u0275\u0275defineComponent({type:y,selectors:[["visual-container-refresh-button"]],inputs:{visual:"visual"},outputs:{onVisualContainerRefresh:"onVisualContainerRefresh"},decls:3,vars:4,consts:[[3,"dynamicStyle"],[3,"pbiTooltip","apply-style","click"],[1,"glyphicon","pbi-glyph-analyze","glyph-small"]],template:function(a,o){1&a&&(e.\u0275\u0275elementStart(0,"visual-header-item-container",0),e.\u0275\u0275elementStart(1,"button",1),e.\u0275\u0275listener("click",function(){return o.refreshVisual()}),e.\u0275\u0275element(2,"i",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275property("dynamicStyle",o.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",o.label)("apply-style",o.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",o.label))},directives:[M.Y,E.V,I.s],encapsulation:2}),y}()},30641:function(Ee,ne,t){t.d(ne,{Q:function(){return F}});var e=t(76430),n=t(38942),f=t(4486),i=t(10883),M=t(71367),E=t(59886),I=t(98288),d=t(60660),P=t(59116),y=t(59804),b=t(60400),a=t(8422),o=t(41062),l=t(12904),s=powerbi.common.ArrowVerticalPosition,c=powerbi.explore.services.events,O=powerbi.explore.services.selectionUtils,x=powerbi.telemetry,V=powerbi.explore.util.VisualContainerUtils,w=powerbi.explore.contracts.VisualRelationshipFilterActionUtil,T=function(W,k){return{"pbi-glyph-crossfilterfilled":W,"pbi-glyph-crossfilter":k}};function v(A,W){if(1&A){var k=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",1),e.\u0275\u0275elementStart(1,"button",2),e.\u0275\u0275listener("click",function(le){return e.\u0275\u0275restoreView(k),e.\u0275\u0275nextContext().setVisualRelationshipFilterAction(le,1)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&A){var R=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",R.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,T,1===R.filterAction,1!==R.filterAction))("pbi-tooltip",R.filterTooltipConfig)("apply-style",R.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",R.filterTitle)}}var g=function(W,k){return{"pbi-glyph-crosshighlightfilled":W,"pbi-glyph-crosshighlight":k}};function r(A,W){if(1&A){var k=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",1),e.\u0275\u0275elementStart(1,"button",2),e.\u0275\u0275listener("click",function(le){return e.\u0275\u0275restoreView(k),e.\u0275\u0275nextContext().setVisualRelationshipFilterAction(le,2)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&A){var R=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",R.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,g,2===R.filterAction,2!==R.filterAction))("pbi-tooltip",R.highlightTooltipConfig)("apply-style",R.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",R.highlightTitle)}}var u=function(W,k){return{"pbi-glyph-disablefilled":W,"pbi-glyph-disable":k}};function C(A,W){if(1&A){var k=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",1),e.\u0275\u0275elementStart(1,"button",2),e.\u0275\u0275listener("click",function(le){return e.\u0275\u0275restoreView(k),e.\u0275\u0275nextContext().setVisualRelationshipFilterAction(le,3)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&A){var R=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",R.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,u,3===R.filterAction,3!==R.filterAction))("pbi-tooltip",R.noneTooltipConfig)("apply-style",R.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",R.noneTitle)}}var F=function(){function A(W,k,R,G,le,ge,re,j,ie){this.conceptualSchemaProxy=W,this.contextActivityService=k,this.dataSources=R,this.eventBridge=G,this.localizationService=le,this.selection=ge,this.telemetryService=re,this.visualAuthoring=j,this.visualRelationship=ie,this.onVisualContainerChanged=new e.EventEmitter,this.filterTitle=this.localizationService.get("VisualRelationships_DataFilter"),this.filterTooltipConfig={tooltipArrowVerticalPosition:s.bottom,tooltipTitle:this.filterTitle,tooltipShowOnFocus:!0},this.highlightTitle=this.localizationService.get("VisualRelationships_HighlightFilter"),this.highlightTooltipConfig={tooltipArrowVerticalPosition:s.bottom,tooltipTitle:this.highlightTitle,tooltipShowOnFocus:!0},this.noneTitle=this.localizationService.get("None"),this.noneTooltipConfig={tooltipArrowVerticalPosition:s.bottom,tooltipTitle:this.noneTitle,tooltipShowOnFocus:!0}}return A.prototype.ngOnInit=function(){var W=this;this.loadVisualRelationshipFilterAction(),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(c.selectionChanged,function(){return W.loadVisualRelationshipFilterAction()}).subscribe(c.visualTypeChanged,function(){return W.loadVisualRelationshipFilterAction()}).subscribe(c.explorationSlowDataSourceSettingsLoaded,function(k,R){return R.isCrossHighlightingDisabledChanged&&W.loadVisualRelationshipFilterAction()})},A.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},A.prototype.setVisualRelationshipFilterAction=function(W,k){var R=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"SetVisualRelationship",source:"VisualHeader"}});W&&W.stopPropagation&&W.stopPropagation();var G=O.getSelectedVisual(this.selection);this.visual.hostServices.setVisualRelationshipFilterAction(G,this.visual.contract,k,this.visualAuthoring),this.telemetryService.logEvent(x.EXVisualRelationshipOverride,{sourceVisualType:V.getVisualType(G),targetVisualType:V.getVisualType(this.visual.contract),filterAction:w.toString(k)}),this.filterAction=k,this.onVisualContainerChanged.emit(),R.resolve()},A.prototype.loadVisualRelationshipFilterAction=function(){var W=this,k=O.getSelectedVisual(this.selection);if(k){var R=this.dataSources.get();this.conceptualSchemaProxy.get(R).then(function(G){var le=W.visual.hostServices.getVisualRelationshipFilterAction(k,W.visualRelationship,G);0===le&&(le=W.visualRelationship.defaultFilterAction(k,W.visual.contract)),W.filterAction=le})}},A.prototype.supportsVisualRelationshipFilterAction=function(W){var k=O.getSelectedVisual(this.selection);return this.visualRelationship.supportsFilterActionTarget(k,this.visual.contract,W)},A.\u0275fac=function(k){return new(k||A)(e.\u0275\u0275directiveInject(n.i),e.\u0275\u0275directiveInject(f.r),e.\u0275\u0275directiveInject(i.D),e.\u0275\u0275directiveInject(M.J),e.\u0275\u0275directiveInject(d.o),e.\u0275\u0275directiveInject(E.z),e.\u0275\u0275directiveInject(P.y0),e.\u0275\u0275directiveInject(y.$),e.\u0275\u0275directiveInject(I.s))},A.\u0275cmp=e.\u0275\u0275defineComponent({type:A,selectors:[["visual-container-relationship-filters"]],inputs:{visual:"visual"},outputs:{onVisualContainerChanged:"onVisualContainerChanged"},decls:3,vars:3,consts:[[3,"dynamicStyle",4,"ngIf"],[3,"dynamicStyle"],[1,"glyphicon","glyph-small","alwaysVisible",3,"ngClass","pbi-tooltip","apply-style","click"]],template:function(k,R){1&k&&(e.\u0275\u0275template(0,v,2,8,"visual-header-item-container",0),e.\u0275\u0275template(1,r,2,8,"visual-header-item-container",0),e.\u0275\u0275template(2,C,2,8,"visual-header-item-container",0)),2&k&&(e.\u0275\u0275property("ngIf",R.supportsVisualRelationshipFilterAction(1)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",R.supportsVisualRelationshipFilterAction(2)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",R.supportsVisualRelationshipFilterAction(3)))},directives:[b.NgIf,a.Y,b.NgClass,o.i,l.s],styles:[""]}),A}()},19495:function(Ee,ne,t){t.d(ne,{Z:function(){return f}});var e=t(76430),n=t(50568),f=function(){function i(){this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/visual-container-skittles/visual-container-skittles-ui.module#VisualContainerSkittlesUIModule",this.componentId="VisualContainerSkittlesComponentId"}return i.\u0275fac=function(E){return new(E||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["visual-container-skittles-lazy"]],decls:1,vars:2,consts:[[3,"modulePath","componentId"]],template:function(E,I){1&E&&e.\u0275\u0275element(0,"pbi-lazy-load",0),2&E&&e.\u0275\u0275property("modulePath",I.modulePath)("componentId",I.componentId)},directives:[n.R],encapsulation:2,changeDetection:0}),i}()},10546:function(Ee,ne,t){t.d(ne,{s:function(){return r}});var e=t(26334),n=t(99864),f=t(97894),i=t(16524),M=t(51369),E=t(46521),I=t(29026),d=t(76430),P=t(60660),y=t(7508),b=t(86269),a=t(80815),o=t(95781),l=t(10883),s=t(71367),c=t(23580),O=t(60400),x=t(8422),V=t(12904),w=t(47236),T=powerbi.explore.services.events,v=powerbi.explore.util.VisualContainerUtils;function g(u,C){if(1&u){var F=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"visual-header-item-container",1),d.\u0275\u0275elementStart(1,"button",2,3),d.\u0275\u0275listener("click",function(k){d.\u0275\u0275restoreView(F);var R=d.\u0275\u0275reference(2);return d.\u0275\u0275nextContext().handleMouseClick(R,k)})("mouseleave",function(k){return d.\u0275\u0275restoreView(F),d.\u0275\u0275nextContext().handleMouseLeave(k)}),d.\u0275\u0275element(3,"i",4),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&u){var A=d.\u0275\u0275nextContext();d.\u0275\u0275property("dynamicStyle",A.visual.readOnlyState.headerItemContainerStyle),d.\u0275\u0275advance(1),d.\u0275\u0275property("apply-style",A.visual.readOnlyState.headerForegroundStyle)("pbiTooltip",A.pinTileTitle),d.\u0275\u0275attribute("aria-label",A.ariaLabel)}}var r=function(){function u(C,F,A,W,k,R,G,le,ge,re,j){this.el=C,this.localizationService=F,this.canvasScaleService=A,this.overlay=W,this.injector=k,this.componentFactoryResolver=R,this.visualPlugin=G,this.featureSwitchService=le,this.dataSources=ge,this.explorationCapabilities=re,this.eventBridge=j,this.showTimeout=500,this.close$=new e.xQ}return u.prototype.ngOnDestroy=function(){this.clearShowSmartNarrativeTimeout(),null!=this.subscriptionManager&&this.subscriptionManager.unsubscribeAll(),this.closeStickyOverlay()},u.prototype.ngOnInit=function(){var C=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(T.visibilityChanged,function(){C.closeStickyOverlay()}).subscribe(T.visualContainerChanged,function(){C.isSupported=C.isVisualSupported()}),this.ariaLabel=this.localizationService.get("SmartNarratives_ToolTip"),this.pinTileTitle=this.localizationService.get("SmartNarratives_ToolTip"),this.isSupported=this.isVisualSupported()},u.prototype.ngOnChanges=function(C){(C.visual||C.options)&&(this.isSupported=this.isVisualSupported())},u.prototype.handleMouseClick=function(C,F){this.overlay.isOverlayOpen&&this.overlayRef?this.overlayRef.close():(null==this.overlayRef||!this.sticky)&&(this.clearShowSmartNarrativeTimeout(),this.showSmartNarrative(C,0===F.clientX&&0===F.clientY,!0))},u.prototype.handleMouseEnter=function(C){this.setShowRestatementTimeout(C)},u.prototype.handleMouseLeave=function(C){var F,A,W;this.clearShowSmartNarrativeTimeout();var k=null===(W=null===(A=null===(F=this.overlayRef)||void 0===F?void 0:F.componentRef)||void 0===A?void 0:A.location)||void 0===W?void 0:W.nativeElement;(null==k?void 0:k.contains(C.relatedTarget))||this.close$.next(!1)},u.prototype.setShowRestatementTimeout=function(C){var F=this;null!=this.showTimer||null!=this.overlayRef||(this.showTimer=setTimeout(function(){F.showTimer=void 0,F.showSmartNarrative(C)},this.showTimeout))},u.prototype.listenForHideIntent=function(){var C=this,F=this.close$.pipe((0,n.b)(1e3)).subscribe(function(A){!A&&!C.sticky&&(C.overlayRef&&(C.overlayRef.close(),C.overlayRef=void 0),F.unsubscribe(),F=null)})},u.prototype.clearShowSmartNarrativeTimeout=function(){this.showTimer&&(clearTimeout(this.showTimer),this.showTimer=void 0)},u.prototype.showSmartNarrative=function(C,F,A){var W=this;if(null==this.overlayRef||!this.sticky){var k=this.overlayRef;this.sticky=A;var R=this.injector;if(!R)throw new Error("Parent element injector undefined when creating smart narrative overlay");var G={visual:this.visual.contract,options:this.options?this.options:{hideExistingOverlays:!0}},le=this.overlay.position().flexibleConnectedTo(C).withPositions([(0,E.Oq)(-4,0),(0,E.hT)(4,0),(0,E.f6)(4,0),(0,E.w3)(-4,0)]).withFlexibleDimensions(!0).withPush(!0).withGrowAfterOpen(!0);this.overlayRef=this.overlay.open({component:I.W,data:G,options:{positionStrategy:le,hasBackdrop:A,disposeOnNavigation:!0,backdropClass:"cdk-overlay-transparent-backdrop"},focusElementOnClose:F?C:null,hasCaret:!1,injector:R,componentFactoryResolver:this.componentFactoryResolver,closeOnBackdropClick:A}),A&&this.overlayRef.onClose.pipe((0,f.q)(1)).subscribe(function(){W.overlayRef=void 0,W.sticky=!1}),this.overlayRef.isPointerWithin$&&this.overlayRef.isPointerWithin$.pipe((0,i.T)(1),(0,M.x)()).subscribe(function(ge){W.close$.next(ge)}),this.listenForHideIntent(),k&&k.close()}},u.prototype.isVisualSupported=function(){var F=powerbi.explore.services.createVisualPluginOps(this.visualPlugin,this.featureSwitchService).canSummarizeVisual(this.visual.contract.config.singleVisual.visualType);if(!F||v.isSmallMultiplesVisual(this.visual.contract.config.singleVisual))return!1;if(!this.dataSources.get())return!1;var W=this.explorationCapabilities.getCapabilities();return!(!W.insights&&!W.analysisVisuals)&&F},u.prototype.closeStickyOverlay=function(){this.sticky&&(this.sticky=!1,this.close$.next(!1))},u.\u0275fac=function(F){return new(F||u)(d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(P.o),d.\u0275\u0275directiveInject(y.Z),d.\u0275\u0275directiveInject(b._c),d.\u0275\u0275directiveInject(d.Injector),d.\u0275\u0275directiveInject(d.ComponentFactoryResolver),d.\u0275\u0275directiveInject(a.D),d.\u0275\u0275directiveInject(o.vZ),d.\u0275\u0275directiveInject(l.D),d.\u0275\u0275directiveInject(c.U),d.\u0275\u0275directiveInject(s.J))},u.\u0275cmp=d.\u0275\u0275defineComponent({type:u,selectors:[["visual-container-smart-narrative-button"]],inputs:{visual:"visual",options:"options"},features:[d.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"dynamicStyle",4,"ngIf"],[3,"dynamicStyle"],["cdkmonitorelementfocus","","aria-haspopup","true","aria-expanded","false",1,"vcFilterRestatementBtn",3,"apply-style","pbiTooltip","click","mouseleave"],["overlayOrigin",""],[1,"glyphicon","pbi-glyph-page","glyph-small"]],template:function(F,A){1&F&&d.\u0275\u0275template(0,g,4,4,"visual-header-item-container",0),2&F&&d.\u0275\u0275property("ngIf",A.isSupported)},directives:[O.NgIf,x.Y,V.s,w.V],styles:[""]}),u}()},8422:function(Ee,ne,t){t.d(ne,{Y:function(){return i}});var e=t(76430),n=t(12904),f=["*"],i=function(){function M(){}return M.\u0275fac=function(I){return new(I||M)},M.\u0275cmp=e.\u0275\u0275defineComponent({type:M,selectors:[["visual-header-item-container"]],inputs:{dynamicStyle:"dynamicStyle"},ngContentSelectors:f,decls:2,vars:1,consts:[[1,"visualHeaderItemContainer","themeableElement",3,"apply-style"]],template:function(I,d){1&I&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275projection(1),e.\u0275\u0275elementEnd()),2&I&&e.\u0275\u0275property("apply-style",d.dynamicStyle)},directives:[n.s],styles:[".visualHeaderItemContainer[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.stylableVisualContainerHeader[_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%], .stylableVisualContainerHeader   [_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]{height:20px;padding-top:1px;margin-left:4px;border:1px solid #ffffff;background-color:#fff}",".exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader[_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%], .exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   [_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]{height:calc(20px + 2px);padding-top:1px;margin-left:4px;border:none}.exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader[_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]     button, .exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   [_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]     button{width:calc(20px + 4px);color:#000;border-radius:4px;background-color:rgba(255,255,255,.75)}.exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader[_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]     button.tooltipInfoButton, .exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   [_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]     button.tooltipInfoButton{display:none}"]}),M}()},60415:function(Ee,ne,t){t.d(ne,{r:function(){return oe}});var e=t(40582),n=t(76430),f=t(65491),i=t(88471),M=t(81677),E=t(71367),I=t(59886),d=t(16035),P=t(71065),y=t(78600),b=t(21231),a=t(80815),o=t(5423),l=t(35309),s=t(39681),c=t(26188),O=t(31816),x=t(95781),V=t(60660),w=t(73143),T=t(23580),v=t(91350),g=t(18237),r=t(45401),u=t(34425),C=t(46528),F=t(59116),A=t(60400),W=t(47236),k=t(61289),R=t(51225),G=powerbi.visualHost.CustomVisualsUtils,le=powerbi.explore.services.events,ge=jsCommon.FocusManager,re=powerbi.explore.services.selectionUtils,j=powerbi.explore.util.VisualContainerUtils;function ie(D,p){if(1&D&&n.\u0275\u0275element(0,"pbi-svg-use-symbol",8),2&D){var h=n.\u0275\u0275nextContext().$implicit,m=n.\u0275\u0275nextContext();n.\u0275\u0275property("sheet",m.core.getVisualIconSheetName(h))("symbolId",null==h?null:h.class)("disabled",m.core.isDisabled(h))}}var Z=function(p){return{active:p}},fe=function(p,h){return{disabled:p,isOldIcon:h}};function Q(D,p){if(1&D){var h=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",4),n.\u0275\u0275listener("keydown",function(he){var me=n.\u0275\u0275restoreView(h).index;return n.\u0275\u0275nextContext().core.onVisualButtonKeyDown(he,me)})("click",function(){var Ce=n.\u0275\u0275restoreView(h).$implicit;return n.\u0275\u0275nextContext().core.visualAction(Ce)})("mouseover",function(){var Ce=n.\u0275\u0275restoreView(h).$implicit;return n.\u0275\u0275nextContext().core.toggleEffectClasses(Ce,!0,!0)})("mouseleave",function(){var Ce=n.\u0275\u0275restoreView(h).$implicit;return n.\u0275\u0275nextContext().core.toggleEffectClasses(Ce,!1,!0)})("focus",function(){var Ce=n.\u0275\u0275restoreView(h).$implicit;return n.\u0275\u0275nextContext().core.toggleEffectClasses(Ce,!0,!1)})("blur",function(){var Ce=n.\u0275\u0275restoreView(h).$implicit;return n.\u0275\u0275nextContext().core.toggleEffectClasses(Ce,!1,!1)})("pbiMenuButtonClick",function(he){var me=n.\u0275\u0275restoreView(h).$implicit;return n.\u0275\u0275nextContext().core.selectMenuItem(he.data,me)}),n.\u0275\u0275elementStart(1,"div",5),n.\u0275\u0275elementStart(2,"div",6),n.\u0275\u0275template(3,ie,1,3,"pbi-svg-use-symbol",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}if(2&D){var m=p.$implicit,S=p.index,N=n.\u0275\u0275nextContext();n.\u0275\u0275property("pbiTooltip",m.tooltipConfig.tooltipTitle)("ngClass",n.\u0275\u0275pureFunction1(13,Z,m.active))("ngStyle",N.core.visualStyle(m))("pbiMenu",N.pbiMenuViewModel(m.menuItems))("disabled",N.core.disableContextMenu||!N.core.showDropdownForCustomVisuals()),n.\u0275\u0275attribute("aria-label",m.title)("aria-pressed",!!m.active)("tabindex",N.core.getTabIndex(m,S)),n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("visual-icon visual-icon-outer ",m.class,""),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(15,fe,N.core.isDisabled(m),!N.core.newPaneColorsEnabled||!N.core.showDropdownForCustomVisuals())),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!(null!=m&&m.plugin.custom))}}function J(D,p){if(1&D){var h=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",9),n.\u0275\u0275listener("pbiMenuButtonClick",function(N){n.\u0275\u0275restoreView(h);var ce=n.\u0275\u0275nextContext();return ce.core.selectMenuItem(N.data,ce.visual)}),n.\u0275\u0275element(1,"span",10),n.\u0275\u0275elementEnd()}if(2&D){var m=n.\u0275\u0275nextContext();n.\u0275\u0275property("pbiTooltip",m.core.optionsTooltipTitle)("pbiMenu",m.core.customVisualMenuItems),n.\u0275\u0275attribute("aria-label",m.core.optionsTooltipTitle)}}function se(D,p){if(1&D){var h=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",11),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(h),n.\u0275\u0275nextContext().core.importVisual()}),n.\u0275\u0275element(1,"span",10),n.\u0275\u0275elementEnd()}if(2&D){var m=n.\u0275\u0275nextContext();n.\u0275\u0275property("pbiTooltip",m.core.optionsTooltipTitle),n.\u0275\u0275attribute("aria-label",m.core.optionsTooltipTitle)}}var oe=function(){function D(p,h,m,S,N,ce,he,Ce,me,Ze,Je,it,Te,ue,ve,Me,we,$e,et,at,dt,Fe,be,_e){var Oe=this;this.isFinishedLoading=new n.EventEmitter,this.pbiMenuViewModel=function(Xe){return function(){return Oe.convertOldMenuItemToPbiMenu(Xe)}},this.core=new K(function(){return Oe.isFinishedLoading.emit()},{$element:$(p.nativeElement),eventBridge:h,highContrastCssGenerationService:m,selection:S,visualPlugin:N,visualPluginOps:ce,featureSwitchService:he,localizationService:Ce,errorService:me,explorationCapabilities:Ze,visualConsent:Je,screenReaderService:it,trustedVisual:Te,reportSettingsService:ue,svgProvider:ve,favoriteVisualLoader:Me,visualPaneSettingsService:we,visualPrivilegeService:$e,globalEventBridge:et,modernDialogService:at,aboutVisualDialogToken:M.Ys,managedCustomVisualsService:dt,telemetryService:Fe,publicCustomVisualService:be,appSourceResourceService:_e})}return Object.defineProperty(D.prototype,"disableMoreOptionsIcon",{get:function(){return this.core.disableMoreOptionsIcon},set:function(h){this.core.disableMoreOptionsIcon=h},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"disableContextMenu",{get:function(){return this.core.disableContextMenu},set:function(h){this.core.disableContextMenu=h},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"visualPluginFilter",{get:function(){return this.core.visualPluginFilter},set:function(h){this.core.visualPluginFilter=h},enumerable:!1,configurable:!0}),D.prototype.ngOnInit=function(){this.core.$onInit()},D.prototype.ngOnDestroy=function(){this.core.$onDestroy()},D.prototype.convertOldMenuItemToPbiMenu=function(p){return{items:p.map(function(m){return{text:m.text,type:i.iB.Button,data:m.action}})}},D.\u0275fac=function(h){return new(h||D)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(E.J),n.\u0275\u0275directiveInject(y.g),n.\u0275\u0275directiveInject(I.z),n.\u0275\u0275directiveInject(a.D),n.\u0275\u0275directiveInject(d.f),n.\u0275\u0275directiveInject(x.vZ),n.\u0275\u0275directiveInject(V.o),n.\u0275\u0275directiveInject(w.T),n.\u0275\u0275directiveInject(T.U),n.\u0275\u0275directiveInject(o.f),n.\u0275\u0275directiveInject(b.g),n.\u0275\u0275directiveInject(l.t),n.\u0275\u0275directiveInject(P.h),n.\u0275\u0275directiveInject(v.g),n.\u0275\u0275directiveInject(r.W),n.\u0275\u0275directiveInject(u.R),n.\u0275\u0275directiveInject(s.s),n.\u0275\u0275directiveInject(C.Z),n.\u0275\u0275directiveInject(g.x),n.\u0275\u0275directiveInject(f.D),n.\u0275\u0275directiveInject(F.y0),n.\u0275\u0275directiveInject(c.B),n.\u0275\u0275directiveInject(O.r))},D.\u0275cmp=n.\u0275\u0275defineComponent({type:D,selectors:[["visual-types-container-modern"]],inputs:{disableMoreOptionsIcon:"disableMoreOptionsIcon",disableContextMenu:"disableContextMenu",visualPluginFilter:"visualPluginFilter"},outputs:{isFinishedLoading:"isFinishedLoading"},decls:4,vars:4,consts:[["data-automation-type","visualTypesContainer","role","group",1,"visual-types-container","themeableElement"],["pbiTooltipCaretSize","small","class","visual-icon-container","pbiMenuActivation","contextmenu",3,"pbiTooltip","ngClass","ngStyle","pbiMenu","disabled","keydown","click","mouseover","mouseleave","focus","blur","pbiMenuButtonClick",4,"ngFor","ngForOf","ngForTrackBy"],["class","visual-icon-container more","pbiTooltipCaretSize","small",3,"pbiTooltip","pbiMenu","pbiMenuButtonClick",4,"ngIf"],["class","visual-icon-container more","pbiTooltipCaretSize","small",3,"pbiTooltip","click",4,"ngIf"],["pbiTooltipCaretSize","small","pbiMenuActivation","contextmenu",1,"visual-icon-container",3,"pbiTooltip","ngClass","ngStyle","pbiMenu","disabled","keydown","click","mouseover","mouseleave","focus","blur","pbiMenuButtonClick"],[3,"ngClass"],[1,"visual-icon-inner"],[3,"sheet","symbolId","disabled",4,"ngIf"],[3,"sheet","symbolId","disabled"],["pbiTooltipCaretSize","small",1,"visual-icon-container","more",3,"pbiTooltip","pbiMenu","pbiMenuButtonClick"],[1,"visual-icon-inner","glyphicon","pbi-glyph-more"],["pbiTooltipCaretSize","small",1,"visual-icon-container","more",3,"pbiTooltip","click"]],template:function(h,m){1&h&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,Q,4,18,"button",1),n.\u0275\u0275template(2,J,2,3,"button",2),n.\u0275\u0275template(3,se,2,2,"button",3),n.\u0275\u0275elementEnd()),2&h&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",m.core.viewModel.visuals)("ngForTrackBy",m.core.trackByPluginName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",m.core.showMoreOptionsIcon()&&m.core.showDropdownForCustomVisuals()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",m.core.showMoreOptionsIcon()&&!m.core.showDropdownForCustomVisuals()))},directives:[A.NgForOf,A.NgIf,W.V,A.NgClass,A.NgStyle,k.l8,R.R],styles:[".visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]{background-color:transparent;border:1px solid transparent;margin:1px 3px;width:22px;height:22px;box-sizing:border-box;float:left;transition:none}html[data-focus-source=key][_ngcontent-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%]{color:var(--white-color, #FFF);font-size:16px}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]{width:100%;height:100%;display:block}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;display:block;background-color:transparent;border:1px solid transparent;box-sizing:border-box}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.more[_ngcontent-%COMP%]:hover   .pbi-glyph-more[_ngcontent-%COMP%]{color:var(--alert-color, #FFF9AE)}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%]{border-color:var(--alert-color, #FFF9AE)}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811);background-color:rgba(0,0,0,.4)}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%]{border-color:var(--alert-color, #FFF9AE)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]{background-color:var(--gray-20, #F3F2F1)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%]{border-color:var(--gray-80, #B3B0AD)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C);background-color:var(--gray-50, #D2D0CE)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]{background-color:var(--gray-20, #F3F2F1)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]{margin:2px;width:24px;height:24px}html[data-focus-source=key]   .newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus, .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--fluent-theme-black-color, #000)}html[data-focus-source=key]   .newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus:hover, .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus:hover{background-color:var(--gray-30, #EDEBE9);border-color:var(--fluent-theme-black-color, #000)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:active, .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:active{outline:none;border:none;background-color:var(--gray-50, #D2D0CE)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%]{border:none}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover, .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover{border-color:var(--gray-70, #BEBBB8)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]{border-color:var(--gray-120, #797775);background-color:var(--gray-50, #D2D0CE)}.compact-container[_nghost-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]{width:auto;height:auto;padding:0}"]}),D}(),K=function(){function D(p,h){var m=this;this.isFinishedLoading=p,this.services=h,this.optionsTooltipTitle=this.services.localizationService.get("DownloadVisuals_ContextMenu"),this.viewModel={visuals:[]},this.services.trustedVisual.loadTrustedVisualPlugins().then(function(N){m.services.visualPlugin.ensureTrustedVisualPlugins(N)}).finally(function(){return(0,e.mG)(m,void 0,void 0,function(){return(0,e.Jh)(this,function(N){switch(N.label){case 0:return[4,this.loadVisualTypes()];case 1:return N.sent(),this.update(),p(),[2]}})})});var S=this.services.reportSettingsService;this.customVisualsEnabled=!G.areCustomVisualsDisabled(this.services.featureSwitchService,S&&S.areCustomVisualsDisabled()),this.loadVisualTypes(),this.loadMenuItems(),this.aboutVisualDialogToken=this.services.aboutVisualDialogToken,this.explorationCapabilities=this.services.explorationCapabilities.getCapabilities(),this.newPaneColorsEnabled=this.services.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.showFluentDesign}return D.prototype.$onInit=function(){var p=this;this.subscriptionManager=this.services.eventBridge.createChannelSubscriptionManager().subscribe(le.selectionChanged,function(){return p.update()}).subscribe(le.visualTypeChanged,function(){return p.update()}).subscribe(le.visualContainerChanged,function(){return p.update()}).subscribe(le.visualPluginsChanged,function(){return(0,e.mG)(p,void 0,void 0,function(){return(0,e.Jh)(this,function(h){switch(h.label){case 0:return[4,this.loadVisualTypes()];case 1:return h.sent(),this.update(),[2]}})})}).subscribe(le.VisualContainerAdded,function(h,m){return(0,e.mG)(p,void 0,void 0,function(){return(0,e.Jh)(this,function(S){switch(S.label){case 0:return m&&m.config?(this.services.visualPaneSettingsService.addExplorationVisual(m.config.singleVisual.visualType),[4,this.loadVisualTypes()]):[3,2];case 1:S.sent(),this.update(),S.label=2;case 2:return[2]}})})}).subscribe(le.addCustomVisual,function(h,m){p.services.visualPaneSettingsService.addExplorationVisual(m.name),p.update()}),this.initializeHighContrastRules(),this.services.svgProvider.loadSheet("visualizationPaneIcons_officeUpdate"),this.services.svgProvider.loadSheet("visualizationPaneIcons"),this.update()},D.prototype.$onDestroy=function(){this.subscriptionManager&&this.subscriptionManager.unsubscribeAll()},D.prototype.getTabIndex=function(p,h){return null!=_.find(this.viewModel.visuals,function(S){return S.active})?p.active?0:-1:0===h?0:-1},D.prototype.initializeHighContrastRules=function(){this.services.highContrastCssGenerationService.addRule(".themeableElement .visual-types-container .visual-icon-container.active","{ background-color: @selectedBackgroundColor !important; }"),this.services.highContrastCssGenerationService.addRule(".OfficeIconColors_HighContrast","{ fill: @foregroundColor !important; }"),this.services.highContrastCssGenerationService.addRule("#svgProvider-visualizationPaneIcons_officeUpdate svg symbol .OfficeIconColors_HighContrast","{ fill: currentColor !important; }"),this.services.highContrastCssGenerationService.addRule("#svgProvider-visualizationPaneIcons_officeUpdate svg symbol .OfficeIconColors_HighContrast.active","{ fill: @selectedForegroundColor !important; }"),this.services.highContrastCssGenerationService.addRule(".OfficeIconColors_HighContrast_Off","{ fill: transparent !important;  stroke: transparent !important; }")},D.prototype.onVisualButtonKeyDown=function(p,h){var m,S=this.viewModel.visuals.length;(p.keyCode===$.ui.keyCode.LEFT||p.keyCode===$.ui.keyCode.UP)&&(p.stopPropagation(),m=(h-1+S)%S,ge.focus(this.services.$element.children().children()[m])),(p.keyCode===$.ui.keyCode.RIGHT||p.keyCode===$.ui.keyCode.DOWN)&&(p.stopPropagation(),m=(h+1)%S,ge.focus(this.services.$element.children().children()[m]))},D.prototype.toggleEffectClasses=function(p,h,m){var S=m?jsCommon.DOMConstants.hoverEventName:jsCommon.DOMConstants.focusEventName;this.services.svgProvider.toggleCssClasses(h,S,this.getVisualIconSheetName(p),p.class)},D.prototype.selectMenuItem=function(p,h){switch(p){case 0:this.services.eventBridge.publishToChannel(le.deleteCustomVisuals);break;case 1:this.customVisualsEnabled?this.importVisual():this.showCustomVisualsDisabledDialog();break;case 2:this.services.eventBridge.publishToChannel(le.downloadVisual);break;case 8:this.restoreAllVisuals();break;case 3:h&&this.addVisualToFavorites(h.plugin);break;case 4:h&&this.removeVisualFromFavorites(h.plugin);break;case 5:h&&this.showAboutDialog(h.plugin,h.title);break;case 6:h&&this.unpinVisual(h.plugin);break;case 7:h&&this.restoreVisual(h.plugin)}},D.prototype.addVisualToFavorites=function(p){var h=this;this.services.favoriteVisualLoader.addVisualToFavorites(p).then(function(){h.services.eventBridge.publishToChannel(le.visualPluginsChanged)})},D.prototype.showAboutDialog=function(p,h){return(0,e.mG)(this,void 0,void 0,function(){var m,S,N,ce,he,Ce,me,Je,it,Te,ue,ve,Me;return(0,e.Jh)(this,function(et){switch(et.label){case 0:if(this.services.telemetryService.logEvent(powerbi.telemetry.EXAboutVisualDialog,{guid:p.name}),m=this.services.localizationService,!p)return[2];switch(me=p.publisher,p.source){case 0:return[3,1];case 2:return[3,2];case 1:return[3,4]}return[3,5];case 1:return S=m.get("VisualSource_FromFile"),N=p.supportUrl&&p.supportUrl.length?p.supportUrl:"https://go.microsoft.com/fwlink/?linkid=2099671",Ce=p.developerModeVisual?void 0:this.getWarningVersionsMessage(p.name,p.version),[3,6];case 2:return[4,this.services.managedCustomVisualsService.isPublicManagedVisualByVisualType(p.name)];case 3:return et.sent()?(S=m.get("VisualSource_FromOrgSource"),N=p.supportUrl):p.custom?(S=m.get("VisualSource_FromAppSource"),ce="https://go.microsoft.com/fwlink/?linkid=2106525"):S=m.get("VisualSource_Default"),N=p.supportUrl,Ce=this.getWarningVersionsMessage(p.name,p.version),[3,6];case 4:return S=m.get("VisualSource_FromOrgSource"),N=p.supportUrl&&p.supportUrl.length?p.supportUrl:"https://go.microsoft.com/fwlink/?linkid=2100000",[3,6];case 5:me=m.get("AboutVisualDialog_Microsoft"),S=m.get("VisualSource_Default"),he="https://go.microsoft.com/fwlink/?linkid=2100001",et.label=6;case 6:return(Je=p.displayName?p.displayName:powerbi.data.getDisplayName(p.titleKey,this.services.localizationService))||(Je=powerbi.data.getDisplayName(h,this.services.localizationService)),it=null,p.custom?[4,this.services.publicCustomVisualService.isApprovedResourceServerRender(p.name)]:[3,8];case 7:Te=et.sent(),ue=this.services.visualPrivilegeService.getWebAccessParameters(p),ve=this.services.visualPrivilegeService.getLocalStoragePrivilege(p),Me=this.services.visualPrivilegeService.getExportContentPrivilege(p),it={certified:Te,webaccess:ue,localstorage:ve,exportContent:Me},et.label=8;case 8:return this.services.modernDialogService.openHostDialog({bindings:{visualName:Je,supportUrl:N,source:S,version:p.version,guid:p.name,appSourceLink:ce,publisher:me,documentation:he,warning:Ce,capabilities:it},componentName:this.aboutVisualDialogToken,dialogName:"AboutVisualDialog"}),[2]}})})},D.prototype.removeVisualFromFavorites=function(p){var h=this,m=this.services.localizationService;this.services.modernDialogService.promptHostSimpleDialog("RemoveVisualFromFavoritesWarning",{title:m.get("RemoveVisualFromFavoritesWarningTitle"),message:m.get("RemoveCustomVisualFromFavoritesWarningMessage"),okButtonText:m.get("OK_ButtonText"),cancelButtonText:m.get("Cancel_ButtonText")}).then(function(S){1===S&&h.services.favoriteVisualLoader.removeVisualFromFavorites(p).then(function(){return(0,e.mG)(h,void 0,void 0,function(){return(0,e.Jh)(this,function(N){switch(N.label){case 0:return this.services.eventBridge.publishToChannel(le.visualPluginsChanged),[4,this.loadVisualTypes()];case 1:return N.sent(),this.update(),[2]}})})})})},D.prototype.unpinVisual=function(p){var h=this,m=this.services.localizationService;this.services.modernDialogService.promptHostSimpleDialog("UnpinVisualWarning",{title:m.get("RemoveVisualFromFavoritesWarningTitle"),message:m.get("RemoveVisualFromFavoritesWarningMessage"),okButtonText:m.get("OK_ButtonText"),cancelButtonText:m.get("Cancel_ButtonText")}).then(function(S){1===S&&h.services.visualPaneSettingsService.unpinVisual(p).then(function(){h.services.visualPaneSettingsService.addExplorationVisual(p.name),h.services.eventBridge.publishToChannel(le.visualPluginsChanged)})})},D.prototype.restoreVisual=function(p){var h=this;this.services.visualPaneSettingsService.restoreVisual(p).then(function(){h.services.eventBridge.publishToChannel(le.visualPluginsChanged)})},D.prototype.restoreAllVisuals=function(){var p=this,h=this.services.localizationService;this.services.modernDialogService.promptHostSimpleDialog("RestoreVisualizationPaneWarning",{title:h.get("RestoreVisualizationPaneWarningTitle"),message:h.get("RestoreVisualizationPaneWarningMessage"),okButtonText:h.get("OK_ButtonText"),cancelButtonText:h.get("Cancel_ButtonText")}).then(function(m){1===m&&p.services.visualPaneSettingsService.restoreAllVisuals().then(function(){p.services.eventBridge.publishToChannel(le.visualPluginsChanged)})})},D.prototype.importVisual=function(){this.services.eventBridge.publishToChannel(le.importVisual)},D.prototype.loadVisualTypes=function(){return(0,e.mG)(this,void 0,void 0,function(){var p,h,m,S=this;return(0,e.Jh)(this,function(N){switch(N.label){case 0:return[4,this.services.visualPlugin.getConvertibleVisualsAsync()];case 1:return p=N.sent(),h=_.filter(p,function(ce){return ce&&(!S.services.visualPaneSettingsService.isUnpinnedVisual(ce.name)||S.services.visualPaneSettingsService.isExplorationVisual(ce.name))}),m=powerbi.explore.viewModels.ViewModelFactory.getAvailableVisualTypes(h,this.services.featureSwitchService,this.services.visualPaneSettingsService,this.visualPluginFilter,this.services.trustedVisual),this.modifyVisualizationPaneVisualTypeDisplay(m),this.viewModel=powerbi.explore.viewModels.ViewModelFactory.createVisualTypesContainer(m),[2]}})})},D.prototype.modifyVisualizationPaneVisualTypeDisplay=function(p){for(var h=0,m=p;h<m.length;h++){var S=m[h];if(S.plugin.name===powerbi.visuals.plugins.textbox.name){var N=this.services.localizationService.get("SmartNarratives_ToolTip");S.title=N,S.tooltipConfig.tooltipTitle=N}}},D.prototype.loadMenuItems=function(){this.customVisualMenuItems={items:[]},this.services.featureSwitchService.featureSwitches.customVisualsStore&&this.customVisualMenuItems.items.push(this.createCustomVisualMenuItem(this.services.localizationService.get("DownloadVisuals_ContextMenu"),2)),this.customVisualMenuItems.items.push(this.createCustomVisualMenuItem(this.services.localizationService.get("ImportVisuals_ContextMenu"),1)),this.customVisualMenuItems.items.push(this.createCustomVisualMenuItem(this.services.localizationService.get("DeleteVisuals_ContextMenu"),0)),this.services.featureSwitchService.featureSwitches.personalVisualizationPaneEnabled&&this.customVisualMenuItems.items.push(this.createCustomVisualMenuItem(this.services.localizationService.get("RestoreVisualizationPane_ContextMenu"),8))},D.prototype.createCustomVisualMenuItem=function(p,h){return{text:p,type:i.iB.Button,data:h,checked:!1}},D.prototype.update=function(){for(var m,p=this.viewModel.visuals,h=this.getSelectedVisual(),S=0,N=p;S<N.length;S++){var ce=N[S];ce.enabled=this.isVisualTypeEnabled(ce.plugin,h),ce.active=this.isVisualTypeActive(ce.plugin,h),ce.active&&(m=ce)}m&&this.services.svgProvider.toggleCssClasses(!0,"active",this.getVisualIconSheetName(m),m.class),this.currentActiveType&&this.currentActiveType!==m&&this.services.svgProvider.toggleCssClasses(!1,"active",this.getVisualIconSheetName(this.currentActiveType),this.currentActiveType.class),this.currentActiveType=m},D.prototype.getWarningVersionsMessage=function(p,h){if(this.services.appSourceResourceService.isNotUpdatedVersion(p,h))return this.services.localizationService.format("CustomVisuals_VersionIsNotUpdatedMessage",[this.services.appSourceResourceService.getVisualVersionFromId(p),h])},D.prototype.isVisualTypeEnabled=function(p,h){if(!h)return!0;var m=j.getVisualType(h),S=this.services.visualPlugin.capabilities(m);return m!==p.name&&(S&&S.isConvertible||this.services.visualPluginOps.isQueryVisual(m))},D.prototype.isVisualTypeActive=function(p,h){return h&&j.getVisualType(h)===p.name},D.prototype.showTrustedVisualConsentDialog=function(p){var h=this;this.services.trustedVisual.getConsentAndLoadVisuals([p.plugin.name]).then(function(m){_.isEmpty(m)||(h.visualAction(p),h.services.visualPlugin.ensureTrustedVisualPlugins(m),h.services.eventBridge.publishToChannel(powerbi.explore.services.events.visualPluginsChanged),h.services.globalEventBridge.publishToChannel(powerbi.events.reloadEmptyVisuals,{visualTypes:m.map(function(S){return S.name})}))})},D.prototype.notifyAddVisualToCanvas=function(p){return(0,e.mG)(this,void 0,void 0,function(){var h,m,S,N,ce,he,Ce;return(0,e.Jh)(this,function(me){switch(me.label){case 0:return h=!1,m=!1,S=!1,p.custom?(N=p,ce=!1,this.services.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps?[4,this.services.publicCustomVisualService.isApprovedResourceByVisualId(N.name)]:[3,2]):[3,9];case 1:ce=me.sent(),me.label=2;case 2:return this.services.eventBridge.publishToChannel(le.addCustomVisualToCanvas,{visualType:N.name,resourcePackageId:N.resourcePackageId,isPublic:ce}),this.services.featureSwitchService.featureSwitches.userFavoriteResourcePackagesEnabled?(he=this.services.visualPaneSettingsService.isFavoritePublicCustomVisual(N.name),(Ce=he)?[3,4]:[4,this.services.favoriteVisualLoader.isFavoriteResourcePackage(N.resourcePackageId)]):[3,5];case 3:Ce=me.sent(),me.label=4;case 4:h=Ce,me.label=5;case 5:return this.services.featureSwitchService.featureSwitches.tenantOutOfBoxVisualsEnabled?[4,this.services.favoriteVisualLoader.isOutOfBoxResourcePackage(N.resourcePackageId)]:[3,7];case 6:m=me.sent(),me.label=7;case 7:return this.services.featureSwitchService.featureSwitches.manageMarketplaceVisuals?[4,this.services.managedCustomVisualsService.isPublicManagedVisualById(N.resourcePackageId)]:[3,9];case 8:S=me.sent(),me.label=9;case 9:return this.services.telemetryService.logEvent(powerbi.telemetry.EXAddVisualToCanvas,{visualType:p.name,isCustom:!!p.custom,isFavorite:h,isOutOfBox:m,isManaged:S}),[2]}})})},D.prototype.visualAction=function(p){var h=this,m=this.getSelectedVisual(),S=p.plugin;if(!1!==this.services.visualConsent.hasConsent(p.plugin.name))if(this.notifyAddVisualToCanvas(S),m){if(this.isVisualTypeEnabled(S,m)){var N=this.currentActiveType;this.services.eventBridge.publishToChannel(le.visualConversion,{visualContainer:m,newVisualType:S.name,actionAfterConversion:function(){var he=N?h.services.localizationService.format("ChangedVisualType",[N.title,p.title]):h.services.localizationService.format("ChangedVisualType_differentSection",[p.title]);h.services.screenReaderService.alert(he)}})}}else this.services.eventBridge.publishToChannel(le.addVisualContainer,{visualType:S.name,telemetrySource:2,shouldSummarize:!0,actionAfterAddition:function(){var he=h.services.localizationService.format("CreatedVisualType",[p.title]);h.services.screenReaderService.alert(he)}});else this.showTrustedVisualConsentDialog(p)},D.prototype.getSelectedVisual=function(){return re.getSelectedVisual(this.services.selection)},D.prototype.visualStyle=function(p){return p.plugin.iconUrl&&(p.plugin.developerModeVisual||p.plugin.custom&&!this.services.trustedVisual.isAutomaticallyImportedVisual(p.plugin.name))?{"background-image":p.plugin.iconUrl,"background-repeat":"no-repeat","background-clip":"content-box"}:null},D.prototype.showCustomVisualsDisabledDialog=function(){this.services.modernDialogService.promptHostSimpleDialog("ImportCustomVisualsDisabled",{title:"ImportCustomVisualsDisabledDialogTitle",message:"ImportCustomVisualsDisabledDialogBody",additionalMessages:["ImportCustomVisualsDisabledDialogBody_AdditionalMessage"],okButtonText:"Close",cancelButtonText:""})},D.prototype.showDropdownForCustomVisuals=function(){return!this.explorationCapabilities.disableCustomVisualPluginActions},D.prototype.showMoreOptionsIcon=function(){return void 0===this.disableMoreOptionsIcon&&!this.explorationCapabilities.disableCustomVisualPluginActions},D.prototype.isDisabled=function(p){return!p.enabled&&!this.newPaneColorsEnabled},D.prototype.getVisualIconSheetName=function(p){return this.newPaneColorsEnabled&&p.class!==powerbi.visuals.plugins.azureMap.name?"visualizationPaneIcons_officeUpdate":"visualizationPaneIcons"},D.prototype.trackByPluginName=function(p,h){return h.plugin.name},D}()},15266:function(Ee,ne,t){t.d(ne,{Q:function(){return d}});var e=t(60400),n=t(18671),f=t(82570),i=t(58052),E=(t(60415),t(76430)),d=function(){function P(){}return P.\u0275fac=function(b){return new(b||P)},P.\u0275mod=E.\u0275\u0275defineNgModule({type:P}),P.\u0275inj=E.\u0275\u0275defineInjector({imports:[[e.CommonModule,f.j,i.Z,n.b]]}),P}()},17217:function(Ee,ne,t){t.d(ne,{_:function(){return V}});var e=t(65657),n=t(32956),f=t(66571),i='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 18.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 479 492" enable-background="new 0 0 479 492" xml:space="preserve">\n<symbol id="100stackedbar">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="100" y1="0" x2="100" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="200" y1="0" x2="200" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="300" y1="0" x2="300" y2="300"/>\n  <rect class="hcAreaWithOutline" x="0" y="20.6" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcAreaWithOutline" x="0" y="74.7" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcAreaWithOutline" x="0" y="129.8" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcAreaWithOutline" x="0" y="184" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcAreaWithOutline" x="0" y="241" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcOuterLine" x="0" y="20.6" fill="#D0D2D3" width="313.6" height="39"/>\n  <rect class="hcOuterLine" x="0" y="74.7" fill="#D0D2D3" width="284.9" height="39"/>\n  <rect class="hcOuterLine" x="0" y="129.8" fill="#D0D2D3" width="318.8" height="39"/>\n  <rect class="hcOuterLine" x="0" y="184" fill="#D0D2D3" width="308.6" height="39"/>\n  <rect class="hcOuterLine" x="0" y="241" fill="#D0D2D3" width="278.6" height="39"/>\n  <rect class="hcArea" x="0" y="20.6" opacity="0.5" fill="#A6A8AB" width="211.1" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" opacity="0.5" fill="#A6A8AB" width="186.2" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" opacity="0.5" fill="#A6A8AB" width="211.1" height="39"/>\n  <rect class="hcArea" x="0" y="184" opacity="0.5" fill="#A6A8AB" width="200" height="39"/>\n  <rect class="hcArea" x="0" y="241" opacity="0.5" fill="#A6A8AB" width="184" height="39"/>\n</symbol>\n\n<symbol id="100stackedcolumn">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcAreaWithOutline" x="19" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="83.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="147.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="211.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="275.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="339.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcOuterLine" x="19" y="104.6" fill="#D0D2D3" width="40.9" height="195.5"/>\n  <rect class="hcOuterLine" x="83.1" y="58" fill="#D0D2D3" width="40.9" height="242.1"/>\n  <rect class="hcOuterLine" x="147.1" y="94.6" fill="#D0D2D3" width="40.9" height="205.5"/>\n  <rect class="hcOuterLine" x="211.1" y="99.5" fill="#D0D2D3" width="40.9" height="200.6"/>\n  <rect class="hcOuterLine" x="275.1" y="60.6" fill="#D0D2D3" width="40.9" height="239.5"/>\n  <rect class="hcOuterLine" x="339.1" y="136.5" fill="#D0D2D3" width="40.9" height="163.6"/>\n  <rect class="hcArea" x="19" y="197.6" opacity="0.5" fill="#A6A8AB" width="40.9" height="102.5"/>\n  <rect class="hcArea" x="83.1" y="173.2" opacity="0.5" fill="#A6A8AB" width="40.9" height="126.9"/>\n  <rect class="hcArea" x="147.1" y="192.3" opacity="0.5" fill="#A6A8AB" width="40.9" height="107.8"/>\n  <rect class="hcArea" x="211.1" y="184.7" opacity="0.5" fill="#A6A8AB" width="40.9" height="115.4"/>\n  <rect class="hcArea" x="275.1" y="162.3" opacity="0.5" fill="#A6A8AB" width="40.9" height="137.8"/>\n  <rect class="hcArea" x="339.1" y="206" opacity="0.5" fill="#A6A8AB" width="40.9" height="94.1"/>\n</symbol>\n\n<symbol id="area">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <g>\n    <g>\n      <g>\n        <polygon class="hcArea" fill="#E1E2E3" points="345.1,93.4 287.8,77 230.6,82.1 173.9,211.9 115.1,204.3 56.9,217.5 0.1,172.3 0.1,300\n          399.8,300 399.8,82.3"/>\n      </g>\n    </g>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#D0D2D3" points="115.1,206.7 175,214.5 231.8,84.9 287.3,80 344.6,96.4 399.8,85.2 399.8,81.1 344.8,92.3\n      288.1,76.1 287.7,76 229,81.2 172.5,210.1 114.9,202.7 57.5,215.7 0.1,170.2 0.1,175.3 56.5,220"/>\n  </g>\n</symbol>\n\n<symbol id="bar">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="100" y1="0" x2="100" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="200" y1="0" x2="200" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="300" y1="0" x2="300" y2="300"/>\n  <rect class="hcArea" x="0" y="20.6" fill="#D0D2D3" width="179.9" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" fill="#D0D2D3" width="253.4" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" fill="#D0D2D3" width="224.6" height="39"/>\n  <rect class="hcArea" x="0" y="184" fill="#D0D2D3" width="311.1" height="39"/>\n  <rect class="hcArea" x="0" y="241" fill="#D0D2D3" width="367.2" height="39"/>\n</symbol>\n\n<symbol id="kpi">\n     <g id="Creation" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="KPI-Canvas" sketch:type="MSArtboardGroup">\n            <rect class="hcOuterLine" id="BG" fill="#FAFAFA" sketch:type="MSShapeGroup" x="0" y="0" width="400" height="299.441341"></rect>\n            <g id="Rectangle-20-+-Rectangle-21-+-Triangle-3" sketch:type="MSLayerGroup" transform="translate(122.000000, 123.000000)">\n                <rect class="hcArea" id="Rectangle-20" fill="#BABABA" sketch:type="MSShapeGroup" x="0" y="0" width="146" height="24"></rect>\n                <rect class="hcArea" id="Rectangle-21" fill="#DDDDDD" sketch:type="MSShapeGroup" x="32" y="35" width="82" height="10"></rect>\n                <polygon class="hcArea" id="Triangle-3" fill="#DDDDDD" sketch:type="MSShapeGroup" points="173.444444 1 186.888889 23 160 23 "></polygon>\n            </g>\n            <path class="hcAreaWithOutline" d="M-2.30078125,266.449219 L32.9472656,292.931641 L66.9375,285.017578 L100.927734,291.078125 L134.900391,222.228516 L167.779297,219.632812 L198.302734,227.175781 L242.171875,250.173828 L286.412109,226.193359 L316.695312,229.787109 L352.632812,216.943359 L425.914062,225.597656 L425.914062,367.497434 L-34.7301703,367.497434 L-34.7301703,273.284528 L-2.30078125,266.449219 Z" id="Path-2" stroke="#DDDDDD" stroke-width="2" fill="#EAEAEA" sketch:type="MSShapeGroup"></path>\n        </g>\n    </g>\n</symbol>\n\n<symbol id="card">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="0" y="0.3" fill="#A6A6A6" width="8" height="299.6"/>\n  <rect class="hcArea" x="221.6" y="42.2" fill="#A6A6A6" width="139.9" height="4"/>\n  <rect class="hcArea" x="221.6" y="109.7" fill="#A6A6A6" width="139.9" height="4"/>\n  <rect class="hcArea" x="221.6" y="180" fill="#A6A6A6" width="141.7" height="4"/>\n  <rect class="hcArea" x="221.6" y="249.5" fill="#A6A6A6" width="141.7" height="4"/>\n  <rect class="hcArea" x="34.1" y="41.8" opacity="0.5" fill="#A6A8AB" width="142" height="142"/>\n  <rect class="hcArea" x="36.1" y="249.5" fill="#A6A6A6" width="141.7" height="4"/>\n</symbol>\n\n<symbol id="clusteredBar">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="100" y1="0" x2="100" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="200" y1="0" x2="200" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="300" y1="0" x2="300" y2="300"/>\n  <rect class="hcArea" x="0" y="25.1" fill="#E1E2E3" width="290.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="71.1" fill="#E1E2E3" width="338.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="103.8" fill="#E1E2E3" width="237.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="182.6" fill="#E1E2E3" width="237.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="260.8" fill="#E1E2E3" width="313.1" height="13.5"/>\n  <rect class="hcOuterLine" x="0" y="38.8" fill="#ACACAC" width="211.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="136.5" fill="#E1E2E3" width="284.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="215" fill="#E1E2E3" width="240.1" height="13.5"/>\n  <rect class="hcOuterLine" x="0" y="150.2" fill="#ACACAC" width="336.1" height="13.5"/>\n  <rect class="hcOuterLine" x="0" y="228.4" fill="#ACACAC" width="284.1" height="13.5"/>\n</symbol>\n\n<symbol id="clusteredColumn">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcArea" x="43.7" y="163.6" fill="#D0D2D3" width="40.9" height="135.7"/>\n  <rect class="hcOuterLine" x="84.4" y="196.8" fill="#ACACAC" width="40.9" height="102.5"/>\n  <rect class="hcArea" x="147.7" y="52.2" fill="#D0D2D3" width="40.9" height="247.1"/>\n  <rect class="hcArea" x="315.4" y="131" fill="#D0D2D3" width="40.9" height="168.3"/>\n  <rect class="hcOuterLine" x="252" y="160.6" fill="#ACACAC" width="40.9" height="138.7"/>\n  <rect class="hcArea" x="211.1" y="103.8" fill="#D0D2D3" width="40.9" height="195.5"/>\n</symbol>\n\n<symbol id="column">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcArea" x="19.1" y="193.3" fill="#D0D2D3" width="40.9" height="106.9"/>\n  <rect class="hcArea" x="83.1" y="167.8" fill="#D0D2D3" width="40.9" height="132.4"/>\n  <rect class="hcArea" x="147.1" y="187.8" fill="#D0D2D3" width="40.9" height="112.4"/>\n  <rect class="hcArea" x="211.2" y="82.1" fill="#D0D2D3" width="40.9" height="218.1"/>\n  <rect class="hcArea" x="275.2" y="39.9" fill="#D0D2D3" width="40.9" height="260.3"/>\n  <rect class="hcArea" x="339.2" y="122.3" fill="#D0D2D3" width="40.9" height="177.9"/>\n</symbol>\n\n<symbol id="combo">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcArea" x="20.4" y="189.5" fill="#D0D2D3" width="40.7" height="110.6"/>\n  <rect class="hcArea" x="84.1" y="163.1" fill="#D0D2D3" width="40.7" height="137"/>\n  <rect class="hcArea" x="147.9" y="183.8" fill="#D0D2D3" width="40.7" height="116.4"/>\n  <rect class="hcArea" x="211.6" y="74.4" fill="#D0D2D3" width="40.7" height="225.8"/>\n  <rect class="hcArea" x="275.3" y="30.7" fill="#D0D2D3" width="40.7" height="269.5"/>\n  <rect class="hcArea" x="339" y="116.1" fill="#D0D2D3" width="40.7" height="184.1"/>\n  <polyline class="hcPolyLine" opacity="0.5" fill="none" stroke="#A6A8AB" stroke-width="4" stroke-miterlimit="10" points="399.3,95.6 344.1,106.8\n    287.4,90.5 230.7,95.6 174.6,224.8 116.4,217.1 58.8,230.3 2.4,185.2 "/>\n</symbol>\n\n<symbol id="defaultWatermark">\n  <g>\n    <rect x="0" y="1" opacity="0.5" fill="#F4F4F4" width="400" height="300"/>\n    <path fill="#929497" d="m93.79999 69.79999v47l30.20001 36.09998c10.29999-8.59998 16.79999-21.59998 16.79999-36.09998l0 0c0-25.89999-21.09998-47-47-47z"/>\n    <path fill="#D0D2D3" d="m46.7 116.9c0 22.1 15.3 40.49999 35.6 45.7l11.39999-45.7h-47l0 0 0 0z"/>\n    <path fill="#E1E2E3" d="m93.79999 116.89999l-11.39999 45.69999c3.69998 0.90001 7.39999 1.5 11.39999 1.5 11.5 0 22-4.09999 30.20001-11l-30.20001-36.19999z"/>\n    <path fill="#A6A8AB" d="m93.79999 69.79999c-25.99998 0-46.99998 21-46.99998 47l0 0h46.99998v-47l0 0z"/>\n    <g>\n      <polygon fill="#E1E2E3" points="200.89999389648438 193.5999755859375 167.70001220703125 185.0999755859375 134.29998779296875 187.70001220703125 101.29998779296875 254.9000244140625 67.10000610351562 251 33.30000305175781 257.79998779296875 0.1999969482421875 234.4000244140625 0.1999969482421875 300.5 399.9000244140625 300.5 399.9000244140625 187.9000244140625 349.20001220703125 182.0999755859375 314.1000061035156 194.5999755859375 286.8999938964844 191.0999755859375 242 214.5 "/>\n    </g>\n    <g>\n      <polyline fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" points="399.9000244140625 187.70001220703125 349.20001220703125 182.0999755859375 314.1000061035156 194.5999755859375 286.8999938964844 191.0999755859375 242 214.5 200.89999389648438 193.4000244140625 167.70001220703125 185 134.29998779296875 187.5999755859375 101.29998779296875 254.79998779296875 67.10000610351562 251 33.30000305175781 257.70001220703125 0.1999969482421875 234.4000244140625 "/>\n    </g>\n    <rect x="185.6" y="115.9" fill="#E1E2E3" width="20.7" height="48"/>\n    <rect x="217.8" y="104.4" fill="#E1E2E3" width="20.7" height="59.5"/>\n    <rect x="250.1" y="113.4" fill="#E1E2E3" width="20.7" height="50.5"/>\n    <rect x="282.3" y="66" fill="#E1E2E3" width="20.7" height="97.9"/>\n    <rect x="314.6" y="47" fill="#E1E2E3" width="20.7" height="116.9"/>\n    <rect x="346.8" y="84" fill="#E1E2E3" width="20.7" height="79.9"/>\n    <rect x="185.6" y="129.5" fill="#D0D2D3" width="20.7" height="34.4"/>\n    <rect x="217.8" y="121.2" fill="#D0D2D3" width="20.7" height="42.7"/>\n    <rect x="250.1" y="127.7" fill="#D0D2D3" width="20.7" height="36.1"/>\n    <rect x="282.3" y="93.7" fill="#D0D2D3" width="20.7" height="70.2"/>\n    <rect x="314.6" y="80.1" fill="#D0D2D3" width="20.7" height="83.8"/>\n    <rect x="346.8" y="106.6" fill="#D0D2D3" width="20.7" height="57.2"/>\n    <rect x="185.6" y="145.1" opacity="0.5" fill="#A6A8AB" width="20.7" height="18.7"/>\n    <rect x="217.8" y="140.7" opacity="0.5" fill="#A6A8AB" width="20.7" height="23.2"/>\n    <rect x="250.1" y="144.1" opacity="0.5" fill="#A6A8AB" width="20.7" height="19.7"/>\n    <rect x="282.3" y="125.6" opacity="0.5" fill="#A6A8AB" width="20.7" height="38.2"/>\n    <rect x="314.6" y="118.3" opacity="0.5" fill="#A6A8AB" width="20.7" height="45.6"/>\n    <rect x="346.8" y="132.7" opacity="0.5" fill="#A6A8AB" width="20.7" height="31.1"/>\n  </g>\n</symbol>\n\n<symbol id="donut">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <path class="hcAreaWithOutline" fill="#929497" d="M200.6,55.6v94.5l60.6,72.5c20.7-17.3,33.9-43.4,33.9-72.5v0C295.1,97.9,252.8,55.6,200.6,55.6z"/>\n  <path class="hcAreaWithOutline" fill="#D0D2D3" d="M106.1,150.1c0,44.3,30.5,81.4,71.6,91.7l22.9-91.7H106.1z"/>\n  <path class="hcOuterLine" fill="#E1E2E3" d="M200.6,150.1l-22.9,91.7c7.3,1.8,15,2.8,22.9,2.8c23.1,0,44.2-8.3,60.6-22L200.6,150.1z"/>\n  <path class="hcOuterLine" fill="#A6A8AB" d="M200.6,55.6c-52.2,0-94.5,42.3-94.5,94.5v0h94.5V55.6z"/>\n  <circle class="hcOuterLine" fill="#F4F4F4" cx="200.6" cy="151" r="53.4"/>\n</symbol>\n\n<symbol id="funnel">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g>\n    <g>\n      <g>\n        <rect class="hcArea" x="46.5" y="59.7" fill="#D0D2D3" width="317.6" height="34"/>\n      </g>\n      <g>\n        <rect class="hcArea" x="82.7" y="97.9" fill="#D0D2D3" width="245.2" height="34"/>\n      </g>\n      <g>\n        <rect class="hcArea" x="141.2" y="136.2" fill="#D0D2D3" width="128.3" height="34"/>\n      </g>\n      <g>\n        <rect class="hcArea" x="181.2" y="174.4" fill="#D0D2D3" width="48.3" height="34"/>\n      </g>\n      <g>\n        <rect class="hcArea" x="194.1" y="212.6" fill="#D0D2D3" width="23.4" height="34"/>\n      </g>\n    </g>\n  </g>\n</symbol>\n\n<symbol id="filledMap">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g>\n    <defs>\n      <rect id="SVGID_1_" x="0.2" y="0" width="401.4" height="302.1"/>\n    </defs>\n    <clipPath id="SVGID_2_">\n      <use xlink:href="#SVGID_1_"  overflow="visible"/>\n    </clipPath>\n    <path class="hcArea2" clip-path="url(#SVGID_2_)" fill="#E1E2E3" d="M49.4-9.3l18.3,44.6l-97.2,30.3c-2.2,0.7-3.4,3-2.7,5.2c0.6,1.8,2.2,2.9,4,2.9\n      c0.4,0,0.8-0.1,1.2-0.2l57.4-17.9l-1.9,32.9l-59.3-4c-2.3-0.2-4.3,1.6-4.4,3.9c-0.2,2.3,1.6,4.3,3.9,4.4l59.4,4l-6.3,111\n      l-50.9-26.4c-2-1.1-4.5-0.3-5.6,1.8c-1.1,2-0.3,4.5,1.8,5.6l56.6,29.4c0,0,0,0,0,0l21.2,11l-71,60c-1.1,0.9-1.6,2.3-1.4,3.7\n      c0.2,1.4,1,2.6,2.2,3.2l62.9,31.8c0.6,0.3,1.2,0.4,1.9,0.4c1.5,0,3-0.8,3.7-2.3c1-2,0.2-4.5-1.8-5.6l-57.3-29l68.8-58.1l20.9,10.9\n      l-4.6,79.7c-0.1,2.3,1.6,4.2,3.9,4.4c0.1,0,0.2,0,0.2,0c2.2,0,4-1.7,4.1-3.9l4.3-76l39,20.2l-41.7,53c-1.4,1.8-1.1,4.4,0.7,5.8\n      c0.8,0.6,1.7,0.9,2.6,0.9c1.2,0,2.4-0.5,3.3-1.6L180.7,206l54.3,26.3l-44.4,89.9c-1,2.1-0.2,4.5,1.9,5.6c0.6,0.3,1.2,0.4,1.8,0.4\n      c1.5,0,3-0.8,3.7-2.3l44.4-90l40.4,19.6l-34.1,66.7c-1,2-0.2,4.5,1.8,5.6c0.6,0.3,1.2,0.5,1.9,0.5c1.5,0,3-0.8,3.7-2.3l34.2-66.8\n      l63.2,30.6l-2.9,34c-0.2,2.3,1.5,4.3,3.8,4.5c0.1,0,0.2,0,0.4,0c2.1,0,3.9-1.6,4.1-3.8l2.9-34.6L400,295c2.2-0.5,3.6-2.8,3-5\n      c-0.5-2.2-2.8-3.6-5-3l-35.5-5.9l4.3-51H399c2.3,0,4.1-1.9,4.1-4.1c0-2.3-1.9-4.1-4.1-4.1h-48.8l-32.4-16.4l1.2-2.4\n      c0.1-0.3,0.2-0.5,0.3-0.8l3.4-12.9l76.1,2.9c0.1,0,0.1,0,0.2,0c2.2,0,4.1-1.8,4.1-4c0.1-2.3-1.7-4.2-4-4.3l-74.2-2.8l14.3-54\n      c14.8,3.5,31.6,5.8,50.3,5.8c3.2,0,6.4-0.1,9.6-0.2c2.3-0.1,4.1-2,4-4.3c-0.1-2.3-2-4.1-4.3-4c-21.6,0.9-40.8-1.5-57.4-5.5\n      l4.7-17.8c14.6,3.3,27.6,4.2,37.1,4.2c9.7,0,15.8-0.9,16.3-1c2.3-0.3,3.8-2.5,3.5-4.7c-0.3-2.3-2.4-3.8-4.7-3.5\n      c-0.2,0-21.4,3.1-48.3-2.7l5.8-76.7l42.9,3.3c2.3,0.2,4.3-1.5,4.5-3.8c0.2-2.3-1.5-4.3-3.8-4.5l-45.4-3.5l-17.5-31.4\n      c-1.5-1.5-3.9-1.7-5.6-0.3l-62.7,64.2c-9.9-13.8-17.7-30.2-23.5-48.9c-0.7-2.2-3-3.4-5.2-2.7c-2.2,0.7-3.4,3-2.7,5.2\n      c6.5,20.9,15.2,37.9,25.2,51.6l-19.1,16.1c-2.6-1.8-33.6-24.6-44.4-76.8c-0.5-2.2-2.7-3.7-4.9-3.2c-2.2,0.5-3.7,2.7-3.2,4.9\n      c0.7,3.3,1.4,6.5,2.3,9.5l-80.5,25.1c-11.6-10.9-7.7-34.5-7.7-34.8c0.4-2.3-1.1-4.4-3.4-4.8c-2.3-0.4-4.4,1.1-4.8,3.4\n      c-0.2,1.1-4.1,24.4,7.2,38.9l-27.8,8.7c0,0,0,0,0-0.1L55.8-15.6c-0.8-1.8-2.7-2.9-4.7-2.5 M307.8,206.7l-7,13.6l-40.7-20.2l10.9-22\n      l16,9.2c0.6,0.3,1.2,0.5,1.9,0.6l25.4,1l-2.8,10.7l-2.2,4.3 M286.3,71.9c6.9,5.7,13.9,10.4,20.9,14.3c-0.1,0.2-0.3,0.4-0.4,0.6\n      l-8.1,16.4c-12.3-6.2-20.8-12.1-25-15.3l12.4-15.8C286.2,72.1,286.2,72,286.3,71.9z M268.5,94.5c4.5,3.5,13.4,9.8,26.4,16.3\n      l-42.2,85.6l-46.3-23.1L268.5,94.5z M316.5,180.6l-26.2-1l-15.6-9l27.7-56.2c8.3,3.8,17.9,7.4,28.8,10.4L316.5,180.6z M333.4,116.7\n      c-10.2-2.9-19.3-6.4-27.2-9.9l8-16.3c0.1-0.2,0.1-0.4,0.2-0.6c6.4,3.1,12.7,5.5,18.7,7.4c1.7,0.5,3.4,1,5,1.5L333.4,116.7z\n       M333.1-14.8l14.6,28.5l-5.8,77.7c-2.1-0.6-4.1-1.2-6.2-1.9c-25.4-8.2-46.3-22.3-62.4-42.3L333.1-14.8z M280.2,66.5\n      c-0.2,0.2-0.4,0.4-0.6,0.6l-82.9,105.2l0,0l-18.4,23.4l-51.4-24.9L267,52.3C271.2,57.5,275.6,62.3,280.2,66.5z M86.8,160.6\n      l24.9,12.1l-26.9,22.7L86.8,160.6z M87.4,151.6l3-52.7l8.4-4.6l2.2,3.5v14.7c0,2.3,1.9,4.1,4.1,4.1h27.7c1.1,0,2.1-0.4,2.9-1.1\n      L165.6,87l20.7,22.7l-67.6,57.1L87.4,151.6z M184.9,47.6l4,5.6l-57.7,55.1h-21.9V96.6c0-0.8-0.2-1.6-0.6-2.2l-2.6-4L184.9,47.6z\n       M236.3,67.4l-43.7,36.9l-21-23.1l25.7-24.5c1.5-1.4,1.7-3.7,0.5-5.4l-5.5-7.7l16.2-8.8C219.5,53.4,231.5,63.7,236.3,67.4z\n       M204.5,27.5L90.9,89.1l3-53.3L194.9,4.3C197.7,13,201,20.7,204.5,27.5z M38.8,53l46.7-14.6l-3.1,53.8l-45.7-3.1L38.8,53z\n       M29.8,212l6.5-114.6l45.7,3.1l-5.8,102.2l-24.4,20.6L29.8,212z M59.7,227.5l15.8-13.4L74.3,235L59.7,227.5z M126.1,261.9\n      l-43.7-22.7l1.9-32.5l35.7-30.2l53.1,25.7L126.1,261.9z M185.9,199.3l15.2-19.3l47.9,23.8l-10.4,21L185.9,199.3z M246.1,228.5\n      l10.3-21l40.6,20.2l-10.4,20.4L246.1,228.5z M294.1,251.7l12.3-24c0,0,0,0,0,0l0,0l7.7-15l33.3,16.9c0.6,0.3,1.2,0.4,1.9,0.4h9.3\n      l-4.3,50.8L294.1,251.7z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="119.4,172.5 81.5,203.8 79.7,244.4 127.5,265.1 178.4,199.4 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M127.5,270.4c-0.7,0-1.4-0.1-2.1-0.4l-47.8-20.7c-2-0.9-3.3-2.9-3.2-5.1l1.8-40.5c0.1-1.5,0.8-2.9,1.9-3.8\n      l37.9-31.3c1.6-1.3,3.7-1.6,5.6-0.7l59,26.9c1.5,0.7,2.6,2,2.9,3.5c0.4,1.6,0,3.2-1,4.5l-50.9,65.7\n      C130.7,269.6,129.1,270.4,127.5,270.4z M85.2,240.9l40.7,17.6l44.3-57.1l-50-22.7l-33.5,27.7L85.2,240.9z"/>\n  </g>\n  <g>\n    <path class="hcArea" fill="#A6A8AB" d="M301.3,108.4l-30.6,62.9L289,183l30.9,0.6l16-61.9C336,121.7,324,121,301.3,108.4z"/>\n    <path class="hcArea" fill="#A6A8AB" d="M320,188.9C319.9,188.9,319.9,188.9,320,188.9l-31-0.6c-1,0-1.9-0.3-2.8-0.8l-18.3-11.7\n      c-2.3-1.5-3.1-4.4-1.9-6.8l30.6-62.9c0.6-1.3,1.8-2.3,3.2-2.8c1.4-0.4,2.9-0.3,4.2,0.4c20.9,11.7,32.2,12.6,32.4,12.6\n      c1.6,0.1,3,0.9,4,2.2c0.9,1.3,1.2,2.9,0.9,4.4l-16,61.9C324.5,187.3,322.4,188.9,320,188.9z M290.6,177.7l25.2,0.5l13.5-52.3\n      c-5.3-1.3-14-4.1-25.7-10.2l-26.1,53.6L290.6,177.7z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="99.7,90.8 104.9,98.1 104.9,111.3 132,111.3 192.9,53.8 185.9,42.8 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M132,116.6h-27.1c-2.9,0-5.3-2.4-5.3-5.3V99.8l-4.3-5.9c-0.9-1.2-1.2-2.8-0.9-4.3c0.3-1.5,1.3-2.8,2.6-3.5\n      l86.3-47.9c1.9-1,4.2-0.8,5.8,0.5l6.9,10.9c1.2,1,1.9,2.4,2,3.9c0.1,1.5-0.5,3-1.6,4.1l-60.8,57.5C134.7,116,133.4,116.6,132,116.6\n      z M110.2,106h19.7l54.9-51.9l-2.4-1.9l-74.9,40.4l1.7,2.4c0.7,0.9,1,2,1,3.1V106z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="4.8,91.4 30.6,92.8 24.6,213.1 4.8,201.8 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M24.6,218.4c-0.9,0-1.8-0.2-2.6-0.7L2.2,206.4c-1.7-0.9-2.7-2.7-2.7-4.6V91.4c0-1.4,0.6-2.8,1.6-3.8\n      c1.1-1,2.5-1.5,3.9-1.4l25.8,1.3c2.9,0.1,5.2,2.6,5,5.5l-5.9,120.3c-0.1,1.8-1.1,3.5-2.7,4.4C26.4,218.1,25.5,218.4,24.6,218.4z\n       M10.1,198.7l9.7,5.5L25,97.8L10.1,97V198.7z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="240.1,229.5 255.4,202.2 301.3,225.5 287.4,251.5 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M287.4,256.8c-0.8,0-1.5-0.2-2.2-0.5l-47.3-22c-1.3-0.6-2.4-1.8-2.8-3.2s-0.3-2.9,0.4-4.2l15.3-27.3\n      c1.4-2.5,4.5-3.4,7.1-2.1l45.9,23.3c1.3,0.6,2.2,1.8,2.7,3.2c0.4,1.4,0.3,2.9-0.4,4.1l-14,26C291.1,255.8,289.3,256.8,287.4,256.8z\n       M247.6,227.1l37.5,17.4l9-16.7l-36.5-18.5L247.6,227.1z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="358.4,272.1 364.6,226.4 396.5,226.4 397,271.7 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M358.4,277.4c-1.5,0-3-0.7-4-1.8c-1-1.2-1.5-2.7-1.3-4.2l6.2-45.7c0.4-2.6,2.6-4.6,5.3-4.6h31.9\n      c2.9,0,5.3,2.4,5.3,5.3l0.4,45.3c0,2.9-2.3,5.3-5.3,5.4L358.4,277.4C358.4,277.4,358.4,277.4,358.4,277.4z M369.2,231.7l-4.8,35\n      l27.1-0.3l-0.3-34.7H369.2z"/>\n  </g>\n  <g>\n    <path class="hcArea" fill="#A6A8AB" d="M198.6,5c0,0,6.2,34.2,43.5,62.6L314,5.4L198.6,5z"/>\n    <path class="hcArea" fill="#A6A8AB" d="M242.1,72.9c-1.1,0-2.3-0.4-3.2-1.1c-38.5-29.3-45.2-64.4-45.5-65.8c-0.3-1.6,0.1-3.2,1.2-4.4\n      c1-1.2,2.5-1.9,4.1-1.9L314,0.1c2.2,0,4.2,1.4,5,3.5c0.8,2.1,0.2,4.4-1.5,5.9l-71.9,62.1C244.6,72.4,243.4,72.9,242.1,72.9z\n       M205.7,10.3c3.5,10.3,13,31.4,36.3,50.3l57.8-49.9L205.7,10.3z"/>\n  </g>\n  <g>\n    <path class="hcArea" fill="#A6A8AB" d="M56.3,5l15,31.3l37-11.5c0,0-3.1-4.4-7.9-20.3L56.3,5z"/>\n    <path class="hcArea" fill="#A6A8AB" d="M71.2,41.5c-2,0-3.9-1.1-4.8-3l-15-31.3c-0.8-1.6-0.7-3.5,0.3-5.1s2.6-2.5,4.4-2.5l44.1-0.4c0,0,0,0,0.1,0\n      c2.3,0,4.4,1.5,5.1,3.7c4.4,14.4,7.2,18.8,7.3,18.9c1,1.4,1.2,3.1,0.6,4.7c-0.5,1.6-1.9,2.8-3.5,3.3l-37,11.5\n      C72.3,41.5,71.8,41.5,71.2,41.5z M64.6,10.2L74,29.8l26.7-8.3c-1.2-2.7-2.6-6.5-4.3-11.7L64.6,10.2z"/>\n  </g>\n  <g>\n    <path class="hcArea" fill="#A6A8AB" d="M397.4,21.9l-1.6,78.5c-29.3,4.7-49.9-4.7-49.9-4.7L353,17l-8.4-12h53.2L397.4,21.9z"/>\n    <path class="hcArea" fill="#A6A8AB" d="M379.4,107c-21.2,0-35.1-6.2-35.7-6.4c-2.1-0.9-3.3-3.1-3.1-5.3l6.9-76.8l-7.3-10.4\n      c-1.1-1.6-1.3-3.8-0.4-5.5c0.9-1.8,2.7-2.9,4.7-2.9h53.2c1.4,0,2.8,0.6,3.8,1.6c1,1,1.5,2.4,1.5,3.9L402.7,22l-1.6,78.5\n      c-0.1,2.6-1.9,4.7-4.5,5.2C391,106.6,385.2,107,379.4,107z M351.6,92.2c5,1.6,14.9,4.2,27.8,4.2c3.7,0,7.5-0.2,11.2-0.6l1.5-74\n      l0.3-11.4h-37.5l2.5,3.6c0.7,1,1.1,2.3,0.9,3.5L351.6,92.2z"/>\n  </g>\n</symbol>\n\n<symbol id="azureMap">\n  <g>\n    <path d="M123.06 0L0 195.304l154.077-59.735L123.06 0z" fill="#555555"/>\n    <path d="M98.188 39.47l76.356 185.14L123.06 0 98.188 39.47z" fill="#8e8e8e"/>\n    <path d="M93.768 158.95l46.294-17.948 34.482 83.608-80.776-65.66z" fill="#101010"/>\n  </g>\n</symbol>\n\n<symbol id="gauge">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <path class="hcOuterLine" fill="#E1E2E3" d="M200,82.3c-73.7,0-133.4,59.7-133.4,133.4h51.6c0-45.2,36.6-81.8,81.8-81.8s81.8,36.6,81.8,81.8h51.6\n    C333.4,142,273.7,82.3,200,82.3z"/>\n  <path class="hcArea" fill="#A6A8AB" d="M94.4,134.3C77,156.8,66.7,185,66.7,215.7h51.6c0-18.9,6.4-36.2,17.1-50.1L94.4,134.3z"/>\n</symbol>\n\n<symbol id="line">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <g>\n    <polygon class="hcArea" fill="#D0D2D3" points="115.1,206.7 175,214.5 231.8,84.9 287.3,80 344.6,96.4 399.8,85.2 399.8,81.1 344.8,92.3\n      288.1,76.1 287.7,76 229,81.2 172.5,210.1 114.9,202.7 57.5,215.7 0.1,170.2 0.1,175.3 56.5,220 \t"/>\n  </g>\n</symbol>\n\n<symbol id="map">\n  <g>\n    <defs>\n      <rect id="SVGID_1_" x="0.9" y="0.2" width="399.1" height="299.6"/>\n    </defs>\n    <clipPath id="SVGID_2_">\n      <use xlink:href="#SVGID_1_"  overflow="visible"/>\n    </clipPath>\n    <path class="hcArea2" clip-path="url(#SVGID_2_)" fill="#E1E2E3" d="M54.1-9.8l19.8,48.3L-31.3,71.3c-2.4,0.7-3.7,3.3-2.9,5.6\n      c0.6,1.9,2.4,3.2,4.3,3.2c0.4,0,0.9-0.1,1.3-0.2l62.1-19.4l-2,35.6l-64.1-4.4c-2.5-0.2-4.6,1.7-4.8,4.2c-0.2,2.5,1.7,4.6,4.2,4.8\n      L31,105l-6.8,120.1l-55-28.5c-2.2-1.1-4.9-0.3-6.1,1.9c-1.1,2.2-0.3,4.9,1.9,6.1l61.3,31.8c0,0,0,0,0,0l22.9,11.9l-76.8,64.9\n      c-1.2,1-1.7,2.5-1.6,4c0.2,1.5,1.1,2.8,2.4,3.5l68.1,34.4c0.6,0.3,1.3,0.5,2,0.5c1.6,0,3.2-0.9,4-2.5c1.1-2.2,0.2-4.9-2-6l-62-31.4\n      l74.4-62.9l22.7,11.8l-4.9,86.3c-0.1,2.5,1.8,4.6,4.2,4.7c0.1,0,0.2,0,0.3,0c2.4,0,4.3-1.8,4.5-4.2l4.7-82.2l42.2,21.9l-45.2,57.3\n      c-1.5,1.9-1.2,4.8,0.7,6.3c0.8,0.6,1.8,1,2.8,1c1.3,0,2.6-0.6,3.5-1.7l102.9-130.5l58.8,28.5l-48,97.3c-1.1,2.2-0.2,4.9,2,6\n      c0.6,0.3,1.3,0.5,2,0.5c1.7,0,3.2-0.9,4-2.5l48-97.4l43.7,21.2l-36.9,72.2c-1.1,2.2-0.3,4.9,2,6c0.7,0.3,1.4,0.5,2,0.5\n      c1.6,0,3.2-0.9,4-2.4l37-72.3l68.4,33.1l-3.1,36.8c-0.2,2.5,1.6,4.6,4.1,4.9c0.1,0,0.3,0,0.4,0c2.3,0,4.3-1.8,4.5-4.1l3.2-37.5\n      l41.3,5.7c2.4-0.6,3.9-3,3.3-5.4c-0.6-2.4-3-3.9-5.4-3.3l-38.4-6.4l4.7-55.2h34.8c2.5,0,4.5-2,4.5-4.5s-2-4.5-4.5-4.5h-52.8\n      l-35.1-17.8l1.4-2.6c0.1-0.3,0.3-0.6,0.3-0.9l3.7-14l82.3,3.1c0.1,0,0.1,0,0.2,0c2.4,0,4.4-1.9,4.5-4.3c0.1-2.5-1.8-4.6-4.3-4.7\n      l-80.3-3l15.5-58.4c16,3.8,34.2,6.3,54.4,6.3c3.4,0,6.9-0.1,10.4-0.2c2.5-0.1,4.4-2.2,4.3-4.7c-0.1-2.5-2.2-4.4-4.7-4.3\n      c-23.3,1-44.1-1.6-62.1-6l5.1-19.3c15.8,3.6,29.9,4.5,40.2,4.5c10.5,0,17.1-1,17.7-1c2.5-0.4,4.1-2.7,3.8-5.1\n      c-0.4-2.5-2.7-4.1-5.1-3.8c-0.3,0-23.2,3.3-52.3-2.9l6.2-83l46.4,3.6c2.5,0.2,4.6-1.7,4.8-4.1c0.2-2.5-1.7-4.6-4.1-4.8L383.6,9\n      l-18.9-34c-1.6-1.7-4.2-1.8-6.1-0.4l-67.8,69.5c-10.7-15-19.2-32.6-25.5-52.9c-0.7-2.4-3.3-3.7-5.6-3c-2.4,0.7-3.7,3.2-3,5.6\n      c7,22.7,16.5,41,27.2,55.9l-20.7,17.5c-2.8-2-36.3-26.7-48-83.1c-0.5-2.4-2.9-4-5.3-3.5c-2.4,0.5-4,2.9-3.5,5.3\n      c0.7,3.6,1.6,7,2.5,10.3l-87.1,27.2c-12.6-11.8-8.4-37.4-8.3-37.6c0.4-2.4-1.2-4.8-3.6-5.2c-2.5-0.4-4.8,1.2-5.2,3.6\n      c-0.2,1.2-4.4,26.4,7.8,42.1l-30.1,9.4c0,0,0,0,0-0.1L61-16.7c-0.8-2-2.9-3.1-5-2.7 M333.7,223.9l-7.5,14.7l-44-21.9l11.8-23.8\n      l17.3,10c0.6,0.4,1.3,0.6,2.1,0.6l27.4,1l-3.1,11.6l-2.4,4.6 M310.5,78c7.4,6.2,15.1,11.3,22.6,15.4c-0.2,0.2-0.3,0.4-0.4,0.7\n      l-8.8,17.8c-13.3-6.7-22.5-13.1-27-16.5l13.4-17.1C310.3,78.2,310.4,78.1,310.5,78z M291.2,102.5c4.9,3.8,14.6,10.6,28.6,17.7\n      l-45.7,92.6L224,187.8L291.2,102.5z M343.1,195.6l-28.4-1.1l-16.9-9.7l30-60.8c9,4.1,19.4,8,31.2,11.3L343.1,195.6z M361.4,126.5\n      c-11.1-3.1-20.9-6.9-29.4-10.7l8.7-17.7c0.1-0.2,0.2-0.4,0.2-0.6c7,3.4,13.8,6,20.2,8.1c1.8,0.6,3.6,1.1,5.4,1.6L361.4,126.5z\n       M361.1-15.8L376.9,15l-6.3,84c-2.2-0.6-4.5-1.3-6.8-2c-27.5-8.8-50.1-24.2-67.6-45.8L361.1-15.8z M303.8,72.2\n      c-0.2,0.2-0.4,0.4-0.6,0.6l-89.7,113.8l0,0l-19.9,25.3l-55.7-27L289.5,56.9C294.1,62.5,298.9,67.6,303.8,72.2z M94.6,174l26.9,13\n      l-29.1,24.6L94.6,174z M95.2,164.3l3.3-57.1l9.1-4.9l2.4,3.8V122c0,2.5,2,4.5,4.5,4.5h29.9c1.2,0,2.3-0.4,3.1-1.2l32.3-30.9\n      l22.4,24.6L129,180.7L95.2,164.3z M200.7,51.7l4.3,6.1l-62.5,59.7h-23.7v-12.7c0-0.9-0.2-1.7-0.7-2.4l-2.8-4.4L200.7,51.7z\n       M256.3,73.2L209,113.1l-22.8-25L214,61.6c1.6-1.5,1.9-4,0.6-5.8l-5.9-8.3l17.6-9.5C238.2,58.1,251.1,69.2,256.3,73.2z M221.9,30\n      L99,96.7l3.3-57.7L211.5,4.9C214.6,14.3,218.1,22.7,221.9,30z M42.7,57.6l50.5-15.8L89.9,100l-49.4-3.4L42.7,57.6z M32.9,229.6\n      l7.1-124l49.4,3.4L83,219.6l-26.4,22.3L32.9,229.6z M65.2,246.4l17.1-14.5L81,254.6L65.2,246.4z M137,283.6l-47.3-24.5l2-35.2\n      l38.6-32.6l57.5,27.8L137,283.6z M201.8,215.9l16.5-20.9l51.8,25.8l-11.2,22.8L201.8,215.9z M267,247.5l11.2-22.7l43.9,21.8\n      l-11.3,22L267,247.5z M318.9,272.6l13.3-26c0,0,0,0,0,0l0,0l8.3-16.3l36.1,18.3c0.6,0.3,1.3,0.5,2,0.5h10.1l-4.6,55L318.9,272.6z"\n      />\n  </g>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="45.5" cy="62.9" r="18.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="158.8" cy="177.3" r="12.8"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="228.2" cy="235" r="12.8"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="297.6" cy="157.2" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="20.8" cy="230.1" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="382.6" cy="250.1" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="374.7" cy="22.1" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="240.9" cy="111.1" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="182.7" cy="26" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="268.6" cy="95.6" r="13.6"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.0954" stroke-miterlimit="10" cx="63.2" cy="124.9" r="11.3"/>\n</symbol>\n\n<symbol id="matrix">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcOuterLine" x="0.3" y="0" fill="#E1E2E3" width="92.8" height="300"/>\n  <line class="hcNoStroke" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="93.1" y1="0" x2="93.1" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="199.7" y1="0.5" x2="199.7" y2="299.8"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="298.6" y1="0" x2="298.6" y2="300"/>\n  <rect class="hcArea" x="14.7" y="46.4" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="46.4" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="46.4" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="46.4" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="79.7" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="79.7" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="79.7" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="79.7" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="114" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="114" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="114" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="114" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="148.5" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="148.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="148.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="148.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="182.3" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="182.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="182.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="182.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="215.3" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="215.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="215.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="215.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="248.6" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="248.6" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="248.6" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="248.6" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="281.5" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="281.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="281.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="281.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="0" y="0" fill="#D0D2D3" width="399.8" height="30.4"/>\n</symbol>\n\n<symbol id="multiRowCard">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="22" y="21" fill="#A6A6A6" width="3.1" height="47.2"/>\n  <rect class="hcArea" x="22" y="91" fill="#A6A6A6" width="3.1" height="47.2"/>\n  <rect class="hcArea" x="22" y="160.3" fill="#A6A6A6" width="3.1" height="47.2"/>\n  <rect class="hcArea" x="22" y="231" fill="#A6A6A6" width="3.1" height="47.2"/>\n  <rect class="hcAreaWithOutline" x="36.7" y="35.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="36.7" y="46.2" fill="#D0D2D3" width="39.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="36.7" y="105.4" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="36.7" y="116.1" fill="#D0D2D3" width="46.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="36.7" y="174.7" fill="#ACACAC" width="65.8" height="7.7"/>\n  <rect class="hcOuterLine" x="36.7" y="185.4" fill="#D0D2D3" width="39.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="36.7" y="245.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="36.7" y="256.2" fill="#D0D2D3" width="28.2" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="163.1" y="35.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="163.1" y="46.2" fill="#D0D2D3" width="39.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="163.1" y="105.4" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="163.1" y="116.1" fill="#D0D2D3" width="46.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="163.1" y="174.7" fill="#ACACAC" width="65.8" height="7.7"/>\n  <rect class="hcOuterLine" x="163.1" y="185.4" fill="#D0D2D3" width="39.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="163.1" y="245.5" fill="#ACACAC" width="39.3" height="7.7"/>\n  <rect class="hcOuterLine" x="163.1" y="256.2" fill="#D0D2D3" width="28.2" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="289.5" y="35.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="289.5" y="46.2" fill="#D0D2D3" width="75.4" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="289.5" y="105.4" fill="#ACACAC" width="37.7" height="7.7"/>\n  <rect class="hcOuterLine" x="289.5" y="116.1" fill="#D0D2D3" width="87.4" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="289.5" y="174.7" fill="#ACACAC" width="28.2" height="7.7"/>\n  <rect class="hcOuterLine" x="289.5" y="185.4" fill="#D0D2D3" width="56.4" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="289.5" y="245.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="289.5" y="256.2" fill="#D0D2D3" width="87.4" height="7.7"/>\n</symbol>\n\n<symbol id="pie">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <path class="hcAreaWithOutline" fill="#929497" d="M200,55.3v94.8l60.8,72.7c20.8-17.4,34-43.5,34-72.7v0C294.8,97.7,252.3,55.3,200,55.3z"/>\n  <path class="hcAreaWithOutline" fill="#D0D2D3" d="M105.2,150.1c0,44.4,30.6,81.7,71.8,92l23-92H105.2z"/>\n  <path class="hcOuterLine" fill="#E1E2E3" d="M200,150.1l-23,92c7.4,1.8,15.1,2.8,23,2.8c23.1,0,44.3-8.3,60.8-22.1L200,150.1z"/>\n  <path class="hcOuterLine" fill="#A6A8AB" d="M200,55.3c-52.3,0-94.8,42.4-94.8,94.8v0H200V55.3z"/>\n</symbol>\n\n<symbol id="scatterplot">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="133.9" y1="0.4" x2="133.3" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="266.9" y1="0.4" x2="266.6" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="149.8" x2="400" y2="150"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="74.9" cy="214.1" r="36.2"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="186" cy="94" r="12.9"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="266.9" cy="124.1" r="17.2"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="310.4" cy="193.8" r="26.3"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="214.5" cy="176.3" r="18.6"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="137" cy="150.2" r="12.9"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="346.4" cy="68.1" r="12.9"/>\n</symbol>\n\n<symbol id="shapeMap">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g>\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="#EEEEEE" d="M379.2,0H400v10.75l-14.2-1.5c-1.672-0.266-2.738-1.016-3.2-2.25\n      L379.2,0z M218.775,0h39c7.22,18.663,16.17,35.087,26.85,49.275L261.85,68.55C243.634,49.55,229.275,26.7,218.775,0z M0,62V0\n      h57.725L73.15,38.875L0,62z M78.175,300H1.25l55.925-47.325L80.2,264.775L78.175,300z M231.05,300h-96.475l60.575-76.7\n      l59.575,28.851L231.05,300z M400,206.675v34.575h-18.5l-37.15-18.025l1.825-3.475l3.875-14.825L400,206.675z M400,142.875v55.05\n      l-47.675-1.649l15.725-59.95C378.267,138.94,388.917,141.123,400,142.875z M361.275,125.875c-10.32-2.924-20.153-6.332-29.5-10.225\n      l9.5-19.175c7.915,3.922,16.273,7.272,25.074,10.05L361.275,125.875z M326.425,238.75L281.6,217.025L293.45,193.1l17.3,9.15\n      c1.639,0.954,3.472,1.454,5.5,1.5l24.4,0.85l-3.7,14.15L326.425,238.75z M304.65,71.4L192.9,212.875l-56.4-27.3l153.325-129.75\n      C294.472,61.398,299.414,66.59,304.65,71.4z M121.25,187.5l-30.1,25.475L93.375,174L121.25,187.5z M39.55,105.2l49.6,3.2\n      l-6.375,111.65L56.25,242.475l-24.7-12.949L39.55,105.2z M258.45,244.65l-57.976-28.101l17.075-21.625L270.4,220.5L258.45,244.65z"\n      />\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M369.4,0l7.024,14.975L371,99.15\n      c-30.688-8.892-55.647-25.2-74.875-48.925L345.425,0H369.4z M400,114.05v20.15c-10.34-1.591-20.281-3.575-29.825-5.95l5-19.175\n      C383.115,111.174,391.39,112.833,400,114.05z M333.675,0l-42.85,43.325C281.736,30.743,274.086,16.301,267.875,0H333.675z\n       M353.45,300H304l10.05-19.1L353.45,300z M240.55,300l21.825-44.15l43.9,21.275L294.25,300H240.55z M0,212.95V102.675l30.925,1.975\n      l-7.75,120.475L0,212.95z M111.975,0H196.1l-75.025,23.725C115.636,18.07,112.603,10.162,111.975,0z M0,290.075v-67.4l49.175,25.8\n      L0,290.075z M124.1,300H86.175l1.775-31.15l42.95,22.525L124.1,300z M392.025,300l5.225-49.85H400V300H392.025z M384.275,300H372.7\n      l-54.75-26.525l22.524-42.875l37.551,18.226c1.563,0.898,3.389,1.34,5.475,1.325h6L384.275,300z M359.175,133.9l-16.25,62.05\n      L316,195l-18.6-9.875l30.75-62.15C337.978,127.132,348.319,130.773,359.175,133.9z M295.35,96.425l15.5-19.625\n      c7.126,5.878,14.751,11.103,22.875,15.675l-9.774,19.75C313.812,107.567,304.277,102.3,295.35,96.425z M199.925,51.6l4.575,5.9\n      l-62,59.75h-25.3l0.75-11.25c-0.098-2.051-0.498-3.617-1.2-4.7L114.3,98L199.925,51.6z M40.075,97l2.575-39.975L93,41.1\n      l-3.375,59.075L40.075,97z M80.75,255.325l-16.475-8.65L82.1,231.6L80.75,255.325z M136.325,284.5L88.5,259.4l2-34.9l39-33\n      l58.075,28.125L136.325,284.5z M310.175,269.7L266.1,248.35l11.95-24.149l44.65,21.649L310.175,269.7z"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="#F8F8F8" d="M66.725,0h36.325c0.458,11.727,3.549,20.561,9.275,26.5\n      L81.15,36.35L66.725,0z M0,94.425V70.5l33.8-10.675L31.45,96.45L0,94.425z M400,19.825V105.1\n      c-6.929-0.898-13.62-2.106-20.075-3.625l5.351-83.225L400,19.825z M223.075,29.2l-125.3,67.925l3.35-58.6L211.05,3.775\n      C214.647,12.659,218.656,21.134,223.075,29.2z M207.675,47.4l19.7-10.7c8.162,13.625,17.57,26,28.225,37.125l-46.875,39.65\n      l-23.3-25.825L213.5,60.6c1.147-1.6,1.364-3.2,0.65-4.8L207.675,47.4z M320.35,119.525l-46.399,93.8l-51.3-24.851l67.675-85.7\n      C299.695,108.996,309.704,114.579,320.35,119.525z M179.125,93.725l22.925,25.4l-73.775,62.45L93.9,164.925l3.3-57.625l9.7-5.275\n      l2.95,3.975l-1,15.1c0.133,3.4,1.916,5.15,5.35,5.25h28.65c1.682,0.015,3.099-0.568,4.25-1.75L179.125,93.725z"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="#D9D9D9" d="M400,10.75v9.075l-14.725-1.575l-5.351,83.225\n      c6.455,1.519,13.146,2.727,20.075,3.625v8.95c-8.61-1.217-16.885-2.875-24.825-4.975l-5,19.175\n      c9.544,2.375,19.485,4.359,29.825,5.95v8.675c-11.083-1.752-21.733-3.935-31.95-6.55l-15.725,59.95L400,197.925v8.75l-49.95-1.75\n      l-3.875,14.825l-1.825,3.475l37.15,18.025H400v8.9h-2.75L392.025,300h-7.75l5.225-49.85h-6c-2.086,0.015-3.911-0.427-5.475-1.325\n      L340.475,230.6l-22.524,42.875L372.7,300h-19.25l-39.4-19.1L304,300h-9.75l12.025-22.875l-43.9-21.275L240.55,300h-9.5\n      l23.675-47.85L195.15,223.3L134.575,300H124.1l6.8-8.625L87.95,268.85L86.175,300h-8l2.025-35.225l-23.025-12.101L1.25,300H0\n      v-9.925l49.175-41.601L0,222.675v-9.725l23.175,12.175l7.75-120.475L0,102.675v-8.25l31.45,2.025l2.35-36.625L0,70.5V62\n      l73.15-23.125L57.725,0h9L81.15,36.35l31.175-9.85c-5.726-5.939-8.818-14.773-9.275-26.5h8.925\n      c0.627,10.162,3.661,18.07,9.1,23.725L196.1,0h22.675c10.5,26.7,24.858,49.55,43.074,68.55l22.775-19.275\n      c-10.68-14.188-19.63-30.612-26.85-49.275h10.1c6.211,16.301,13.861,30.743,22.95,43.325L333.675,0h11.75l-49.3,50.225\n      C315.353,73.95,340.312,90.258,371,99.15l5.425-84.175L369.4,0h9.8l3.399,7c0.462,1.234,1.528,1.984,3.2,2.25L400,10.75z\n       M361.275,125.875l5.074-19.35c-8.801-2.778-17.159-6.128-25.074-10.05l-9.5,19.175\n      C341.122,119.543,350.955,122.951,361.275,125.875z M359.175,133.9c-10.855-3.126-21.197-6.768-31.024-10.925l-30.75,62.15L316,195\n      l26.925,0.95L359.175,133.9z M326.425,238.75l10.525-20l3.7-14.15l-24.4-0.85c-2.028-0.046-3.861-0.546-5.5-1.5l-17.3-9.15\n      L281.6,217.025L326.425,238.75z M304.65,71.4c-5.236-4.81-10.179-10.001-14.825-15.575L136.5,185.575l56.4,27.3L304.65,71.4z\n       M295.35,96.425c8.928,5.875,18.462,11.142,28.601,15.8l9.774-19.75c-8.124-4.572-15.749-9.797-22.875-15.675L295.35,96.425z\n       M223.075,29.2c-4.419-8.066-8.428-16.541-12.025-25.425l-109.925,34.75l-3.35,58.6L223.075,29.2z M207.675,47.4l6.476,8.4\n      c0.714,1.6,0.497,3.2-0.65,4.8l-28.075,27.05l23.3,25.825l46.875-39.65c-10.654-11.125-20.063-23.5-28.225-37.125L207.675,47.4z\n       M199.925,51.6L114.3,98l2.45,3.3c0.703,1.083,1.103,2.649,1.2,4.7l-0.75,11.25h25.3l62-59.75L199.925,51.6z M320.35,119.525\n      c-10.646-4.946-20.654-10.529-30.024-16.75l-67.675,85.7l51.3,24.851L320.35,119.525z M179.125,93.725L147.1,124.6\n      c-1.151,1.182-2.568,1.765-4.25,1.75H114.2c-3.434-0.1-5.217-1.85-5.35-5.25l1-15.1l-2.95-3.975l-9.7,5.275l-3.3,57.625\n      l34.375,16.65l73.775-62.45L179.125,93.725z M40.075,97l49.55,3.175L93,41.1L42.65,57.025L40.075,97z M121.25,187.5L93.375,174\n      l-2.225,38.975L121.25,187.5z M39.55,105.2l-8,124.325l24.7,12.949l26.525-22.425L89.15,108.4L39.55,105.2z M136.325,284.5\n      l51.25-64.875L129.5,191.5l-39,33l-2,34.9L136.325,284.5z M80.75,255.325L82.1,231.6l-17.825,15.075L80.75,255.325z M258.45,244.65\n      l11.95-24.15l-52.851-25.575l-17.075,21.625L258.45,244.65z M310.175,269.7L322.7,245.85L278.05,224.2L266.1,248.35L310.175,269.7z\n      "/>\n  </g>\n</symbol>\n\n<symbol id="slicer">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="11.8" y="17.7" fill="#D0D2D3" width="34.7" height="15.3"/>\n  <rect class="hcArea" x="34.1" y="57" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="55" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcOuterLine" x="12.8" y="79" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="105" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="103" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="129" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="127" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="153" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="151" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="177" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="175" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="201" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="199" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="225" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="223" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="249" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="247" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="273" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="271" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="81.7" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <line class="hcGridLine" fill="none" stroke="#D0D2D3" stroke-miterlimit="10" x1="3" y1="44.3" x2="397" y2="44.3"/>\n</symbol>\n\n<symbol id="stackedarea">\n  <rect id="XMLID_263_" class="hcOuterLine" x="0" y="0" opacity="0.5" fill="#F1F2F2" width="400" height="300"/>\n  <line id="XMLID_262_" class="hcNoStroke" opacity="0.5" fill="#F4F4F4" x1="0" y1="38" x2="400" y2="38"/>\n  <line id="XMLID_261_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="75.4" x2="400" y2="75.4"/>\n  <line id="XMLID_260_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="112.8" x2="400" y2="112.8"/>\n  <line id="XMLID_259_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="150.3" x2="400" y2="150.3"/>\n  <line id="XMLID_258_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="400" y1="187.7" x2="0" y2="187.7"/>\n  <line id="XMLID_257_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="225.1" x2="400" y2="225.1"/>\n  <line id="XMLID_256_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="262.6" x2="400" y2="262.6"/>\n  <polygon id="XMLID_242_" class="hcOuterLine" fill="#A6A8AB" points="0,107.5 83.6,96.9 139.6,113 200,97.1 265.8,116.6 336,107.7 400,116.3 400,199.3\n\t  0,199.3 "/>\n  <polygon id="XMLID_239_" class="hcOuterLine" fill="#D0D2D3" points="0,157.6 60.4,153 132.4,169.6 216.9,159 279.1,177.7 334.2,162.7 400,172.5 400,253.2\n\t  0,253.2 "/>\n  <polygon id="XMLID_236_" class="hcOuterLine" fill="#E1E2E3" points="0,224.1 69.3,241.5 156,219.5 252,241.5 332,219.5 400,227.8 400,300 0,300 "/>\n  <polyline id="XMLID_138_" class="hcOuterLine" fill="none" stroke="#797A7A" stroke-width="4" stroke-miterlimit="10" points="0,107.5 83.6,96.9 139.6,113 200,97.1 265.8,116.6 336,107.7 400,116.3 "/>\n  <polyline id="XMLID_294_" class="hcOuterLine" fill="none" stroke="#929497" stroke-width="4" stroke-miterlimit="10" points="0,157.6 60.4,153 132.4,169.6 216.9,159 279.1,177.7 334.2,162.7 400,172.5 "/>\n  <polyline id="XMLID_301_" class="hcOuterLine" fill="none" stroke="#A6A8AB" stroke-width="4" stroke-miterlimit="10" points="0,224.1 69.3,241.5 156,219.5 252,241.5 332,219.5 400,227.8 "/>\n </symbol>\n\n<symbol id="stackedbar">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="100" y1="0" x2="100" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="200" y1="0" x2="200" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="300" y1="0" x2="300" y2="300"/>\n  <rect class="hcArea" x="0" y="20.6" fill="#E1E2E3" width="179.9" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" fill="#E1E2E3" width="253.4" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" fill="#E1E2E3" width="224.6" height="39"/>\n  <rect class="hcArea" x="0" y="184" fill="#E1E2E3" width="311.1" height="39"/>\n  <rect class="hcArea" x="0" y="241" fill="#E1E2E3" width="367.2" height="39"/>\n  <rect class="hcArea" x="0" y="20.6" fill="#D0D2D3" width="138.7" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" fill="#D0D2D3" width="195.3" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" fill="#D0D2D3" width="173.1" height="39"/>\n  <rect class="hcArea" x="0" y="184" fill="#D0D2D3" width="239.8" height="39"/>\n  <rect class="hcArea" x="0" y="241" fill="#D0D2D3" width="283" height="39"/>\n  <rect class="hcArea" x="0" y="20.6" opacity="0.5" fill="#A6A8AB" width="90.2" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" opacity="0.5" fill="#A6A8AB" width="127" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" opacity="0.5" fill="#A6A8AB" width="112.5" height="39"/>\n  <rect class="hcArea" x="0" y="184" opacity="0.5" fill="#A6A8AB" width="155.9" height="39"/>\n  <rect class="hcArea" x="0" y="241" opacity="0.5" fill="#A6A8AB" width="184" height="39"/>\n</symbol>\n\n<symbol id="stackedcolumn">\n  <rect x="0.2" y="-0.1" fill="#F4F4F4" width="400.1" height="300"/>\n  <line fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0.2" y1="73.4" x2="400.2" y2="73.4"/>\n  <line fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0.2" y1="147.9" x2="400.2" y2="147.9"/>\n  <line fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0.2" y1="222.3" x2="400.2" y2="222.3"/>\n  <rect x="19.3" y="193.2" fill="#E1E2E3" width="40.9" height="106.9"/>\n  <rect x="83.3" y="167.7" fill="#E1E2E3" width="40.9" height="132.4"/>\n  <rect x="147.3" y="187.7" fill="#E1E2E3" width="40.9" height="112.4"/>\n  <rect x="211.3" y="82" fill="#E1E2E3" width="40.9" height="218.1"/>\n  <rect x="275.4" y="39.8" fill="#E1E2E3" width="40.9" height="260.3"/>\n  <rect x="339.4" y="122.3" fill="#E1E2E3" width="40.9" height="177.9"/>\n  <rect x="19.3" y="219.2" fill="#D0D2D3" width="40.9" height="80.9"/>\n  <rect x="83.3" y="199.9" fill="#D0D2D3" width="40.9" height="100.2"/>\n  <rect x="147.3" y="215.1" fill="#D0D2D3" width="40.9" height="85"/>\n  <rect x="211.3" y="129.8" fill="#D0D2D3" width="40.9" height="170.3"/>\n  <rect x="275.4" y="103.2" fill="#D0D2D3" width="40.9" height="197"/>\n  <rect x="339.4" y="165.6" fill="#D0D2D3" width="40.9" height="134.6"/>\n  <rect x="19.3" y="254" opacity="0.5" fill="#A6A8AB" width="40.9" height="46.1"/>\n  <rect x="83.3" y="243" opacity="0.5" fill="#A6A8AB" width="40.9" height="57.1"/>\n  <rect x="147.3" y="251.6" opacity="0.5" fill="#A6A8AB" width="40.9" height="48.5"/>\n  <rect x="211.3" y="206.1" opacity="0.5" fill="#A6A8AB" width="40.9" height="94.1"/>\n  <rect x="275.4" y="187.8" opacity="0.5" fill="#A6A8AB" width="40.9" height="112.3"/>\n  <rect x="339.4" y="223.4" opacity="0.5" fill="#A6A8AB" width="40.9" height="76.7"/>\n</symbol>\n\n<symbol id="table">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="0" y="0" fill="#D0D2D3" width="399.8" height="30.1"/>\n  <rect class="hcArea" x="14.4" y="46.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="46.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="46.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="46.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="64.8" x2="400" y2="64.8"/>\n  <rect class="hcArea" x="14.4" y="79.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="79.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="79.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="79.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="98.6" x2="399.3" y2="98.6"/>\n  <rect class="hcArea" x="14.4" y="113.4" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="113.4" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="113.4" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="113.4" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="132.7" x2="400" y2="132.7"/>\n  <rect class="hcArea" x="14.4" y="147.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="147.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="147.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="147.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="166.2" x2="400" y2="166.2"/>\n  <rect class="hcArea" x="14.4" y="181" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="181" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="181" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="181" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="198.8" x2="400" y2="198.8"/>\n  <rect class="hcArea" x="14.4" y="213.7" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="213.7" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="213.7" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="213.7" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="231.7" x2="400" y2="231.7"/>\n  <rect class="hcArea" x="14.4" y="246.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="246.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="246.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="246.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="265.4" x2="400" y2="265.4"/>\n  <rect class="hcArea" x="14.4" y="281.1" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="281.1" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="281.1" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="281.1" fill="#A6A6A6" width="76.7" height="3.1"/>\n</symbol>\n\n<symbol id="tree">\n  <rect class="hcOuterLine" x="204.3" y="0" fill="#E1E2E3" width="195.3" height="150"/>\n  <rect class="hcAreaWithOutline" x="0" y="0" fill="#D0D2D3" width="204.3" height="150"/>\n  <rect class="hcOuterLine" x="0" y="150" fill="#E1E2E3" width="180.9" height="79.6"/>\n  <rect class="hcAreaWithOutline" x="0" y="229.6" fill="#A6A8AB" width="180.9" height="70.4"/>\n  <rect class="hcOuterLine" x="180.9" y="150" fill="#F4F4F4" width="121.1" height="103.8"/>\n  <rect class="hcAreaWithOutline" x="302" y="150" opacity="0.5" fill="#A6A8AB" width="97.7" height="103.8"/>\n  <rect class="hcOuterLine" x="180.9" y="253.8" fill="#E1E2E3" width="218.8" height="46.2"/>\n</symbol>\n\n<symbol id="waterfall">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcArea" x="75.3" y="128" fill="#D0D2D3" width="44" height="89.1"/>\n  <rect class="hcArea"x="143.8" y="27.1" fill="#D0D2D3" width="44" height="103"/>\n  <rect class="hcArea"x="212.3" y="27.1" fill="#D0D2D3" width="44" height="205.3"/>\n  <rect class="hcArea"x="280.8" y="230.2" fill="#D0D2D3" width="44" height="55"/>\n  <rect class="hcArea"x="349.2" y="283.1" fill="#D0D2D3" width="44" height="16.5"/>\n  <rect class="hcArea"x="6.9" y="214.9" fill="#D0D2D3" width="44" height="84.7"/>\n  <rect class="hcArea"x="50.8" y="214.9" fill="#D0D2D3" width="24.5" height="2.1"/>\n  <rect class="hcArea"x="119.3" y="128" fill="#D0D2D3" width="24.5" height="2.1"/>\n  <rect class="hcArea"x="187.8" y="27.1" fill="#D0D2D3" width="24.5" height="2.1"/>\n  <rect class="hcArea"x="256.3" y="230.2" fill="#D0D2D3" width="24.5" height="2.1"/>\n  <rect class="hcArea"x="324.7" y="283.1" fill="#D0D2D3" width="24.5" height="2.1"/>\n</symbol>\n\n<symbol id="scriptvisual">\n\t<rect x="0" y="0" fill="#F4F4F4" width="400" height="100"/>\n\t<rect x="0" y="100" fill="#FFFFFF" width="400" height="100"/>\n\t<rect x="0" y="200" fill="#F4F4F4" width="400" height="100"/>\n\t<path fill="#E1E2E3" d="M138.8,90h-65.5v-8h65.5V90z"/>\n\t<path fill="#E1E2E3" d="M22.3,81l-8.2-9.7l25.1-21.2l-25.1-21.3l8.2-9.7l35.9,30.3v1.4L22.3,81z"/>\n\t<path fill="#E1E2E3" d="M168.2,193.4h-14.5v-14.5h14.5V193.4z"/>\n\t<path fill="#E1E2E3" d="M199.3,160.2v33.4h-16v-87.2h36.3c3,0,6,0.5,9.1,1.5c3.1,1.1,5.9,2.6,8.4,4.8c2.5,2.1,4.6,4.9,6.2,8.3\n\t\tc1.6,3.4,2.4,7.5,2.4,12.3c0,3.6-0.4,6.6-1.3,9.4c-0.8,2.8-2,5.1-3.5,7.2c-1.5,2-3.2,3.8-5.2,5.2c-1.9,1.4-4,2.5-6.2,3.3l18.5,35.1\n\t\th-17.2l-16.6-33.4h-14.9V160.2z M217.2,145.5c1.4,0,2.8-0.2,4.3-0.5c1.5-0.4,2.9-1.1,4.2-2c1.2-1,2.4-2.2,3.2-3.7\n\t\tc0.8-1.5,1.2-3.5,1.2-5.9c0-2.4-0.4-4.4-1.2-5.9c-0.9-1.6-1.9-2.8-3.2-3.8c-1.2-1-2.6-1.6-4.2-2c-1.5-0.4-2.9-0.6-4.3-0.6h-18v24.3\n\t\tL217.2,145.5L217.2,145.5z"/>\n</symbol>\n\n<symbol id="pythonvisual">\n\t<rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="100"/>\n\t<rect class="hcOuterLine" x="0" y="100" fill="#FFFFFF" width="400" height="100"/>\n\t<rect class="hcOuterLine" x="0" y="200" fill="#F4F4F4" width="400" height="100"/>\n\t<path class="hcArea" fill="#E1E2E3" d="M22.3,81l-8.2-9.7l25.1-21.2l-25.1-21.3l8.2-9.7l35.9,30.3v1.4L22.3,81z"/>\n  <g transform="scale(0.8, 0.8) translate(142, 65)">\n    <path class="hcArea2"\n        style="fill:#E1E2E3;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;marker:none;marker-start:none;marker-mid:none;marker-end:none;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;visibility:visible;display:inline;overflow:visible"\n        d="M 99.75,67.46875 C 71.718268,67.468752 73.46875,79.625 73.46875,79.625 L 73.5,92.21875 L 100.25,92.21875 L 100.25,96 L 62.875,96 C 62.875,96 44.9375,93.965724 44.9375,122.25 C 44.937498,150.53427 60.59375,149.53125 60.59375,149.53125 L 69.9375,149.53125 L 69.9375,136.40625 C 69.9375,136.40625 69.433848,120.75 85.34375,120.75 C 101.25365,120.75 111.875,120.75 111.875,120.75 C 111.875,120.75 126.78125,120.99096 126.78125,106.34375 C 126.78125,91.696544 126.78125,82.125 126.78125,82.125 C 126.78125,82.124998 129.04443,67.46875 99.75,67.46875 z M 85,75.9375 C 87.661429,75.937498 89.8125,78.088571 89.8125,80.75 C 89.812502,83.411429 87.661429,85.5625 85,85.5625 C 82.338571,85.562502 80.1875,83.411429 80.1875,80.75 C 80.187498,78.088571 82.338571,75.9375 85,75.9375 z "\n        id="path8615" />\n    <path class="hcArea2"\n        id="path8620"\n        d="M 100.5461,177.31485 C 128.57784,177.31485 126.82735,165.1586 126.82735,165.1586 L 126.7961,152.56485 L 100.0461,152.56485 L 100.0461,148.7836 L 137.4211,148.7836 C 137.4211,148.7836 155.3586,150.81787 155.3586,122.53359 C 155.35861,94.249323 139.70235,95.252343 139.70235,95.252343 L 130.3586,95.252343 L 130.3586,108.37734 C 130.3586,108.37734 130.86226,124.03359 114.95235,124.03359 C 99.042448,124.03359 88.421098,124.03359 88.421098,124.03359 C 88.421098,124.03359 73.514848,123.79263 73.514848,138.43985 C 73.514848,153.08705 73.514848,162.6586 73.514848,162.6586 C 73.514848,162.6586 71.251668,177.31485 100.5461,177.31485 z M 115.2961,168.8461 C 112.63467,168.8461 110.4836,166.69503 110.4836,164.0336 C 110.4836,161.37217 112.63467,159.2211 115.2961,159.2211 C 117.95753,159.2211 120.1086,161.37217 120.1086,164.0336 C 120.10861,166.69503 117.95753,168.8461 115.2961,168.8461 z "\n        style="fill:#E1E2E3;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;marker:none;marker-start:none;marker-mid:none;marker-end:none;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;visibility:visible;display:inline;overflow:visible" />\n  </g>\n</symbol>\n\n<symbol id="visioVisual">\n  <rect x="0" y="0" width="400" height="300" style="fill:#f4f4f4" />\n  <g transform="translate(-99.772966,-149.88962)">\n    <rect x="345.18201" y="266.92099" transform="matrix(-0.7071,0.7071,-0.7071,-0.7071,794.8842,218.5744)" width="13.983" height="13.983" id="rect4171" style="fill:#a6a8ab" />\n    <path d="m 220,227.412 0,145.176 90.435,17.412 0,-180 L 220,227.412 Z m 50.302,108.264 -15.251,-0.554 -18.794,-70.533 14.875,0.18 11.474,48.627 c 0.146,0.602 0.275,1.183 0.391,1.746 0.129,-0.618 0.271,-1.243 0.421,-1.871 l 11.512,-48.217 14.851,0.177 -19.479,70.445 z" style="fill:#a6a8ab" />\n    <path d="m 338.261,306.957 0,13.912 10.435,0 0,-30.709 -11.029,-11.029 -20.274,0 0,24.348 17.391,0 c 1.921,0 3.477,1.555 3.477,3.478" style="fill:#a6a8ab" />\n    <path d="m 376.521,230.87 -59.13,0 0,41.304 16.797,0 16.756,-16.752 c 0.336,-0.343 0.781,-0.513 1.229,-0.513 0.445,0 0.894,0.17 1.236,0.513 l 17.256,17.262 c 0.679,0.676 0.679,1.783 0,2.459 l -15.014,15.021 0,34.185 c 0,1.923 -1.556,3.479 -3.479,3.479 l -13.913,0 0,10.435 c 0,1.923 -1.556,3.479 -3.479,3.479 l -17.391,0 0,27.392 58.797,0 c 2.106,0 3.812,-3.193 3.812,-5.299 l 0,-129.487 c 0.002,-2.11 -1.37,-3.478 -3.477,-3.478" style="fill:#a6a8ab" />\n    <polygon points="317.392,334.782 331.305,334.782 331.305,327.826 331.305,320.869 331.305,310.435 317.392,310.435 " style="fill:#a6a8ab" />\n  </g>\n</symbol>\n\n<symbol id="ribbon">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <path class="hcOuterLine" opacity="0.6" fill="none" d="M64.642,247.169c0,0,1.199,0.312,3.219,0.09C65.837,246.993,64.642,247.169,64.642,247.169z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="none" d="M123.897,240.718c2.53,0.326,4.058,0.006,4.058,0.006S126.486,240.223,123.897,240.718z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="none" d="M233.476,235.959c0,0-1.221-0.088-3.23,0.25C232.257,236.296,233.476,235.959,233.476,235.959z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="none" d="M170.163,240.724c0,0,1.045,0.24,2.791,0.078C171.192,240.569,170.163,240.724,170.163,240.724z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#D0D2D3" d="M67.861,247.259c5.631-0.62,17.651-5.409,27.929-32.763\n    c-14.13-24.423-31.148-22.512-31.148-22.512H22.433v55.185h42.209C64.642,247.169,65.837,246.993,67.861,247.259z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#D0D2D3" d="M172.954,240.801c-1.746,0.163-2.791-0.078-2.791-0.078h-42.209c0,0-1.528,0.32-4.058-0.006\n    c-5.385,1.03-15.622,6.374-27.599,29.532c-0.28,0.541-0.559,1.073-0.837,1.595c0.28,0.533,0.559,1.072,0.837,1.628\n    c14.44,28.857,31.656,26.303,31.656,26.303h42.209c0,0,19.623,3.06,30.908-31.153l0,0\n    C190.339,245.761,178.283,241.505,172.954,240.801z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#BCBEBF" d="M335.358,213.967h42.209v85.808h-42.209l-59.674,0h-42.209c0,0-17.217,2.612-31.656-29.525\n    c-0.249-0.554-0.498-1.095-0.749-1.628c8.574-25.994,22.823-31.343,29.175-32.413c2.011,0.087,3.23-0.25,3.23-0.25h42.209\n    c0,0,21.015,0.295,29.437-10.848C313.543,213.967,335.358,213.967,335.358,213.967z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#BCBEBF" d="M67.861,247.259c-2.02,0.222-3.219-0.09-3.219-0.09H22.433v52.605h42.209\n    c0,0,13.485,4.616,30.819-27.93C85.031,252.002,73.372,247.984,67.861,247.259z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#BCBEBF" d="M123.897,240.718c2.589-0.495,4.058,0.006,4.058,0.006h42.209c0,0,1.029-0.155,2.791,0.078\n    c5.789-0.539,19.302-5.515,28.139-38.431v0c-12.263-23.359-30.929-23.363-30.929-23.363h-42.209c0,0-17.577-4.662-31.633,34.056\n    c-0.177,0.486-0.354,0.961-0.532,1.433c0.476,0.823,0.949,1.674,1.418,2.558C107.198,235.888,118.143,239.976,123.897,240.718z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#B2B2B2" d="M123.897,240.718c-5.754-0.741-16.699-4.83-26.689-23.663\n    c-0.469-0.884-0.942-1.735-1.418-2.558c-10.278,27.354-22.298,32.143-27.929,32.763c5.511,0.725,17.17,4.743,27.6,24.585\n    c0.278-0.522,0.557-1.054,0.837-1.595C108.275,247.091,118.512,241.747,123.897,240.718z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#B2B2B2" d="M230.246,236.209c-5.541-0.24-17.102-3.706-25.78-26.346\n    c-1.048-2.734-2.181-5.222-3.374-7.493v0c-8.836,32.916-22.35,37.892-28.139,38.431c5.33,0.703,17.386,4.959,28.117,27.82\n    C209.644,242.627,223.894,237.279,230.246,236.209z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#E1E2E3" d="M335.358,129.225h42.209V24.001h-42.209c0,0-22.303-0.416-31.726,21.046\n    s-27.948,18.54-27.948,18.54h-42.209c0,0-22.044,1.959-32.816,13.804c-10.772,11.845-30.497,12.829-30.497,12.829h-42.209\n    c0,0-18.557-0.045-32.423,10.911c-13.156,10.395-30.89,10.395-30.89,10.395H22.433v80.459h42.209c0,0,23.238-1.338,32.227-6.606\n    c11.174-6.547,31.086-6.372,31.086-6.372h42.209c0,0,20.992-0.409,29.512-7.828c12.867-11.204,33.8-8.966,33.8-8.966h42.209\n    c0,0,20.543,1.101,30.534-16.879S335.358,129.225,335.358,129.225z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#D0D2D3" d="M275.685,162.213c0,0,20.543,1.101,30.534-16.879s29.14-16.109,29.14-16.109h42.209v84.742\n    h-42.209c0,0-21.816,0-30.237,11.143c-8.421,11.143-29.437,10.848-29.437,10.848h-42.209c0,0-1.221-0.088-3.23,0.25\n    c-5.541-0.24-17.102-3.706-25.78-26.346c-1.048-2.734-2.181-5.222-3.374-7.493c11.502-42.844,32.384-40.157,32.384-40.157H275.685"/>\n  <rect class="hcOuterLine" x="22.433" y="111.525" fill="#DDDDDD" width="42.209" height="80.459"/>\n  <rect class="hcOuterLine" x="22.433" y="191.984" fill="#D0D2D3" width="42.209" height="55.185"/>\n  <rect class="hcOuterLine" x="22.433" y="247.169" fill="#BCBEBF" width="42.209" height="52.605"/>\n  <rect class="hcOuterLine" x="127.955" y="90.219" fill="#DDDDDD" width="42.209" height="88.788"/>\n  <rect class="hcOuterLine" x="127.955" y="179.007" fill="#BCBEBF" width="42.209" height="61.717"/>\n  <rect class="hcOuterLine" x="127.955" y="240.724" fill="#D0D2D3" width="42.209" height="59.051"/>\n  <rect class="hcOuterLine" x="233.476" y="63.586" fill="#DDDDDD" width="42.209" height="98.627"/>\n  <rect class="hcOuterLine" x="233.476" y="162.213" fill="#D0D2D3" width="42.209" height="73.746"/>\n  <rect class="hcOuterLine" x="233.476" y="235.959" fill="#BCBEBF" width="42.209" height="63.816"/>\n  <rect class="hcOuterLine" x="335.358" y="24.001" fill="#DDDDDD" width="42.209" height="105.224"/>\n  <rect class="hcOuterLine" x="335.358" y="129.225" fill="#D0D2D3" width="42.209" height="84.742"/>\n  <rect class="hcOuterLine" x="335.358" y="213.967" fill="#BCBEBF" width="42.209" height="85.808"/>\n</symbol>\n\n<symbol id="keyDrivers">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g style="transform: scale(15)">\n    <rect class="hcArea" x="0" y="2" opacity="0.8" fill="#D0D2D3" width="20" height="1"/>\n    <rect class="hcArea" x="0" y="6" opacity="0.8" fill="#D0D2D3" width="13" height="1"/>\n    <rect class="hcArea" x="0" y="10" opacity="0.8" fill="#D0D2D3" width="9" height="1"/>\n    <rect class="hcArea" x="0" y="14" opacity="0.8" fill="#D0D2D3" width="4" height="1"/>\n    <circle class="hcArea" fill="#898989" cx="21.5" cy="2.5" r="1.75"/>\n    <circle class="hcArea" fill="#ACACAC" cx="14.5" cy="6.5" r="1.75"/>\n    <circle class="hcArea" fill="#ACACAC" cx="10.5" cy="10.5" r="1.75"/>\n    <circle class="hcArea" fill="#ACACAC" cx="5.5" cy="14.5" r="1.75"/>\n    <g style="transform: translate(5px, -1px)">\n      <path class="hcArea" opacity="0.8" fill="#BEBEBE" d="M18,19h-1v-1h-1v1c0,0.136,0.026,0.265,0.078,0.387\n        s0.124,0.229,0.215,0.32s0.198,0.163,0.32,0.215S16.864,20,17,20h1c0.141,0,0.271-0.026,0.391-0.078s0.226-0.124,0.316-0.215\n        s0.163-0.196,0.215-0.316S19,19.141,19,19v-1h-1V19z"/>\n      <path class="hcArea" fill="#CBCBCB" d="M15.711,17.234c0.104,0.114,0.179,0.233,0.223,0.355S16,17.849,16,18h1h1h1\n        c0-0.297,0.099-0.555,0.297-0.773c0.224-0.25,0.397-0.515,0.52-0.793S20,15.844,20,15.5s-0.065-0.668-0.195-0.973\n        s-0.309-0.57-0.535-0.797s-0.492-0.405-0.797-0.535S17.844,13,17.5,13c-0.349,0-0.676,0.065-0.98,0.195s-0.569,0.308-0.793,0.531\n        s-0.401,0.488-0.531,0.793S15,15.151,15,15.5c0,0.344,0.062,0.655,0.184,0.934S15.481,16.979,15.711,17.234z"/>\n      <rect class="hcArea2" x="17" y="18" fill="#DBDBDB" width="1" height="1"/>\n    </g>\n  </g>\n</symbol>\n\n<symbol id="decompositionTree">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g style="transform: scale(10);">\n    <rect class="hcHide" style="fill:#f8f8f8;" width="40" height="30"/>\n    <path class="hcArea" style="fill:#bebebe;isolation:isolate;" d="M34.64,27.07H33.21V25.64H31.79v1.43a1.26,1.26,0,0,0,.11.55,1.31,1.31,0,0,0,.3.46,1.62,1.62,0,0,0,.46.31,1.5,1.5,0,0,0,.55.11h1.43a1.47,1.47,0,0,0,.56-.11,1.57,1.57,0,0,0,.45-.31,1.39,1.39,0,0,0,.31-.45,1.47,1.47,0,0,0,.11-.56V25.64H34.64Z"/>\n    <rect class="hcArea2" style="fill:#dbdbdb;" x="33.21" y="25.64" width="1.43" height="1.43"/>\n    <path class="hcArea" style="fill:#cbcbcb;" d="M31.37,24.55a1.41,1.41,0,0,1,.32.51,1.76,1.76,0,0,1,.1.58h4.28a1.56,1.56,0,0,1,.43-1.1,4.57,4.57,0,0,0,.74-1.13,3.41,3.41,0,0,0,.26-1.34,3.45,3.45,0,0,0-.28-1.39,3.49,3.49,0,0,0-1.9-1.9,3.62,3.62,0,0,0-2.79,0,3.54,3.54,0,0,0-1.89,1.89,3.47,3.47,0,0,0-.28,1.4,3.41,3.41,0,0,0,.26,1.34A4.31,4.31,0,0,0,31.37,24.55Z"/>\n    <path class="hcArea2" style="fill:none;stroke:#dbdbdb;stroke-miterlimit:10;stroke-width:0.83px;" d="M10.5,12.28c.68-.34,1.85.39,2.66,1.88.56,1,.87,1.78,1.45,3s1.18,3.09,2.89,3.09"/>\n    <path class="hcArea2" style="fill:none;stroke:#dbdbdb;stroke-miterlimit:10;stroke-width:0.83px;" d="M10.5,12.21c.68.35,1.85-.38,2.66-1.87.56-1,.87-1.78,1.45-3s1.18-3.09,2.89-3.09"/>\n    <line class="hcArea2" style="fill:none;stroke:#dbdbdb;stroke-miterlimit:10;stroke-width:0.83px;" x1="11.16" y1="12.25" x2="17.5" y2="12.25"/>\n    <rect class="hcArea" style="fill:#bebebe;" x="17.5" y="10.5" width="10" height="3.5"/>\n    <rect class="hcArea" style="fill:#bebebe;" x="1.5" y="10.5" width="10" height="3.5"/>\n    <rect class="hcArea" style="fill:#bebebe;" x="17.5" y="2.5" width="10" height="3.5"/>\n    <rect class="hcArea" style="fill:#bebebe;" x="17.5" y="18.5" width="10" height="3.5"/>\n  </g>\n</symbol>\n\n</svg>',M=t(76430),E=t(84940),I=t(95781),d=t(43851),P=t(60660),y=t(4430),b=t(23580),a=t(80815),o=t(60400),l=t(9784);function s(w,T){if(1&w&&(M.\u0275\u0275elementStart(0,"div",3),M.\u0275\u0275element(1,"i",4),M.\u0275\u0275element(2,"span",5),M.\u0275\u0275elementEnd()),2&w){var v=M.\u0275\u0275nextContext();M.\u0275\u0275advance(2),M.\u0275\u0275propertyInterpolate("localize",v.emptyVisualMessageKey)}}var x="</svg>",V=function(){function w(T,v,g,r,u,C,F){this.domSanitizer=T,this.featureSwitchService=v,this.gettingStarted=g,this.localizationService=r,this.notificationBarService=u,this.explorationCapabilities=C,this.visualPlugin=F,this.emptyVisualMessageKey=v.featureSwitches.onObject?"Select_Fields_To_Populate_Visual_OnObject":"Select_Fields_To_Populate_Visual"}return w.prototype.ngOnInit=function(){var T=this;this.blankCanvasWatermarkEnabled=!this.explorationCapabilities.getCapabilities().disableBlankCanvasWatermark,this.isSchemaEmpty$=this.gettingStarted.currentState$.pipe((0,e.h)(function(v){return 0===v||2===v}),(0,n.b)(function(v){return T.updateDataWarningNotification(0===v)}),(0,f.U)(function(v){return 0===v})),this.updateWatermark(this.visualType)},w.prototype.ngOnDestroy=function(){this.notificationId&&this.notificationBarService.hide(this.notificationId)},w.prototype.updateDataWarningNotification=function(T){T?this.notificationId||this.displayMessageOnNotificationBar():this.notificationId&&(this.notificationBarService.hide(this.notificationId),this.notificationId=null)},w.prototype.displayMessageOnNotificationBar=function(){this.blankCanvasWatermarkEnabled&&(this.notificationId=this.notificationBarService.notify({message:this.localizationService.get("Need_Data_To_Build_Visual"),notificationType:6}))},w.prototype.ngOnChanges=function(T){T.visualType&&!T.visualType.firstChange&&this.updateWatermark(T.visualType.currentValue)},w.prototype.updateWatermark=function(T){var v=this.visualPlugin.getPlugin(T);this.svgVisualKey=v&&v.watermarkKey||"defaultWatermark";var g='\n                <svg id="Layer_1" x="0px" y="0px" viewBox="0 0 400 300" enable-background="new 0 0 400 300" xml:space="preserve" ng-bind-html="$ctrl.innerSvgContent">\n                    '+w.parseTemplateCacheToSVG(this.svgVisualKey,x,"</symbol>")+"\n                "+x;this.svgContent=this.domSanitizer.bypassSecurityTrustHtml(g)},w.parseTemplateCacheToSVG=function(T,v,g){var r=i.indexOf('id="'+T),C=i.substring(r+(T.length+6),i.indexOf(v)),F=C.indexOf(g);return C.substring(0,F)},w.\u0275fac=function(v){return new(v||w)(M.\u0275\u0275directiveInject(E.H7),M.\u0275\u0275directiveInject(I.vZ),M.\u0275\u0275directiveInject(d.c),M.\u0275\u0275directiveInject(P.o),M.\u0275\u0275directiveInject(y.S),M.\u0275\u0275directiveInject(b.U),M.\u0275\u0275directiveInject(a.D))},w.\u0275cmp=M.\u0275\u0275defineComponent({type:w,selectors:[["visual-watermark"]],inputs:{visualType:"visualType"},features:[M.\u0275\u0275NgOnChangesFeature],decls:4,vars:5,consts:[[1,"visualWatermark"],["class","warning",4,"ngIf"],[1,"watermark",3,"innerHTML"],[1,"warning"],[1,"icon","glyphicon","pbi-glyph-info","glyph-small"],[3,"localize"]],template:function(v,g){1&v&&(M.\u0275\u0275elementStart(0,"div",0),M.\u0275\u0275template(1,s,3,1,"div",1),M.\u0275\u0275pipe(2,"async"),M.\u0275\u0275element(3,"div",2),M.\u0275\u0275elementEnd()),2&v&&(M.\u0275\u0275advance(1),M.\u0275\u0275property("ngIf",!M.\u0275\u0275pipeBind1(2,3,g.isSchemaEmpty$)&&g.blankCanvasWatermarkEnabled),M.\u0275\u0275advance(2),M.\u0275\u0275property("innerHTML",g.svgContent,M.\u0275\u0275sanitizeHtml),M.\u0275\u0275attribute("data-svg-visual-key",g.svgVisualKey))},directives:[o.NgIf,l.X],pipes:[o.AsyncPipe],styles:['visual-watermark{width:100%;height:100%}visual-watermark .visualWatermark{display:flex;flex-direction:column;height:100%;background:var(--white-color, #FFF)}visual-watermark .visualWatermark .warning{display:flex;height:10%;margin:8px;color:var(--gray-180, #252423)}visual-watermark .visualWatermark .warning i.glyphicon{padding-right:8px}visual-watermark .visualWatermark .warning span{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}visual-watermark .visualWatermark .watermark{height:90%;z-index:1;flex-grow:1}visual-watermark .visualWatermark .watermark>svg{width:100%;height:100%}\n'],encapsulation:2}),w}()},37105:function(Ee,ne,t){t.d(ne,{y:function(){return A}});var e=t(40582),n=t(76430),f=t(65491),i=t(60354),M=t(76963),E=t(49974),I=t(26188),d=t(35309),P=t(80815),y=t(32806),b=t(60103),a=t(71367),o=t(95781),l=t(79224),s=t(1185),c=t(39697),O=t(59116),x=t(93993),V=t(91350),w=t(46528),T=t(37813),v=t(61226),g=t(60400),r=powerbi.visualHost.controllers.VisualComponentCore,u=powerbi.common.Watcher,C=["visualElement"],F=function(k,R,G){return{"disable-events":k,"allow-deferred-rendering":R,"disable-events-format-mode":G}},A=function(){function W(k,R,G,le,ge,re,j,ie,Z,fe,Q,J,se,oe,K,D,p,h,m,S){this.approvedResourceService=k,this.publicCustomVisualService=R,this.eventBridge=G,this.featureSwitchService=le,this.ngZone=ge,this.moduleLoader=re,this.es6PromiseFactory=j,this.renderingSynchronizer=ie,this.telemetryService=Z,this.themeService=fe,this.trustedVisual=Q,this.visualPlugin=J,this.visualSandbox=se,this.visualStylePresetService=oe,this.visualWarningTelemetryService=K,this.svgProvider=D,this.ref=p,this.globalEventBridge=h,this.managedCustomVisualsService=m,this.timeoutService=S,this.visualReady=new n.EventEmitter,this.useOnPushChangeDetection=!1,this.applyDeferredRenderingClass=!0,this.destroyed=!1}return W.prototype.ngOnChanges=function(k){var R;!this.core||(k.viewModel&&(this.core.viewModel=k.viewModel.currentValue),k.allowDeferredRendering&&(this.core.allowDeferredRendering=k.allowDeferredRendering.currentValue,this.updateApplyDeferredRenderingClass(null===(R=this.viewModel)||void 0===R?void 0:R.type)),k.currentZone&&(this.core.currentZone=k.currentZone.currentValue),(k.supportsKeyboardNavigation||k.inheritFocusNavMode)&&this.manageKeyboardNavigation(),k.subSelections&&this.core.onSubSelectionsChanged(this.subSelections),k.formatMode&&this.core.onFormatModeChanged(this.formatMode))},W.prototype.manageKeyboardNavigation=function(){this.supportsKeyboardNavigation?(this.ariaHidden=void 0,this.focusNavMode=this.inheritFocusNavMode?void 0:"Group",this.keyboardShortcuts=this.inheritFocusNavMode?void 0:"ctrl-ArrowRight scoped"):(this.ariaHidden=this.supportsScreenReader?"false":"true",this.focusNavMode=void 0,this.keyboardShortcuts=void 0)},W.prototype.ngAfterViewInit=function(){this.initCore()},W.prototype.ngOnDestroy=function(){this.destroyed=!0,this.core&&this.core.$onDestroy()},W.prototype.ngDoCheck=function(){var k=this;if(this.core){if(!this.watcher){this.watcher=new u;var R=function(le,ge,re){k.core&&!re&&!k.destroyed&&(k.core.$onDestroy(),k.core=void 0,k.initCore())};this.watcher.add("type",function(){return k.viewModel&&{type:k.viewModel.type,themeCollection:k.viewModel.themeCollection}},function(G,le,ge){k.updateApplyDeferredRenderingClass(G.type),R(0,0,ge)},{mode:2}),this.watcher.add("viewModel",function(){return k.viewModel},function(G,le,ge){!ge&&G&&le&&le.visualInitialized&&G.visual===le.visual?G.visualInitialized=!0:R(0,0,ge)})}this.watcher.doCheck(),this.core.$doCheck()}},W.prototype.updateApplyDeferredRenderingClass=function(k){this.applyDeferredRenderingClass=!1!==this.allowDeferredRendering&&!(k&&this.visualPlugin.isCustomVisual(k))},W.prototype.initCore=function(){var k=this,G={approvedResourceService:this.approvedResourceService,publicCustomVisualService:this.publicCustomVisualService,eventBridge:this.eventBridge,featureSwitchService:this.featureSwitchService,globalEventBridge:this.globalEventBridge,managedCustomVisualsService:this.managedCustomVisualsService,moduleLoader:this.moduleLoader,run:this.visualZone?function(ge){return k.visualZone.run(ge)}:this.ngZone&&function(le){return k.ngZone.runOutsideAngular(le)},promiseFactory:this.es6PromiseFactory,renderingSynchronizer:this.renderingSynchronizer,svgProvider:this.svgProvider,telemetryService:this.telemetryService,themeService:this.themeService,timeoutService:this.timeoutService,trustedVisual:this.trustedVisual,visualPlugin:this.visualPlugin,visualSandbox:this.visualSandbox,visualStylePresetService:this.visualStylePresetService,visualWarningTelemetryService:this.visualWarningTelemetryService};this.core=new r($(this.visualElement.nativeElement),G,function(){return k.visualReady.emit()}),this.core.viewModel=this.viewModel,this.core.allowDeferredRendering=this.allowDeferredRendering,this.core.currentZone=this.currentZone,this.core.formatMode=this.formatMode,this.manageKeyboardNavigation(),this.core.$onInit().then(function(){k.useOnPushChangeDetection&&k.ref.markForCheck()}),this.ref.detectChanges()},W.\u0275fac=function(R){return new(R||W)(n.\u0275\u0275directiveInject(E.E),n.\u0275\u0275directiveInject(I.B),n.\u0275\u0275directiveInject(a.J,8),n.\u0275\u0275directiveInject(o.vZ),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(l.m),n.\u0275\u0275directiveInject(i.t),n.\u0275\u0275directiveInject(s.d),n.\u0275\u0275directiveInject(O.y0),n.\u0275\u0275directiveInject(x.f),n.\u0275\u0275directiveInject(d.t),n.\u0275\u0275directiveInject(P.D),n.\u0275\u0275directiveInject(y.s),n.\u0275\u0275directiveInject(b.A),n.\u0275\u0275directiveInject(c.n),n.\u0275\u0275directiveInject(V.g),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(w.Z),n.\u0275\u0275directiveInject(f.D),n.\u0275\u0275directiveInject(T.X))},W.\u0275cmp=n.\u0275\u0275defineComponent({type:W,selectors:[["visual-modern"]],viewQuery:function(R,G){var le;(1&R&&n.\u0275\u0275viewQuery(C,5),2&R)&&(n.\u0275\u0275queryRefresh(le=n.\u0275\u0275loadQuery())&&(G.visualElement=le.first))},inputs:{viewModel:"viewModel",allowDeferredRendering:"allowDeferredRendering",currentZone:"currentZone",visualZone:"visualZone",supportsKeyboardNavigation:"supportsKeyboardNavigation",supportsScreenReader:"supportsScreenReader",focusNavMode:"focusNavMode",inheritFocusNavMode:"inheritFocusNavMode",keyboardShortcuts:"keyboardShortcuts",subSelections:"subSelections",formatMode:"formatMode",useOnPushChangeDetection:"useOnPushChangeDetection"},outputs:{visualReady:"visualReady"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:11,consts:[[3,"keyboard-shortcuts","ngClass"],["visualElement",""]],template:function(R,G){1&R&&n.\u0275\u0275element(0,"div",0,1),2&R&&(n.\u0275\u0275classMapInterpolate1("visual visual-",G.core&&G.core.viewModel&&G.core.viewModel.type,""),n.\u0275\u0275property("keyboard-shortcuts",G.keyboardShortcuts)("ngClass",n.\u0275\u0275pureFunction3(7,F,G.core&&G.core.disableEvents,G.applyDeferredRenderingClass,G.formatMode)),n.\u0275\u0275attribute("aria-hidden",G.ariaHidden)("focus-nav-mode",G.focusNavMode))},directives:[v.q,g.NgClass],styles:["",".exploreHost.landingController   .visualContainer.preventVisualScrolling[_nghost-%COMP%]     svg.svgScrollable, .exploreHost.landingController   .visualContainer.preventVisualScrolling   [_nghost-%COMP%]     svg.svgScrollable{pointer-events:none!important}.exploreHost.landingController[_nghost-%COMP%]   .visual.visual-PBI_CV_3C80B1F2_09AF_4123_8E99_C3CBC46B23E0[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .visual.visual-PBI_CV_3C80B1F2_09AF_4123_8E99_C3CBC46B23E0[_ngcontent-%COMP%]{overflow:hidden}@supports (-webkit-touch-callout: none){.exploreHost.landingController[_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container .scroll-element, .exploreHost.landingController   [_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container .scroll-element{display:none}}.exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   .mobileVisualContainerHeader:not(.popOut)   .vcBody[_nghost-%COMP%]     .slicer-header-wrapper, .exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   .mobileVisualContainerHeader:not(.popOut)   .vcBody   [_nghost-%COMP%]     .slicer-header-wrapper{margin-right:calc(20px + 10px)}.exploreHost.landingController.phoneLandscapeLayout   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   .mobileVisualContainerHeader:not(.popOut)   .vcBody[_nghost-%COMP%]     .slicer-header-wrapper, .exploreHost.landingController.phoneLandscapeLayout   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   .mobileVisualContainerHeader:not(.popOut)   .vcBody   [_nghost-%COMP%]     .slicer-header-wrapper{margin-right:calc(20px + 25px)}.exploreHost.landingController.inFocus.phonePortraitLayout[_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.phonePortraitLayout   [_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.phoneLandscapeLayout[_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.phoneLandscapeLayout   [_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.tabletPortraitLayout[_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.tabletPortraitLayout   [_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen{height:calc(100% + 5px * 2)!important;margin:-5px}"]}),(0,e.gn)([(0,M.CN)("ngOnChanges")],W.prototype,"ngOnChanges",null),(0,e.gn)([(0,M.CN)("ngAfterViewInit")],W.prototype,"ngAfterViewInit",null),(0,e.gn)([(0,M.CN)("ngDoCheck")],W.prototype,"ngDoCheck",null),W}()},85748:function(Ee,ne,t){t.d(ne,{I:function(){return i}});var e=t(40582),n=t(53922),f=t(76430),i=function(M){function E(I,d){return M.call(this,"visualizationPane",I,d)||this}return(0,e.ZT)(E,M),E.\u0275fac=function(d){return new(d||E)(f.\u0275\u0275directiveInject(f.ElementRef),f.\u0275\u0275directiveInject(f.Injector))},E.\u0275dir=f.\u0275\u0275defineDirective({type:E,selectors:[["visualization-pane"]],inputs:{viewModel:"viewModel"},features:[f.\u0275\u0275InheritDefinitionFeature]}),E}(n.iB)},12904:function(Ee,ne,t){t.d(ne,{s:function(){return n}});var e=t(76430),n=function(){function f(i,M){this.elementRef=i}return f.prototype.ngAfterContentInit=function(){var i=$(this.elementRef.nativeElement);this.applyStyle.addElement(i),this.applyStyle.apply(i)},f.prototype.ngOnDestroy=function(){this.applyStyle.removeElement($(this.elementRef.nativeElement))},f.\u0275fac=function(M){return new(M||f)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Injector))},f.\u0275dir=e.\u0275\u0275defineDirective({type:f,selectors:[["","apply-style",""]],inputs:{applyStyle:["apply-style","applyStyle"]}}),f}()},97622:function(Ee,ne,t){t.d(ne,{o:function(){return n}});var e=t(76430),n=function(){function f(i,M){this.elementRef=i,this.injector=M}return f.prototype.ngAfterViewInit=function(){$(this.elementRef.nativeElement).data(powerbi.common.angularInjectorController,this.injector)},f.\u0275fac=function(M){return new(M||f)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Injector,1))},f.\u0275dir=e.\u0275\u0275defineDirective({type:f,selectors:[["","downgrade-injector-patcher",""]]}),f}()},16838:function(Ee,ne,t){t.d(ne,{R:function(){return f}});var e=t(76430),f=function(){function i(M){this.elementRef=M}return i.prototype.ngOnChanges=function(M){if(M.sectionNumber&&!M.sectionNumber.isFirstChange()){var E=M.sectionNumber.currentValue;null!=E&&this.animateSectionSlide(E,M.sectionNumber.previousValue)}},i.prototype.animateElement=function(M,E,I){M.css(E).animate(I,200)},i.prototype.animateSectionSlide=function(M,E){M<E?this.animateElement($(this.elementRef.nativeElement),{right:"200%"},{right:0}):M>E&&this.animateElement($(this.elementRef.nativeElement),{"margin-left":"200%"},{"margin-left":0});var I=$("."+this.navMarkerParent+" .navMarker");if(this.autoWidth){var d=0===M?"margin-left":"margin-right",P=0===M?"margin-right":"margin-left",y={};y[d]=I.width()+"px",y[P]="auto";var b={};b[d]="0",this.animateElement(I,y,b)}else this.animateElement(I,{},{"margin-left":I.width()*M+"px"})},i.\u0275fac=function(E){return new(E||i)(e.\u0275\u0275directiveInject(e.ElementRef))},i.\u0275dir=e.\u0275\u0275defineDirective({type:i,selectors:[["","section-animation-slider",""]],inputs:{sectionNumber:"sectionNumber",navMarkerParent:"navMarkerParent",autoWidth:"autoWidth"},features:[e.\u0275\u0275NgOnChangesFeature]}),i}()},81677:function(Ee,ne,t){t.d(ne,{Ys:function(){return e},HY:function(){return n},LW:function(){return f},Dx:function(){return i},Xr:function(){return M},nc:function(){return E},al:function(){return I},tH:function(){return d},O3:function(){return P},Px:function(){return y},Nn:function(){return b},nb:function(){return a},xZ:function(){return o},hV:function(){return l}});var e="AboutVisualDialog",n="ChangeDetectionMeasureDialog",f="DSVariablesDialog",i="ThemeDialog",M="QnaFeedbackDialog",E="TrySampleDatasetDialog",I="CheckboxDialog",d="DeleteCustomVisualsDialog",P="DeleteVisualWarningDialog",y="EsriConsentDialog",b="ConditionalFormattingDialog",a="SparklinesDialog",o="ExportDataDialogComponent",l="DataBarsDialog"},79873:function(Ee,ne,t){t.d(ne,{B:function(){return n}});var e=powerbi.data.SQExprUtils,n=function(){function f(i,M,E,I,d){this.setting=i,this.contract=M,this.sort=E,this.undoRedo=I,this.visualAuthoringOperations=d,this.sortDelay=500}return f.prototype.resetSortSettings=function(i,M,E){this.setting.defaultSortBehavior=E,this.setting.sortableFields=i,this.setting.sortGroups=M},f.prototype.toggleSortDirection=function(i,M,E){var I=this;this.executeSort("VisualContainerToggleSortDirection",function(){return I.applySortDirection(M,E),i&&!i.active&&(i.active=!0),I.applyActiveSortableFieldsToQuery(),!0})},f.prototype.toggleSort=function(i,M,E){var I=this;this.executeSort("VisualContainerToggleSort",function(){return M&&(i.sortDirection=M),I.toggleSortByField(i,E),!0})},f.prototype.applySortByFields=function(i){var M=this;this.sortPromise&&clearTimeout(this.sortPromise);var E=this.contract.config.singleVisual.query;if(!this.isSortSupported(E,i))return[];this.resetSortableFieldsStatus(this.setting.sortableFields,!0);var I=this.findMatchingSortableFields(i);return this.areAllSortDescriptorsIncluded(i,I),this.sortPromise=setTimeout(function(){M.undoRedo.register("VisualContainerApplySort",function(){for(var d=[],P=0,y=I;P<y.length;P++)for(var b=y[P],a=0,o=b.exprs;a<o.length;a++)d.push({expr:o[a].expr,direction:b.sortDirection});var s=M.contract;return M.sort.resetSort(E),M.visualAuthoringOperations.setOrderBy(s,d),M.sortPromise=void 0,!0})},this.sortDelay),I},f.prototype.isSortSupported=function(i,M){if(i.hasVisualCalcExpressions())for(var E=i.getUniqueQueryFields(),I=0,d=M;I<d.length;I++)for(var P=d[I],y=0,b=E;y<b.length;y++){var a=b[y];if(a.queryName&&a.queryName===P.queryName&&e.isMeasure(a.expr))return!1}return!0},f.prototype.executeSort=function(i,M){var E=this;this.sortPromise&&clearTimeout(this.sortPromise),this.sortPromise=setTimeout(function(){E.undoRedo.register(i,M),E.sortPromise=void 0},this.sortDelay)},f.prototype.applySortDirection=function(i,M){if(!_.isEmpty(M.fields))for(var E=0,I=M.fields;E<I.length;E++)I[E].sortDirection=i},f.prototype.toggleSortByField=function(i,M){var E=_.find(this.setting.sortGroups,function(d){return i.groupKey===d.key});if(E){var I=i.active;I?(this.visualAuthoringOperations.removeOrderBy(this.contract,i.exprs.map(function(d){return d.expr}),M),i.active=!1):(this.resetSortableFieldsStatus(E.fields,!1),i.active=!I,this.applyActiveSortableFieldsToQuery())}},f.prototype.findMatchingSortableFields=function(i){var M=[],E=this.setting.sortableFields;if(_.isEmpty(E)||_.isEmpty(i))return[];for(var I=0,d=E;I<d.length;I++){for(var P=d[I],y=!1,b=null,a=function(x){var V=_.findIndex(i,function(T){return T.queryName===x.name}),w=i[V];if(!w)return y=!1,"break";if(null==b)b=w.sortDirection;else if(b!==w.sortDirection)return y=!1,"break";y=!0,P.orderByIndex=V},o=0,l=P.exprs;o<l.length&&"break"!==a(l[o]);o++);y&&(P.sortDirection=b,P.active=!0,M.push(P))}return _.sortBy(M,function(O){return O.orderByIndex})},f.prototype.areAllSortDescriptorsIncluded=function(i,M){for(var E=0,I=i;E<I.length;E++){for(var d=I[E],P=!1,y=0,b=M;y<b.length;y++){for(var o=0,l=b[y].exprs;o<l.length;o++)if(l[o].name===d.queryName){P=!0;break}if(P)break}if(!P)return!1}return!0},f.prototype.resetSortableFieldsStatus=function(i,M){if(i)for(var E=0,I=i;E<I.length;E++){var d=I[E];d.active=!1,M&&(d.sortDirection=void 0)}},f.prototype.applyActiveSortableFieldsToQuery=function(){var i=this.buildOrderByFromActiveSortableFields();this.applyOrderByToQuery(i)},f.prototype.buildOrderByFromActiveSortableFields=function(){var i=[];if(!this.setting.sortGroups)return i;for(var M=0,E=this.setting.sortGroups;M<E.length;M++)for(var d=0,P=E[M].fields;d<P.length;d++){var y=P[d];y.active&&i.push.apply(i,this.sort.createSortDefinitions(y))}return i},f.prototype.applyOrderByToQuery=function(i){var M=this.contract;this.sort.resetSort(M.config.singleVisual.query),this.visualAuthoringOperations.setOrderBy(M,i)},f}()},762:function(Ee,ne,t){t.d(ne,{J:function(){return Ui}});var e=t(68910),n=t(60400),f=t(3124),i=t(96526),M=t(80763),E=t(82882),I=t(54467),d=t(87912),P=t(90683),y=t(67993),b=t(60519),a=t(32559),o=t(65287),l=t(59229),s=t(4990),c=t(94563),O=t(60083),x=t(69436),V=t(23460),w=t(81354),T=t(60081),v=t(30977),g=t(40582),r=t(52009),u=t(86777),C={loadChildren:function(){return t.e("performance-pane").then(t.bind(t,25901)).then(function(Pe){return Pe.PerformancePaneModule})}};u.E.addLazyLoadForLegacyMapping("@powerbi/ExploreUI/performance-pane.module#PerformancePaneModule",C.loadChildren);var F={loadChildren:function(){return t.e("user-emulation").then(t.bind(t,21476)).then(function(Pe){return Pe.UserEmulationModule})}};u.E.addLazyLoadForLegacyMapping("./lazy-modules/user-emulation/user-emulation.module#UserEmulationModule",F.loadChildren);var A={loadChildren:function(){return Promise.all([t.e(4),t.e("personalize-visual")]).then(t.bind(t,62647)).then(function(Pe){return Pe.PersonalizeVisualModule})}};u.E.addLazyLoadForLegacyMapping("./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule",A.loadChildren);var W={loadChildren:function(){return t.e("drill-through").then(t.bind(t,19594)).then(function(Pe){return Pe.DrillThroughModule})}};u.E.addLazyLoadForLegacyMapping("./lazy-modules/drill-through/drill-through.module#DrillThroughModule",W.loadChildren);var k={loadChildren:function(){return t.e("bookmark-on-load").then(t.bind(t,27023)).then(function(Pe){return Pe.BookmarkOnLoadModule})}};u.E.addLazyLoadForLegacyMapping("./lazy-modules/bookmark-on-load/bookmark-on-load.module#BookmarkOnLoadModule",k.loadChildren);var R={loadChildren:function(){return t.e("visual-host-tooltip-actions-provider").then(t.bind(t,90618)).then(function(Pe){return Pe.VisualHostTooltipActionsProviderModule})}};u.E.addLazyLoadForLegacyMapping("./lazy-modules/visual-host-tooltip-actions-provider/visual-host-tooltip-actions-provider.module#VisualHostTooltipActionsProviderModule",R.loadChildren);var G={loadChildren:function(){return t.e("field-picker-modern").then(t.bind(t,81237)).then(function(Pe){return Pe.FieldPickerModernModule})}};u.E.addLazyLoadForLegacyMapping("./lazy-modules/field-picker-modern/field-picker-modern.module#FieldPickerModernModule",G.loadChildren);var le={loadChildren:function(){return t.e("field-list").then(t.bind(t,56388)).then(function(Pe){return Pe.FieldListModule})}};u.E.addLazyLoadForLegacyMapping("./lazy-modules/field-list/field-list.module#FieldListModule",le.loadChildren);var ge={loadChildren:function(){return t.e("visual-container-skittles").then(t.bind(t,2026)).then(function(Pe){return Pe.VisualContainerSkittlesModule})}};u.E.addLazyLoadForLegacyMapping("./lazy-modules/visual-container-skittles/visual-container-skittles.module#VisualContainerSkittlesModule",ge.loadChildren);var re={loadChildren:function(){return t.e("visual-recommendation-provider").then(t.bind(t,31624)).then(function(Pe){return Pe.VisualRecommendationProviderModule})}};u.E.addLazyLoadForLegacyMapping("./lazy-modules/visual-recommendation/visual-recommendation-provider.module#VisualRecommendationProviderModule",re.loadChildren);var j={loadChildren:function(){return t.e("pane-switcher").then(t.bind(t,93915)).then(function(Pe){return Pe.PaneSwitcherModule})}};u.E.addLazyLoadForLegacyMapping("@powerbi/ExploreUI/pane-switcher.module#PaneSwitcherModule",j.loadChildren);var ie=(0,g.ev)([{path:"dummy-performance-pane",loadChildren:C.loadChildren},{path:"dummy-personalize-visual",loadChildren:A.loadChildren},{path:"dummy-drill-through",loadChildren:W.loadChildren},{path:"dummy-bookmark-on-load",loadChildren:k.loadChildren},{path:"dummy-user-emulation",loadChildren:F.loadChildren},{path:"dummy-visual-host-tooltip-actions-provider",loadChildren:R.loadChildren},{path:"dummy-field-picker-modern",loadChildren:G.loadChildren},{path:"dummy-field-list",loadChildren:le.loadChildren},{path:"dummy-visual-container-skittles",loadChildren:ge.loadChildren},{path:"dummy-visual-recommendation",loadChildren:re.loadChildren},{path:"dummy-pane-switcher",loadChildren:j.loadChildren}],r.r),Z=t(90835),fe=t(50936),Q=t(35572),J=t(241),se=t(76963),oe=t(47875),K=t(18671),D=t(47062),p=t(58052),h=t(25599),m=t(86479),S=t(84482),N=t(4181),ce=t(63828),he=t(91631),Ce=t(66676),me=t(33451),Ze=t(89710),Je=t(98800),it=t(59116),Te=t(12525),ue=t(38233),$e=(t(97285),t(2220),t(7062),t(41987)),dt=(t(71237),t(146),t(40254)),_e=(t(94201),t(80693),t(73603)),Oe=t(22391),Xe=t(8178),Ae=(t(88613),t(33162),t(87805),t(65296),t(85654),t(88775)),te=(t(31141),t(69475),t(65880),t(29026),t(88082),t(62240)),ee=t(98471),Be=(t(62998),t(35237)),xe=t(38291),je=t(98184),Ye=t(31138),Ie=t(76430),rt=t(74262);function st(ze,Pe){if(1&ze&&Ie.\u0275\u0275element(0,"mat-icon",4),2&ze){var Ue=Ie.\u0275\u0275nextContext();Ie.\u0275\u0275property("fontIcon","pbi-glyph-"+Ue.selectedOption.icon.glyph)}}function ct(ze,Pe){if(1&ze&&Ie.\u0275\u0275element(0,"mat-icon",4),2&ze){var Ue=Ie.\u0275\u0275nextContext().$implicit;Ie.\u0275\u0275property("fontIcon","pbi-glyph-"+Ue.icon.glyph)}}function ft(ze,Pe){if(1&ze&&(Ie.\u0275\u0275elementStart(0,"mat-option",5),Ie.\u0275\u0275template(1,ct,1,1,"mat-icon",2),Ie.\u0275\u0275elementStart(2,"span"),Ie.\u0275\u0275text(3),Ie.\u0275\u0275elementEnd(),Ie.\u0275\u0275elementEnd()),2&ze){var Ue=Pe.$implicit;Ie.\u0275\u0275property("value",Ue),Ie.\u0275\u0275advance(1),Ie.\u0275\u0275property("ngIf",Ue.icon&&Ue.icon.glyph),Ie.\u0275\u0275advance(2),Ie.\u0275\u0275textInterpolate(Ue.displayName)}}var Pt=function(Pe){return{newPaneColors:Pe,"property-pane-select-menu":!0,"pbi-modern-select-panel":!0,themeableElement:!0}},Mt=function(){function ze(){this.selectionChange=new Ie.EventEmitter}return ze.prototype.ngOnChanges=function(Pe){var Ue=this;(Pe.options||Pe.selectedValue)&&(this.selectedOption=this.options.find(function(Ne){return Ne.value===Ue.selectedValue}))},ze.prototype.onSelectionChange=function(Pe){this.selectionChange.emit(Pe.value.value)},ze.\u0275fac=function(Ue){return new(Ue||ze)},ze.\u0275cmp=Ie.\u0275\u0275defineComponent({type:ze,selectors:[["property-pane-select-menu"]],inputs:{disabled:"disabled",options:"options",selectedValue:"selectedValue",newPaneColors:"newPaneColors",labelId:"labelId"},outputs:{selectionChange:"selectionChange"},features:[Ie.\u0275\u0275NgOnChangesFeature],decls:6,vars:10,consts:[[1,"themeableElement","pbi-modern-select",3,"value","disabled","panelClass","aria-labelledby","disableOptionCentering","valueChange","selectionChange"],[1,"property-pane-select-menu-option"],["class","glyph-small",3,"fontIcon",4,"ngIf"],["class","property-pane-select-menu-option",3,"value",4,"ngFor","ngForOf"],[1,"glyph-small",3,"fontIcon"],[1,"property-pane-select-menu-option",3,"value"]],template:function(Ue,Ne){1&Ue&&(Ie.\u0275\u0275elementStart(0,"mat-select",0),Ie.\u0275\u0275listener("valueChange",function(qe){return Ne.selectedOption=qe})("selectionChange",function(qe){return Ne.onSelectionChange(qe)}),Ie.\u0275\u0275elementStart(1,"mat-select-trigger",1),Ie.\u0275\u0275template(2,st,1,1,"mat-icon",2),Ie.\u0275\u0275elementStart(3,"span"),Ie.\u0275\u0275text(4),Ie.\u0275\u0275elementEnd(),Ie.\u0275\u0275elementEnd(),Ie.\u0275\u0275template(5,ft,4,3,"mat-option",3),Ie.\u0275\u0275elementEnd()),2&Ue&&(Ie.\u0275\u0275property("value",Ne.selectedOption)("disabled",Ne.disabled)("panelClass",Ie.\u0275\u0275pureFunction1(8,Pt,Ne.newPaneColors))("aria-labelledby",Ne.labelId)("disableOptionCentering",!0),Ie.\u0275\u0275advance(2),Ie.\u0275\u0275property("ngIf",Ne.selectedOption.icon&&Ne.selectedOption.icon.glyph),Ie.\u0275\u0275advance(2),Ie.\u0275\u0275textInterpolate(Ne.selectedOption.displayName),Ie.\u0275\u0275advance(1),Ie.\u0275\u0275property("ngForOf",Ne.options))},directives:[o.gD,o.$L,n.NgIf,n.NgForOf,y.Hw,rt.ey],styles:[".mat-select[_ngcontent-%COMP%]{height:24px;padding:4px 8px!important;display:flex;align-items:center}.mat-select[_ngcontent-%COMP%]     .mat-select-trigger{flex-grow:1}.mat-select[_ngcontent-%COMP%]     .mat-select-trigger .property-pane-select-menu-option{padding:0}.mat-select[_ngcontent-%COMP%]     .mat-select-trigger .property-pane-select-menu-option span{overflow:hidden;text-overflow:ellipsis}.mat-select[_ngcontent-%COMP%]     .mat-select-trigger .property-pane-select-menu-option .mat-icon{height:16px;line-height:16px;width:inherit;margin-right:8px;vertical-align:middle}  .mat-select-panel.property-pane-select-menu{padding-top:4px;padding-bottom:4px}  .mat-select-panel.property-pane-select-menu .property-pane-select-menu-option{padding-left:8px;padding-right:8px;height:28px}  .mat-select-panel.property-pane-select-menu .property-pane-select-menu-option .mat-option-text{line-height:initial}  .mat-select-panel.property-pane-select-menu .property-pane-select-menu-option .mat-icon{height:16px;line-height:16px;width:inherit;margin-right:8px;vertical-align:middle}"],changeDetection:0}),ze}(),U=(t(33839),t(86592),t(78054),t(13838),t(180),t(91221),t(37105)),z=t(8576),ae=t(71651),ye=t(91738),De=t(49133),Ke=t(7508),Qe=t(70203),Ge=t(54849),pt=t(11665),mt=t(29074),xt=t(97440),Bt=t(77540),Qt=t(23580),en=t(21645),Nt=t(76755),$t=t(1161),Zt=t(45401),Ht=jsCommon.FocusManager,Kt=function(){function ze(){this.focusManager=Ht.getInstance()}return ze.prototype.focusOnGroup=function(Pe,Ue,Ne,We,qe){this.focusManager.focusOnGroupByIndex(Pe,Ue,Ne,We,qe)},ze.\u0275prov=Ie.\u0275\u0275defineInjectable({token:ze,factory:ze.\u0275fac=function(Ue){return new(Ue||ze)},providedIn:"root"}),ze}(),dn=t(61624),hn=t(10191),gn=t(65945),Gt=t(35638),rn=t(23053),an=t(48478),ln=t(38243),q=t(48922),L=t(73378),H=t(4418),Y=t(49029),Se=t(30224),Re=t(79377),He=t(70077),Ct=t(93397),_t=t(8145),yt=t(66338),Wt=t(29595),tn=t(60234),sn=t(9498),nn=t(33078),on=t(66571),vn=t(81677),fn=t(93993),mn=t(18237),cn=t(95781),Lt=jsCommon.Color,_n=powerbi.data.DataViewTransform,jt=powerbi.explore.constants.ExploreCanvasConstants,Dn=powerbi.explore.FilterUtils,In=powerbi.visuals.Units.FontSize,Pn=powerbi.Fill.isFill,Tt=powerbi.explore.contracts.Section.objectDescriptors,Wn=powerbi.explore.util.ThemeUtils,At=powerbi.explore.contracts.VisualContainer.CommonObjectDescriptors,jn=powerbi.visuals.VisualBorderUtil,wn=powerbi.explore.viewModels.VisualContainer,Hn=powerbi.explore.util.VisualTooltipStyleUtils,Kn={title:"ThemeDialog_Title",commit:"Apply",cancel:"Cancel_ButtonText",sections:[{name:"ThemeDialog_Section_Colors",subSections:[{name:"ThemeDialog_Section_Colors",subSections:[{name:"Name",description:"ThemeDialog_SubSection_Name_Desc"},{name:"ColorPicker_ThemeColors"},{name:"Waterfall_SentimentColors",description:"ThemeDialog_SubSection_SentimentColors_Desc"},{name:"ThemeDialog_SubSection_DivergentColors",description:"ThemeDialog_SubSection_DivergentColors_Desc"}]},{name:"Advanced",description:"ThemeDialog_SubSection_AdvancedColors_Desc"}]},{name:"Text",subSections:[{name:"Visual_General",description:"ThemeDialog_SubSection_General_Desc"},{name:"Title",description:"ThemeDialog_SubSection_Title_Desc"},{name:"ThemeDialog_SubSection_CardsKPIs",description:"ThemeDialog_SubSection_CardsKPIs_Desc"},{name:"ThemeDialog_SubSection_TabHeaders",description:"ThemeDialog_SubSection_TabHeaders_Desc"}]},{name:"Insert_Group_Visuals",subSections:[{name:"Visual_Background"},{name:"Visual_Border"},{name:"ThemeDialog_SubSection_Header",description:"ThemeDialog_SubSection_Header_Desc"},{name:"Tooltip",description:"ThemeDialog_SubSection_Tooltip_Desc"}]},{name:"Page",subSections:[{name:"PagePropertyPane_Outspace",description:"ThemeDialog_SubSection_Wallpaper_Desc"},{name:"PagePropertyPane_PageBackground",description:"ThemeDialog_SubSection_PageBackground_Desc"}]},{name:"Exploration_FilterPane",subSections:[{name:"Exploration_FilterPane",subSections:[{name:"Background_Color"},{name:"Transparency"},{name:"PagePropertyPane_OutspacePane_ForegroundColor"},{name:"ThemeDialog_SubSection_TitleFontSize",description:"ThemeDialog_SubSection_TitleFontSize_Desc"},{name:"Visual_Qna_HeaderFontSize",description:"ThemeDialog_SubSection_HeaderFontSize_Desc"},{name:"Checkbox_Apply_Color_Title",description:"Checkbox_Apply_Color_Description"}]},{name:"ThemeDialog_SubSection_AvailableFilterCards",description:"ThemeDialog_SubSection_AvailableFilterCards_Desc",subSections:[{name:"Background_Color"},{name:"Transparency"},{name:"PagePropertyPane_OutspacePane_ForegroundColor"},{name:"ThemeDialog_SubSection_FontSize"}]},{name:"ThemeDialog_SubSection_AppliedFilterCards",description:"ThemeDialog_SubSection_AppliedFilterCards_Desc",subSections:[{name:"Background_Color"},{name:"Transparency"},{name:"PagePropertyPane_OutspacePane_ForegroundColor"},{name:"ThemeDialog_SubSection_FontSize"}]}]}]},Gn=function(){function ze(Pe,Ue,Ne,We){this.telemetryService=Pe,this.themeService=Ue,this.modernDialogService=Ne,this.featureSwitchService=We,this._visualObjectDescriptors={background:{properties:{color:At.background.properties.color,transparency:At.background.properties.transparency}},border:{properties:{show:At.border.properties.show,color:At.border.properties.color,radius:At.border.properties.radius}},visualTooltip:{properties:{titleFontColor:At.visualTooltip.properties.titleFontColor,valueFontColor:At.visualTooltip.properties.valueFontColor,background:At.visualTooltip.properties.background,themedTitleFontColor:At.visualTooltip.properties.themedTitleFontColor,themedValueFontColor:At.visualTooltip.properties.themedValueFontColor,themedBackground:At.visualTooltip.properties.themedBackground,actionFontColor:At.visualTooltip.properties.actionFontColor}},visualHeader:{properties:{background:At.visualHeader.properties.background,border:At.visualHeader.properties.border,transparency:At.visualHeader.properties.transparency,foreground:At.visualHeader.properties.foreground}}},this._sectionObjectDescriptors={background:{properties:{color:Tt.background.properties.color,transparency:Tt.background.properties.transparency,image:Tt.background.properties.image}},outspace:{properties:{color:Tt.outspace.properties.color,transparency:Tt.outspace.properties.transparency,image:Tt.background.properties.image}},outspacePane:{properties:{backgroundColor:Tt.outspacePane.properties.backgroundColor,transparency:Tt.outspacePane.properties.transparency,foregroundColor:Tt.outspacePane.properties.foregroundColor,titleSize:Tt.outspacePane.properties.titleSize,headerSize:Tt.outspacePane.properties.headerSize,checkboxAndApplyColor:Tt.outspacePane.properties.checkboxAndApplyColor}},filterCard:{properties:{backgroundColor:Tt.filterCard.properties.backgroundColor,transparency:Tt.filterCard.properties.transparency,foregroundColor:Tt.filterCard.properties.foregroundColor,textSize:Tt.filterCard.properties.textSize}}},this.themeDialogToken=vn.Dx}return ze.prototype.show=function(Pe){var Ue=this,Ne=Pe.themeCollection,We=Pe.useEnhancedTooltips;this.customThemeName=Ne.customTheme?Ne.customTheme.name:void 0;var qe={bindings:{dataViewModel:this.generateViewModel(Ne,We),dialogViewModel:this.buildDialogNavigationStructureViewModel()},dialogName:"ThemeDialog",componentName:this.themeDialogToken,config:{minWidth:750,panelClass:["hasNavigatableDialog"]}},ot=this.modernDialogService.openHostDialog(qe);return(0,tn.D)(ot).pipe((0,sn.P)(),(0,nn.b)(function(ut){return ut.afterClosed()}),(0,on.U)(function(ut){if(Ue.sendThemeDialogClosedTelemetryEvent(ut),ut&&!_.isEmpty(ut))return Ue.updateCustomTheme(ut)}))},ze.prototype.buildDialogNavigationStructureViewModel=function(){return Kn},ze.prototype.generateViewModel=function(Pe,Ue){var Ne=this.themeService.getVisualStyle(Pe),We=this.themeService.getVisualObjects(Pe,"*",void 0,this.visualObjectDescriptors),qe=this.themeService.getVisualObjects(Pe,"page",void 0,this.sectionObjectDescriptors),ot=_n.evaluateMetadataOnceDataViewObjectDefinitions(We,this.visualObjectDescriptors,Ne,this.featureSwitchService.featureSwitches).dataViewObjects||{},ut=_n.evaluateMetadataOnceDataViewObjectDefinitions(qe,Tt,Ne,this.featureSwitchService.featureSwitches).dataViewObjects||{},Et=powerbi.visuals.visualBackgroundHelper.getDefaultColor();Et.solid.color=jsCommon.Color.normalizeToHexString(Et.solid.color);var wt=_.defaults(ot.background,{color:Et,transparency:powerbi.visuals.visualBackgroundHelper.getDefaultTransparency()}),Rt=_.defaults(ot.border,jn.getDefaultValues()),Vt=this.generateTooltipStyles(Ne,Ue,ot.visualTooltip),vt=Lt.hexString(wn.VisualHeaderBackgroundColor),gt=_.defaults(ot.visualHeader,{background:{solid:{color:vt}},border:{solid:{color:vt}},foreground:{solid:{color:Ne.colorPalette.foreground.value}},transparency:wn.VisualHeaderTransparency}),Ot=ut&&ut.background;Ot&&Pn(Ot.color)&&(Ot.color=Ot.color.solid.color);var Dt=ut&&ut.outspace;Dt&&Pn(Dt.color)&&(Dt.color=Dt.color.solid.color);var It=ut&&ut.outspacePane;It&&(Pn(It.backgroundColor)&&(It.backgroundColor=It.backgroundColor.solid.color),Pn(It.foregroundColor)&&(It.foregroundColor=It.foregroundColor.solid.color));var Ut=this.canvasBackground=_.defaults(ut.background,{color:jt.DefaultCanvasBackgroundColor,transparency:jt.DefaultCanvasBackgroundTransparency}),Xt=_.defaults(ut.outspace,{color:jt.DefaultCanvasOutspaceColor,transparency:jt.DefaultCanvasOutspaceTransparency}),bn=_.defaults(ut.outspacePane,{backgroundColor:Ne.colorPalette.background.value&&jsCommon.Color.normalizeToHexString(Ne.colorPalette.background.value),transparency:jt.DefaultOutspacePaneTransparency,foregroundColor:Ne.colorPalette.foreground.value&&jsCommon.Color.normalizeToHexString(Ne.colorPalette.foreground.value),titleSize:jt.DefaultOutspacePaneTitleSizePt,headerSize:jt.DefaultOutspacePaneHeaderSizePt,checkboxAndApplyColor:jt.DefaultOutspacePaneCheckboxAndApplyColor}),pn=Dn.getFilterCardStyle(ut,!0,Ne),Sn=Dn.getFilterCardStyle(ut,!1,Ne);pn.fontSize=_.toString(In.createFromCSS(pn.fontSize).pt),Sn.fontSize=_.toString(In.createFromCSS(Sn.fontSize).pt);var En={foreground:Ne.colorPalette.foreground,foregroundNeutralSecondary:Ne.colorPalette.foregroundNeutralSecondary,backgroundLight:Ne.colorPalette.backgroundLight,foregroundNeutralTertiary:Ne.colorPalette.foregroundNeutralTertiary,background:Ne.colorPalette.background,backgroundNeutral:Ne.colorPalette.backgroundNeutral};En=_.mapValues(En,function(Wi){return{value:Lt.normalizeToHexString(Wi.value)}});var xn=Ne.colorPalette.dataColors,Fn=xn.getGradientColors(),zi={minColor:Fn.minColor,midColor:Fn.midColor,maxColor:Fn.maxColor},zn={dataColors:this.dataColors=xn.getBaseColors(),themeColors:En,gradientColors:zi,sentimentColors:xn.getSentimentColors(),textClasses:Ne.textClasses,visualContainer:{background:wt,border:Rt,tooltips:Vt,header:gt},page:{background:Ut,wallpaper:Xt,filterPane:bn,filterCards:{available:Sn,applied:pn}},useEnhancedTooltips:!!Ue};if(this.customThemeName){var Nn=this.themeService.getThemeJson(this.customThemeName).name;Nn!==ze.defaultCustomThemeName&&(zn.name=Nn)}return zn},Object.defineProperty(ze.prototype,"visualObjectDescriptors",{get:function(){return this._visualObjectDescriptors},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,"sectionObjectDescriptors",{get:function(){return this._sectionObjectDescriptors},enumerable:!1,configurable:!0}),ze.prototype.updateCustomTheme=function(Pe){var Ue=Pe.name||ze.defaultCustomThemeName,Ne=this.themeService.getThemeJson(this.customThemeName)||powerbi.common.parseCustomVisualTheme('{ "name": "'+Ue+'" }');return null!=Pe.name&&(Ne.name=Ue),Pe.textClasses&&(Ne.textClasses=_.merge(Ne.textClasses,this.generateTextClasses(Pe.textClasses))),Pe.dataColors&&(Ne.dataColors=this.mergeDataColors(Pe.dataColors)),Pe.themeColors&&_.assign(Ne,_.mapValues(Pe.themeColors,function(qe){return qe&&qe.value})),Pe.sentimentColors&&_.assign(Ne,_.mapValues(Pe.sentimentColors,function(qe){return qe&&qe.value})),Pe.gradientColors&&_.assign(Ne,this.generateGradientColors(Pe.gradientColors)),(Pe.page||Pe.visualContainer)&&(Ne.visualStyles=_.mergeWith(Ne.visualStyles,this.generateVisualContainerObjects(Pe.visualContainer),this.generatePageObjects(Pe.page),function(ot,ut){if(_.isArray(ot)&&_.isArray(ut)){for(var Et=function(gt){var Ot=_.find(ot,function(Dt){return Dt.$id===gt.$id});null==Ot?ot.push(gt):_.merge(Ot,gt)},wt=0,Rt=ut;wt<Rt.length;wt++)Et(Rt[wt]);return ot}})),{customTheme:_.omitBy(Ne,_.isNil),updateBaseTheme:Pe.updateBaseTheme}},ze.prototype.getPropertyCount=function(Pe){return Pe?_.keys(Pe).length:0},ze.prototype.getThemeSentimentAndGradientColorCount=function(Pe){if(Pe){var Ue=0;if(Pe.dataColors){var Ne=_.filter(Pe.dataColors,function(We){return We&&void 0!==We.value});_.isEmpty(Ne)||(Ue=Ne.length)}return Ue+=this.getPropertyCount(Pe.sentimentColors),(Ue+=this.getPropertyCount(Pe.gradientColors))||void 0}},ze.prototype.getTextFontPropertyCount=function(Pe,Ue){if(Pe&&Pe.textClasses){var Ne=0,We=Pe.textClasses;return We.label&&We.label[Ue]&&Ne++,We.title&&We.title[Ue]&&Ne++,We.callout&&We.callout[Ue]&&Ne++,We.header&&We.header[Ue]&&Ne++,Ne||void 0}},ze.prototype.getVisualPropertyChangeCount=function(Pe){if(Pe&&Pe.visualContainer){var Ue=Pe.visualContainer,Ne=0;return Ne+=this.getPropertyCount(Ue.background),Ne+=this.getPropertyCount(Ue.border),Ne+=this.getPropertyCount(Ue.header),(Ne+=this.getPropertyCount(Ue.tooltips))||void 0}},ze.prototype.getPagePropertyCount=function(Pe,Ue){if(Pe&&Pe.page){var Ne=Pe.page,We=0;return Ue?(We+=this.getPropertyCount(Ne.wallpaper),We+=this.getPropertyCount(Ne.background)):(We+=this.getPropertyCount(Ne.filterPane),Ne.filterCards&&(We+=this.getPropertyCount(Ne.filterCards.applied),We+=this.getPropertyCount(Ne.filterCards.available))),We||void 0}},ze.prototype.sendThemeDialogClosedTelemetryEvent=function(Pe){this.telemetryService.logEvent(powerbi.telemetry.EXThemeDialogClosed,{themeSentimentDivergentColorsCount:this.getThemeSentimentAndGradientColorCount(Pe),advancedColorCount:Pe&&Pe.themeColors&&_.keys(Pe.themeColors).length,textFontSizeCount:this.getTextFontPropertyCount(Pe,"fontSize"),textFontFaceCount:this.getTextFontPropertyCount(Pe,"fontFace"),textFontColorCount:this.getTextFontPropertyCount(Pe,"color"),visualPropertyChangeCount:this.getVisualPropertyChangeCount(Pe),pagePropertyChangeCount:this.getPagePropertyCount(Pe,!0),filterPanePropertyChangeCount:this.getPagePropertyCount(Pe,!1),isOldThemeTextClassesAccessed:Pe&&Pe.isOldThemeTextClassesAccessed})},ze.prototype.generateTextClassesBySection=function(Pe){var Ue={};return Pe.color&&(Ue.color=Pe.color.value),_.defaults(Ue,Pe)},ze.prototype.generateTextClasses=function(Pe){if(Pe){var Ue={};return Pe.label&&(Ue.label=this.generateTextClassesBySection(Pe.label)),Pe.callout&&(Ue.callout=this.generateTextClassesBySection(Pe.callout)),Pe.title&&(Ue.title=this.generateTextClassesBySection(Pe.title)),Pe.header&&(Ue.header=this.generateTextClassesBySection(Pe.header)),Ue}},ze.prototype.mergeDataColors=function(Pe){if(Pe){var Ue=[];return _.assignWith(Ue,this.dataColors,Pe,function(Ne,We){return We||Ne}),_.map(Ue,function(Ne){return Ne&&Ne.value})}},ze.prototype.generateGradientColors=function(Pe){if(Pe){var Ue={};for(var Ne in Pe){var We=Pe[Ne].value;switch(Ne){case"minColor":Ue.minimum=We;break;case"midColor":Ue.center=We;break;case"maxColor":Ue.maximum=We}}return Ue}},ze.prototype.generatePageObjects=function(Pe){var Ue={};if(_.isEmpty(Pe))return Ue;if((Pe.background||Pe.wallpaper)&&(Ue.page={"*":{}}),Pe.background){var Ne=Pe.background.color;Ue.page["*"].background=[{color:Ne&&{solid:{color:Ne}},transparency:Pe.background.transparency}]}if(Pe.wallpaper){var We=Pe.wallpaper.color;Ue.page["*"].outspace=[{color:We&&{solid:{color:We}},transparency:Pe.wallpaper.transparency}]}var qe=Pe.filterPane,ot=Pe.filterCards;if((ot||qe)&&(Ue["*"]={"*":{}}),qe){var ut=qe.backgroundColor,Et=qe.foregroundColor,wt=qe.checkboxAndApplyColor;Ue["*"]["*"].outspacePane=[{backgroundColor:ut&&{solid:{color:ut}},transparency:qe.transparency,foregroundColor:Et&&{solid:{color:Et}},titleSize:qe.titleSize,headerSize:qe.headerSize,checkboxAndApplyColor:wt&&{solid:{color:wt}}}]}if(ot){var Rt=Ue["*"]["*"].filterCard=[],Vt=ot.applied;if(Vt){var vt={$id:jt.Applied},Ot=void 0,Dt=Vt.foregroundColor;(gt=Vt.backgroundColor)&&!Lt.isHexString(gt)&&(Ot=Lt.getTransparencyFromString(gt),gt=Lt.normalizeToHexString(gt)),vt.backgroundColor=gt&&{solid:{color:gt}},vt.foregroundColor=Dt&&{solid:{color:Dt}},null!=Vt.fontSize&&!isNaN(+Vt.fontSize)&&(vt.textSize=+Vt.fontSize),_.isNumber(Ot)&&(vt.transparency=Ot),Rt.push(vt)}var gt,It=ot.available;if(It)vt={$id:jt.Available},Dt=It.foregroundColor,Ot=void 0,(gt=It.backgroundColor)&&!Lt.isHexString(gt)&&(Ot=Lt.getTransparencyFromString(gt),gt=Lt.normalizeToHexString(gt)),vt.backgroundColor=gt&&{solid:{color:gt}},vt.foregroundColor=Dt&&{solid:{color:Dt}},null!=It.fontSize&&!isNaN(+It.fontSize)&&(vt.textSize=+It.fontSize),_.isNumber(Ot)&&(vt.transparency=Ot),Rt.push(vt)}return Ue},ze.prototype.generateVisualContainerObjects=function(Pe){var Ue={};if(_.isEmpty(Pe))return Ue;Ue["*"]={"*":{}};var Ne=Ue["*"]["*"],We=Pe.background;We&&(Ne.background=[{color:(qe=We.color)&&{solid:{color:qe.solid.color}},transparency:We.transparency}],Ue.page={"*":{background:[{color:{solid:{color:this.canvasBackground.color}},transparency:this.canvasBackground.transparency}]}});var ot=Pe.border;if(ot){var ut=ot.color;Ne.border=[{color:ut&&{solid:{color:ut.solid.color}},show:ot.show,radius:ot.radius}]}var Et=Pe.header;if(Et){var wt=Et.background,Rt=Et.foreground,Vt=Et.border;Ne.visualHeader=[{background:wt&&{solid:{color:wt.solid.color}},foreground:Rt&&{solid:{color:Rt.solid.color}},transparency:Et.transparency,border:Vt&&{solid:{color:Vt.solid.color}}}]}var vt=Pe.tooltips;if(vt){var qe,gt=vt.titleFontColor,Ot=vt.valueFontColor,Dt=vt.themedTitleFontColor,It=vt.themedValueFontColor,Ut=vt.themedBackground,Xt=vt.actionFontColor;Ne.visualTooltip=[{titleFontColor:gt&&{solid:{color:gt.solid.color}},valueFontColor:Ot&&{solid:{color:Ot.solid.color}},background:(qe=vt.background)&&{solid:{color:qe.solid.color}},themedTitleFontColor:Dt&&{solid:{color:Dt.solid.color}},themedValueFontColor:It&&{solid:{color:It.solid.color}},themedBackground:Ut&&{solid:{color:Ut.solid.color}},actionFontColor:Xt&&{solid:{color:Xt.solid.color}}}],Ne.visualHeaderTooltip=[{titleFontColor:gt&&{solid:{color:gt.solid.color}},themedTitleFontColor:Dt&&{solid:{color:Dt.solid.color}},background:qe&&{solid:{color:qe.solid.color}},themedBackground:Ut&&{solid:{color:Ut.solid.color}}}]}return Ue},ze.prototype.generateTooltipStyles=function(Pe,Ue,Ne){var We=Hn.getVisualTooltipStyles(Pe,Ue,!1,Ne),qe={solid:{color:We.titleFontProperties.color}},ot={solid:{color:We.valueFontProperties.color}},Et=We.background;return Ue?{themedTitleFontColor:qe,themedValueFontColor:ot,themedBackground:Et,actionFontColor:We.actionFontProperties?{solid:{color:We.actionFontProperties.color}}:void 0}:{titleFontColor:qe,valueFontColor:ot,background:Et}},ze.defaultCustomThemeName=Wn.CustomThemeName,ze.\u0275fac=function(Ue){return new(Ue||ze)(Ie.\u0275\u0275inject(it.y0),Ie.\u0275\u0275inject(fn.f),Ie.\u0275\u0275inject(mn.x),Ie.\u0275\u0275inject(cn.vZ))},ze.\u0275prov=Ie.\u0275\u0275defineInjectable({token:ze,factory:ze.\u0275fac,providedIn:"root"}),ze}(),Qn=t(40629),$n=t(59804),Zn=t(5480),Tn=t(25102),An=t(83270),Vn=t(30641),Bn=t(8422),Jn=t(34425),Xn=t(4714),Yn=t(60415),qn=function(){function ze(){}return ze.\u0275fac=function(Ue){return new(Ue||ze)},ze.\u0275mod=Ie.\u0275\u0275defineNgModule({type:ze}),ze.\u0275inj=Ie.\u0275\u0275defineInjector({providers:[(0,ae.tp)("bookmarkService",ye.F),(0,ae.te)("bookmarkPlay",{component:$e.d}),(0,ae.tp)("canvasKeyHandler",De.Z),(0,ae.tp)("canvasScale",Ke.Z),(0,ae.te)("canvasVisualHeaderIcon",{component:dt.f}),(0,ae.tp)("canvasWheelHandler",Qe.H),(0,ae.tp)("changeDetectionMeasure",Ge.C),(0,ae.Y2)("commandStore",z.D),(0,ae.tp)("deleteVisual",pt.K),(0,ae.te)("dotGrid",{component:_e.L}),(0,ae.tp)("drillToDetails",xt.M),(0,ae.tp)("dropdown",Bt.V),(0,ae.tp)("explorationCapabilities",Qt.U),(0,ae.Y2)("explorationExtensibilityService",en.W),(0,ae.te)("downgradedExplorationFooterModern",{component:Xe.H}),(0,ae.te)("explorationPaneHeader",{component:H.m}),(0,ae.te)("explorationPaneDowngraded",{component:L.V}),(0,ae.te)("explorationPaneSectionDowngraded",{component:Y.i}),(0,ae.Y2)("exportToExcelProxy",$t.U),(0,ae.tp)("formFactor",dn.F),(0,ae.Y2)("favoriteVisualLoader",Zt.W),(0,ae.Y2)("focus",Kt),(0,ae.tp)("groupAuthoring",hn.RD),(0,ae.Y2)("highContrastThemeGenerationService",gn.S),(0,ae.te)("instancePickerModern",{component:rn.O}),(0,ae.tp)("importVisual",Gt.W),(0,ae.tp)("layoutAuthoring",an.U),(0,ae.Y2)("visualPaneSettingsService",Jn.R),(0,ae.te)("filterRestatement",{component:Ae.W}),(0,ae.te)("iconSetPicker",{component:te.V}),(0,ae.te)("iconSetPickerInput",{component:ee.Z}),(0,ae.Y2)("modernScopedRootRegistrar",He.v_),(0,ae.te)("downgradedOutspacePane",{component:Be.t}),(0,ae.tp)("panesVisibility",q.r),(0,ae.te)("paneSwitcherLazy",{component:xe.A}),(0,ae.te)("penAnnotation",{component:je.S}),(0,ae.te)("performancePaneLazy",{component:Ye.C}),(0,ae.tp)("pinVisual",Se.k),(0,ae.te)("propertyPaneSelectMenu",{component:Mt}),(0,ae.tp)("showValueAsService",_t.P),(0,ae.Y2)("settingsService",Ct.g),(0,ae.tp)("sparklinesService",yt.s),(0,ae.te)("svgUseSymbol",{component:Wt.k}),(0,ae.Y2)("themeDialogService",Gn),(0,ae.fp)("upgradedInstancePicker",{bindings:{mode:"<",filter:"<",model:"="},template:'<instance-picker ng-model="$ctrl.model" mode="$ctrl.mode" filter="$ctrl.filter"></instance-picker>'}),(0,ae.tp)("viewModeState",Qn.kc),(0,ae.tp)("visualAuthoring",$n.$),(0,ae.te)("visualContainerPinButton",{component:Tn.c}),(0,ae.te)("visualContainerRefreshButton",{component:An.Y}),(0,ae.te)("visualContainerRelationshipFilters",{component:Vn.Q}),(0,ae.te)("downgradedVisualHeaderItemContainer",{component:Bn.Y}),(0,ae.te)("downgradedVisualModern",{component:U.y}),(0,ae.tp)("visualSync",Xn.M),(0,ae.te)("visualTypesContainerModern",{component:Yn.r}),(0,ae.te)("durationPicker",{component:Oe.w}),(0,ae.Y2)("layoutInsertionHelper",ln.m),(0,ae.Y2)("resourcePackageCopyService",Re.V),(0,ae.tp)("exportData",Nt.I),(0,ae.tp)("visualContainerCopy",Zn.w)],imports:[[mt.M]]}),ze}(),ei=t(44976),ti=t(60354),ni=new Ie.InjectionToken("ExplorationDataReaderExtensionCanEditSchemas"),oi={provide:ei.rc,useFactory:function(ze,Pe){var Ue=ze.get(ni,!1),Ne={};return powerbi.explore.dataReaderPlugins.registerExplorationDataReaderExtension(Ne,Pe,Ue),Ne},deps:[Ie.Injector,ti.t]},ri=t(83906),ai=t(35588),Oi=(t(38633),t(50439),t(76486),t(56812),t(8824),t(45064),t(76681),t(46622),t(6334),t(37609),t(62234),t(68139),t(83685),t(10546),t(91091),t(19495),t(15266)),Si=(t(17217),t(14345)),Ei=t(23858),xi=t(82570),Fi=t(22767),Ln=function(){function ze(){}return ze.\u0275fac=function(Ue){return new(Ue||ze)},ze.\u0275mod=Ie.\u0275\u0275defineNgModule({type:ze}),ze.\u0275inj=Ie.\u0275\u0275defineInjector({providers:[(0,ae.te)("iconPicker",{component:Fi.I})],imports:[[n.CommonModule,J._,Ei.Q,xi.j]]}),ze}(),Cn=t(73680),Jt=t(65657),un=t(32956),kn=t(52655),Rn=t(53477),Un=t(798),Di=t(97894),Ii=t(78369),wi=t(18086),Ti=t(68552),kt=t(24828),Ai=t(4486),Vi=t(6151);function Mn(ze){var Ue=ze.parameters;return ze.featureSwitches&&Ue&&Ue.powerBISpinnerImprovements}var Li=function(){function ze(Pe,Ue,Ne){var We=this;this.contextActivityService=Pe,this.spinnerStoreService=Ue,this.featureSwitchService=Ne,this.initializeReportSpinnerActivity$=(0,e.GW)(function(){return We.contextActivityService.getActivityStream().pipe((0,Cn.n)(function(qe){return!Mn(We.featureSwitchService)}),(0,e.l4)(kt.TV),(0,Jt.h)(function(qe){var ot=qe.properties;return"Open Report"===ot.name||"Get Conceptual Schema"===ot.name||"Get Exploration"===ot.name}),(0,un.b)(function(qe){null==We.loadingScreenActivity&&"Open Report"===qe.properties.name&&(We.loadingScreenActivity=We.contextActivityService.createActivity({name:"Loading Screen"})),We.spinnerStoreService.addActivity(),"Open Report"===qe.properties.name?(We.currentOpenReport=qe.properties.rootId,We.spinnerStoreService.setProgressPercent(0),We.spinnerStoreService.showLoadingBar()):We.partOneComplete=!1}))},{dispatch:!1}),this.endSpinnerActivity$=(0,e.GW)(function(){return We.contextActivityService.getActivityStream().pipe((0,Cn.n)(function(qe){return!Mn(We.featureSwitchService)}),(0,e.l4)(kt.TH,kt.xq,kt.Gb),(0,Jt.h)(function(qe){var ot=qe.properties;return("Get Conceptual Schema"===ot.name||"Get Exploration"===ot.name||"Render"===ot.name)&&ot.rootId===We.currentOpenReport}),(0,e.IC)(function(){return We.spinnerStoreService.activityState$}),(0,un.b)(function(qe){qe[1].max>0&&We.spinnerStoreService.endActivity()}),(0,on.U)(function(qe){return qe[0]}),(0,Jt.h)(function(qe){var ot=qe.properties;return"Get Conceptual Schema"===ot.name||"Get Exploration"===ot.name}),(0,un.b)(function(qe){We.partOneComplete&&We.spinnerStoreService.setProgressPercent(30),We.partOneComplete=!0}))},{dispatch:!1}),this.endAllSpinnerActivities$=(0,e.GW)(function(){return We.contextActivityService.getActivityStream().pipe((0,Cn.n)(function(qe){return!Mn(We.featureSwitchService)}),(0,e.l4)(kt.TH,kt.xq,kt.Gb),(0,Jt.h)(function(qe){var ot=qe.properties;return"Open Report"===ot.name&&ot.rootId===We.currentOpenReport}),(0,e.IC)(function(){return We.spinnerStoreService.activityState$}),(0,un.b)(function(qe){qe[1].max>0&&We.endLoadingSession()}))},{dispatch:!1}),this.vcPrimerStartedActivity$=(0,e.GW)(function(){return We.contextActivityService.getActivityStream().pipe((0,Cn.n)(function(qe){return!Mn(We.featureSwitchService)}),(0,e.l4)(kt.TV),(0,Jt.h)(function(qe){var ot=qe.properties;return"Visual Container Prerun Setup"===ot.name&&ot.rootId===We.currentOpenReport}),(0,on.U)(function(qe){var ot=qe.properties,ut=0,Et=0;return ot.visualsToPrime>0&&(Et=ot.visualsToPrime,ut=Math.floor(Et*We.featureSwitchService.parameters.deferVCLoading_loadFinishThreshold),We.spinnerStoreService.addManyActivities(ut)),We.spinnerStoreService.endActivity(),(0===ut||0===Et)&&We.endLoadingSession(ut,Et),[ut,Et]}),(0,Jt.h)(function(qe){return qe[0]>0&&qe[1]>0}),(0,kn.zg)(function(qe){var ot=qe[0],ut=qe[1];We.spinnerStoreService.showLoadingBar();var Et=We.currentOpenReport,wt=3*ot,Rt=We.contextActivityService.getActivityStream().pipe((0,e.l4)(kt.TH,kt.xq,kt.Gb),(0,Jt.h)(function(vt){var gt=vt.properties;return("Render"===gt.name||"Query"===gt.name||"Visual Container Module Load"===gt.name)&&gt.rootId===We.currentOpenReport}),(0,Rn.R)(function(vt){return vt+1},0),(0,e.IC)(function(){return We.spinnerStoreService.activityState$}),(0,un.b)(function(vt){var gt=vt[0],Dt=30+gt/wt*70;Dt>vt[1].progress&&We.spinnerStoreService.setProgressPercent(Dt),gt===wt&&We.endLoadingSession(ot,ut)}),(0,Un.o)(function(vt){return vt[0]<=wt&&vt[1].loadingBarVisible&&We.currentOpenReport===Et})),Vt=We.contextActivityService.getActivityStream().pipe((0,e.l4)(kt.TV),(0,Jt.h)(function(vt){var gt=vt.properties;return"Visual Container Primed"===gt.name&&gt.rootId===We.currentOpenReport}),(0,Rn.R)(function(vt){return vt+1},0),(0,Cn.n)(function(vt){return vt<ut}),(0,Di.q)(1),(0,kn.zg)(function(vt){var gt=We.featureSwitchService.parameters.deferVCLoading_timeoutLimit;if(0===gt)return We.endLoadingSession(ot,ut,!0),(0,Ii.of)(void 0);var Ot=gt/7;Ot=Math.max(Ot,100);var Dt=gt/Ot;return(0,wi.F)(Ot).pipe((0,e.IC)(function(){return We.spinnerStoreService.activityState$}),(0,Un.o)(function(It){return It[1].loadingBarVisible&&It[0]<=Dt&&We.currentOpenReport===Et}),(0,un.b)(function(It){var Ut=It[0],pn=30+Ut*Ot/gt*70;pn>It[1].progress&&We.spinnerStoreService.setProgressPercent(pn),Ut===Dt&&We.endLoadingSession(ot,ut,!0)}))}));return(0,Ti.aj)([Rt,Vt])}))},{dispatch:!1}),this.partOneComplete=!1}return ze.prototype.endLoadingSession=function(Pe,Ue,Ne){this.spinnerStoreService.resetState(),this.currentOpenReport=void 0,this.loadingScreenActivity&&(this.loadingScreenActivity.setProperty("timeoutReached",Ne),this.loadingScreenActivity.setProperty("primeThreshold",Pe),this.loadingScreenActivity.setProperty("visualsToPrimeCount",Ue),this.loadingScreenActivity.resolve(),this.loadingScreenActivity=void 0)},ze.\u0275fac=function(Ue){return new(Ue||ze)(Ie.\u0275\u0275inject(Ai.r),Ie.\u0275\u0275inject(Vi.Y),Ie.\u0275\u0275inject(cn.vZ))},ze.\u0275prov=Ie.\u0275\u0275defineInjectable({token:ze,factory:ze.\u0275fac}),ze}(),Ri=t(60660),Ui=function(){function ze(Pe){this.subscription=Pe.loaded$.subscribe(function(Ue){Ue&&powerbi.explore.services.VisualHostServices.initialize(Pe)})}return ze.prototype.ngOnDestroy=function(){this.subscription||this.subscription.unsubscribe()},ze.\u0275fac=function(Ue){return new(Ue||ze)(Ie.\u0275\u0275inject(Ri.o))},ze.\u0275mod=Ie.\u0275\u0275defineNgModule({type:ze}),ze.\u0275inj=Ie.\u0275\u0275defineInjector({providers:[ri.p7,ai.xW,oi],imports:[[n.CommonModule,c.S,Si.p,O.O,qn,f._t,e.sQ.forFeature([Li]),x.F,V.A3,M.u5,w.L,Ln,T.InformationProtectionUICommonModule,v.N,v.N.withLazyScopedServices([{serviceName:"bookmarkOnLoad",modulePath:"./lazy-modules/bookmark-on-load/bookmark-on-load.module#BookmarkOnLoadModule"}]),v.N.withLazyScopedServices([{serviceName:"insightsAnalysisDefinitionBuilder",modulePath:"@powerbi/Insights/insights.module#InsightsModule"}]),v.N.withLazyScopedServices([{serviceName:"insightsAnalysisResultHandler",modulePath:"@powerbi/Insights/insights.module#InsightsModule"}]),v.N.withLazyScopedServices([{serviceName:"insightsAnalysisModern",modulePath:"@powerbi/Insights/insights.module#InsightsModule"}]),v.N.withLazyScopedServices([{serviceName:"insightsLauncher",modulePath:"@powerbi/InsightsUI/module#InsightsUIModule"}]),v.N.withLazyScopedServices([{serviceName:"insightsPaneStateManager",modulePath:"@powerbi/InsightsUI/module#InsightsUIModule"}]),v.N.withLazyScopedServices([{serviceName:"customVisualsStore",modulePath:"@powerbi/CustomVisualsGallery/modules/custom-visuals-store.module#CustomVisualsStoreModule"}]),v.N.withLazyScopedServices([{serviceName:"customVisualsStoreMetadata",modulePath:"@powerbi/CustomVisualsGallery/modules/custom-visuals-store.module#CustomVisualsStoreModule"}]),v.N.withLazyScopedServices([{serviceName:"drillthrough",modulePath:"./lazy-modules/drill-through/drill-through.module#DrillThroughModule"}]),v.N.withLazyScopedServices([{serviceName:"qnaPopoutBuilderModern",modulePath:"@powerbi/QnaReportContainer/module#QnaReportContainerModule"}]),v.N.withLazyScopedServices([{serviceName:"quickCalcModern",modulePath:"@powerbi/DaxTemplate/quick-calc.module#QuickCalcModule"}]),v.N.withLazyScopedServices([{serviceName:"persistentState",modulePath:"@powerbi/ExplorationPersistentState/exploration-persistent-state.module#ExplorationPersistentStateModule"}]),v.N.withLazyScopedServices([{serviceName:"originalExplorationState",modulePath:"@powerbi/ExplorationPersistentState/exploration-persistent-state.module#ExplorationPersistentStateModule"}]),v.N.withLazyScopedServices([{serviceName:"dirtyStateHandler",modulePath:"@powerbi/ExplorationPersistentState/exploration-persistent-state.module#ExplorationPersistentStateModule"}]),v.N.withLazyScopedServices([{serviceName:"personalBookmarks",modulePath:"@powerbi/WebBookmarks/web-bookmarks.module#WebBookmarksModule"}]),v.N.withLazyScopedServices([{serviceName:"visualRecommendationService",modulePath:"./lazy-modules/visual-recommendation/visual-recommendation-provider.module#VisualRecommendationProviderModule"}]),v.N.withLazyScopedServices([{serviceName:"authoringVisualRecommendationInterop",modulePath:"./lazy-modules/visual-recommendation/visual-recommendation-provider.module#VisualRecommendationProviderModule"}]),v.N.withLazyScopedServices([{serviceName:"smartNarrativesSummarization",modulePath:"@powerbi/SmartNarratives/smart-narratives.module#SmartNarrativesModule"}]),v.N.withLazyScopedServices([{serviceName:"smartNarratives",modulePath:"@powerbi/SmartNarratives/smart-narratives.module#SmartNarrativesModule"}]),v.N.withLazyScopedServices([{serviceName:"zIndexService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),v.N.withLazyScopedServices([{serviceName:"bookmarkAuthoringService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),v.N.withLazyScopedServices([{serviceName:"tabOrderService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),v.N.withLazyScopedServices([{serviceName:"canvasListOrderingService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),v.N.withLazyScopedServices([{serviceName:"conditionalFormattingDialogLauncherService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),v.N.withLazyScopedServices([{serviceName:"dataBarsDialogLauncherService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),v.N.withLazyScopedServices([{serviceName:"automatedInsightsQuery",modulePath:"@powerbi/AutomatedInsights/automated-insights-lazy.module#AutomatedInsightsLazyModule"}]),v.N.withLazyScopedServices([{serviceName:"visualHostTooltipActionsProvider",modulePath:"./lazy-modules/visual-host-tooltip-actions-provider/visual-host-tooltip-actions-provider.module#VisualHostTooltipActionsProviderModule"}]),v.N.withLazyScopedServices([{serviceName:"connectToDataService",modulePath:"@powerbi/ConnectToDataDialog/connect-to-data-dialog.module#ConnectToDataDialogModule"}]),v.N.withLazyScopedServices([{serviceName:"explorationAuthoring",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),v.N.withLazyScopedServices([{serviceName:"exportVisualData",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),v.N.withLazyScopedServices([{serviceName:"userEmulationService",modulePath:"./lazy-modules/user-emulation/user-emulation.module#UserEmulationModule"}]),v.N.withLazyScopedServices([{serviceName:"visualContainerSkittlesService",modulePath:"./lazy-modules/visual-container-skittles/visual-container-skittles.module#VisualContainerSkittlesModule"}]),v.N.withLazyScopedServices([{serviceName:"formattingStore",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-formatting/explore-formatting.module#ExploreFormattingModule"}]),v.N.withLazyScopedServices([{serviceName:"formattingModelService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-formatting/explore-formatting.module#ExploreFormattingModule"}]),Z.v,d.ot,fe.x,P.p9,I.To,y.Ps,b.c,a.Fk,o.LD,l.dp,Q.d,Je.z,ce.b,J._,se.gd,oe.U,K.b,m.K,D.x,p.Z,h.J,S.O,N.Zz,M.UX,E.ym,i.Bz.forChild(ie),Ze.a,it.e3,Te.T6,he.g,s.xg,Oi.Q,Ce.c,me._,ue.w],Ln,ue.w]}),ze}()},44822:function(Ee,ne,t){t.d(ne,{H:function(){return je}});var e=t(40582),n=t(40305),f=t(76430),i=t(38942),M=t(10883),E=t(23246),I=t(60660),d=t(59116),P=t(59804),y=t(78226),b=t(80815),a=powerbi.data,o=powerbi.explore,s=powerbi.visuals,c=s.AnomalyDetectionObjectConstants,O=s.AnomalyDetectionTransformConstants,x=s.cartesianRoleNames,V=a.DataViewObjectDefinitions,w=s.ForecastHelper,T=a.ScalarKeyUtils.isScalarKeySupportedForRole,v=powerbi.visuals.AnomalyDetectionVisualPlugin.isSingleDateColumn,g=powerbi.visuals.plugins,r=s.referenceLineObjectName,u=o.util.VisualContainerUtils,C=function(){function Ye(Ie,rt,st,ct,ft,Pt,Mt,St){this.conceptualSchemaProxy=Ie,this.dataSourcesService=rt,this.localizationService=st,this.telemetryService=ct,this.undoRedoService=ft,this.visualAuthoringService=Pt,this.visualAuthoringOperations=Mt,this.visualPluginService=St}return Ye.prototype.supportsAnalyticsObject=function(Ie,rt){return(0,e.mG)(this,void 0,void 0,function(){var st,ct,ft;return(0,e.Jh)(this,function(Pt){switch(Pt.label){case 0:return Pt.trys.push([0,2,,3]),st=this.dataSourcesService.get(),_.isEmpty(st)?[2,!1]:[4,this.conceptualSchemaProxy.get(st)];case 1:return ct=Pt.sent(),[2,this.supportsAnalyticsAuthoring(Ie,rt,ct)];case 2:return ft=Pt.sent(),this.telemetryService.logEvent(powerbi.telemetry.EXAnalyticsLoadSchemaError,{message:ft}),[2,!1];case 3:return[2]}})})},Ye.prototype.addAnalyticsObject=function(Ie,rt){var st=this;if(Ie&&rt){var ct=u.getVisualQuery(Ie),ft=this.getCartesianYRoleName(Ie);if(ft){var Pt=ct.getQueryRefByProjectionIndex(ft,0);if(Pt){var St={id:"1",metadata:Pt},zt=u.getObjectDefinitions(Ie);zt&&V.getObjectDefinition(zt,c.capabilityObjectName,St)||this.undoRedoService.register("addAnalyticsObject",function(){return st.setAnalyticsObjectProperties(Ie,St,rt),st.visualAuthoringService.raiseVisualContainerChanged(Ie),!0})}}}},Ye.prototype.getCartesianYRoleName=function(Ie){var rt=u.getVisualCapabilities(Ie,this.visualPluginService),st=_.find(rt.dataRoles,function(ct){return 1===ct.cartesianKind});if(st)return st.name},Ye.prototype.setAnalyticsObjectProperties=function(Ie,rt,st){var ct,ft;switch(st){case c.capabilityObjectName:ct={algorithm:O.transformPluginName,parameters:[{name:c.sensitivitySliceName,expr:a.SQExprBuilder.double(O.defaultSensitivityValue)}]},ft=a.SQExprBuilder.text(a.getDisplayName(a.createDisplayNameGetter("Visual_AnomalyDetection"),this.localizationService)+" "+rt.id);break;case w.forecastObjectName:ct={algorithm:"Forecast",parameters:[{name:"Unit",expr:a.SQExprBuilder.integer(7)},{name:"ForecastLength",expr:a.SQExprBuilder.integer(10)},{name:"IgnoreLast",expr:a.SQExprBuilder.integer(0)},{name:"ConfidenceLevel",expr:a.SQExprBuilder.double(.95)}]},ft=a.SQExprBuilder.text(a.getDisplayName(a.createDisplayNameGetter("Visual_Forecast"),this.localizationService)+" "+rt.id)}this.visualAuthoringOperations.addProperty(Ie,{objectName:st,propertyName:O.transformPropertyName},rt,ct),this.visualAuthoringOperations.addProperty(Ie,{objectName:st,propertyName:"show"},rt,a.SQExprBuilder.boolean(!0)),this.visualAuthoringOperations.addProperty(Ie,{objectName:st,propertyName:"displayName"},rt,ft)},Ye.prototype.supportsAnalyticsAuthoring=function(Ie,rt,st){if(!(Ie&&rt&&st&&this.supportedAnalyticsVisualType(Ie,rt)))return!1;var ct=u.getObjectDefinitions(Ie);switch(rt){case c.capabilityObjectName:if(ct&&(ct[w.forecastObjectName]||ct[r]))return!1;break;case w.forecastObjectName:if(ct&&ct[c.capabilityObjectName])return!1}var ft=u.getVisualQuery(Ie);if(!ft)return!1;var Pt=ft.tryGetExprs(x.category);return v(Pt,st)||T(st,ft.defn,ft.projections,x.category)},Ye.prototype.supportedAnalyticsVisualType=function(Ie,rt){var st=u.getVisualType(Ie);switch(rt){case c.capabilityObjectName:case w.forecastObjectName:return st===g.lineChart.name;default:return!1}},Ye.\u0275fac=function(rt){return new(rt||Ye)(f.\u0275\u0275inject(i.i),f.\u0275\u0275inject(M.D),f.\u0275\u0275inject(I.o),f.\u0275\u0275inject(d.y0),f.\u0275\u0275inject(E.z),f.\u0275\u0275inject(P.$),f.\u0275\u0275inject(y.Q),f.\u0275\u0275inject(b.D))},Ye.\u0275prov=f.\u0275\u0275defineInjectable({token:Ye,factory:Ye.\u0275fac}),Ye}(),F=t(46899),A=t(91738),W=t(49133),k=t(7508),R=t(70203),G=t(72127),le=t(54849),ge=t(24704),re=t(29826),j=t(77540),ie=t(49698),Z=t(11665),fe=t(97440),Q=t(76755),J=t(23580),se=t(47051),oe=t(86501),K=t(3945),D=t(98713),p=t(61624),h=t(10191),m=t(35638),S=t(18701),N=t(48478),ce=t(44627),he=t(35588),Ce=t(63724),me=t(30224),Ze=t(82954),Je=t(83906),it=t(6921),Te=t(95781),ue=t(83586),ve=t(48901),Me=t(30324),we=t(42688),et={provide:Me.b,useFactory:function(Ye,Ie,rt,st,ct,ft,Pt){var Mt=ft.get(Me.m,null);return Mt?f.Injector.create({providers:[Mt],parent:ft}).get(Me.b):powerbi.explore.services.createScriptVisualsService(rt,Ye,Ie,st,Pt,ct)},deps:[Te.vZ,I.o,b.D,ve.a,ue.E,f.Injector,[new f.Optional,we.X]]},at=t(8145),dt=t(66338),Fe=t(40629),be=t(62710),_e=t(5480),Oe=t(23832),Xe=t(49099),nt=t(95758),ht=t(15941),bt=t(61995),Ft=t(4714),ke=t(13838),Ae=t(85169),Le=t(61941),Ve=t(66075),tt=t(81606),lt=t(43851),de=t(89630),te=t(69965),ee=t(44842),X=t(88686),Be=t(48922),xe=t(34561),je=(0,e.ev)((0,e.ev)((0,e.ev)((0,e.ev)((0,e.ev)((0,e.ev)([],Le.K),tt.H),te.t),ee.K),X.V),[n.w,C,F.G,A.F,W.Z,k.Z,R.H,G.w,{provide:G.Z,useValue:ke.f},le.C,ge.e,re.L,Z.K,fe.M,j.V,Q.I,J.U,se.I,{provide:Ve.z,useExisting:se.I},oe.j,Je.L_,he.z_,ie.Sn,K.x,D.I,p.F,lt.c,de.eE,h.wG,m.W,S.Y,N.U,he.tC,Ce.F,Be.r,me.k,Ze.I,ce.H,it.cW,et,at.P,dt.s,xe._,Fe.kc,y.Q,{provide:be.t,useExisting:P.$},P.$,_e.w,Xe.p,Oe.s,ht.k,nt.K,bt.z,Ft.M,Ae.g])},40305:function(Ee,ne,t){t.d(ne,{w:function(){return V}});var e=t(40582),n=t(37219),f=t(76430),i=t(38942),M=t(68463),E=t(10883),I=t(13213),d=t(95781),P=t(93993),y=t(80815),b=powerbi.visuals.dataQueryVisualRoles,a=powerbi.data.DataViewObjectDefinitions,o=powerbi.data.DataViewTransform,l=powerbi.data.InlineSubqueryRewriter,s=powerbi.data.SemanticQuery,c=powerbi.data.SQExprBuilder,O=powerbi.explore.contracts.VisualQuery,x=powerbi.visuals.plugins.dataQueryVisual.name,V=function(){function T(v,g,r,u,C,F,A){this.conceptualSchemaProxy=v,this.dataProxy=g,this.dataSources=r,this.featureSwitchService=u,this.themeService=C,this.visualPlugin=F,this.visualQueryGenerator=A}return T.prototype.getValues=function(v,g){return(0,e.mG)(this,void 0,void 0,function(){var r,u,C,F,A,W;return(0,e.Jh)(this,function(R){switch(R.label){case 0:return(r=g&&g.executionOptions&&g.executionOptions.performanceActivity)&&(u=r.createChildActivity({name:"Query",component:n.I})),[4,this.generateQuery(v,g,u)];case 1:return(C=R.sent()).error?(null==u||u.reject(),[2,{error:C.error}]):[4,this.runQuery(C,g,u)];case 2:return(F=R.sent()).error?(null==u||u.reject(),[2,{error:F.error}]):(u&&u.resolve(),(A=this.generateDataView(r,F.result,C)).error?[2,{error:A.error}]:[2,{result:(W=A.result).table.rows,columns:W.table.columns}])}})})},T.prototype.generateDataQuery=function(v,g){return(0,e.mG)(this,void 0,void 0,function(){var r;return(0,e.Jh)(this,function(u){switch(u.label){case 0:return[4,this.generateQuery(v,g)];case 1:return[2,{query:(r=u.sent()).options&&r.options.query&&r.options.query.command,error:r.error,warnings:r.warnings}]}})})},T.prototype.generateQuery=function(v,g,r){return(0,e.mG)(this,void 0,void 0,function(){var u,C,F,W,k,R,G,ge,re,j,ie,fe,Q,oe,K,D;return(0,e.Jh)(this,function(h){switch(h.label){case 0:for(u=s.create(),_.isEmpty(v),C=0,F=v;C<F.length;C++)u=u.addSelect(F[C]);for(W=new l(u),u=W.rewrite(),k=new O(u,{},[]),R=0,G=u.select();R<G.length;R++)k.add(G[R].expr,b.values);if(g&&g.sort&&k.orderBy(g.sort),ge={visualType:x,query:k,objects:{}},g&&null!=g.top){if(!_.isInteger(g.top)||g.top<=0)return[2,{options:void 0,error:new w}];a.setValue(ge.objects,powerbi.visuals.dataQueryVisualOverrideDataReductionIdentifier,null,c.integer(g.top))}if(g&&g.suppressJoinPredicate)for(re=0,j=g.suppressJoinPredicate;re<j.length;re++)ie=k.defn.selectNameOf(j[re]),a.setValue(ge.objects,powerbi.visuals.dataQueryVisualSuppressJoinPredicateIdentifier,{metadata:ie},c.boolean(!0));fe=this.dataSources.get(),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.conceptualSchemaProxy.get(fe)];case 2:return Q=h.sent(),[3,4];case 3:return[2,{options:void 0,error:h.sent()}];case 4:K={config:ge,dataSources:fe,schema:Q,additionalFilters:g&&g.filters,executionMetricsKind:oe=g&&g.executionOptions&&g.executionOptions.performanceActivity?3:0,performanceActivity:r},h.label=5;case 5:return h.trys.push([5,7,,8]),[4,this.visualQueryGenerator.execute((0,e.pi)((0,e.pi)({},K),{executionMetricsKind:oe}))];case 6:if((D=h.sent()).error)throw D.error;return[2,D];case 7:return[2,{options:void 0,error:h.sent()}];case 8:return[2]}})})},T.prototype.runQuery=function(v,g,r){return(0,e.mG)(this,void 0,void 0,function(){var u;return(0,e.Jh)(this,function(A){switch(A.label){case 0:return A.trys.push([0,2,,3]),u=g&&g.executionOptions?(0,e.pi)((0,e.pi)({},v.options),{query:(0,e.pi)((0,e.pi)((0,e.pi)({},v.options.query),g.executionOptions),{performanceActivity:r})}):v.options,[4,this.dataProxy.execute(u)];case 1:return[2,{result:A.sent()}];case 2:return[2,{error:A.sent()}];case 3:return[2]}})})},T.prototype.generateDataView=function(v,g,r){var u;v&&(u=v.createChildActivity({name:"Data View Transform",component:n.I}));try{var C=this.visualPlugin.capabilities(x),F=o.apply({prototype:g.dataReaderResult.dataView,objectDescriptors:C.objects,dataViewMappings:C.dataViewMappings,dataRoles:C.dataRoles,drillCapabilities:C.drilldown,expandCollapseCapabilties:C.expandCollapse,transforms:r.transforms,colorAllocatorFactory:powerbi.visuals.createColorAllocatorFactory(),visualStyle:this.themeService.getVisualStyle(void 0),featureSwitches:this.featureSwitchService.featureSwitches});return u&&u.resolve(),_.size(F.dataViews),{result:F.dataViews[0]}}catch(A){return u&&u.reject(),{error:A}}},T.\u0275fac=function(g){return new(g||T)(f.\u0275\u0275inject(i.i),f.\u0275\u0275inject(M.d),f.\u0275\u0275inject(E.D),f.\u0275\u0275inject(d.vZ),f.\u0275\u0275inject(P.f),f.\u0275\u0275inject(y.D),f.\u0275\u0275inject(I.S))},T.\u0275prov=f.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T}(),w=function(){function T(){this.code="INVALID_DATA_REDUCTION"}return T.prototype.getDetails=function(){},T}()},91738:function(Ee,ne,t){t.d(ne,{F:function(){return T}});var e=t(40582),n=t(69104),f=t(76430),i=t(38942),M=t(10883),E=t(71367),I=t(66075),d=t(23246),P=t(86501),y=t(59116),b=t(40629),a=powerbi.explore,o=a.services,l=a.contracts,s=powerbi.telemetry,c=l.BookmarkExtensions,O=l.BookmarkActions,x=powerbi.explore.services.events,V=powerbi.ItemGroupingManager,w=powerbi.PbiPromise,T=function(){function v(g,r,u,C,F,A,W,k){var R=this;this.conceptualSchemaProxy=g,this.dataSources=r,this.eventBridge=u,this.explorationNavigation=C,this.explorationStateApplier=F,this.telemetryService=A,this.undoRedoService=W,this.viewModeState=k,this.bookmarkActionValues=Object.values(O),this.undoRedoService.registerSideEffect({run:function(le){(_.isEmpty(le)||!R.isBookmarkAction(le))&&null!=R.getActiveBookmark()&&R.setActiveBookmark(null)}}),this.bookmarksSubject=new n.X([]),this.activeBookmarkSubject=new n.X(null),this.bookmarks$=this.bookmarksSubject.asObservable(),this.activeBookmark$=this.activeBookmarkSubject.asObservable(),this.eventBridge.createChannelSubscriptionManager().subscribe(x.explorationLoaded,function(){var G=R.explorationNavigation.getCurrentExploration();R.activeBookmarkSubject.next(G.activeBookmark?G.activeBookmark:null),R.emitUpdatedBookmarks()}),this.emitUpdatedBookmarks()}return v.prototype.isBookmarkAction=function(g){return this.bookmarkActionValues.includes(g)},v.prototype.getBookmarks=function(){var g=this.explorationNavigation.getCurrentExploration();return null==g?[]:(null==g.bookmarks&&(g.bookmarks=[]),g.bookmarks)},v.prototype.setBookmarks=function(g){this.explorationNavigation.getCurrentExploration().bookmarks=g,this.emitUpdatedBookmarks()},v.prototype.getActiveBookmark=function(){var g=this.explorationNavigation.getCurrentExploration();return g?g.activeBookmark:null},v.prototype.setActiveBookmark=function(g){var r=this.explorationNavigation.getCurrentExploration();r&&(r.activeBookmark=g),this.activeBookmarkSubject.next(g)},v.prototype.getAllBookmarks=function(){return V.flattenItems(this.getBookmarks(),c.isStateBookmark)},v.prototype.getBookmarkGroups=function(){return this.getBookmarks().filter(c.isBookmarkGroup)},v.prototype.apply=function(g){return(0,e.mG)(this,void 0,w,function(){var r,u,C,F=this;return(0,e.Jh)(this,function(A){switch(A.label){case 0:return u=this.getBookmark(g),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return C=A.sent(),c.isValidBookmark(u),this.undoRedoService.register(O.Apply,function(){F.setActiveBookmark(u),r=F.applyBookmarkState(u,C)}),[2,r]}})})},v.prototype.applyBookmark=function(g,r){return(0,e.mG)(this,void 0,w,function(){var u,C,F=this;return(0,e.Jh)(this,function(A){switch(A.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return C=A.sent(),this.undoRedoService.register(O.Apply,function(){u=F.applyBookmarkState(g,C,r)}),[2,u]}})})},v.prototype.applyByName=function(g){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var r;return(0,e.Jh)(this,function(u){switch(u.label){case 0:return(r=V.find(g,this.getBookmarks()))&&c.isStateBookmark(r)?[4,this.apply(r)]:[3,2];case 1:return[2,u.sent()];case 2:return[2,null]}})})},v.prototype.setPlayMode=function(g){!1===g||this.getBookmarks();var r=this.viewModeState.getViewState();g&&0===r.bookmarkView||!g&&null==r.bookmarkView||(g?(r.bookmarkView=0,this.telemetryService.logEvent(s.EXBookmarkPlay)):r.bookmarkView=void 0,this.eventBridge.publishToChannel(o.events.bookmarkViewStateChanged))},v.prototype.getBookmarkListToPlay=function(g){var r=this.getParentBookmarkList(g);return V.flattenItems(r,c.isStateBookmark)},v.prototype.emitUpdatedBookmarks=function(){this.bookmarksSubject.next(this.getAllBookmarks())},v.prototype.getBookmark=function(g){return"number"==typeof g?this.getBookmarks()[g]:g},v.prototype.applyBookmarkState=function(g,r,u){var C={clearUnmatchedData:!0,suppressDataSourceVariables:!0};if(_.assign(C,u),!c.isBookmarkGroup(g)){g.options&&(C.suppressData=g.options.suppressData,C.suppressActiveSection=g.options.suppressActiveSection,C.suppressDisplay=g.options.suppressDisplay,g.options.applyOnlyToTargetVisuals&&(C.targetVisualNames=g.options.targetVisualNames));var F=this.applyState(g.explorationState,r,C);return this.eventBridge.publishToChannel(o.events.bookmarkApplied,{bookmarkName:g.name}),this.telemetryService.logEvent(s.EXBookmarkApply,{bookmarkName:g.name}),F}},v.prototype.applyState=function(g,r,u){return this.explorationStateApplier.applyDirty(g,r,u)},v.prototype.getParentBookmarkList=function(g){var r=this.getBookmarks();if(g){var u=V.getSiblingList(g,this.getBookmarks());u&&(r=u)}return r},v.\u0275fac=function(r){return new(r||v)(f.\u0275\u0275inject(i.i),f.\u0275\u0275inject(M.D),f.\u0275\u0275inject(E.J),f.\u0275\u0275inject(I.z),f.\u0275\u0275inject(P.j),f.\u0275\u0275inject(y.y0),f.\u0275\u0275inject(d.z),f.\u0275\u0275inject(b.kc))},v.\u0275prov=f.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}()},49133:function(Ee,ne,t){t.d(ne,{Z:function(){return c}});var e=t(76430),n=t(45996),f=t(71367),i=t(59886),M=t(23246),E=t(26808),I=t(95781),d=t(61624),P=t(48478),y=t(59116),b=t(40629),a=t(59804),o=t(72127),l=jsCommon.BrowserUtils,s=powerbi.explore.util.CanvasDisplayUtility,c=function(){function O(x,V,w,T,v,g,r,u,C,F,A,W){this.canvasZoomService=W,this.service=powerbi.explore.services.createCanvasKeyHandlerService(x,g,w,C,u,F,V,A,T,v,r)}return O.prototype.getVisualInteractivityDisabled=function(){return this.service.getVisualInteractivityDisabled()},O.prototype.setVisualInteractivityDisabled=function(x){this.service.setVisualInteractivityDisabled(!!x)},O.prototype.onKeyDown=function(x,V){if(this.isOnlyCtrlOrMeta(x)&&this.isTargetDisplayAreaContainer(x))switch(x.which){case 187:return this.canvasZoomService.zoomIn(),this.preventStopAndReturnFalse(x);case 189:return this.canvasZoomService.zoomOut(),this.preventStopAndReturnFalse(x)}if(this.isCtrlOrMetaShift(x))switch(x.which){case 48:return this.canvasZoomService.fitToPage(),this.preventStopAndReturnFalse(x);case 49:return this.canvasZoomService.actualSize(),this.preventStopAndReturnFalse(x);case 50:return this.canvasZoomService.fitToWidth(),this.preventStopAndReturnFalse(x)}return this.service.onKeyDown(x,V)},O.prototype.preventStopAndReturnFalse=function(x){return x&&(x.preventDefault(),x.stopPropagation()),!1},O.prototype.isOnlyCtrlOrMeta=function(x){return l.isCtrlOrMeta(x)&&!x.altKey&&!x.shiftKey},O.prototype.isCtrlOrMetaShift=function(x){return l.isCtrlOrMeta(x)&&!x.altKey&&x.shiftKey},O.prototype.isTargetDisplayAreaContainer=function(x){var V=x.target;return V&&$(V).closest(s.DisplayAreaContainerNameSelector.selector).length>0},O.\u0275fac=function(V){return new(V||O)(e.\u0275\u0275inject(n.Yv),e.\u0275\u0275inject(f.J),e.\u0275\u0275inject(I.vZ),e.\u0275\u0275inject(d.F),e.\u0275\u0275inject(P.U),e.\u0275\u0275inject(i.z),e.\u0275\u0275inject(y.y0),e.\u0275\u0275inject(M.z),e.\u0275\u0275inject(b.kc),e.\u0275\u0275inject(a.$),e.\u0275\u0275inject(E.w),e.\u0275\u0275inject(o.w))},O.\u0275prov=e.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac}),O}()},7508:function(Ee,ne,t){t.d(ne,{Z:function(){return P}});var e=t(76430),n=t(71367),f=t(66075),i=t(26808),M=t(95781),E=t(61624),I=t(35450),d=t(40629),P=function(){function y(b,a,o,l,s,c,O){this.legacyService=powerbi.explore.services.createCanvasScaleService(b,a,o,l,O,c,s)}return y.prototype.setDisplayAreaScaleFactor=function(b){return this.legacyService.setDisplayAreaScaleFactor(b)},y.prototype.setWallpaperScaleFactor=function(b){return this.legacyService.setWallpaperScaleFactor(b)},y.prototype.getDisplayAreaScaleFactor=function(){return this.legacyService.getDisplayAreaScaleFactor()},y.prototype.getWallpaperScaleFactor=function(){return this.legacyService.getWallpaperScaleFactor()},y.prototype.getDisplayOption=function(){return this.legacyService.getDisplayOption()},y.prototype.setDisplayOption=function(b){return this.legacyService.setDisplayOption(b)},y.prototype.setCanvasZoom=function(b){return this.legacyService.setCanvasZoom(b)},y.prototype.getCanvasZoom=function(){return this.legacyService.getCanvasZoom()},Object.defineProperty(y.prototype,"overrideDisplayOption",{get:function(){return this.legacyService.overrideDisplayOption},set:function(a){this.legacyService.overrideDisplayOption=a},enumerable:!1,configurable:!0}),y.\u0275fac=function(a){return new(a||y)(e.\u0275\u0275inject(n.J),e.\u0275\u0275inject(f.z),e.\u0275\u0275inject(M.vZ),e.\u0275\u0275inject(E.F),e.\u0275\u0275inject(I.F),e.\u0275\u0275inject(d.kc),e.\u0275\u0275inject(i.w))},y.\u0275prov=e.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac}),y}()},70203:function(Ee,ne,t){t.d(ne,{H:function(){return M}});var e=t(76430),n=t(72127),f=jsCommon.BrowserUtils,i=powerbi.explore.util.CanvasDisplayUtility,M=function(){function E(I){this.canvasZoomService=I}return E.prototype.onMouseWheel=function(I){this.isTargetDisplayAreaContainer(I)&&(this.isZoomInWheelEvent(I)&&(this.preventStop(I),this.canvasZoomService.zoomIn()),this.isZoomOutWheelEvent(I)&&(this.preventStop(I),this.canvasZoomService.zoomOut()))},E.prototype.preventStop=function(I){I.preventDefault(),I.stopPropagation()},E.prototype.isZoomInWheelEvent=function(I){return this.isOnlyCtrlOrMeta(I)&&I.deltaY<0},E.prototype.isZoomOutWheelEvent=function(I){return this.isOnlyCtrlOrMeta(I)&&I.deltaY>0},E.prototype.isOnlyCtrlOrMeta=function(I){return f.isCtrlOrMeta(I)&&!I.altKey&&!I.shiftKey},E.prototype.isTargetDisplayAreaContainer=function(I){var d=I.target;return d&&$(d).closest(i.DisplayAreaContainerNameSelector.selector).length>0},E.\u0275fac=function(d){return new(d||E)(e.\u0275\u0275inject(n.w))},E.\u0275prov=e.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac}),E}()},72127:function(Ee,ne,t){t.d(ne,{Z:function(){return I},w:function(){return d}});var e=t(76430),n=t(69104),f=t(71367),i=t(95781),M=t(61624),E=powerbi.explore.services.events,I=new e.InjectionToken("canvasZoomServiceInjectionToken"),d=function(){function P(y,b,a,o){this.eventBridge=y,this.featureSwitchService=b,this.formFactorProvider=a,this.canvasZoomConfig=o,this.zoomScale$=new n.X(this.canvasZoomConfig.midZoomScale)}return P.prototype.getZoomScale=function(){return this.zoomScale$.asObservable()},P.prototype.getCurrentZoomLevel=function(){return this.zoomScale$.value},P.prototype.zoomIn=function(){var y=this.canvasZoomConfig.zoomScaleStepAmount,b=this.zoomScale$.getValue(),a=Math.floor(10*b)/10+y;this.setZoomScale(a)},P.prototype.zoomOut=function(){var y=this.canvasZoomConfig.zoomScaleStepAmount,b=this.zoomScale$.getValue(),a=Math.ceil(10*b)/10-y;this.setZoomScale(a)},P.prototype.fitToPage=function(){this.eventBridge.publishToChannel(E.canvasDisplayChanged,1)},P.prototype.fitToWidth=function(){this.eventBridge.publishToChannel(E.canvasDisplayChanged,2)},P.prototype.actualSize=function(){this.eventBridge.publishToChannel(E.canvasDisplayChanged,3)},P.prototype.resetZoomScale=function(){this.setZoomScale(this.canvasZoomConfig.midZoomScale)},P.prototype.setZoomScale=function(y,b){if(void 0===b&&(b=!0),this.featureSwitchService.featureSwitches.newZoomControl&&0===this.formFactorProvider.getCurrentLayout()){var o=this.canvasZoomConfig,l=o.minZoomScale,s=o.maxZoomScale,c=Math.round(100*y)/100;c>=l&&c<=s&&(this.zoomScale$.next(c),b&&this.eventBridge.publishToChannel(E.canvasZoomChanged,c))}},P.\u0275fac=function(b){return new(b||P)(e.\u0275\u0275inject(f.J),e.\u0275\u0275inject(i.vZ),e.\u0275\u0275inject(M.F),e.\u0275\u0275inject(I))},P.\u0275prov=e.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}()},54849:function(Ee,ne,t){t.d(ne,{C:function(){return o}});var e=t(40582),n=t(29185),f=t(81677),i=t(76430),M=t(38942),E=t(10883),I=t(95762),d=t(63033),P=t(18237),y=t(60660),b=t(21231),a=powerbi.data.SQExpr,o=function(){function l(s,c,O,x,V,w,T,v){this.conceptualSchemaProxy=s,this.dataSources=c,this.dialogService=O,this.localizationService=x,this.screenReaderService=V,this.displayNameService=w,this.dataSourcesSerializer=T,this.modelAuthoring=v}return l.prototype.showDialog=function(s){return(0,e.mG)(this,void 0,void 0,function(){var c,O,x;return(0,e.Jh)(this,function(T){switch(T.label){case 0:return[4,this.getFirstEditableSchema()];case 1:if(c=T.sent(),!this.modelAuthoring||!c)return[2];O=c?c.name:"",T.label=2;case 2:return T.trys.push([2,5,,6]),[4,this.dialogService.openHostDialog({bindings:{selectedMeasure:s&&a.isMeasure(s)?s:void 0,dataSources:this.dataSourcesSerializer.serializeDataSources(this.getDsrDataSource())},componentName:f.HY,config:{minWidth:"720px",panelClass:["no-padding"]},dialogName:"ChangeDetectionMeasureDialog"})];case 3:return[4,T.sent().afterClosed().toPromise()];case 4:return x=T.sent(),[3,6];case 5:return T.sent(),[3,6];case 6:return x?(x.schemaName=O,[4,this.applyChangeDetectionMeasure(x)]):[3,8];case 7:T.sent(),T.label=8;case 8:return[2]}})})},l.prototype.hasExistingChangeDetectionMeasure=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(s){switch(s.label){case 0:return[4,this.getChangeDetectionEntity()];case 1:return[2,!!s.sent()]}})})},l.prototype.supportsChangeDetectionMeasure=function(){return(0,e.mG)(this,void 0,void 0,function(){var s;return(0,e.Jh)(this,function(c){switch(c.label){case 0:return[4,this.getFirstEditableSchema()];case 1:return[2,(s=c.sent())&&s.capabilities.supportsFastRefresh]}})})},l.prototype.getChangeDetectionEntity=function(){return this.getFirstEditableSchema().then(function(s){return s?s.entities.find(function(c){return c.properties&&c.properties.find(function(O){return O.measure&&O.measure.changeDetectionMetadata})}):void 0})},l.prototype.getFirstEditableSchema=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(O){switch(O.label){case 0:if(!this.dataSources||!this.dataSources.get())return[2,void 0];O.label=1;case 1:return O.trys.push([1,3,,4]),[4,this.conceptualSchemaProxy.get(this.getDsrDataSource())];case 2:return[2,O.sent().schemas.find(function(x){return x.capabilities.canEditChangeDetectionMeasure})];case 3:return O.sent(),[2,void 0];case 4:return[2]}})})},l.prototype.getDsrDataSource=function(){if(this.dataSources&&this.dataSources.get())return this.dataSources.get().filter(function(s){return s.type===powerbi.common.constants.dsrDataReaderType})},l.prototype.applyChangeDetectionMeasure=function(s){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(c){switch(c.label){case 0:return s.isNew?[4,this.createNewChangeDetectionMeasure(s.schemaName,s.entityName,s.measureName,s.expression,s.duration)]:[3,2];case 1:return c.sent(),[3,4];case 2:return[4,this.updateExistingChangeDetectionMetadata(s.schemaName,s.entityName,s.measureName,s.duration)];case 3:c.sent(),c.label=4;case 4:return[2]}})})},l.prototype.createNewChangeDetectionMeasure=function(s,c,O,x,V){return(0,e.mG)(this,void 0,void 0,function(){var g,r;return(0,e.Jh)(this,function(u){switch(u.label){case 0:return[4,this.applyModelAuthoringChanges({changes:[{newMeasureCreated:{schema:s,entity:c,name:O,expression:x}},{setChangeDetectionMetadata:{schema:s,entity:c,measureName:O,refreshInterval:V}}]},!0)];case 1:return u.sent(),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 2:return g=u.sent(),r=powerbi.data.SQExprBuilder.fieldExpr({measure:{schema:s,entity:c,name:O}}),this.screenReaderService.alert(this.localizationService.format("CreatedItem",this.displayNameService.getDisplayName(r,g,void 0))),[2]}})})},l.prototype.updateExistingChangeDetectionMetadata=function(s,c,O,x){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(T){switch(T.label){case 0:return[4,this.applyModelAuthoringChanges({changes:[{setChangeDetectionMetadata:{schema:s,entity:c,measureName:O,refreshInterval:x}}]},!0)];case 1:return T.sent(),[2]}})})},l.prototype.applyModelAuthoringChanges=function(s,c){return void 0===c&&(c=!1),(0,e.mG)(this,void 0,void 0,function(){var O;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,6]),[4,this.modelAuthoring.apply(s)];case 1:return x.sent(),[3,6];case 2:return O=x.sent(),c?[4,this.applyModelAuthoringChanges(s)]:[3,4];case 3:return x.sent(),[3,5];case 4:throw O;case 5:return[3,6];case 6:return[2]}})})},l.\u0275fac=function(c){return new(c||l)(i.\u0275\u0275inject(M.i),i.\u0275\u0275inject(E.D),i.\u0275\u0275inject(P.x),i.\u0275\u0275inject(y.o),i.\u0275\u0275inject(b.g),i.\u0275\u0275inject(I.O),i.\u0275\u0275inject(d._),i.\u0275\u0275inject(n.S,8))},l.\u0275prov=i.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l}()},49698:function(Ee,ne,t){t.d(ne,{GO:function(){return n},c9:function(){return f},$O:function(){return i},Sn:function(){return E}});var e=t(76430),n=new e.InjectionToken("ScopedChangeDetectionRefreshServiceOverrideToken"),f=function(){function I(){}return I.\u0275prov=e.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac=function(P){return new(P||I)}}),I}(),i=function(){function I(){}return I.prototype.resumeAsync=function(){return Promise.resolve()},I.prototype.stop=function(){},Object.defineProperty(I.prototype,"autoRefreshKind",{get:function(){return 0},enumerable:!1,configurable:!0}),I.prototype.getRefreshStats=function(){return{adminConfig:void 0,effectiveRefreshInterval:0,lastRefreshTimestamp:void 0}},I}(),E={provide:f,useFactory:function(I){var d=I.get(n,null);return d?e.Injector.create([d],I).get(f):new i},deps:[e.Injector]}},29826:function(Ee,ne,t){t.d(ne,{W:function(){return o},L:function(){return s}});var e=t(40582),n=t(76430),f=t(38942),i=t(10883),M=t(53606),E=t(23246),I=t(23580),d=t(59804),P=powerbi.visuals.decompositionTreeRoles,y=powerbi.Promise,b=powerbi.data.SQExpr,a=powerbi.explore.util.VisualContainerUtils;function o(c,O,x){return function(c,O){if(!c||!b.isMeasure(c)&&!b.isAggregation(c))return!1;var x=c.getTargetEntity().schema;if(O.schema(x).isExtensionSchema)return!1;var w=c.getMetadata(O);return!(!w||!w.type||!w.type.numeric&&!w.type.integer)}(c,x)&&(!!O.insights||!!O.analysisVisuals)&&_.every(x.schemas,function(V){var w;return(null===(w=V.capabilities.insights)||void 0===w?void 0:w.supportsDecomposition)&&!V.capabilities.supportsDataSourceVariables})}var s=function(){function c(O,x,V,w,T,v){this.conceptualSchemaProxy=O,this.dataSources=x,this.decompositionAuthoringCore=V,this.explorationCapabilities=w,this.undoRedoService=T,this.visualAuthoringService=v}return c.prototype.isSupported=function(){return(0,e.mG)(this,void 0,y,function(){var O;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return O=x.sent(),_.some(O.schemas,function(V){return!V.capabilities.supportsInstanceFilters||V.isMultiDimensionalModel})?[2,!1]:[2,!0]}})})},c.prototype.isDecompositionAnalysisSupported=function(O){return(0,e.mG)(this,void 0,y,function(){var x,V,w,T;return(0,e.Jh)(this,function(v){switch(v.label){case 0:return(x=a.getVisualQuery(O))?(V=x.tryGetExpr(P.analyze,0),w=this.explorationCapabilities.getCapabilities(),[4,this.conceptualSchemaProxy.get(this.dataSources.get())]):[2,!1];case 1:return T=v.sent(),[2,o(V,w,T)]}})})},c.prototype.isTopNPerLevelSupported=function(){return(0,e.mG)(this,void 0,y,function(){var O;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return O=x.sent(),[2,_.every(O.schemas,function(V){return V.capabilities&&V.capabilities.supportsTopNPerLevel})]}})})},c.prototype.addLevelAndExpandNode=function(O,x,V){var w=this;this.updateVisualContainer(O,function(){var T=w.decompositionAuthoringCore.getDecompositionRole(O);w.decompositionAuthoringCore.clearAILevelsInformation(O,T),w.decompositionAuthoringCore.appendLevelAndExpandNode(O,T,V,x)},"ExpandToNewLevel")},c.prototype.addAILevelAndExpandNode=function(O,x,V,w){var T=this;this.updateVisualContainer(O,function(){var v=T.decompositionAuthoringCore.getDecompositionRole(O),g=T.decompositionAuthoringCore.getPinnedLevelsCount(O,v),r=_.first(x.metadata),u=-1;r&&-1===(u=T.decompositionAuthoringCore.findProjectionIndex(O,v,r))||u<g-1||T.decompositionAuthoringCore.expandNode(O,v,x)&&(w&&T.decompositionAuthoringCore.setFirstActiveAILevel(O,v,u+1),T.decompositionAuthoringCore.setAILevelInformation(O,v,u+1,V))},"ExpandToAILevel")},c.prototype.updateLevel=function(O,x,V){var w=this,T=this.decompositionAuthoringCore.getDecompositionRole(O);this.updateVisualContainer(O,function(){return w.decompositionAuthoringCore.replaceLevel(O,T,x,V)},"UpdateLevel")},c.prototype.updateAILevel=function(O,x,V){var w=this,T=this.decompositionAuthoringCore.getDecompositionRole(O),v=this.decompositionAuthoringCore.findProjectionIndex(O,T,x),g=this.decompositionAuthoringCore.getExpansionStateLevel(O,T,v);g&&(g.isLocked||g.AIInformation&&this.updateVisualContainer(O,function(){var r=w.decompositionAuthoringCore.getFirstActiveAILevel(O,T);w.decompositionAuthoringCore.setAILevelInformation(O,T,v,V),w.decompositionAuthoringCore.setFirstActiveAILevel(O,T,Math.max(Math.min(v,r),0))},"UpdateAIMethod"))},c.prototype.removeLevel=function(O,x){var V=this,w=this.decompositionAuthoringCore.getDecompositionRole(O),T=this.decompositionAuthoringCore.findProjectionIndex(O,w,x),v=this.decompositionAuthoringCore.getExpansionStateLevel(O,w,T);v&&(v.isLocked||this.updateVisualContainer(O,function(){V.decompositionAuthoringCore.removeLevel(O,w,x)},"RemoveLevel"))},c.prototype.toggleLockedLevels=function(O,x){var V=this,w=this.decompositionAuthoringCore.getDecompositionRole(O),T=this.decompositionAuthoringCore.findProjectionIndex(O,w,x),v=this.decompositionAuthoringCore.getExpansionStateLevel(O,w,T);v&&this.updateVisualContainer(O,function(){v.isLocked?V.decompositionAuthoringCore.unlockLevels(O,w,T):V.decompositionAuthoringCore.lockLevels(O,w,T+1)},"LockLevels")},c.prototype.toggleNode=function(O,x){var V=this,w=this.decompositionAuthoringCore.getDecompositionRole(O);this.updateVisualContainer(O,function(){return V.decompositionAuthoringCore.toggleNode(O,w,x)},"ToggleNode")},c.prototype.clearAILevels=function(O,x){var V=this,w=this.decompositionAuthoringCore.getDecompositionRole(O),T=this.decompositionAuthoringCore.findProjectionIndex(O,w,x);-1!==T&&this.updateVisualContainer(O,function(){return V.decompositionAuthoringCore.clearAILevelsInformation(O,w,T)},"ClearAILevels")},c.prototype.updateVisualContainer=function(O,x,V){V?this.undoRedoService.register(V,x):x(),this.visualAuthoringService.raiseVisualContainerChanged(O)},c.\u0275fac=function(x){return new(x||c)(n.\u0275\u0275inject(f.i),n.\u0275\u0275inject(i.D),n.\u0275\u0275inject(M.e),n.\u0275\u0275inject(I.U),n.\u0275\u0275inject(E.z),n.\u0275\u0275inject(d.$))},c.\u0275prov=n.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}()},11665:function(Ee,ne,t){t.d(ne,{K:function(){return b}});var e=t(40582),n=t(76430),f=t(18237),i=t(71367),M=t(23246),E=t(59116),I=t(35309),d=t(80815),P=powerbi.explore.services.events,y=powerbi.explore.viewModels.ViewModelFactory,b=function(){function a(o,l,s,c,O,x){this.dialogService=o,this.eventBridge=l,this.telemetryService=s,this.trustedVisualService=c,this.visualPluginService=O,this.undoRedoService=x}return a.prototype.deleteCustomVisuals=function(o){return(0,e.mG)(this,void 0,void 0,function(){var l,s,O=this;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return l=_.filter(y.getCustomVisualTypes(this.visualPluginService.getConvertibleVisuals()),function(V){var w=V.plugin;return!O.trustedVisualService.isAutomaticallyImportedVisual(w.name)&&void 0===w.favoriteId}),this.getCustomVisualsTileCounts(o,l),[4,this.selectVisualsToDelete(l)];case 1:return(s=x.sent())&&s.length>0?[4,this.confirm(s)]:[3,3];case 2:x.sent()&&this.deleteVisuals(o,s),x.label=3;case 3:return[2]}})})},a.prototype.selectVisualsToDelete=function(o){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(c){switch(c.label){case 0:return[4,this.dialogService.openHostDialog({dialogName:"DeleteCustomVisualsDialog",componentName:"DeleteCustomVisualsDialog",bindings:o,config:{panelClass:["delete-custom-visuals"],width:"750px",minWidth:500}})];case 1:return[4,c.sent().afterClosed().toPromise()];case 2:return[2,c.sent()]}})})},a.prototype.confirm=function(o){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(c){switch(c.label){case 0:return[4,this.dialogService.openHostDialog({dialogName:"DeleteVisualWarningDialog",componentName:"DeleteVisualWarningDialog",bindings:o,config:{panelClass:["delete-visual-warning-dialog"],width:"650px",minWidth:500}})];case 1:return[4,c.sent().afterClosed().toPromise()];case 2:return[2,c.sent()]}})})},a.prototype.deleteVisuals=function(o,l){var s=this;this.undoRedoService.register("DeleteCustomVisual",function(){l.forEach(function(c){var O=c.plugin.name;s.telemetryService.logEvent(powerbi.telemetry.EXDeleteCustomViz,{customVisualName:O}),s.visualPluginService.removePlugin(O),_.remove(o.resourcePackages,function(x){return x.name===O}),_.remove(o.publicCustomVisuals,function(x){return x===O}),s.eventBridge.publishToChannel(P.deleteCustomVisual,{visual:c.plugin})}),s.eventBridge.publishToChannel(P.visualPluginsChanged)})},a.prototype.getCustomVisualsTileCounts=function(o,l){l.forEach(function(s){s.tileCount=0,o.sections.forEach(function(c){for(var O=0,x=c.visualContainers;O<x.length;O++)x[O].config.singleVisual.visualType===s.plugin.name&&(s.tileCount+=1)}),s.selected=!1})},a.\u0275fac=function(l){return new(l||a)(n.\u0275\u0275inject(f.x),n.\u0275\u0275inject(i.J),n.\u0275\u0275inject(E.y0),n.\u0275\u0275inject(I.t),n.\u0275\u0275inject(d.D),n.\u0275\u0275inject(M.z))},a.\u0275prov=n.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}()},97440:function(Ee,ne,t){t.d(ne,{M:function(){return a}});var e=t(76430),n=t(38942),f=t(5370),i=t(71367),M=t(66075),E=t(7078),I=t(26808),d=t(59886),P=t(23246),y=t(80815),b=t(78226),a=function(){function o(l,s,c,O,x,V,w,T,v,g){this.legacyService=powerbi.drillDetailsModuleFactory().create(l,s,v,T,w,O,V,c,x,g)}return o.prototype.drillToDetails=function(l,s,c){this.legacyService.drillToDetails(l,s,c)},o.prototype.generateDetailsTable=function(l,s,c,O){return this.legacyService.generateDetailsTable(l,s,c,O)},o.prototype.getDetailsTableTargetMeasures=function(l){return this.legacyService.getDetailsTableTargetMeasures(l)},o.prototype.clear=function(){this.legacyService.clear()},o.prototype.getContext=function(){return this.legacyService.getContext()},o.prototype.setContext=function(l){this.legacyService.setContext(l)},o.prototype.hasContext=function(){return this.legacyService.hasContext()},o.prototype.clearContext=function(){this.legacyService.clearContext()},o.\u0275fac=function(s){return new(s||o)(e.\u0275\u0275inject(n.i),e.\u0275\u0275inject(f.L),e.\u0275\u0275inject(i.J),e.\u0275\u0275inject(M.z),e.\u0275\u0275inject(E.r),e.\u0275\u0275inject(I.w),e.\u0275\u0275inject(d.z),e.\u0275\u0275inject(P.z),e.\u0275\u0275inject(y.D),e.\u0275\u0275inject(b.Q))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}()},77540:function(Ee,ne,t){t.d(ne,{V:function(){return i}});var e=t(40582),n=t(76430),f=t(89414),i=function(){function M(E){this.dropdown=new jsCommon.Lazy(function(){return E.getService("dropdown")})}return M.prototype.showContextMenu=function(E,I,d,P,y,b,a,o){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(l){switch(l.label){case 0:return[4,this.dropdown.getValue()];case 1:return l.sent().showContextMenu(E,I,d,P,y,b,a,o),[2]}})})},M.prototype.hide=function(E){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(I){switch(I.label){case 0:return[4,this.dropdown.getValue()];case 1:return I.sent().hide(E),[2]}})})},M.prototype.showMenu=function(E,I,d,P,y,b,a){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(o){switch(o.label){case 0:return[4,this.dropdown.getValue()];case 1:return[2,o.sent().showMenu(E,I,d,P,y,b,a)]}})})},M.prototype.hideAll=function(E){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(I){switch(I.label){case 0:return[4,this.dropdown.getValue()];case 1:return I.sent().hideAll(E),[2]}})})},M.prototype.isDropdownRegistered=function(E){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(I){switch(I.label){case 0:return[4,this.dropdown.getValue()];case 1:return[2,I.sent().isDropdownRegistered(E)]}})})},M.\u0275fac=function(I){return new(I||M)(n.\u0275\u0275inject(f.H))},M.\u0275prov=n.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac,providedIn:"root"}),M}()},23580:function(Ee,ne,t){t.d(ne,{U:function(){return E}});var e=t(37094),n=t(98084),f=t(76430),i=t(48901),M=t(95781),E=function(){function I(d,P,y){this.capabilitiesSubject=new n.t(1),this.capabilities$=this.capabilitiesSubject.asObservable(),this.service=powerbi.explore.services.createExplorationCapabilitiesService(d,P),y&&this.setCapabilities(y)}return I.prototype.setCapabilities=function(d){this.service.setCapabilities(d),this.capabilitiesSubject.next(this.getCapabilities())},I.prototype.getCapabilities=function(){return this.service.getCapabilities()},I.\u0275fac=function(P){return new(P||I)(f.\u0275\u0275inject(i.a),f.\u0275\u0275inject(M.vZ),f.\u0275\u0275inject(e.m,8))},I.\u0275prov=f.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac}),I}()},21645:function(Ee,ne,t){t.d(ne,{W:function(){return n}});var e=t(76430),n=function(){function f(){this.commandsDisplayOverride={}}return f.prototype.setExtensions=function(i){this.extensions=i},f.prototype.getExtensions=function(){return this.extensions},f.prototype.getGroups=function(){var i;return(null===(i=this.extensions)||void 0===i?void 0:i.groups)||[]},f.prototype.getCommandExtensions=function(){var i;return(null===(i=this.extensions)||void 0===i?void 0:i.commands)||[]},f.prototype.executeCustomCommand=function(i,M,E,I){i.publishToChannel(powerbi.explore.services.events.visualCustomCommand,{visualContainer:M,command:E,dataPointsDescriptions:I})},f.prototype.getCommandsDisplayOptions=function(i){return this.commandsDisplayOverride[i]||{}},f.prototype.setCommandDisplayOption=function(i,M,E){this.commandsDisplayOverride[i]=this.commandsDisplayOverride[i]||{},this.commandsDisplayOverride[i][M]=E},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac=function(M){return new(M||f)},providedIn:"root"}),f}()},47051:function(Ee,ne,t){t.d(ne,{I:function(){return b}});var e=t(40582),n=t(69104),f=t(66075),i=t(76430),M=t(4486),E=t(71367),I=t(59886),d=t(12603),P=t(61624),y=t(59116),b=function(a){function o(l,s,c,O,x,V){var w=a.call(this)||this;return w.legacyService=powerbi.explore.services.createExplorationNavigationService(l,s,c,O,x,V,new n.X([]),new n.X(null)),w}return(0,e.ZT)(o,a),o.prototype.registerExplorationViewModel=function(l){this.legacyService.registerExplorationViewModel(l)},o.prototype.updateActiveSection=function(l){return this.legacyService.updateActiveSection(l)},o.prototype.updateExplorationActiveSectionIndex=function(l){this.legacyService.updateExplorationActiveSectionIndex(l)},o.prototype.goto=function(l,s){this.legacyService.goto(l,s)},o.prototype.getCurrentSection=function(){return this.legacyService.getCurrentSection()},o.prototype.getAllSections=function(){return this.legacyService.getAllSections()},o.prototype.getAllVisualContainers=function(l){return this.legacyService.getAllVisualContainers(l)},o.prototype.getCurrentExploration=function(){return this.legacyService.getCurrentExploration()},o.prototype.getCurrentExploreCanvas=function(){return this.legacyService.getCurrentExploreCanvas()},o.prototype.getSectionByName=function(l){return this.legacyService.getSectionByName(l)},o.prototype.loadExploration=function(l,s,c){this.legacyService.loadExploration(l,s,c)},o.prototype.startExplorationSession=function(l){this.legacyService.startExplorationSession(l)},o.prototype.updateExplorationTelemetryData=function(l){this.legacyService.updateExplorationTelemetryData(l)},o.prototype.getExplorationTelemetryData=function(){return this.legacyService.getExplorationTelemetryData()},o.prototype.showExplorationMask=function(){this.legacyService.showExplorationMask()},o.prototype.hideExplorationMask=function(){this.legacyService.hideExplorationMask()},o.prototype.back=function(){this.legacyService.back()},o.prototype.getCurrentZone=function(){return this.legacyService.getCurrentZone()},Object.defineProperty(o.prototype,"sections$",{get:function(){return this.legacyService.sections$},enumerable:!1,configurable:!0}),o.prototype.emitUpdatedSections=function(){this.legacyService.emitUpdatedSections()},Object.defineProperty(o.prototype,"currentSection$",{get:function(){return this.legacyService.currentSection$},enumerable:!1,configurable:!0}),o.\u0275fac=function(s){return new(s||o)(i.\u0275\u0275inject(M.r),i.\u0275\u0275inject(E.J),i.\u0275\u0275inject(I.z),i.\u0275\u0275inject(P.F),i.\u0275\u0275inject(y.y0),i.\u0275\u0275inject(d.Z))},o.\u0275prov=i.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(f.z)},86501:function(Ee,ne,t){t.d(ne,{j:function(){return d}});var e=t(76430),n=t(68463),f=t(85475),i=t(66075),M=t(4714),E=powerbi.common.constants.dsrDataReaderType,I=powerbi.explore.util.VisualContainerUtils,d=function(){function P(y,b,a,o){this.dataProxy=y,this.explorationStateManager=b,this.explorationNavigation=a,this.visualSyncService=o}return P.prototype.applyDirty=function(y,b,a){if(y){a.stopDataQueries&&this.dataProxy.stopCommunication(E);try{var o=this.explorationStateManager.apply(y,b,a);if(this.syncFilterState(o),a.clearQueryCaches){var l=this.explorationNavigation.getCurrentExploration();I.clearExplorationQueryCaches(l)}return o}finally{a.stopDataQueries&&this.dataProxy.resumeCommunication(E)}}},P.prototype.syncFilterState=function(y){if(y)for(var b=0,a=y.visualContainers;b<a.length;b++){var o=a[b];o.config.singleVisual.syncGroup&&this.visualSyncService.syncFilterState(o)}},P.\u0275fac=function(b){return new(b||P)(e.\u0275\u0275inject(n.d),e.\u0275\u0275inject(f.J),e.\u0275\u0275inject(i.z),e.\u0275\u0275inject(M.M))},P.\u0275prov=e.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}()},83906:function(Ee,ne,t){t.d(ne,{K3:function(){return P},p7:function(){return y},L_:function(){return o}});var e=t(76430),n=t(13271),f=t(95781),i=t(56209),M=t(60354),E=t(80815),I=t(32806);function d(l,s,c,O){var x=l.get(i.m,null),V=l.get(I.s,null);return powerbi.explore.services.createExplorationVisualPluginService(s,c,O,x,V)}function P(l,s,c,O){return d(l,c,O,s)}var y={provide:E.D,useFactory:P,deps:[e.Injector,n.bh,f.vZ,M.t]},b=new e.InjectionToken("ScopedExplorationVisualPluginServiceOverrideToken"),o={provide:E.D,useFactory:function(l,s,c,O){var x=l.get(b,null);return x?e.Injector.create([x],l).get(E.D):d(l,s,c,O)},deps:[e.Injector,f.vZ,M.t,n.l6]}},6921:function(Ee,ne,t){t.d(ne,{H$:function(){return O},cW:function(){return V}});var e=t(40582),n=t(76430),f=t(65491),i=t(49974),M=t(23580),E=t(95781),I=t(52653),d=t(60660),P=t(71065),y=t(57869),b=t(83469),a=t(66075),o=t(35309),l=t(80815),s=t(46091),c=function(){function w(T,v,g,r,u,C,F,A,W,k,R,G){this.legacyService=powerbi.explore.services.createVisualValidatorService(r,k,A,C,u,W,v,F,g,T.get(f.D),R,G)}return w.prototype.validate=function(T,v,g){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(r){return[2,this.legacyService.validate(T,v,g)]})})},w.prototype.shouldBlockVisualQuery=function(T){return this.legacyService.shouldBlockVisualQuery&&this.legacyService.shouldBlockVisualQuery(T)},w.\u0275fac=function(v){return new(v||w)(n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(i.E),n.\u0275\u0275inject(M.U),n.\u0275\u0275inject(E.vZ),n.\u0275\u0275inject(d.o),n.\u0275\u0275inject(P.h),n.\u0275\u0275inject(y.o),n.\u0275\u0275inject(b.k),n.\u0275\u0275inject(o.t),n.\u0275\u0275inject(l.D),n.\u0275\u0275inject(a.z),n.\u0275\u0275inject(I.U,8))},w.\u0275prov=n.\u0275\u0275defineInjectable({token:w,factory:w.\u0275fac}),w}(),O=new n.InjectionToken("ScopedVisualValidatorServiceOverrideToken"),V={provide:s.R,useFactory:function(w,T,v,g,r,u,C,F,A,W,k,R){var G=w.get(O,null);return G?n.Injector.create([G],w).get(s.R):new c(w,T,v,g,r,u,C,F,A,W,k,R)},deps:[n.Injector,i.E,M.U,E.vZ,d.o,P.h,y.o,b.k,o.t,l.D,a.z,[I.U,new n.Optional]]}},70239:function(Ee,ne,t){t.d(ne,{G:function(){return M}});var e=t(40582),n=t(76430),f=t(18237),i=t(60660),M=function(){function E(I,d){this.modernDialogService=I,this.localizationService=d}return E.prototype.show=function(I,d,P,y,b,a,o,l,s){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var c,x;return(0,e.Jh)(this,function(T){switch(T.label){case 0:return c=this.create(I,d,P,y,b,a,o,l,s),x={dialogName:"ExportData",componentName:"ExportDataDialogComponent",bindings:{viewModel:c},config:{width:"652px",height:"600px",maxHeight:"100%",maxWidth:"100%",minHeight:256,minWidth:320,autoFocus:!0,panelClass:["no-padding","no-border"],ariaLabel:this.localizationService.get("ModalDialog_ExportDataTitleTwo")}},[4,this.modernDialogService.openHostDialog(x)];case 1:return[4,T.sent().afterClosed().toPromise()];case 2:return[2,T.sent()]}})})},E.prototype.create=function(I,d,P,y,b,a,o,l,s){var c=0===P,O=[this.localizationService.get("ModalDialog_ExportDataSummarized"),this.localizationService.get("ModalDialog_ExportDataUnderlying")];return b&&O.push(this.localizationService.get("ModalDialog_ExportDataMatrixVisual")),{options:O,isExlFormatDisabled:!(c&&d),hasMeasuresForUnderlyingData:y,isExportMatrixVisualDataSupported:b,exportDataMode:a,isCsvFormatDisabled:!I,exportXlsxUnsupportedType:P,isExploreAuthorized:o,artifactId:l,model:s}},E.\u0275fac=function(d){return new(d||E)(n.\u0275\u0275inject(f.x),n.\u0275\u0275inject(i.o))},E.\u0275prov=n.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"}),E}()},76755:function(Ee,ne,t){t.d(ne,{I:function(){return x}});var e=t(63429),n=t(60354),f=t(76430),i=t(53039),M=t(60660),E=t(38942),I=t(80815),d=t(16035),P=t(95762),y=t(95781),b=t(38158),a=t(44627),o=t(97440),l=powerbi.data.services.SemanticQuerySerializer,s=powerbi.explore.QueryProjectionBuilderCoreUtils,c=powerbi.common.constants.onPremiseVSName,O=new Map([["MipClientLabelDisabled","ExportData_FailureMessage_DisabledLabel"],["MipClientBadInput","ExportData_FailureMessage_DeletedLabel"],["MipClientServiceDisabled","ExportData_FailureMessage_LabelServiceInternalError"],["MipClientUnsupportedProtection","ExportData_FailureMessage_AdHocLabel"],["MipClientInternalError","ExportData_FailureMessage_LabelServiceInternalError"]]),x=function(){function V(w,T,v,g,r,u,C,F,A,W,k){this.notificationToastService=T,this.localizationService=v,this.conceptualSchemaProxy=g,this.visualPluginService=r,this.visualPluginOps=u,this.featureSwitchService=C,this.displayNameService=F,this.fileSaver=A,this.lazyScoped=W,this.drillToDetails=k,this.promiseFactory=w}return V.prototype.exportTileDataToCsv=function(w){var T=this,v=w.contract,g=w.config,r=powerbi.dataServices.TileUtils.getVisualType(g),u=this.getDataSources(w),C=this.promiseFactory.defer(),F=this.localizationService,A=this.notificationToastService,W=A.notify({title:F.get("ExportData_LoadingTitle"),message:F.get("ExportData_LoadingMessage"),notificationType:3});return this.conceptualSchemaProxy.get(u).then(function(k){A.hide(W);var R=powerbi.dataServices.ContractUtils.convertToSemanticQueryWithDataShapeBinding(v.query),G=l.deserializeQuery(R.defn),le=g.visualContainer.elements,ge=le&&le.length>0?le[0].DataRoles:null,re=T.visualPluginService.getPlugin(r),j=s.createProjectionBuilderFromDataRoles(re,ge,G,k);if(T.visualPluginService.capabilities(r)){var fe={objects:g.visualContainer.$visualContainer.config.singleVisual.objects,visualType:r,query:new powerbi.explore.contracts.VisualQuery(G,j.build(R.shape),[])};T.exportVisualDataToCsv(g.visualContainer.heading1,{data:w.visual.data,dataTransforms:w.visual.dataTransforms},u,T.mockVisualContainer(fe),null).then(function(Q){C.resolve(Q)},function(Q){C.reject(Q)})}},function(){A.hide(W)}),C.promise},V.prototype.exportVisualDataToCsv=function(w,T,v,g,r){var u=this.localizationService,F=this.notificationToastService.notify({title:u.get("ExportData_LoadingTitle"),message:u.get("ExportData_LoadingMessage"),notificationType:3,sticky:!0}),A=this.lazyScoped.get("exportVisualData").then(function(W){return W.exportToCsv(w,T,v,g,r)});return this.handleExportDataResult(A,F,"Csv")},V.prototype.exportVisualDataToExcel=function(w,T,v,g,r,u,C,F){var A=this,W=this.localizationService,k=this.notificationToastService,R=this.promiseFactory.defer(),G=k.notify({title:W.get("ExportData_LoadingTitle"),message:W.get("ExportData_LoadingMessage"),notificationType:3,sticky:!0});return this.conceptualSchemaProxy.get(v).then(function(le){var re=g;if(1===u){var j=A.drillToDetails.generateDetailsTable(g.config.singleVisual,le,C,!0);if(!j)return void R.reject({blob:null,errorDetails:{errorType:4}});re=A.mockVisualContainer(j)}A.promiseFactory.resolve(powerbi.dataServices.utils.generateFiltersDescription(le,r,re.config.singleVisual,A.visualPluginService,A.displayNameService,A.localizationService)).then(function(ie){A.lazyScoped.get("exportVisualData").then(function(Z){return Z.exportToExcel(w,T,v,re,r,ie,u,F)}).then(function(Z){R.resolve(Z)},function(Z){R.reject(Z)})},function(){R.reject({blob:null,errorDetails:{errorType:5}})})},function(){R.reject({blob:null,errorDetails:{errorType:3}})}),this.handleExportDataResult(R.promise,G,"Xlsx")},V.prototype.mockVisualContainer=function(w){var T={name:jsCommon.Utility.generateGuid(),config:{singleVisual:w},layouts:jsCommon.ArrayExtensions.createWithId(),filters:[]};return T.layouts.push({id:0,position:{x:0,y:0,width:0,height:0}}),T},V.prototype.canExportTileData=function(w){if(!this.featureSwitchService.featureSwitches.exportToCsvEnabled||w.contract.type!==powerbi.dataServices.contracts.TileType.composite)return!1;var v=w.visual.type;if(!this.visualPluginService.getPlugin(v)||!w.data||!this.visualPluginOps.isQueryVisual(v))return!1;try{var C=powerbi.dataServices.ContractUtils.convertToSemanticQueryWithDataShapeBinding(w.contract.query).defn;if(!C||!C.Version||C.Version<powerbi.data.SemanticQueryVersions.Version2)return!1}catch(F){return!1}return!0},V.prototype.getExportDataToExcelUnsupportedType=function(w,T){var v=w.config.singleVisual,g=v.objects,C=this.featureSwitchService.featureSwitches.insightApps;return g&&g.forecast?3:g&&g.clustering?2:this.visualPluginService.isScriptVisual(v.visualType)?4:e.CI.isActionAllowed(T,C,8)?0:5},V.prototype.areExploreOperationsAuthorized=function(w){return!!w&&e.CI.areExploreOperationsAuthorized(w)},V.prototype.isDataModelASOnPremises=function(w){return w&&w.vsName&&w.vsName===c},V.prototype.getDataSources=function(w){var T=w.contract,v=powerbi.explore.contracts.createDataSourceArray();v.push({type:"dsr",id:T.modelId,name:T.modelName,dsr:{schemaName:T.modelName,vsName:w.dataSet.vsName,dbName:w.dataSet.dbName,modelId:T.modelId}});var r=powerbi.explore.constants.ExplorationSchemaName,u={type:powerbi.explore.dataReaderPlugins.ExplorationDataReaderType,id:T.id,name:r,extends:T.modelName,exploration:{schemaName:r,extends:T.modelName,getModelExtensions:function(){return w.config.visualContainer.$modelExtensions},getDataSourceVariables:function(){return w.config.visualContainer.dataSourceVariables}}};return v.push(u),v},V.prototype.saveResult=function(w){switch(w.format){case 0:this.fileSaver.saveAs(w.blob,w.fileName,{type:"text/csv;charset=utf-8;"});break;case 1:this.fileSaver.saveAs(w.blob,w.fileName,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;"})}},V.prototype.handleExportDataResult=function(w,T,v){var g=this,r=this.promiseFactory.defer(),u=this.localizationService,C=this.notificationToastService;return w.then(function(F){null!=F.errorDetails?(C.notify({title:u.get("ExportData_FailureTitle"),message:u.get("ExportData_FailureMessage_default_"+v),notificationType:2}),r.reject(F)):(C.notify(F.isPartialResult?{title:u.get("ExportData_PartialDataTitle"),message:u.get("ExportData_PartialDataMessage"),notificationType:5}:{title:u.get("ExportData_Success_Header"),message:u.get("ExportData_Success"),notificationType:4,duration:8e3}),g.saveResult(F),r.resolve(F))},function(F){var A=null==F?void 0:F.errorDetails,W="ExportData_FailureMessage_default_"+v;_.isEmpty(A)?JSON.stringify(F,Object.getOwnPropertyNames(F)):A.errorCode&&O.get(F.errorDetails.errorCode)?W=O.get(F.errorDetails.errorCode):6===A.errorType?W="ExportData_EmptyColumnName":3===A.errorType?W="ExportData_SchemaLoadingFailure":0===A.errorType?W="ExportData_QueryGenerationFailure":5===A.errorType?W="ExportData_GenerateFiltersDescriptionFailure":4===A.errorType?W="ExportData_GenerateDetailsTableFailure":1===A.errorType?W="ExportData_NoData":2===A.errorType?W="ExportData_QueryError":"NetworkConnectionIssue"===A.errorMessage&&0===A.status&&(W="ServerError_NetworkConnectionIssue"),C.notify({title:u.get("ExportData_ExportFailureTitle"),message:u.get(W),notificationType:2}),r.reject(F)}).finally(function(){return C.hide(T)}),r.promise},V.\u0275fac=function(T){return new(T||V)(f.\u0275\u0275inject(n.t),f.\u0275\u0275inject(i.Q),f.\u0275\u0275inject(M.o),f.\u0275\u0275inject(E.i),f.\u0275\u0275inject(I.D),f.\u0275\u0275inject(d.f),f.\u0275\u0275inject(y.vZ),f.\u0275\u0275inject(P.O),f.\u0275\u0275inject(b.m),f.\u0275\u0275inject(a.H),f.\u0275\u0275inject(o.M))},V.\u0275prov=f.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}()},1161:function(Ee,ne,t){t.d(ne,{U:function(){return n}});var e=t(76430),n=function(){function f(){}return f.prototype.exportToExcel=function(i,M){},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac=function(M){return new(M||f)},providedIn:"root"}),f}()},45401:function(Ee,ne,t){t.d(ne,{W:function(){return b}});var e=t(85710),n=t(58222),f=t(60354),i=t(59116),M=t(76430),E=t(34425),I=t(95781),d=t(26188),P=t(57869),y=powerbi.common.contracts.FavoriteType,b=function(){function a(o,l,s,c,O,x,V,w){this.promiseFactory=o,this.telemetryService=l,this.favoritesHttpService=s,this.orgStoreCustomVisualsService=c,this.visualPaneSettingsService=O,this.featureSwitchService=x,this.publicCustomVisualService=V,this.resourcePackagesService=w}return a.prototype.reset=function(o){_.forEach(o.getVisuals(),function(l){if(l.custom){var s=l;s.favoriteId=void 0,s.resourcePackageId=void 0,s.isOutOfBox=!1}})},a.prototype.ensureFavoriteVisualResources=function(o){var c,O,l=this,s=[];if(this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps){var x=this.visualPaneSettingsService.getFavoritePublicCustomVisuals().then(function(w){c=w});s.push(x)}var V=this.ensureFavoritesLoaded().then(function(w){O=w});return s.push(V),this.promiseFactory.allSettled(s).then(function(){return l.ensureFavoriteVisualResourcesWithPublicCvs(O,o,c)})},a.prototype.ensureFavoriteVisualResourcesWithPublicCvs=function(o,l,s){var c=_.map(o,function(x){return x.favoriteObject}),O=this.getResourcePackagesToRegister(c,s);return this.telemetryService.logEvent(powerbi.telemetry.SettingsFavoriteResourcePackages,{favoriteResourcePackageAction:"Get",favoriteResourcePackagePayload:_.join(_.map(c,function(x){return x.name}))}),this.resourcePackagesService.registerPackages(O),l.ensurePlugins(O).then(function(){for(var x=0,V=o;x<V.length;x++){var w=V[x],T=w.favoriteObject,v=l.getPlugin(T.name);v.favoriteId=w.id,v.resourcePackageId=T.id}})},a.prototype.ensureOutOfBoxVisuals=function(o){var l=this;return this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps?this.orgStoreCustomVisualsService.getOrgCustomVisuals().then(function(s){return l.ensureOutOfBoxVisualsWithPublicCvs(o,l.getPublicOutOfBoxVisualsFromGalleryItems(s))}):this.ensureOutOfBoxVisualsWithPublicCvs(o)},a.prototype.getPublicOutOfBoxVisualsFromGalleryItems=function(o){return _.map(_.filter(o,function(l){return l.customVisualContract.isOutOfBox&&l.customVisualContract.isPublicVisual}),function(l){return l.customVisualContract.name})},a.prototype.ensureOutOfBoxVisualsWithPublicCvs=function(o,l){var s=this;return this.favoritesHttpService.getOutOfBoxVisuals(null).then(function(O){var x=s.getResourcePackagesToRegister(O,l);return s.telemetryService.logEvent(powerbi.telemetry.SettingsOutOfBoxVisuals,{outOfBoxVisuals:_.join(_.map(x,function(V){return V.name}))}),s.resourcePackagesService.registerPackages(x),o.ensurePlugins(x).then(function(){for(var V=0,w=x;V<w.length;V++){var T=w[V],v=o.getPlugin(T.name);v.isOutOfBox=!0,v.resourcePackageId=T.id}})})},a.prototype.getResourcePackagesToRegister=function(o,l){var s=o;if(l&&l.length>0){var c=this.publicCustomVisualService.createPublicResourcePackagesByName(l);s=c;for(var O=function(g){var r=_.find(s,function(u){return u.name===g.name});r?x.featureSwitchService.featureSwitches.stopPublicRpsPopulation||(_.remove(s,function(u){return u.name===g.name}),r.id=g.id,s.push(r)):s.push(g)},x=this,V=0,w=o;V<w.length;V++)O(w[V])}return s},a.prototype.addVisualToFavorites=function(o){var l=this,s=[];if(this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps){var c=this.publicCustomVisualService.getPublicVisualTypes([o.name]).then(function(V){if(V[0])return l.visualPaneSettingsService.addFavoritePublicCustomVisual(o)});s.push(c)}if(o.resourcePackageId<0)return this.promiseFactory.all(s);var O=this.telemetryService.startEvent(powerbi.telemetry.SettingsFavoriteResourcePackages,{favoriteResourcePackageAction:"Add",favoriteResourcePackagePayload:o.name}),x=this.favoritesHttpService.addFavoriteResourcePackage(o.resourcePackageId,o.name,O.event).then(function(V){o.favoriteId=V.id,l.favoritesLoaded=!1,O.resolve()}).catch(function(){O.reject()});return s.push(x),this.promiseFactory.allSettled(s)},a.prototype.removeVisualFromFavorites=function(o){var l=this,s=[];if(this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps){var c=this.publicCustomVisualService.getPublicVisualTypes([o.name]).then(function(w){if(w[0])return l.visualPaneSettingsService.removeFavoritePublicCustomVisual(o)});s.push(c)}if(o.resourcePackageId<0)return this.promiseFactory.all(s);var O={id:o.favoriteId,favoriteType:y.ResourcePackage,uniqueId:void 0,getPermissions:void 0},x=this.telemetryService.startEvent(powerbi.telemetry.SettingsFavoriteResourcePackages,{favoriteResourcePackageAction:"Remove",favoriteResourcePackagePayload:o.name}),V=this.favoritesHttpService.deleteFavorite(O,x.event).then(function(){o.favoriteId=void 0,l.favoritesLoaded=!1,x.resolve()}).catch(function(){x.reject()});return s.push(V),this.promiseFactory.allSettled(s)},a.prototype.isFavoriteVisual=function(o){return this.isFavoriteResourcePackage(o.resourcePackageId)},a.prototype.isFavoriteResourcePackage=function(o){return this.ensureFavoritesLoaded().then(function(l){return _.some(l,function(s){return s.favoriteId===o})})},a.prototype.isOutOfBoxVisual=function(o){return this.isOutOfBoxResourcePackage(o.resourcePackageId)},a.prototype.isOutOfBoxResourcePackage=function(o){return this.ensureOutOfBoxVisualsLoaded().then(function(l){return _.some(l,function(s){return s.id===o})})},a.prototype.ensureFavoritesLoaded=function(){var o=this;return this.favoritesLoaded||this.favoritesLoadInProgress||(this.favoritesLoadInProgress=!0,this.favoritesPromise=this.promiseFactory.defer(),this.favoritesHttpService.getFavoriteResourcePackages(null).then(function(l){o.favoritesLoaded=!0,o.favoritesPromise.resolve(l)}).catch(function(){o.favoritesLoaded=!1,o.favoritesPromise.reject()}).finally(function(){o.favoritesLoadInProgress=!1})),this.favoritesPromise.promise},a.prototype.ensureOutOfBoxVisualsLoaded=function(){var o=this;return this.outOfBoxLoaded||this.outOfBoxLoadInProgress||(this.outOfBoxLoadInProgress=!0,this.outOfBoxPromise=this.promiseFactory.defer(),this.favoritesHttpService.getOutOfBoxVisuals(null).then(function(l){o.outOfBoxLoaded=!0,o.outOfBoxPromise.resolve(l)}).catch(function(){o.outOfBoxLoaded=!1,o.outOfBoxPromise.reject()}).finally(function(){o.outOfBoxLoadInProgress=!1})),this.outOfBoxPromise.promise},a.\u0275fac=function(l){return new(l||a)(M.\u0275\u0275inject(f.t),M.\u0275\u0275inject(i.y0),M.\u0275\u0275inject(e.R),M.\u0275\u0275inject(n.T),M.\u0275\u0275inject(E.R),M.\u0275\u0275inject(I.vZ),M.\u0275\u0275inject(d.B),M.\u0275\u0275inject(P.o))},a.\u0275prov=M.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}()},3945:function(Ee,ne,t){t.d(ne,{x:function(){return d}});var e=t(40582),n=t(76430),f=t(38942),i=t(10883),M=t(95781),E=t(60660),I=powerbi.explore.viewModels,d=function(){function P(y,b,a,o){this.conceptualSchemaProxy=y,this.dataSources=b,this.featureSwitchService=a,this.localizationService=o}return P.prototype.getViewModel=function(y,b,a){return void 0===y&&(y=this.dataSources.get()),void 0===b&&(b=!0),void 0===a&&(a=!1),(0,e.mG)(this,void 0,void 0,function(){var o;return(0,e.Jh)(this,function(l){switch(l.label){case 0:return b||this.conceptualSchemaProxy.clearCache(),[4,this.conceptualSchemaProxy.get(y)];case 1:return o=l.sent(),[2,I.FieldListViewModelMerger.mergeModel(void 0,o,I.createFieldListViewModelFactory(this.localizationService,this.featureSwitchService,a),void 0,!1,!0,!0)]}})})},P.\u0275fac=function(b){return new(b||P)(n.\u0275\u0275inject(f.i),n.\u0275\u0275inject(i.D),n.\u0275\u0275inject(M.vZ),n.\u0275\u0275inject(E.o))},P.\u0275prov=n.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}()},98713:function(Ee,ne,t){t.d(ne,{I:function(){return I}});var e=t(76430),n=t(95762),f=t(7078),i=t(80815),M=powerbi.explore.services.FilterBuilder,E=powerbi.explore.util.VisualContainerUtils,I=function(){function d(P,y,b){this.displayNameService=P,this.filterGenerator=y,this.visualPlugin=b}return d.prototype.getContextualFilterRestatements=function(P,y){if(_.isEmpty(y.filters))return[];for(var b=new M(y),a=0,o=y.filters;a<o.length;a++){var s=o[a].filter;s&&b.addVisualFilter({filter:s})}var c=b.getFilters();return this.getFilterRestatementResult(P,y,c)},d.prototype.getVisualFilterRestatements=function(P,y,b,a){var o=this.filterGenerator.calculateVisualContainerFilter(P,y,a,b,!1,!0);return this.getFilterRestatementResult(b,a,o)},d.prototype.getFilterRestatement=function(P,y,b,a){return this.displayNameService.getFilterRestatementForOverlay(P,y,b,null,a)},d.prototype.getFilterRestatementResult=function(P,y,b){var a=this,o=E.getVisualCapabilities(y,this.visualPlugin);return _.chain(b.dataFiltersUnmerged).concat(b.highlightFiltersUnmerged).without(void 0).filter(function(l){return!l.isHidden}).map(function(l){var s;return a.getFilterRestatement(l,P,o,null===(s=y.config)||void 0===s?void 0:s.singleVisual)}).flatten().without(void 0).sortBy("fieldName").value()},d.\u0275fac=function(y){return new(y||d)(e.\u0275\u0275inject(n.O),e.\u0275\u0275inject(f.r),e.\u0275\u0275inject(i.D))},d.\u0275prov=e.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}()},61624:function(Ee,ne,t){t.d(ne,{F:function(){return a}});var e=t(40582),n=t(69104),f=t(76430),i=t(71367),M=t(59886),E=t(21922),I=t(95781),d=t(44627),P=t(59116),y=t(40629),b=powerbi.common.helpers.TelemetryHelper,a=function(){function o(l,s,c,O,x,V,w){this.eventBridge=l,this.featureSwitchService=s,this.lazyScoped=c,this.selection=O,this.servicePauser=x,this.telemetry=V,this.viewModeState=w,this.canvasLayout$=new n.X(0),this.canvasLayoutCapabilities=this.initializeLayoutCapabilities()}return Object.defineProperty(o.prototype,"currentLayout$",{get:function(){return this.canvasLayout$.asObservable()},enumerable:!1,configurable:!0}),o.prototype.getCurrentLayout=function(){return this.canvasLayout$.value},o.prototype.getCurrentLayoutCapabilities=function(){return this.canvasLayoutCapabilities[this.canvasLayout$.value]},o.prototype.changeFormFactor=function(l,s,c){return void 0===c&&(c=!0),(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(O){switch(O.label){case 0:return this.canvasLayout$.value===l?[3,2]:(this.telemetry.logEvent(powerbi.telemetry.EXChangeCanvasLayout,{sourceLayout:b.getTelemetryCanvasLayout(this.canvasLayout$.value),targetLayout:b.getTelemetryCanvasLayout(l),viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode())}),c&&this.selection.clearSelection(),[4,this.applyFormFactor(l,s)]);case 1:O.sent(),O.label=2;case 2:return[2]}})})},o.prototype.applyFormFactor=function(l,s){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(O){switch(O.label){case 0:return this.isMobileFormattingSupported()?[4,this.applyAuthoringMobileState(l,s)]:[3,2];case 1:O.sent(),O.label=2;case 2:return this.setCurrentLayout(l),this.updateExploreCanvas(s),this.updateViewModeState(),this.eventBridge.publishToChannel(powerbi.explore.services.events.formFactorChanged,{layout:l}),[2]}})})},o.prototype.isMobileFormattingSupported=function(){return this.featureSwitchService.featureSwitches.mobileAuthoringFormattingUI&&1===this.viewModeState.getMode()},o.prototype.updateExploreCanvas=function(l){var s=l.exploration.contract;l.exploration.exploreCanvas=powerbi.explore.viewModels.ViewModelFactory.convertSectionToExploreCanvas(s,s.sections[s.activeSectionIndex],this.canvasLayout$.value)},o.prototype.applyAuthoringMobileState=function(l,s){return(0,e.mG)(this,void 0,void 0,function(){var c,x;return(0,e.Jh)(this,function(V){switch(V.label){case 0:return[4,this.lazyScoped.get("mobileVcObjectsProxy")];case 1:return(c=V.sent()).isSupported()?1!==l?[3,4]:[4,this.lazyScoped.get("mobileStateAuthoringService")]:[2];case 2:return[4,V.sent().load(s.exploration.contract)];case 3:return V.sent(),s.exploration.contract=c.wrap(s.exploration.contract),[3,5];case 4:x=c.unwrap(),s.exploration.contract=null!=x?x:s.exploration.contract,V.label=5;case 5:return[2]}})})},o.prototype.setCurrentLayout=function(l){this.canvasLayout$.next(l),0===l?this.servicePauser.resume():this.servicePauser.pause()},o.prototype.updateViewModeState=function(){var l=this.getCurrentLayoutCapabilities();this.viewModeState.updateConfig(function(s){s.displayOptions.showMobilePane=l.canShowMobilePageVisualsPane()})},o.prototype.initializeLayoutCapabilities=function(){var l,s=this,c=function(){return 1===s.viewModeState.getMode()},x=((l={})[0]={canMoveMultipleVisuals:_.stubTrue,canShowCanvasBackground:_.stubTrue,canShowCanvasBackdrop:_.stubFalse,canShowCanvasOutspace:_.stubTrue,canShowCodePane:_.stubTrue,canShowVisualContainerHeader:_.stubTrue,canShowVisualContainerHeaderInset:_.stubFalse,canShowMobilePageVisualsPane:_.stubFalse,canShowLayoutGrid:c,canRemoveVisualFromLayout:_.stubFalse,canCutCopyPaste:_.stubTrue,canDelete:_.stubTrue,canPassUnhandledKeysToSelectedVisual:_.stubTrue,canAddRemoveSections:c,canShowVisualToolbar:c},l[1]={canMoveMultipleVisuals:c,canShowCanvasBackground:_.stubTrue,canShowCanvasBackdrop:c,canShowCanvasOutspace:_.stubTrue,canShowCodePane:_.stubFalse,canShowVisualContainerHeader:function(){return 0===s.viewModeState.getMode()},canShowVisualContainerHeaderInset:_.stubTrue,canShowMobilePageVisualsPane:c,canShowLayoutGrid:c,canRemoveVisualFromLayout:c,canCutCopyPaste:_.stubFalse,canDelete:_.stubFalse,canPassUnhandledKeysToSelectedVisual:_.stubTrue,canAddRemoveSections:_.stubFalse,canShowVisualToolbar:c},l[2]={canMoveMultipleVisuals:_.stubFalse,canShowCanvasBackground:_.stubTrue,canShowCanvasBackdrop:_.stubTrue,canShowCanvasOutspace:_.stubTrue,canShowCodePane:_.stubFalse,canShowVisualContainerHeader:_.stubFalse,canShowVisualContainerHeaderInset:_.stubFalse,canShowMobilePageVisualsPane:_.stubTrue,canShowLayoutGrid:_.stubFalse,canRemoveVisualFromLayout:_.stubTrue,canCutCopyPaste:_.stubFalse,canDelete:_.stubFalse,canPassUnhandledKeysToSelectedVisual:_.stubTrue,canAddRemoveSections:_.stubFalse,canShowVisualToolbar:_.stubFalse},l);return jsCommon.FreezeUtility.deepFreeze(x),x},o.\u0275fac=function(s){return new(s||o)(f.\u0275\u0275inject(i.J),f.\u0275\u0275inject(I.vZ),f.\u0275\u0275inject(d.H),f.\u0275\u0275inject(M.z),f.\u0275\u0275inject(E._),f.\u0275\u0275inject(P.y0),f.\u0275\u0275inject(y.kc))},o.\u0275prov=f.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}()},10191:function(Ee,ne,t){t.d(ne,{RD:function(){return i},wG:function(){return y}});var e=t(76430),n=t(59116),f=powerbi.telemetry,i=function(){function b(a){this.telemetryService=a,this.visual=new M,this.telemetry=new E(this.telemetryService),this.core=new I}return b.prototype.openGroupDialog=function(a){},b.\u0275fac=function(o){return new(o||b)(e.\u0275\u0275inject(n.y0))},b.\u0275prov=e.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b}(),M=function(){function b(){}return b.prototype.canGroup=function(a,o,l){return!1},b.prototype.group=function(a,o,l,s,c){return null},b}(),E=function(){function b(a){this.telemetryService=a}return b.prototype.logGroupActionTelemetry=function(a,o,l,s,c){},b.prototype.logBinBySizeActionTelemetry=function(a,o,l,s,c){},b.prototype.logBinByCountActionTelemetry=function(a,o,l,s,c,O){},b.prototype.logGroupsErrorTelemetry=function(a,o,l,s){},b.prototype.logGroupsDeleteTelemetry=function(a,o,l){},b.prototype.logGroupsUsageTelemetry=function(a,o,l,s,c,O){var x=this;a.then(function(V){var w=o.getConceptualProperty(V);if(w){var T=o.getTargetEntity().entity,v=powerbi.explore.utils.GroupUtils.getGroupMode(T,w,null);0!==v&&x.telemetryService.logEvent(f.EXGroupsUsage,{visualType:l,role:s,sourceRole:c,action:O,groupType:2===v?"Bin":"List"})}})},b}(),I=function(){function b(){}return b.prototype.validateGroupDefinition=function(a,o){return!1},b.prototype.validateGroupCount=function(a,o){return!1},b.prototype.applyModelChanges=function(a,o,l){return new powerbi.Promise(function(s,c){return c(void 0)})},b}(),d=new e.InjectionToken("GroupAuthoringServiceOverrideToken"),y={provide:i,useFactory:function(b,a){var o=b.get(d,null);return o?e.Injector.create([o],b).get(i):new i(a)},deps:[e.Injector,n.y0]}},65945:function(Ee,ne,t){t.d(ne,{S:function(){return I}});var e=t(76430),n=t(93022),f=t(78600),M="foreground",E="background",I=function(){function d(P,y){this.themeServiceBase=P,this.highContrastCssGenerationService=y}return d.prototype.applyHighContrastStyle=function(P){var y=P.name;if(this.themeServiceBase.isThemeLoaded(y)){var b=this.themeServiceBase.getVisualStyle({highContrastTheme:P});this.highContrastCssGenerationService.applyHighContrastTheme(y,{foregroundColor:b.colorPalette[M].value,backgroundColor:b.colorPalette[E].value,linkColor:b.colorPalette.hyperlink.value,buttonBackgroundColor:b.colorPalette[E].value,buttonForegroundColor:b.colorPalette.foregroundButton.value,disabledTextColor:(b.colorPalette.disabledText||b.colorPalette[M]).value,selectedBackgroundColor:b.colorPalette.foregroundSelected.value,selectedForegroundColor:b.colorPalette[E].value})}},d.prototype.removeHighContrastStyle=function(){this.highContrastCssGenerationService.removeHighContrastStyle()},d.\u0275fac=function(y){return new(y||d)(e.\u0275\u0275inject(n.T),e.\u0275\u0275inject(f.g))},d.\u0275prov=e.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"}),d}()},85169:function(Ee,ne,t){t.d(ne,{g:function(){return d}});var e=t(40582),n=t(76430),f=t(40629),i=t(18237),M=t(95781),E=t(60660),I=jsCommon.FocusGroupNavigation,d=function(){function P(y,b,a,o,l){this.viewModeState=y,this.dialogService=b,this.zone=a,this.featureSwitchService=o,this.localizationService=l}return P.prototype.startListening=function(){var y=this;this.zone.runOutsideAngular(function(){return $(document).on("keypress",$.proxy(y.onKeypress,y))})},P.prototype.stopListening=function(){$(document).off("keypress",this.onKeypress)},P.prototype.show=function(){var y={title:this.localizationService.get("HotkeyDialog_Title"),modulePath:"@powerbi/ExploreUIDialogs/hotkey-dialog.module#HotkeyDialogModule",componentId:"HotkeyDialogComponentId",inputArgs:{viewMode:this.viewModeState.getMode(),useNewControls:this.featureSwitchService.featureSwitches.accessibilityTopLevelNav},hideCancelButton:!0,hideOkButton:!0};return this.dialogService.openHostDialog({bindings:y,componentName:"SimpleTemplateDialogComponent",config:{hasBackdrop:!0,autoFocus:!0},dialogName:"SimpleTemplateDialogComponent"})},P.prototype.onKeypress=function(y){return(0,e.mG)(this,void 0,void 0,function(){var a;return(0,e.Jh)(this,function(l){switch(l.label){case 0:return"?"!==String.fromCharCode(y.charCode)||I.canHandleKeyEvents(y.target)?[2]:(a=document.activeElement,[4,this.show()]);case 1:return l.sent().afterClosed().subscribe(function(){a&&a.nodeType===Node.ELEMENT_NODE&&a.focus()}),[2]}})})},P.\u0275fac=function(b){return new(b||P)(n.\u0275\u0275inject(f.kc),n.\u0275\u0275inject(i.x),n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(M.vZ),n.\u0275\u0275inject(E.o))},P.\u0275prov=n.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}()},35638:function(Ee,ne,t){t.d(ne,{W:function(){return T}});var e=t(40582),n=t(76430),f=t(88484),i=t(32276),M=t(71367),E=t(18237),I=t(60660),d=t(53039),P=t(59116),y=t(80815),b=t(63657),a=t(49974),o=t(13062),l=t(72837),s=t(95781),c=powerbi.contracts.ResourcePackageItemType,O=powerbi.explore.util.ResourcePackageUtils,x=powerbi.explore.services.events,T=function(){function v(g,r,u,C,F,A,W,k,R,G,le,ge,re){this.localFileService=g,this.eventBridge=r,this.modernDialogService=u,this.localizationService=C,this.notificationToast=F,this.telemetryService=A,this.upload=W,this.visualPluginService=k,this.promiseFactory=R,this.httpService=G,this.featureSwitchService=le,this.pbivizFileService=ge,this.approvedResourceService=re}return v.prototype.importWithDialog=function(g){var r=this,u=this.promiseFactory.defer(),C=u.promise.then(function(F){return r.handleImport(g,F)});return this.localFileService.chooseLocalFile(u,".pbiviz"),C},v.prototype.handleImport=function(g,r){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var u,C,F;return(0,e.Jh)(this,function(A){switch(A.label){case 0:return this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps?[4,this.pbivizFileService.getVisualTypeFromFile(r)]:[3,8];case 1:return C=A.sent(),!this.featureSwitchService.featureSwitches.checkPbivizFileContentOnImport||C?this.approvedResourceService&&this.approvedResourceService.isApprovedResource(C)?[4,this.pbivizFileService.getPublicResourcePackageFromFile(r,C)]:[3,5]:[3,7];case 2:return u=A.sent(),this.featureSwitchService.featureSwitches.stopPublicRpsPopulation?[3,4]:[4,this.postFile(r)];case 3:F=A.sent(),u?u.id=F.id:u=F,A.label=4;case 4:return[3,7];case 5:return[4,this.postFile(r)];case 6:u=A.sent(),A.label=7;case 7:return[3,10];case 8:return[4,this.postFile(r)];case 9:u=A.sent(),A.label=10;case 10:return u?(powerbi.localStorageService.getData("VISUAL_DEVELOPER_MODE_ENABLED")?this.showImportFromFileOptionDialog(u,g):this.import(g,u),[2]):(this.showImportErrorDialog(),[2])}})})},v.prototype.showImportFromFileOptionDialog=function(g,r){var u=this,C=this.promiseFactory.defer(),F=this.localizationService;return this.approvedResourceService&&!this.approvedResourceService.isApprovedResource(g.name)?(this.import(r,g).then(function(){return C.resolve()}),C.promise):(this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps&&(g.isPublic=!0),this.modernDialogService.promptHostSimpleDialog("ImportVisualWarning",{title:F.get("ImportCustomVisualCdnOverrideTitle"),message:F.get("ImportCustomVisualCdnOverrideBody"),okButtonText:F.get("ImportCustomVisualCdnOverrideFromFile"),cancelButtonText:F.get("ImportCustomVisualCdnOverrideFromAppsource"),additionalMessages:[F.get("ImportCustomVisualCdnOverrideVersion"),F.get("ImportCustomVisualCdnOverrideWarning")]}).then(function(A){1===A&&(g.developerModeVisual=!0,u.telemetryService.logEvent(powerbi.telemetry.EXCdnVisualOverride,{customVisualName:g.name})),u.import(r,g).then(function(){return C.resolve()})}),C.promise)},v.prototype.showImportErrorDialog=function(){var g=this.localizationService;this.modernDialogService.promptHostSimpleDialog("ImportVisualError",{title:g.get("ImportVisual_ErrorDialogHeader"),message:g.get("ImportVisual_ErrorDialogMessage"),okButtonText:g.get("ImportVisual_Close")})},v.prototype.import=function(g,r,u){var C=this;return u||(u=r),this.visualPluginService.ensurePlugins([r],!0).then(function(){r.isPublic?(O.ensurePublicCustomVisuals(g),_.remove(g.publicCustomVisuals,function(A){return A===r.name}),g.publicCustomVisuals.push(r.name),C.featureSwitchService.featureSwitches.stopPublicRpsPopulation||(O.ensureResourcePackages(g),_.remove(g.resourcePackages,function(A){return A.name===u.name}),g.resourcePackages.push(u))):(O.ensureResourcePackages(g),_.remove(g.resourcePackages,function(A){return A.name===r.name}),g.resourcePackages.push(r)),C.eventBridge.publishToChannel(x.addCustomVisual,r),C.eventBridge.publishToChannel(x.visualPluginsChanged),C.notificationToast.hide(C.toastNotificationId),C.toastNotificationId=void 0;var F=C.promiseFactory.defer();return F.resolve(),F.promise})},v.prototype.notifyWhenLoadingCustomVisual=function(g,r,u){this.toastNotificationId=this.notificationToast.notify({title:this.localizationService.get(g),message:this.localizationService.get(u),notificationType:3})},v.prototype.postFile=function(g){var r=this,u=this.httpService.powerbiRequestOptions();u.retryCount=0,u.headers[powerbi.common.constants.uploadFileSizeHeaderName]=g.size.toString(),this.notifyWhenLoadingCustomVisual("ImportCustomVisualLoadingTitle",0,"PleaseWaitUntilReady");var C=this.telemetryService.startEvent(powerbi.telemetry.EXImportCustomViz,{fileName:g.name,resourcePackageId:-1,resourcePackageName:""});return this.upload.post("/powerbi/content/visual",[g],u).then(function(F){var A=F.data;null==A.type&&(A.type=0);for(var W=0,k=A.items;W<k.length;W++){var R=k[W];null==R.type&&(R.type=c.CustomVisualJavascript)}return C.event.info.resourcePackageId=A.id,C.event.info.resourcePackageName=A.name,C.resolve(),A},function(F){return r.showImportErrorDialog(),C.reject({errorCode:"Import of custom visual failed -> code: "+(F&&F.error?F.error.code:"-1")}),null})},v.\u0275fac=function(r){return new(r||v)(n.\u0275\u0275inject(f.W),n.\u0275\u0275inject(M.J),n.\u0275\u0275inject(E.x),n.\u0275\u0275inject(I.o),n.\u0275\u0275inject(d.Q),n.\u0275\u0275inject(P.y0),n.\u0275\u0275inject(i.g),n.\u0275\u0275inject(y.D),n.\u0275\u0275inject(o.O),n.\u0275\u0275inject(l.M),n.\u0275\u0275inject(s.vZ),n.\u0275\u0275inject(b.L),n.\u0275\u0275inject(a.E))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}()},18701:function(Ee,ne,t){t.d(ne,{Y:function(){return w}});var e=t(76430),n=t(4486),f=t(71367),i=t(23246),M=t(95781),E=t(60660),I=t(59116),d=t(40629),P=powerbi.DataViewScopeIdentity,y=powerbi.explore.FilterExpressionMetadataUtils,b=powerbi.explore.contracts.FilterType,a=powerbi.explore.FilterUtils,o=powerbi.explore.services.IncludeExcludeSQExprVisitor,l=powerbi.data.Selector,s=powerbi.data.SemanticFilter,c=powerbi.data.SQExpr,O=powerbi.data.SQExprBuilder,x=powerbi.data.SQExprUtils,V=powerbi.explore.util.VisualContainerUtils,w=function(){function T(v,g,r,u,C,F,A){this.contextActivityService=v,this.eventBridge=g,this.featureSwitchService=r,this.localizationService=u,this.telemetry=C,this.undoRedo=F,this.viewModeState=A}return T.prototype.setFilter=function(v,g,r,u){var k,C=this,F=_.map(g,function(G){return l.convertSelectorsByColumnToSelector(G)}),A=_.find(r.filters,function(G){return G.howCreated===v}),W=2;u&&r.config&&r.config.singleVisual&&(k=y.getSelectorsByColumnMetadata(g,r.config.singleVisual,u)),A||(A={howCreated:v,name:a.getNextFilterName(r.filters),type:3===v?b.Include:b.Exclude,filterExpressionMetadata:k},W=1);var R=A.filter;3===v?R=this.getIncludeFilter(F):(R=this.getExcludeFilter(R,F),2===W&&(k||A.filterExpressionMetadata)&&(A.filterExpressionMetadata=y.mergeFilterExpressionMetadata(A.filterExpressionMetadata,k))),this.undoRedo.register("UpdateIncludeExcludeFilter",function(){A.filter=R;var le,G={container:r,scopeType:0};1===W&&(a.add(G.container,A),C.telemetry.logEvent(powerbi.telemetry.EXAddFilter,{filterType:3===v?"Include":"Exclude",filterScopeType:"Visual",fieldKind:"Entity",drillToDetailsMode:V.hasGroupByItemsInQuery(r),viewMode:powerbi.explore.util.getTelemetryViewMode(C.viewModeState.getMode())})),C.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(le=a.createChangeFilterActivity(C.contextActivityService,"Include Exclude Filter")),a.notifyFilterContainerChangedByUser(C.eventBridge,{filter:A,changeType:W,scope:G,changeFilterActivity:le}),le&&le.resolve()})},T.prototype.buildViewModel=function(v,g,r,u,C){for(var A=[],W=0,k=v?v.where():[];W<k.length;W++){var G=k[W].condition,le=new o(r,u,C);G.accept(le),A.push.apply(A,le.dataPoints||[])}return{points:A,filter:v,displayName:a.getDisplayNameForIncludeExcludeFilters(this.localizationService,g,A.length),restatement:this.getRestatement(A)}},T.prototype.updateFilterContainer=function(v,g){var r=this,u=v.contract,F=this.buildFilter(g,u.type);this.undoRedo.register("UpdateIncludeExcludeFilter",function(){var W,A=v.getFilterContainerScope();u.filter=F,r.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(W=a.createChangeFilterActivity(r.contextActivityService,"Include Exclude Filter")),a.notifyFilterContainerChangedByUser(r.eventBridge,{filter:u,changeType:2,scope:A,changeFilterActivity:W}),W&&W.resolve()})},T.prototype.isIncludeExcludeSupported=function(v,g,r){if(r)for(var C=0,F=_.map(r,function(K){return l.convertSelectorsByColumnToSelector(K)});C<F.length;C++)for(var k=0,R=l.toScopeIdentities(F[C]);k<R.length;k++)if(c.isNot(R[k].expr))return!1;if(v&&v.config&&v.config.singleVisual){var re=v.config.singleVisual.query;if(re){if(g){var j=g.schema(void 0);if(j&&j.capabilities&&j.capabilities.supportsMultiTableTupleFilters)return!0}for(var Z=void 0,fe=0,Q=re.defn.select();fe<Q.length;fe++){var se=Q[fe].expr;if(!x.isMeasure(se)){var oe=(se=powerbi.data.VariationRewriter.run(se,g)).getTargetEntity();if(Z){if(!c.equals(Z,oe))return!1}else Z=oe}}return!0}}return!1},T.prototype.buildFilter=function(v,g){for(var r,u=v.points[0],C=O.inValues(u.columns,[u.values]),F=1;F<v.points.length;F++)r=O.inValues((u=v.points[F]).columns,[u.values]),C=O.or(C,r);return g===b.Exclude&&(C=O.not(C)),s.fromSQExpr(C)},T.prototype.getRestatement=function(v){for(var g=[],r=0,u=v;r<u.length;r++)g.push(u[r].text);return g.join(this.localizationService.get("ListJoin_Separator"))},T.prototype.getIncludeFilter=function(v){var g=l.filterExprsFromSelectors(v);return P.filterFromExprs(g,!1)},T.prototype.getExcludeFilter=function(v,g){var r=l.filterExprsFromSelectors(g);if(v){var u=_.find(v.where(),function(G){return 16===G.condition.kind});if(u){for(var F=u.condition.arg,A=0,W=r;A<W.length;A++){var R=powerbi.data.ScopeIdentityExtractor.getInExpr(W[A]);F=O.or(F,R)}return F=O.not(F),s.fromSQExpr(F)}}return P.filterFromExprs(r,!0)},T.\u0275fac=function(g){return new(g||T)(e.\u0275\u0275inject(n.r),e.\u0275\u0275inject(f.J),e.\u0275\u0275inject(M.vZ),e.\u0275\u0275inject(E.o),e.\u0275\u0275inject(I.y0),e.\u0275\u0275inject(i.z),e.\u0275\u0275inject(d.kc))},T.\u0275prov=e.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T}()},48478:function(Ee,ne,t){t.d(ne,{A:function(){return Z},U:function(){return fe}});var e=t(40582),n=t(76430),f=jsCommon.EnumExtensions,i=powerbi.visuals.shapes.Rect;function y(Q,J){if(l(J,Q)){var se=i.bottom(J),oe=se-Q.top;Q.top=se,Q.height-=oe}}function b(Q,J){l(Q,J)&&(Q.height=J.top-Q.top)}function a(Q,J){if(s(Q,J)){var se=i.right(J),oe=se-Q.left;Q.left=se,Q.width-=oe}}function o(Q,J){s(J,Q)&&(Q.width=J.left-Q.left)}function l(Q,J){return i.containsPoint(Q,i.topRight(J),!0)||i.containsPoint(Q,i.topLeft(J),!0)||i.containsPoint(J,i.bottomRight(Q),!0)||i.containsPoint(J,i.bottomLeft(Q),!0)}function s(Q,J){return i.containsPoint(Q,i.bottomRight(J),!0)||i.containsPoint(Q,i.topRight(J),!0)||i.containsPoint(J,i.topLeft(Q),!0)||i.containsPoint(J,i.bottomLeft(Q),!0)}var c=t(59804),O=t(71367),x=t(59886),V=t(23246),w=t(23580),T=t(47051),v=t(61624),g=t(59116),u=(powerbi,powerbi.explore),C=u.services.selectionUtils,F=powerbi.telemetry,A=u.contracts.traverseVisualContainerGroups,W=u.viewModels,k=u.util.CanvasDisplayUtility,R=u.constants.ExploreCanvasConstants,G=u.services,le=powerbi.ItemGroupingManager,ge=W.ViewModelFactory,re=u.util.VisualContainerUtils,j=u.contracts.isVisualContainer,ie=u.contracts.isVisualContainerGroup,Z=new n.InjectionToken("groupingLayoutManagers"),fe=function(){function Q(J,se,oe,K,D,p,h,m,S){var N=this;this.eventBridge=J,this.explorationCapabilities=se,this.explorationNavigation=oe,this.formFactorProvider=K,this.selectionService=D,this.telemetryService=p,this.undoRedo=h,this.injector=m,this.groupingLayoutManagersLazy=_.map(S,function(ce){return new jsCommon.Lazy(function(){return new ce(N)})}),this.visualAuthoringLazyLoader=new jsCommon.Lazy(function(){return N.injector.get(c.$)})}return Object.defineProperty(Q.prototype,"visualAuthoring",{get:function(){return this._visualAuthoring||this.visualAuthoringLazyLoader.getValue()},enumerable:!1,configurable:!0}),Q.prototype.groupCanvasItems=function(J){var se=this.formFactorProvider.getCurrentLayout();if(J&&!(J.length<2)&&1!==se){var oe=this.explorationNavigation.getCurrentExploreCanvas(),K=this.visualAuthoring.groupVisualContainers(oe,J);this.getGroupingLayoutManager(K.contract.groupMode).onCreateGroup(K)}},Q.prototype.ungroupCanvasItems=function(J){var se=this.explorationNavigation.getCurrentExploreCanvas(),oe=this.visualAuthoring.ungroupVisualContainers(se,J);this.getGroupingLayoutManager(oe.contract.groupMode).onUngroup(oe)},Q.prototype.canMergeCanvasItems=function(){var J=this,se=C.getSelectedCanvasItems(this.selectionService),oe=se.filter(function(D){return ie(D)});return!(_.isEmpty(oe)||se.length<2)&&_.every(se,function(D){if(j(D)){for(var p=D.parentGroup;p;){if(_.includes(oe,p))return!1;p=p.parentGroup}return!0}var h=!1;return A(D.children,function(m){return h=h||C.isCanvasItemSelected(m,J.selectionService)}),!h})},Q.prototype.mergeCanvasItemContainers=function(J){var se=_.find(J,function(K){return u.contracts.isVisualContainerGroup(K)}),oe=[];_.forEach(J,function(K){K!==se&&(u.contracts.isVisualContainerGroup(K)?oe.push.apply(oe,K.children):oe.push(K))}),this.moveCanvasItemsInTree(oe,_.last(se.children),!0,!0)},Q.prototype.moveCanvasItemInTree=function(J,se,oe,K){void 0===K&&(K=!1),this.moveCanvasItemsInTree([J],se,oe,K)},Q.prototype.moveCanvasItemsInTree=function(J,se,oe,K){void 0===K&&(K=!1);for(var D=this.explorationNavigation.getCurrentExploreCanvas(),p=_.map(J,function(me){return me.parentGroup&&me.parentGroup.name}),h=_.map(p,function(me){return me&&le.find(me,D.visualContainerGroups)}),m=this.visualAuthoring.moveCanvasItemsInTree(D,J,se,oe,K),S=0;S<m.length;S++){var N=m[S],ce=N.parentGroup&&N.parentGroup.name;if(p[S]!==ce){if(p[S]){var he=le.find(p[S],D.visualContainerGroups);he?W.isVisualContainerGroup(he)&&this.removeCanvasItemFromGroup(he,N):this.getGroupingLayoutManager(h[S].contract.groupMode).onRemoveChild(h[S],N,!1)}if(ce){var Ce=le.find(ce,D.visualContainerGroups);W.isVisualContainerGroup(Ce)&&this.addCanvasItemToGroup(Ce,N,S===m.length-1)}}}},Q.prototype.addLayoutToVisualContainer=function(J,se,oe){var K=this;this.undoRedo.register("AddLayoutToVisualContainer",function(){var D=K.formFactorProvider.getCurrentLayout();se.layouts.withId(D),se.layouts.push({id:D,position:oe});var p=ge.convertVisualContainer(K.explorationNavigation.getCurrentExploration(),J.contract,se,D);J.visualContainers.push(p),J.visualContainerGroups=(0,e.ev)((0,e.ev)([],J.visualContainerGroups),[p]),K.eventBridge.publishToChannel(G.events.canvasChanged)})},Q.prototype.removeLayoutFromSelectedVisuals=function(J){var se=this;this.undoRedo.register("RemoveLayoutFromSelectedVisuals",function(){for(var oe=_.map(se.selectionService.getSelectedElements(),function(m){return m.canvasItem}),K=se.formFactorProvider.getCurrentLayout(),D=0,p=oe;D<p.length;D++)Q.removeLayoutFromOneVisualContainer(K,J,p[D]);se.selectionService.clearSelection(),se.eventBridge.publishToChannel(G.events.canvasChanged)})},Q.prototype.removeLayoutFromVisualContainer=function(J,se){var oe=this;this.undoRedo.register("RemoveLayoutFromVisualContainer",function(){var K=oe.formFactorProvider.getCurrentLayout();Q.removeLayoutFromOneVisualContainer(K,J,se),_.find(oe.selectionService.getSelectedElements(),function(p){return p.canvasItem===se})&&oe.selectionService.clearSelection(),oe.eventBridge.publishToChannel(G.events.canvasChanged)})},Q.prototype.removeLayoutFromSection=function(J,se,oe){var K=this,D=0,p=J.visualContainers;this.undoRedo.register("RemoveLayoutsFromVisualContainers",function(){for(var h=0,m=p;h<m.length;h++)_.remove(m[h].layouts,function(N){return N.id===se}).length>0&&D++;K.selectionService.clearSelection(),K.eventBridge.publishToChannel(G.events.sectionLayoutRemoved)}),1===se&&this.telemetryService.logEvent(F.EXRemoveMobileCanvasVisuals,{reportId:oe.reportId,numberOfVisualsRemoved:D})},Q.prototype.moveCanvasItemFromContract=function(J,se){var oe=this.explorationNavigation.getCurrentExploreCanvas(),K=le.find(J.name,oe.visualContainerGroups);W.isVisualContainerGroup(K)&&this.updateGroupSize(K,{width:se.width,height:se.height},!1),this.moveCanvasItem(K,se)},Q.prototype.moveCanvasItem=function(J,se,oe){void 0===oe&&(oe=!1),J.position=se,J.updateViewState();var K=this.formFactorProvider.getCurrentLayout();!oe&&J.parentGroup&&0===K&&this.getGroupingLayoutManager(J.parentGroup.contract.groupMode).onUpdateGroupChildren(J.parentGroup);var D=J.contract;this.eventBridge.publishToChannel(G.events.canvasItemContainerPositionChanged,{affectContainer:function(h){return h===D},changedItems:[D]})},Q.prototype.updateGroupSize=function(J,se,oe){this.getGroupingLayoutManager(J.contract.groupMode).onUpdateGroup(J,se,oe)},Q.prototype.addCanvasItemToGroup=function(J,se,oe){this.getGroupingLayoutManager(J.contract.groupMode).onAddChild(J,se,oe)},Q.prototype.removeCanvasItemFromGroup=function(J,se){this.getGroupingLayoutManager(J.contract.groupMode).onRemoveChild(J,se)},Q.prototype.alignSelectedVisuals=function(J,se,oe){1===oe.length?this.alignSingleVisualContainer(J,se,oe[0]):this.alignMultipleVisualContainers(J,se,oe)},Q.prototype.visualsInLayout=function(J,se){return _.filter(J.visualContainers,function(oe){return _.some(oe.layouts,function(K){return K.id===se})})},Q.prototype.getLayoutForNewVisualContainer=function(J,se,oe){var K=this.formFactorProvider.getCurrentLayout(),D=k.getAutoLayoutVisualVCHeader(this.formFactorProvider,this.explorationCapabilities),p=_.map(J,function(m){var S=k.visualPositionToRect(m.layouts.withId(K).position);return S.top-=D,S.height+=D,S}),h=this.getLayoutForNewVisualContainerWithRects(p,se,oe);return h.top+=D,h.height-=D,k.rectToVisualPosition(h)},Q.prototype.getLayoutForNewVisualContainerWithRects=function(J,se,oe){return function(Q,J,se,oe,K,D,p,h){var m,S,N,ce;if(!_.isEmpty(Q))for(var he=0,Ce=Q;he<Ce.length;he++){var me=Ce[he],Ze=i.bottom(me),Je=i.right(me);me.top<=J.y&&Ze>=J.y?Je<J.x?m=!m||Je>i.right(m)?me:m:me.left>J.x&&(S=!S||me.left<S.left?me:S):me.left<=J.x&&Je>=J.x&&(Ze<J.y?N=!N||Ze>i.bottom(N)?me:N:me.top>J.y&&(ce=!ce||me.top<ce.top?me:ce))}var it=function(Q,J,se,oe,K,D,p,h,m){var N,S={left:0,top:0,width:0,height:0},ce=!1;return J&&se?(S.left=Math.max(i.right(J),se.left),S.top=Math.max(J.top,i.bottom(se)),S.width=i.right(se)-S.left,S.height=i.bottom(J)-S.top,N=10,ce=!!oe):J&&K?(S.left=Math.max(i.right(J),K.left),S.top=J.top,S.width=i.right(K)-S.left,S.height=Math.min(i.bottom(J),K.top)-S.top,N=6,ce=!!oe):oe&&se?(S.left=se.left,S.top=Math.max(oe.top,i.bottom(se)),S.width=Math.min(oe.left,i.right(se))-S.left,S.height=i.bottom(oe)-S.top,N=9):oe&&K?(S.left=K.left,S.top=oe.top,S.width=Math.min(oe.left,i.right(K))-S.left,S.height=Math.min(i.bottom(oe),K.top)-S.top,N=5):J?(S.left=Math.max(i.right(J)+m,Q.x-J.width/2),S.top=J.top,S.width=J.width,S.height=J.height,N=14,ce=!!oe):se?(S.left=se.left,S.top=Math.max(i.bottom(se)+m,Q.y-se.height/2),S.width=se.width,S.height=se.height,N=11):oe?(S.left=Math.min(oe.left-m,Q.x+oe.width/2)-oe.width,S.top=oe.top,S.width=oe.width,S.height=oe.height,N=13):K?(S.left=K.left,S.top=Math.min(K.top-m,Q.y+K.height/2)-K.height,S.width=K.width,S.height=K.height,N=7):(S.left=Q.x,Q.x+p>D.width&&(S.left=D.width-p),S.top=Q.y,Q.y+h>D.height&&(S.top=D.height-h),S.width=p,S.height=h,N=15),S.height=Math.min(i.bottom(D)-S.top,S.height),S.width=Math.min(i.right(D)-S.left,S.width),{result:S,flexibleDirection:N,trimHorizontally:ce}}(J,m,N,S,ce,se,D,p,h),Te=it.result,ue=it.flexibleDirection;return function(Q,J,se){if(!_.isEmpty(Q))for(var oe=0,K=Q;oe<K.length;oe++){var D=K[oe];se?(a(J,D),o(J,D),y(J,D),b(J,D)):(y(J,D),b(J,D),a(J,D),o(J,D))}}(Q,Te,it.trimHorizontally),function(Q,J,se,oe){var K=f.hasFlag(J,1),D=f.hasFlag(J,2),p=f.hasFlag(J,4),h=f.hasFlag(J,8);if(Q.width<se){var m=se-Q.width;Q.width=se,K&&D?Q.left-=m/2:K&&(Q.left-=m)}Q.height<oe&&(m=oe-Q.height,Q.height=oe,p&&h?Q.top-=m/2:p&&(Q.top-=m))}(Te,ue,oe,K),function(Q,J,se,oe){Q.left=Math.max(J.left,Q.left),i.right(Q)>J.width&&(Q.width=J.width-Q.left,Q.width<se&&(Q.left=Math.max(J.left,J.width-se),Q.width=Math.min(J.width,se))),Q.top=Math.max(Q.top,J.top),i.bottom(Q)>J.height&&(Q.height=J.height-Q.top,Q.height<oe&&(Q.top=Math.max(J.top,J.height-oe),Q.height=Math.min(J.height,oe)))}(Te,se,oe,K),Te}(J,se,{left:0,top:0,width:oe.width,height:oe.height},R.AutoLayoutMinSpaceWidth,R.AutoLayoutMinSpaceHeight,R.AutoLayoutMaxSpaceWidth,R.AutoLayoutMaxSpaceHeight,R.AutoLayoutVisualPadding)},Q.prototype.getAbsolutePositionToCanvas=function(J){var se=this.formFactorProvider.getCurrentLayout(),oe=J.contract.parentGroup,K=oe&&oe.layouts.withId(se);return re.getAbsoluteVisualContainerPosition(J.position,se,oe=K?oe:void 0)},Q.prototype.getRelativePositionToParentGroup=function(J,se){var oe=this.formFactorProvider.getCurrentLayout();return re.getGroupRelativeVisualContainerPosition(J,se.contract,oe)},Q.prototype.alignMultipleVisualContainers=function(J,se,oe){var K=this;this.undoRedo.register("AlignMultipleVisualContainers",function(){var D=_.map(oe,function(me){return K.getAbsolutePositionToCanvas(me)});switch(J){case 3:var p=_.min(_.map(D,function(me){return me.y}));K.moveContainersHelper(oe,function(me){return me.y=Q.clampYValue(p,me.height,se)},!0);break;case 4:var m=_.sumBy(D,function(me){return me.y+me.height/2})/D.length;K.moveContainersHelper(oe,function(me){return me.y=Q.clampYValue(m-me.height/2,me.height,se)},!0);break;case 5:var S=_.max(_.map(D,function(me){return me.y+me.height}));K.moveContainersHelper(oe,function(me){return me.y=Q.clampYValue(S-me.height,me.height,se)},!0);break;case 0:var N=_.min(_.map(D,function(me){return me.x}));K.moveContainersHelper(oe,function(me){return me.x=Q.clampXValue(N,me.width,se)},!0);break;case 1:var he=_.sumBy(D,function(me){return me.x+me.width/2})/D.length;K.moveContainersHelper(oe,function(me){return me.x=Q.clampXValue(he-me.width/2,me.width,se)},!0);break;case 2:var Ce=_.max(_.map(D,function(me){return me.x+me.width}));K.moveContainersHelper(oe,function(me){return me.x=Q.clampXValue(Ce-me.width,me.width,se)},!0);break;case 6:K.distributeSpace(oe,D,!0,se);break;case 7:K.distributeSpace(oe,D,!1,se)}})},Q.prototype.alignSingleVisualContainer=function(J,se,oe){var K=this;this.undoRedo.register("AlignSingleVisualContainer",function(){var D=oe.position,p=se.width,h=se.height;if(oe.parentGroup){var m=oe.parentGroup.position;m&&(p=m.width,h=m.height)}switch(J){case 3:K.moveContainersHelper([oe],function(Ce){return Ce.y=0},!1);break;case 4:case 7:var S=h/2-D.height/2;K.moveContainersHelper([oe],function(Ce){return Ce.y=S},!1);break;case 5:var N=h-D.height;K.moveContainersHelper([oe],function(Ce){return Ce.y=N},!1);break;case 0:K.moveContainersHelper([oe],function(Ce){return Ce.x=0},!1);break;case 1:case 6:var ce=p/2-D.width/2;K.moveContainersHelper([oe],function(Ce){return Ce.x=ce},!1);break;case 2:var he=p-D.width;K.moveContainersHelper([oe],function(Ce){return Ce.x=he},!1)}})},Q.prototype.distributeSpace=function(J,se,oe,K){for(var D=this,p=oe?"x":"y",h=oe?"width":"height",m=oe?Q.clampXValue:Q.clampYValue,S=_.min(_.map(se,function(ue){return ue[p]})),N=_.max(_.map(se,function(ue){return ue[p]+ue[h]})),he=_.reduce(se,function(ue,ve){return ue-ve[h]},N-S)/(J.length-1),me=S,Ze=0,Je=_.sortBy(J,function(ue){return D.getAbsolutePositionToCanvas(ue)[p]});Ze<Je.length;Ze++){var it=Je[Ze],Te=this.getAbsolutePositionToCanvas(it);Te[p]=m(me,Te[h],K),me+=Te[h]+he,Te=this.getRelativePositionToParentGroup(Te,it),this.moveCanvasItem(it,Te)}},Q.prototype.moveContainersHelper=function(J,se,oe){for(var K=0,D=J;K<D.length;K++){var p=D[K],h=oe?this.getAbsolutePositionToCanvas(p):p.position;se(h),oe&&(h=this.getRelativePositionToParentGroup(h,p)),this.moveCanvasItem(p,h)}},Q.prototype.getGroupingLayoutManager=function(J){return this.groupingLayoutManagersLazy[J].getValue()},Q.clampXValue=function(J,se,oe){return J<0?0:se+J>oe.width?oe.width-se:J},Q.clampYValue=function(J,se,oe){return J<0?0:se+J>oe.height?oe.height-se:J},Q.removeLayoutFromOneVisualContainer=function(J,se,oe){var K=_.find(se.visualContainers,function(D){return D.contract===oe});if(K)return oe.layouts.withId(J),_.pull(se.visualContainers,K),se.visualContainerGroups=_.without(se.visualContainerGroups,K),_.remove(oe.layouts,function(D){return D.id===J}).length>0},Q.\u0275fac=function(se){return new(se||Q)(n.\u0275\u0275inject(O.J),n.\u0275\u0275inject(w.U),n.\u0275\u0275inject(T.I),n.\u0275\u0275inject(v.F),n.\u0275\u0275inject(x.z),n.\u0275\u0275inject(g.y0),n.\u0275\u0275inject(V.z),n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(Z,8))},Q.\u0275prov=n.\u0275\u0275defineInjectable({token:Q,factory:Q.\u0275fac}),Q}()},38243:function(Ee,ne,t){t.d(ne,{m:function(){return n}});var e=t(76430),n=function(){function f(){this.service=powerbi.explore.services.createLayoutInsertionHelper()}return f.prototype.getEmptySpaces=function(i,M){return this.service.getEmptySpaces(i,M)},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac=function(M){return new(M||f)},providedIn:"root"}),f}()},35588:function(Ee,ne,t){t.d(ne,{LD:function(){return I},xW:function(){return d},z_:function(){return y},tC:function(){return b}});var e=t(76430),n=t(94173),f=t(71367),i=t(59116),M=t(1537),I=new e.InjectionToken("LoadProgressNotificationConfigurationInjectionToken"),d={provide:n.W,useFactory:function(o){return{decrementDelayInMilliseconds:1e3,ignoreShouldTrackLoadProgressCheck:!1,loadProgressNotificationActions:{completionFn:function(){return o.publishToChannel(powerbi.common.events.printSectionReady)},cancelFn:function(){}}}},deps:[f.J]},y={provide:n.W,useFactory:function(a,o){var l=a.get(I,null);return l?e.Injector.create([l],a).get(n.W):{decrementDelayInMilliseconds:1e3,ignoreShouldTrackLoadProgressCheck:!1,loadProgressNotificationActions:{completionFn:function(){return o.publishToChannel(powerbi.common.events.printSectionReady)},cancelFn:function(){}}}},deps:[e.Injector,f.J,i.y0]},b=function(){function a(o,l,s){this.ngZone=o,this.config=l,this.telemetryService=s,this.counter=0,this.decrementDelayInMilliseconds=l.decrementDelayInMilliseconds,this.ignoreShouldTrackLoadProgressCheck=l.ignoreShouldTrackLoadProgressCheck,this.loadProgressLogsEnabled=!!l.loadProgressLogsEnabled,this.reset()}return a.prototype.beginLoad=function(o,l){this.counter++,this.loadProgressLogsEnabled&&o&&this.telemetryService.logEvent(M.tJ,{visualType:l,visualName:o,isBeginLoad:!0,counterValue:this.counter})},a.prototype.endLoad=function(o,l){var s=this;this.trackableHost&&!this.shouldTrackProgress&&this.counter>0&&(this.shouldTrackProgress=this.ignoreShouldTrackLoadProgressCheck||this.trackableHost.shouldTrackLoadProgress()),(this.shouldTrackProgress||this.counter>0)&&this.ngZone.runOutsideAngular(function(){setTimeout(function(){s.counter--,s.loadProgressLogsEnabled&&o&&s.telemetryService.logEvent(M.tJ,{visualType:l,visualName:o,isBeginLoad:!1,counterValue:s.counter}),0===s.counter&&s.shouldTrackProgress&&s.ngZone.run(function(){return s.invokeCompletionCallback()})},s.decrementDelayInMilliseconds,!1)})},a.prototype.reset=function(){this.trackableHost?(this.shouldTrackProgress=this.ignoreShouldTrackLoadProgressCheck||this.trackableHost.shouldTrackLoadProgress(),this.shouldTrackProgress||this.invokeCompletionCallback()):this.shouldTrackProgress=!1,this.loadProgressLogsEnabled&&this.telemetryService.logEvent(M.Iw,{counterValue:this.counter})},a.prototype.cancelTracking=function(){this.loadProgressLogsEnabled&&this.telemetryService.logEvent(M.qd),this.config.loadProgressNotificationActions.cancelFn()},a.prototype.register=function(o){var l=this,s={};return this.trackableHost=o,this.registerTrackableHostContext=s,function(){l.registerTrackableHostContext===s&&(l.trackableHost=void 0,l.registerTrackableHostContext=void 0)}},a.prototype.invokeCompletionCallback=function(){this.config.loadProgressNotificationActions.completionFn()},a.\u0275fac=function(l){return new(l||a)(e.\u0275\u0275inject(e.NgZone),e.\u0275\u0275inject(n.W),e.\u0275\u0275inject(i.y0))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}()},48922:function(Ee,ne,t){t.d(ne,{r:function(){return y}});var e=t(69104),n=t(1537),f=t(76430),i=t(72127),M=t(71367),E=t(95781),I=t(61624),d=t(59116),y=function(){function a(o,l,s,c,O){this.canvasZoom=o,this.eventBridge=l,this.featureSwitchService=s,this.formFactor=c,this.telemetryService=O,this.visiblePanesCount=0,this.panes$=new e.X({}),this.stateToRestore=[],this.paneSelectors={}}return a.prototype.getPanes$=function(){return this.panes$.asObservable()},a.prototype.showPaneSwitcher=function(){return this.isPaneSwitcherSupported()&&this.visiblePanesCount>1},a.prototype.registerPaneContainer=function(o){this.paneContainerSelector=o},a.prototype.registerPane=function(o,l,s,c){void 0===c&&(c=!1);var O=this.panes$.value,x=O[o];if(x){if(!c)return;x.isPaneVisible!==l.isPaneVisible&&(this.visiblePanesCount+=l.isPaneVisible?1:-1)}else l.isPaneVisible&&this.visiblePanesCount++;O[o]=l,this.panes$.next(O),this.paneSelectors[b(o)]=s},a.prototype.togglePaneExpansion=function(o,l){if(void 0===l&&(l=!0),void 0!==this.isPaneVisible(o)){var c=!this.getPaneExpansion(o);if(c&&this.saveState(),this.isPaneSwitcherSupported()&&c&&l){var O=this.panes$.value;for(var x in O)O[x].isPaneExpanded=!1;this.panes$.next(O)}return this.setPaneExpansion(o,c),c||this.saveState(),c}},a.prototype.togglePaneVisibility=function(o,l){void 0===l&&(l=!1);var s=this.isPaneVisible(o);void 0!==s&&this.setPaneVisibility(o,!s,l)},a.prototype.closePane=function(o){this.isPaneVisible(o)&&this.setPaneVisibility(o,!1),this.logPaneStatus()},a.prototype.isPaneExpanded=function(o){if(this.panes$.value[o])return this.getPaneExpansion(o)},a.prototype.isPaneVisible=function(o){var l=this.panes$.value;if(l[o])return l[o].isPaneVisible},a.prototype.updatePaneTitle=function(o,l){var s=this.panes$.value;!s[o]||(s[o].title=l,this.panes$.next(s))},a.prototype.addToPaneSwitcher=function(o,l){void 0===l&&(l=!1);var s=this.panes$.value;if(s[o]){var c=!!s[o].isDisabled!=!!l;if(s[o].isDisabled=l,s[o].isPaneVisible){if(l&&s[o].isPaneExpanded)s[o].isPaneExpanded=!1;else if(!c)return}else s[o].isPaneExpanded=!1,s[o].isPaneVisible=!0,this.visiblePanesCount++;this.panes$.next(s),this.logPaneStatus()}},a.prototype.setPaneDisabledState=function(o,l){if(void 0!==this.isPaneVisible(o)){var c=this.panes$.value;c[o].isDisabled!==l&&(c[o].isDisabled=l,l&&(c[o].isPaneExpanded=!1),this.panes$.next(c))}},a.prototype.setPaneExpansion=function(o,l){var s=this.panes$.value;l&&!s[o].isPaneVisible&&this.setPaneVisibility(o,!0),s[o].isPaneExpanded=l,this.panes$.next(s),this.logPaneStatus()},a.prototype.setPaneVisibility=function(o,l,s,c){void 0===s&&(s=!1),void 0===c&&(c=!0);var O=this.panes$.value;if(b(o),this.isPaneVisible(o)!==l){if(l&&this.saveState(),this.isPaneSwitcherSupported()&&l&&c){var x=this.panes$.value;for(var V in x)x[V].isPaneExpanded=!1}O[o].isPaneVisible=l,this.featureSwitchService.featureSwitches.onObject&&l&&!s&&(O[o].isPaneExpanded=!0),l?this.visiblePanesCount++:this.visiblePanesCount--,this.panes$.next(O),l||this.ensureState(),this.notifyPaneVisibilityChanged(o,l),this.logPaneStatus()}},a.prototype.getPaneExpansion=function(o){return this.panes$.value[o].isPaneExpanded},a.prototype.saveState=function(){if(this.isPaneSwitcherSupported()){var o=this.panes$.value,l=[];for(var s in o)o[s].isPaneExpanded&&o[s].isPaneVisible&&l.push(parseInt(s,10));this.stateToRestore.unshift(l),this.stateToRestore.length>50&&this.stateToRestore.pop()}},a.prototype.ensureState=function(){if(this.isPaneSwitcherSupported()){var o=this.panes$.value;for(var l in o)if(o[l].isPaneVisible&&o[l].isPaneExpanded)return;var s=_.filter(o,function(T){return T.isPaneVisible});if(1===s.length)s[0].isPaneExpanded=!0;else for(;this.stateToRestore.length>0;){var c=this.stateToRestore.shift();if(_.isEmpty(c)||_.some(c,function(T){return o[T].isPaneVisible})){for(var x=0,V=c;x<V.length;x++){var w=V[x];o[w].isPaneVisible&&(o[w].isPaneExpanded=!0)}break}}this.panes$.next(o)}},a.prototype.notifyPaneVisibilityChanged=function(o,l){this.eventBridge.publishToChannel(powerbi.explore.services.events.togglePaneVisibility,{pane:o,show:l})},a.prototype.logPaneStatus=function(){var o=this;setTimeout(function(){var l=document.querySelector(o.paneContainerSelector.selector),s=null==l?void 0:l.getBoundingClientRect().width,c=_.mapValues(o.paneSelectors,function(x){var V,w;return null===(w=null===(V=document.querySelector(o.paneContainerSelector.selector+" "+x.selector))||void 0===V?void 0:V.getBoundingClientRect())||void 0===w?void 0:w.width}),O=o.panes$.value;o.telemetryService.logEvent(n.$k,{visibleCount:_.filter(O,function(x){return x.isPaneVisible}).length,expandedCount:_.filter(O,function(x){return x.isPaneVisible&&x.isPaneExpanded}).length,paneSwitcherVisible:o.showPaneSwitcher(),windowWidth:s,paneWidths:JSON.stringify(c),canvasZoom:o.canvasZoom.getCurrentZoomLevel()})})},a.prototype.isPaneSwitcherSupported=function(){return this.featureSwitchService.featureSwitches.onObject&&1!==this.formFactor.getCurrentLayout()},a.\u0275fac=function(l){return new(l||a)(f.\u0275\u0275inject(i.w),f.\u0275\u0275inject(M.J),f.\u0275\u0275inject(E.vZ),f.\u0275\u0275inject(I.F),f.\u0275\u0275inject(d.y0))},a.\u0275prov=f.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}();function b(a){switch(a){case 0:return"Data";case 1:return"Format";case 2:return"Insights";case 3:return"QuickMeasures";case 4:return"Performance";case 5:return"Bookmarks";case 6:return"SyncSlicers";case 7:return"CanvasItems";case 8:return"BuildSkittle";case 9:return"ChartElementsSkittle";case 10:return"QuickExplore";case 11:return"AssistedCreation"}}},63724:function(Ee,ne,t){t.d(ne,{F:function(){return T}});var e=t(69104),n=t(65657),f=t(66571),i=t(53477),M=t(798),E=t(68910),I=t(24828),d=t(69556),P=t(95116),y=t(76430),b=t(71367),a=t(66075),o=t(76712),l=t(23580),s=t(60660),c=t(4430),O=t(95781),x=t(4486),V=powerbi.explore.services.events,T=function(){function v(g,r,u,C,F,A,W,k,R){var le,ge,G=this;if(this.eventBridge=g,this.capabilitiesService=r,this.localizationService=u,this.navigationService=C,this.notificationBarService=F,this.reportRefreshService=A,this.featureSwitchesService=W,this.contextActivityService=k,this.reportViewSettingsService=R,this.notificationId="",this.promptId="",this.canDisplayPrompt=!1,this.timeouts={},this.allowPauseQueries=this.capabilitiesService.getCapabilities().allowPauseQueries&&this.featureSwitchesService.featureSwitches.optimizeTabRibbon,this.pauseQueries$=new e.X(!!this.allowPauseQueries&&!!(null===(ge=null===(le=this.navigationService.getCurrentExploration())||void 0===le?void 0:le.settings)||void 0===ge?void 0:ge.pauseQueries)),this.channelSubscriptionManager=this.eventBridge.createChannelSubscriptionManager(),this.channelSubscriptionManager.subscribe(V.explorationSettingsLoaded,function(j,ie){var Z,fe;ie.pauseQueriesChanged&&G.setPauseQueries(!!(null===(fe=null===(Z=G.navigationService.getCurrentExploration())||void 0===Z?void 0:Z.settings)||void 0===fe?void 0:fe.pauseQueries))}).subscribe(V.explorationLoaded,function(){var j,ie;G.setPauseQueries(!!(null===(ie=null===(j=G.navigationService.getCurrentExploration())||void 0===j?void 0:j.settings)||void 0===ie?void 0:ie.pauseQueries))}),this.reportViewSettingsService){var re=this.reportViewSettingsService.getReportViewSettings({reportSettings:!1,userSettings:!1}).userSettings;this.canDisplayPrompt=!!(null==re?void 0:re.showPromptBannerPauseQueries),this.allowPauseQueries&&this.canDisplayPrompt&&this.detectPerformanceForPrompt()}}return v.prototype.detectPerformanceForPrompt=function(){var g=this,r=new d.YM(this.localizationService);this.performanceObservable$=this.contextActivityService.getActivityStream().pipe((0,E.l4)(I.TV,I.Gb,I.xq,I.TH),(0,n.h)(function(u){var C=u.properties;return"Visual Container Lifecycle"===C.name||"Execute Change Detection"===C.name||"User Action"===C.name}),(0,f.U)(function(u){return u.properties}),(0,n.h)(function(u){return!!u.visualContainerName}),(0,i.R)(function(u,C){return C?r.logsUpdate({direction:d.wN.Ascending,type:d.aV.Chronological},[C],[]):[]},[]),(0,M.o)(function(){return g.isPromptEnabled()})).subscribe(function(u){if(u.length){var C=u[0],F=C.performanceLog.visualContainerName;0===C.performanceLog.status?g.timeouts[F]=setTimeout(function(){g.isPromptEnabled()&&g.showPromptBanner()},5e3):(clearTimeout(g.timeouts[F]),g.timeouts[F]=0)}})},v.prototype.isPromptEnabled=function(){return!this.isReportPaused()&&!this.promptId&&this.canDisplayPrompt},v.prototype.canPauseQueries=function(){return this.allowPauseQueries},v.prototype.isReportPaused=function(){return this.pauseQueries$.getValue()},v.prototype.isReportPaused$=function(){return this.pauseQueries$.asObservable()},v.prototype.refreshVisuals=function(g,r){this.eventBridge.publishToChannel(V.visualContainerChanged,{affectContainer:function(C){return!g||C.name===g},refreshVisual:!r})},v.prototype.setPauseQueries=function(g){var r;!this.allowPauseQueries||!(null===(r=this.navigationService.getCurrentExploration())||void 0===r?void 0:r.settings)||g===this.isReportPaused()||(this.navigationService.getCurrentExploration().settings.pauseQueries=g,this.reportRefreshService.setRefreshPaused(g),this.pauseQueries$.next(g),this.canDisplayPrompt&&this.disablePrompt(),g?(this.eventBridge.publishToChannel(V.cancelVisualQuery,{affectContainer:function(){return!0}}),this.showNotificationBar()):(this.refreshVisuals(void 0,!0),this.clearNotification()))},v.prototype.ngOnDestroy=function(){var g=this;this.channelSubscriptionManager.unsubscribeAll(),this.performanceObservable$&&(this.performanceObservable$.unsubscribe(),Object.keys(this.timeouts).forEach(function(r){return g.timeouts[r]&&clearTimeout(g.timeouts[r])}))},v.prototype.clearNotification=function(){this.notificationBarService.hide(this.notificationId),this.notificationId=""},v.prototype.showNotificationBar=function(){var g=this;this.notificationId=this.notificationBarService.notify({message:this.localizationService.get("Pause_Visual_Query_Info"),notificationType:6,secondaryLink:{displayText:this.localizationService.get("TenantSetting_AdminApisIncludeExpressions_DescriptionLink"),urlString:"https://go.microsoft.com/fwlink/?linkid=2204703&clcid=0x409"},actions:[{displayText:this.localizationService.get("Refresh"),action:function(){return g.refreshVisuals()}},{displayText:this.localizationService.get("Resume_Visual_Query"),action:function(){g.setPauseQueries(!1)}}]})},v.prototype.showPromptBanner=function(){var g=this;this.promptId=this.notificationBarService.notify({message:this.localizationService.get("Paused_Visual_Query_Tip_Details"),notificationType:3,secondaryLink:{displayText:this.localizationService.get("TenantSetting_AdminApisIncludeExpressions_DescriptionLink"),urlString:"https://go.microsoft.com/fwlink/?linkid=2204703&clcid=0x409"},onDismiss:function(){return g.clearPromptBanner()},actions:[{displayText:this.localizationService.get("ReportAppBar_PauseVisual"),action:function(){g.setPauseQueries(!0),g.clearPromptBanner()}},{displayText:this.localizationService.get("Paused_Visual_Dont_Show_Again"),action:function(){g.clearPromptBanner()}}]})},v.prototype.disablePrompt=function(){this.reportViewSettingsService.getUserSettingService().setShowPromptBannerPauseQueries(!1),this.canDisplayPrompt=!1},v.prototype.clearPromptBanner=function(){this.notificationBarService.hide(this.promptId),this.promptId=""},v.\u0275fac=function(r){return new(r||v)(y.\u0275\u0275inject(b.J),y.\u0275\u0275inject(l.U),y.\u0275\u0275inject(s.o),y.\u0275\u0275inject(a.z),y.\u0275\u0275inject(c.S),y.\u0275\u0275inject(o.F),y.\u0275\u0275inject(O.vZ),y.\u0275\u0275inject(x.r),y.\u0275\u0275inject(P.a,8))},v.\u0275prov=y.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}()},30224:function(Ee,ne,t){t.d(ne,{k:function(){return o}});var e=t(76430),n=t(38942),f=t(88201),i=t(95762),M=t(13213),E=t(16035),I=t(47312),d=t(57869),P=t(80815),y=t(95781),b=powerbi.explore.util.VisualContainerUtils,a=powerbi.data.SQExpr,o=function(){function l(s,c,O,x,V,w,T,v,g){this.visualPluginService=w,this.visualPluginOps=T,this.visualCapabilitiesService=v,this.legacyService=powerbi.explore.services.createPinVisualService(s,c,O.create(),g,x,V,w,T,v)}return l.prototype.setHandler=function(s){this.legacyService.setHandler(s)},l.prototype.pinVisualContainer=function(s,c,O,x,V,w){this.legacyService.pinVisualContainer(s,c,O,x,V,w)},l.prototype.canPinVisualType=function(s){return powerbi.explore.services.canPinVisualType(this.visualPluginService,this.visualPluginOps,this.visualCapabilitiesService,s)},l.prototype.getPinData=function(s,c,O,x,V,w,T,v,g,r){return this.legacyService.getPinData(s,c,O,x,V,w,T,v,g,r)},l.prototype.getPinDataAsync=function(s,c,O,x,V,w){return this.legacyService.getPinDataAsync(s,c,O,x,V,w)},l.prototype.canPin=function(s){if(!s||b.hasGroupByItemsInQuery(s.contract))return!1;var c,O=s.getVisualType();c=this.canPinVisualType(O);var x=b.getSelectExprs(s.contract);return!_.some(x,function(V){return a.isSparklineData(V.expr)})&&c&&!s.showWatermark&&!!s.canPin},l.\u0275fac=function(c){return new(c||l)(e.\u0275\u0275inject(n.i),e.\u0275\u0275inject(i.O),e.\u0275\u0275inject(f.U),e.\u0275\u0275inject(d.o),e.\u0275\u0275inject(M.S),e.\u0275\u0275inject(P.D),e.\u0275\u0275inject(E.f),e.\u0275\u0275inject(I.N),e.\u0275\u0275inject(y.vZ))},l.\u0275prov=e.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l}()},46899:function(Ee,ne,t){t.d(ne,{G:function(){return i}});var e=t(49698),n=t(76430),f=powerbi.explore.contracts.AutoPageRefreshOption,i=function(){function M(E){this.changeDetectionRefreshService=E,this.noopPageRefreshStrategy=new e.$O}return M.prototype.create=function(E){return 2===E?this.changeDetectionRefreshService:this.noopPageRefreshStrategy},M.prototype.getActiveAutoRefreshStrategy=function(E){return E.evaluatedObjects&&E.evaluatedObjects.pageRefresh&&E.evaluatedObjects.pageRefresh.show?E.evaluatedObjects.pageRefresh.refreshType?this.toAutoRefreshStrategyKind(E.evaluatedObjects.pageRefresh.refreshType):1:0},M.prototype.toAutoRefreshStrategyKind=function(E){switch(E){case f.CDM:return 2;case f.APR:return 1;default:return 0}},M.\u0275fac=function(I){return new(I||M)(n.\u0275\u0275inject(e.c9))},M.\u0275prov=n.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac}),M}()},82954:function(Ee,ne,t){t.d(ne,{I:function(){return l}});var e=t(40582),n=t(49698),f=t(76430),i=t(59116),M=t(71367),E=t(66075),I=t(10883),d=t(9474),P=t(68463),y=t(46899),b=powerbi.common.constants,a=powerbi.explore.contracts.DataSource,o=powerbi.explore.services.events,l=function(){function s(c,O,x,V,w,T,v){this.telemetryService=c,this.eventBridge=O,this.explorationNavigation=x,this.dataSourcesService=V,this.dataProxy=w,this.visualTimeSynchronizationService=T,this.autoRefreshStrategyFactory=v,this.visualsRefreshing=!0,this.pageId="-1",this.refreshDelayedCount=0,this.refreshPaused=!1,this.autoRefreshStrategy=new n.$O,this.subscriptionManager=O.createChannelSubscriptionManager()}return s.prototype.init=function(){this.subscribeEvents()},s.prototype.destroy=function(){this.autoRefreshStrategy.stop(),this.subscriptionManager.unsubscribeAll()},s.prototype.refreshData=function(){var c=a.dataReaderDataSources(a.queried(this.dataSourcesService.get(),null));!c||(this.dataProxy.clearCache(b.dsrDataReaderType,c),this.eventBridge.publishToChannel(o.visualContainerChanged,{affectContainer:function(){return!0}}))},s.prototype.setRefreshPaused=function(c){this.refreshPaused=c},s.prototype.getRefreshStats=function(){return this.autoRefreshStrategy.getRefreshStats()},Object.defineProperty(s.prototype,"refreshStrategy",{get:function(){return this.autoRefreshStrategy.autoRefreshKind},enumerable:!1,configurable:!0}),s.prototype.subscribeEvents=function(){var c=this;this.subscriptionManager.subscribe(o.sectionChanged,function(){return c.onSectionChanged()}).subscribe(o.sectionObjectsEvaluated,function(){return c.onSectionsObjectsChanged()}).subscribe(powerbi.common.events.printSectionReady,function(){return c.onVisualsLoaded()}).subscribe(o.autoPageRefreshTriggered,function(){return c.onAutoPageRefreshTriggered()})},s.prototype.onSectionsObjectsChanged=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(c){switch(c.label){case 0:return[4,this.updateRefreshStrategy()];case 1:return c.sent(),[2]}})})},s.prototype.onSectionChanged=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(c){switch(c.label){case 0:return this.lastRefreshTime=void 0,[4,this.updateRefreshStrategy()];case 1:return c.sent(),[2]}})})},s.prototype.onVisualsLoaded=function(){this.visualsRefreshing=!1},s.prototype.onAutoPageRefreshTriggered=function(){this.triggerRefresh()},s.prototype.updateRefreshStrategy=function(){return(0,e.mG)(this,void 0,void 0,function(){var c,O,x;return(0,e.Jh)(this,function(V){switch(V.label){case 0:return(c=this.explorationNavigation.getCurrentSection())?(O=this.autoRefreshStrategy&&this.autoRefreshStrategy.autoRefreshKind,x=this.autoRefreshStrategyFactory.getActiveAutoRefreshStrategy(c),c.objectId!==this.pageId||x!==O?(this.pageId=c.objectId,this.autoRefreshStrategy.stop(),this.autoRefreshStrategy=this.autoRefreshStrategyFactory.create(x),[4,this.autoRefreshStrategy.resumeAsync()]):[3,2]):[2];case 1:V.sent(),V.label=2;case 2:return[2]}})})},s.prototype.calculateEffectiveInterval=function(){return this.lastRefreshTime?(new Date).getTime()-this.lastRefreshTime.getTime():void 0},s.prototype.triggerRefresh=function(){if(this.visualsRefreshing)return++this.refreshDelayedCount,void this.logTriggerRefresh(this.refreshDelayedCount);this.refreshPaused||(this.refreshDelayedCount=0,this.logTriggerRefresh(this.refreshDelayedCount),this.effectiveRefreshInterval=this.calculateEffectiveInterval(),this.lastRefreshTime=new Date,this.visualTimeSynchronizationService.setAnchorTimeToNow(),this.eventBridge.publishToChannel(o.dataRefreshTriggered),this.visualsRefreshing=!0)},s.prototype.logTriggerRefresh=function(c){var O=this.explorationNavigation.getCurrentExploration();if(O){var x=O.report,V=this.explorationNavigation.getExplorationTelemetryData(),w="",T=-1,v="",g="-1",r="-1";if(x&&x.model){var u=x.model;w=u.dbName,v=x.objectId,T=u.id}V&&(g=V.exid,r=V.exsid),this.telemetryService.logEvent(powerbi.telemetry.TriggerRefresh,{reportId:v,pageId:this.pageId,dbName:w,modelId:T,interval:this.effectiveRefreshInterval,delayCount:c,exid:g,exsid:r})}},s.\u0275fac=function(O){return new(O||s)(f.\u0275\u0275inject(i.y0),f.\u0275\u0275inject(M.J),f.\u0275\u0275inject(E.z),f.\u0275\u0275inject(I.D),f.\u0275\u0275inject(P.d),f.\u0275\u0275inject(d.a),f.\u0275\u0275inject(y.G))},s.\u0275prov=f.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac}),s}()},79377:function(Ee,ne,t){t.d(ne,{V:function(){return I}});var e=t(60354),n=t(65491),f=t(76430),i=t(95781),M=t(45401),E=t(91425),I=function(){function d(P,y,b,a,o){this.promiseFactory=P,this.managedCustomVisualsService=y,this.featureSwitchService=b,this.favoriteVisualLoader=a,this.resourcePackageHttp=o}return d.prototype.copyResourcePackageIfNeeded=function(P,y,b){var a=this,o=[],l=!1,s=!1;if(this.featureSwitchService.featureSwitches.userFavoriteResourcePackagesEnabled){o.push(this.favoriteVisualLoader.isFavoriteResourcePackage(P).then(function(V){return l=V}));var c=this.promiseFactory.defer();this.managedCustomVisualsService.isOrgVisualByResourcePackageId(P).then(function(V){return c.resolve(V)}).catch(function(){return c.reject()}),o.push(c.promise.then(function(V){return s=V}))}var O=!1;if(this.featureSwitchService.featureSwitches.manageMarketplaceVisuals){var x=this.promiseFactory.defer();this.managedCustomVisualsService.isPublicManagedVisualById(P).then(function(V){return x.resolve(V)}).catch(function(){return x.reject()}),o.push(x.promise.then(function(V){return O=V}))}return this.promiseFactory.all(o).then(function(V){return l&&!s||O?a.resourcePackageHttp.copyResourcePackage(P,y,b):a.promiseFactory.resolve(null)})},d.\u0275fac=function(y){return new(y||d)(f.\u0275\u0275inject(e.t),f.\u0275\u0275inject(n.D),f.\u0275\u0275inject(i.vZ),f.\u0275\u0275inject(M.W),f.\u0275\u0275inject(E.v))},d.\u0275prov=f.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"}),d}()},97999:function(Ee,ne,t){t.d(ne,{ed:function(){return d}});var e=t(40582),n=t(76430),f=t(36966),i="__@ngrx/effects_create__",E=function(){function P(y){this.instance=y,this.subscription=new f.w;for(var b=function(P){return Object.getOwnPropertyNames(P).filter(function(b){return P[b]&&P[b].hasOwnProperty(i)}).map(function(b){return(0,e.pi)({propertyName:b},P[b][i])})}(y),o=0,l=b.map(function(c){return y[c.propertyName]});o<l.length;o++)this.subscription.add(l[o].subscribe())}return P.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},P.\u0275fac=function(b){n.\u0275\u0275invalidFactory()},P.\u0275prov=n.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}(),I=new n.InjectionToken("SCOPED_EFFECT_TOKEN");function d(P){return{token:I,providers:[P,{provide:I,useClass:E,deps:[P]}]}}},70077:function(Ee,ne,t){t.d(ne,{v_:function(){return M},Eo:function(){return I}});var e=t(76430),n=t(76963),f=t(71367),i={},M=function(){function d(){this.scopes=[]}return d.prototype.addScopedRoot=function(P){var y=_.find(this.scopes,function(b){return b.injector===P});y?++y.count:this.scopes.push({injector:P,count:1})},d.prototype.removeScopedRoot=function(P){var y=_.findIndex(this.scopes,function(b){return b.injector===P});-1!==y&&--this.scopes[y].count<=0&&this.scopes.splice(y,1)},d.prototype.getTheScopedService=function(P){if(this.scopes.length){var a=this.scopes[0].injector.get(P,i);if(a!==i)return a}},d.prototype.sendChannelEvent=function(P,y){var b=this.getTheScopedService(f.J);return!!b&&(b.publishToChannel(P,y),!0)},d.\u0275prov=e.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac=function(y){return new(y||d)},providedIn:"root"}),d}();function E(d,P){return P.addScopedRoot(d),{update:function(){},destroy:function(){return P.removeScopedRoot(d)}}}function I(d){return(0,n.HZ)(d,{provide:E,useFactory:E,deps:[e.Injector,M]})}},93397:function(Ee,ne,t){t.d(ne,{g:function(){return i}});var e=t(69104),n=t(76430),i=function(){function M(){this.settingChangedInternal$=new e.X(void 0),this.showGridlines=!1,this.showGridlinesMobile=!0,this.snapToGrid=!1,this.snapToGridMobile=!0,this.lockObjects=!1,this.lockObjectsMobile=!1}return Object.defineProperty(M.prototype,"settingChanged$",{get:function(){return this.settingChangedInternal$.asObservable()},enumerable:!1,configurable:!0}),M.prototype.getShowGridlines=function(){return this.showGridlines},M.prototype.setShowGridlines=function(E,I){this.setValueAndNotify("ShowGridlines",E)},M.prototype.getShowGridlinesMobile=function(){return this.showGridlinesMobile},M.prototype.setShowGridlinesMobile=function(E,I){this.setValueAndNotify("ShowGridlinesMobile",E)},M.prototype.getShowQnaVisualBanner=function(){return this.showQnaVisualBanner},M.prototype.setShowQnaVisualBanner=function(E){this.setValueAndNotify("ShowQnaVisualBanner",E)},M.prototype.getShowSmartGuides=function(){return this.showSmartGuides},M.prototype.setShowSmartGuides=function(E){this.setValueAndNotify("ShowSmartGuides",E)},M.prototype.getSnapToGrid=function(){return this.snapToGrid},M.prototype.setSnapToGrid=function(E,I){this.setValueAndNotify("SnapToGrid",E)},M.prototype.getSnapToGridMobile=function(){return this.snapToGridMobile},M.prototype.setSnapToGridMobile=function(E,I){this.setValueAndNotify("SnapToGridMobile",E)},M.prototype.getDefaultSectionVerticalAlignment=function(){return this.sectionVerticalAlignment},M.prototype.setDefaultSectionVerticalAlignment=function(E){this.setValueAndNotify("SectionVerticalAlignment",E)},M.prototype.getLockObjects=function(){return this.lockObjects},M.prototype.setLockObjects=function(E){this.setValueAndNotify("LockObjects",E)},M.prototype.getLockObjectsMobile=function(){return this.lockObjectsMobile},M.prototype.setLockObjectsMobile=function(E){this.setValueAndNotify("LockObjectsMobile",E)},M.prototype.getSuggestVisualByDefault=function(){return this.suggestVisualByDefault},M.prototype.setSuggestVisualByDefault=function(E){this.setValueAndNotify("suggestVisualByDefault",E)},M.prototype.getShowAllVisualTypeByDefault=function(){return this.showAllVisualTypeByDefault},M.prototype.setShowAllVisualTypeByDefault=function(E){this.setValueAndNotify("showAllVisualTypeByDefault",E)},M.prototype.setValueAndNotify=function(E,I){var d=E.substr(0,1).toLowerCase().concat(E.substring(1));this.hasOwnProperty(d);var y=this[d];this[d]=I,_.isEqual(y,I)||this.settingChangedInternal$.next(E)},M.\u0275prov=n.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac=function(I){return new(I||M)},providedIn:"root"}),M}()},8145:function(Ee,ne,t){t.d(ne,{P:function(){return I}});var e=t(60354),n=t(76430),f=t(60660),i=t(59116),M=t(59804),E=t(80815),I=function(){function d(P,y,b,a,o){this.legacyService=powerbi.explore.services.createShowValueAsService(P,y,b,a,o)}return d.prototype.createShowValueAsMenuItems=function(P,y,b){return this.legacyService.createShowValueAsMenuItems(P,y,b)},d.prototype.applyShowValueAs=function(P,y,b){return this.legacyService.applyShowValueAs(P,y,b)},d.\u0275fac=function(y){return new(y||d)(n.\u0275\u0275inject(f.o),n.\u0275\u0275inject(e.t),n.\u0275\u0275inject(i.y0),n.\u0275\u0275inject(M.$),n.\u0275\u0275inject(E.D))},d.\u0275prov=n.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}()},66338:function(Ee,ne,t){t.d(ne,{s:function(){return V}});var e=t(40582),n=t(81677),f=t(1537),i=t(76430),M=t(38942),E=t(18237),I=t(10883),d=t(59886),P=t(63033),y=t(60660),b=t(59116),a=t(59804),o=powerbi.data.services.SemanticQuerySerializer,l=powerbi.data.SQExpr,s=powerbi.data.SQExprBuilder,c=powerbi.data.SQExprUtils,O=powerbi.explore.util.VisualContainerUtils,V=function(){function w(T,v,g,r,u,C,F,A){this.conceptualSchemaProxy=T,this.dialogService=v,this.dataSources=g,this.localizationService=r,this.selectionService=u,this.telemetryService=C,this.visualAuthoringService=F,this.dataSourcesSerializerService=A}return w.prototype.showCreateDialog=function(T){var v;return(0,e.mG)(this,void 0,void 0,function(){var g,r;return(0,e.Jh)(this,function(C){switch(C.label){case 0:return(g=this.getSingleSelectedVisualContainer())?(r=O.getSelectExprs(g),(null===(v=_.filter(r,function(F){return l.isSparklineData(F.expr)}))||void 0===v?void 0:v.length)<5?[2,this.showDialog(T,void 0,!1)]:[3,1]):[2];case 1:return[4,this.showErrorDialog()];case 2:C.sent(),C.label=3;case 3:return[2]}})})},w.prototype.showEditDialog=function(T){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(v){return T&&l.isSparklineData(T),l.isSparklineData(T)?[2,this.showDialog(T.measure,_.first(T.grouping),!0)]:[2]})})},w.prototype.addSparklinesToVisual=function(T,v,g){return(0,e.mG)(this,void 0,void 0,function(){var r;return(0,e.Jh)(this,function(u){return c.isMeasure(T),c.isMeasure(v),r=s.sparklineData(T,[v]),[2,this.visualAuthoringService.addFieldToVisual(r,this.dataSources.get(),g)]})})},w.prototype.updateSparklinesExpr=function(T,v,g,r,u){return(0,e.mG)(this,void 0,void 0,function(){var C;return(0,e.Jh)(this,function(F){return c.isMeasure(T),c.isMeasure(v),C=s.sparklineData(T,[v]),[2,this.visualAuthoringService.replaceField(C,r,u,g,this.dataSources.get())]})})},w.prototype.showDialog=function(T,v,g){return(0,e.mG)(this,void 0,void 0,function(){var r,u,C,F,A;return(0,e.Jh)(this,function(R){switch(R.label){case 0:r=this.telemetryService.startEvent(f.wJ,{isEdit:g}),R.label=1;case 1:return R.trys.push([1,4,5,7]),C=this.dataSources.get(),F={selectedMeasure:T?o.serializeExpr(T):void 0,selectedGrouping:v?o.serializeExpr(v):void 0,dataSources:this.dataSourcesSerializerService.serializeDataSources(C)},A={title:this.localizationService.get(g?"Sparkline_EditOption":"Sparkline_AddOption"),input:F,hideOkButton:!1,hideCancelButton:!g,okButtonDisabled:!g,okButtonText:g?void 0:this.localizationService.get("Create_ButtonText"),isDraggable:!0,focusInitialCloseButton:!0},[4,this.dialogService.showTemplateDialog(n.nb,A,{width:"452px"})];case 2:return[4,R.sent().afterClosed().toPromise()];case 3:return u=R.sent(),[3,7];case 4:return R.sent(),[3,7];case 5:return[4,this.resolveEvent(r,u)];case 6:return R.sent(),[7];case 7:return[2,u]}})})},w.prototype.showErrorDialog=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(T){return this.telemetryService.logEvent(f.Sw),this.dialogService.showSimpleInfoDialog({title:this.localizationService.get("Sparkline_Dialog_ErrorTitle"),message:this.localizationService.get("Sparkline_Dialog_ErrorMessage"),okButtonText:this.localizationService.get("ModalDialogButtonText_GotIt"),titleIcon:"pbi-glyph-error"}),[2]})})},w.prototype.resolveEvent=function(T,v){return(0,e.mG)(this,void 0,void 0,function(){var g,r,u,C,F,W;return(0,e.Jh)(this,function(k){switch(k.label){case 0:return T.event.info.dialogCloseAction=v?"Apply":"Close",v?[4,this.conceptualSchemaProxy.get(this.dataSources.get())]:[3,2];case 1:g=k.sent(),r=o.deserializeExpr(v.grouping),u=o.deserializeExpr(v.measure),C=s.sparklineData(u,[r]),F=powerbi.explore.util.SparklinesUtil.getFieldCharacteristics(C,g),W=F.measureType,T.event.info.groupingType=F.groupingType,T.event.info.measureType=W,k.label=2;case 2:return T.resolve(),[2]}})})},w.prototype.getSingleSelectedVisualContainer=function(){var T=this.selectionService.getSelectedElements();if(1===T.length){var v=T[0].canvasItem;return powerbi.explore.contracts.isVisualContainer(v)?v:void 0}},w.\u0275fac=function(v){return new(v||w)(i.\u0275\u0275inject(M.i),i.\u0275\u0275inject(E.x),i.\u0275\u0275inject(I.D),i.\u0275\u0275inject(y.o),i.\u0275\u0275inject(d.z),i.\u0275\u0275inject(b.y0),i.\u0275\u0275inject(a.$),i.\u0275\u0275inject(P._))},w.\u0275prov=i.\u0275\u0275defineInjectable({token:w,factory:w.\u0275fac}),w}()},34561:function(Ee,ne,t){t.d(ne,{_:function(){return P},Q:function(){return y}});var e=t(37153),n=t(76430),f=t(66075),i=t(40629),M=t(93993),E=t(95781),I=powerbi.explore.util.VisualTooltipStyleUtils,d=powerbi.explore.util.VisualContainerUtils,P=function(){function b(a,o,l,s){this.explorationNavigation=a,this.viewModeState=o,this.themeService=l,this.featureSwitchService=s}return b.prototype.getTooltipStyle=function(a){var o,l,s=this.explorationNavigation.getCurrentExploration(),c=this.viewModeState.getConfig().displayOptions.enableMobileTooltipActions,O=null===(o=null==s?void 0:s.settings)||void 0===o?void 0:o.useEnhancedTooltips,x=this.themeService.getVisualStyle(null==s?void 0:s.themeCollection),V=null===(l=d.getSingleVisualConfig(a))||void 0===l?void 0:l.evaluatedObjects;return!V&&a&&(V=d.evaluateObjectDefinitions((null==s?void 0:s.themeCollection)||{},this.themeService,a,this.featureSwitchService.featureSwitches).dataViewObjects),I.getVisualTooltipStyles(x,O,c,V&&V.visualTooltip,this.featureSwitchService.featureSwitches.newMobileTooltip)},b.\u0275fac=function(o){return new(o||b)(n.\u0275\u0275inject(f.z),n.\u0275\u0275inject(i.kc),n.\u0275\u0275inject(M.f),n.\u0275\u0275inject(E.vZ))},b.\u0275prov=n.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b}(),y={provide:e.e,useClass:P}},31223:function(Ee,ne,t){t.d(ne,{d:function(){return d}});var e=t(40582),n=t(8576),f=t(81677),i=t(97894),M=t(76430),E=t(18237),d=function(){function P(y,b){this.commandStore=y,this.modernDialogService=b}return P.prototype.show=function(){return(0,e.mG)(this,void 0,void 0,function(){var a=this;return(0,e.Jh)(this,function(o){switch(o.label){case 0:return[4,this.modernDialogService.openHostDialog({componentName:f.nc,config:{minWidth:576},dialogName:"TrySampleDatasetDialog"})];case 1:return o.sent().afterClosed().pipe((0,i.q)(1)).subscribe(function(l){l&&a.commandStore.DataImport.ConnectFromSample.execute()}),[2]}})})},P.\u0275fac=function(b){return new(b||P)(M.\u0275\u0275inject(n.D),M.\u0275\u0275inject(E.x))},P.\u0275prov=M.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P}()},40629:function(Ee,ne,t){t.d(ne,{kc:function(){return d}});var e=t(69104),n=t(76430),f=t(4486),i=jsCommon.FreezeUtility,d=function(){function b(a){this.contextActivityService=a,this.config$=new e.X(void 0),this.viewMode$=new e.X(void 0),this.config={supportsPinning:void 0,supportsDeletion:void 0,enablePenAnnotation:!1,visualDoubleClickEnabled:!1,displayOptions:{canShowCanvasWatermark:!1,showVisualBordersInViewMode:!1,hideVisualizationPane:!1,hideTileMenu:!1,hideNavigationPane:!1,disableFadeout:!1,showExportDataPane:!1,showMobilePane:!1,hideInFocusBar:!1,hideInFocusTileMenu:!1,visualMouseoverDisabled:!1,hideCanvasSwipeHandles:!1,extendBackgroundToWholeCanvas:!1,hideOutspaceFormatting:!1,hideOutspaceImage:!1,hideBackgroundImage:!1,showMobileScorecardVisualBanner:!1,showVisualAccessibleData:!1,showDetailVisualOnFullScreen:!1,disableSpotlight:!1,enableMobileTooltipActions:!1,enableTooltipActions:!0,showDrillthroughFilters:!1,useMobileExplorationFooter:!1,showTooltipAboveClick:!1,showMobileVisualContainerHeader:!1,preserveScrollPositionOnResize:!1,mobileBookmarksMenuDisplay:0,enableMobileFilters:!1,disablePixelValueRounding:!1,scaleBackgroundImageToWidth:!1,enableMobileInsights:!1,showVisualOnSelectFadeOut:!1,hideNewCanvasScrollbar:!1,hideInsightsPane:!1,mobileInsightsDisplayOption:void 0,hideQuickExplorePane:!1,forceCenteredVerticalAlignment:!1},touchOptions:{deselectVisualOnCanvasScroll:!1,disableCanvasScrollOnSelectedVisual:!1,disableTouchZoom:!1,isCanvasSwipeable:!0,swipeOnlyFromEdge:!1,swipeEdgeThreshold:void 0,touchEventsOnSelectedVisualOnly:!1,disableCanvasPinch:!0,disableTouchendOnTooltip:!1,dataMultiSelectMode:0},penProperties:{strokeStyle:"#939598",lineWidth:20,opacity:1},printProperties:{useSectionDisplayOption:!1}},this.freeze(),this.syncConfig$(),this.state={},this.formatModeSubject=new e.X(!1),this.formatMode$=this.formatModeSubject}return b.prototype.getViewState=function(){return this.state},b.prototype.getMode=function(){return this.mode},b.prototype.getMode$=function(){return this.viewMode$.asObservable()},b.prototype.setMode=function(a){this.mode=a,this.viewMode$.next(a)},b.prototype.getConfig=function(){return this.frozenConfig},b.prototype.getConfig$=function(){return this.config$.asObservable()},b.prototype.updateConfig=function(a){a&&(a(this.config),this.config.displayOptions.showMobilePane&&(this.state.bookmarkView=void 0),this.freeze()),this.syncConfig$()},b.prototype.getBookmarkViewState=function(){return this.state.bookmarkView},b.prototype.setBookmarkViewState=function(a){this.state.bookmarkView=a},b.prototype.setFormatMode=function(a,o){var s=function(b,a,o){return a.createActivity({name:b,data:{source:o}})}(a?"Switch To Format Mode":"Switch From Format Mode",this.contextActivityService,o);this.formatModeSubject.next(a),s.resolve()},b.prototype.getFormatMode=function(){return this.formatModeSubject.value},b.prototype.freeze=function(){var a=_.cloneDeep(this.config);i.deepFreeze(a),this.frozenConfig=a},b.prototype.syncConfig$=function(){this.config$.next(this.getConfig())},b.\u0275fac=function(o){return new(o||b)(n.\u0275\u0275inject(f.r))},b.\u0275prov=n.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b}()},78226:function(Ee,ne,t){t.d(ne,{Q:function(){return W}});var e=t(27367),n=t(76430),f=t(80815),i=t(16035),M=t(95762),E=t(66075),I=t(59886),d=t(36490),P=t(5370),y=t(71367),b=t(79130),a=t(98288),o=t(78838),l=t(28074),s=t(7078),c=t(15595),O=t(66187),x=t(63564),V=t(4486),w=t(59116),T=t(95781),v=t(19156),g=t(61624),r=t(60660),u=t(40629),C=t(48478),F=t(23580),A=t(93397),W=function(){function k(R,G,le,ge,re,j,ie,Z,fe,Q,J,se,oe,K,D,p,h,m,S,N,ce,he,Ce,me,Ze,Je,it){void 0===it&&(it=new e.I),this.service=powerbi.explore.util.createVisualAuthoringOperations(R,G,le,ge,re,j,ie,Z,fe,Q,J,se,oe,K,D,p,h,m,S,N,ce,it,Ce,he,me,Ze,Je)}return k.prototype.ensureNativeReferenceName=function(R,G){this.service.ensureNativeReferenceName(R,G)},k.prototype.updateVisualCalculation=function(R,G,le,ge,re){return this.service.updateVisualCalculation(R,G,le,ge,re)},k.prototype.switchQueryParameter=function(R,G,le,ge,re){return this.service.switchQueryParameter(R,G,le,ge,re)},k.prototype.addFieldToVisual=function(R,G,le,ge,re){return this.service.addFieldToVisual(R,G,le,ge,re)},k.prototype.addFieldInRole=function(R,G,le,ge,re,j,ie,Z,fe){return this.service.addFieldInRole(R,G,le,ge,re,j,ie,Z,fe)},k.prototype.expandHierarchy=function(R,G,le,ge,re){return this.service.expandHierarchy(R,G,le,ge,re)},k.prototype.removeFieldFromAllRoles=function(R,G,le,ge){return this.service.removeFieldFromAllRoles(R,G,le,ge)},k.prototype.removeFieldFromRole=function(R,G,le,ge){return this.service.removeFieldFromRole(R,G,le,ge)},k.prototype.removeInvalidExpressions=function(R,G,le){return this.service.removeInvalidExpressions(R,G,le)},k.prototype.moveField=function(R,G,le,ge,re,j,ie){return this.service.moveField(R,G,le,ge,re,j,ie)},k.prototype.drillDownLevel=function(R,G,le){return this.service.drillDownLevel(R,G,le)},k.prototype.replaceField=function(R,G,le,ge,re,j,ie){return this.service.replaceField(R,G,le,ge,re,j,ie)},k.prototype.drillDown=function(R,G,le,ge){return this.service.drillDown(R,G,le,ge)},k.prototype.drillUp=function(R,G){return this.service.drillUp(R,G)},k.prototype.setDrillFilterOtherVisualsSetting=function(R){return this.service.setDrillFilterOtherVisualsSetting(R)},k.prototype.drillToDetails=function(R,G,le,ge,re,j){return this.service.drillToDetails(R,G,le,ge,re,j)},k.prototype.setAggregate=function(R,G,le,ge,re,j){return this.service.setAggregate(R,G,le,ge,re,j)},k.prototype.setPercentOfGrandTotal=function(R,G,le,ge){return this.service.setPercentOfGrandTotal(R,G,le,ge)},k.prototype.removePercentOfGrandTotal=function(R,G,le,ge){return this.service.removePercentOfGrandTotal(R,G,le,ge)},k.prototype.setPercentOfRoleTotal=function(R,G,le,ge,re){return this.service.setPercentOfRoleTotal(R,G,le,ge,re)},k.prototype.removePercentOfRoleTotal=function(R,G,le,ge){return this.service.removePercentOfRoleTotal(R,G,le,ge)},k.prototype.setVariation=function(R,G,le,ge,re,j){return this.service.setVariation(R,G,le,ge,re,j)},k.prototype.removeAggregate=function(R,G,le,ge,re){return this.service.removeAggregate(R,G,le,ge,re)},k.prototype.toggleShowAll=function(R,G){return this.service.toggleShowAll(R,G)},k.prototype.createVisualContainerConfig=function(R,G,le){return this.service.createVisualContainerConfig(R,G,le)},k.prototype.addVisualContainerImageFromData=function(R,G,le){return this.service.addVisualContainerImageFromData(R,G,le)},k.prototype.addVisualContainerImage=function(R,G){return this.service.addVisualContainerImage(R,G)},k.prototype.addVisualContainerBasicShapeVisual=function(R,G){return this.service.addVisualContainerBasicShapeVisual(R,G)},k.prototype.addVisualContainerShapeVisual=function(R,G){return this.service.addVisualContainerShapeVisual(R,G)},k.prototype.addVisualContainerActionButtonVisual=function(R,G){return this.service.addVisualContainerActionButtonVisual(R,G)},k.prototype.addVisualContainerNavigatorVisual=function(R,G){return this.service.addVisualContainerNavigatorVisual(R,G)},k.prototype.addVisualContainer=function(R,G,le,ge,re,j){return this.service.addVisualContainer(R,G,le,ge,re,j)},k.prototype.addEmptyVisualContainer=function(R,G,le,ge,re,j){return this.service.addEmptyVisualContainer(R,G,le,ge,re,j)},k.prototype.addVisualContainerFromConfig=function(R,G,le,ge,re,j){return this.service.addVisualContainerFromConfig(R,G,le,ge,re,j)},k.prototype.groupVisualContainers=function(R,G){return this.service.groupVisualContainers(R,G)},k.prototype.ungroupVisualContainers=function(R,G){return this.service.ungroupVisualContainers(R,G)},k.prototype.moveCanvasItemsInTree=function(R,G,le,ge,re){return this.service.moveCanvasItemsInTree(R,G,le,ge,re)},k.prototype.createVisualFilters=function(R,G,le,ge){return this.service.createVisualFilters(R,G,le,ge)},k.prototype.setFilterSortType=function(R,G,le){return this.service.setFilterSortType(R,G,le)},k.prototype.moveFilter=function(R,G,le,ge){return this.service.moveFilter(R,G,le,ge)},k.prototype.addFilter=function(R,G,le,ge,re,j){return this.service.addFilter(R,G,le,ge,re,j)},k.prototype.addFilterContainers=function(R,G){return this.service.addFilterContainers(R,G)},k.prototype.removeFilter=function(R,G,le,ge){return this.service.removeFilter(R,G,le,ge)},k.prototype.createFilterVisualContainerConfig=function(R,G,le,ge){return void 0===ge&&(ge=!0),this.service.createFilterVisualContainerConfig(R,G,le,ge)},k.prototype.convert=function(R,G,le,ge,re,j,ie){return this.service.convert(R,G,le,ge,re,j,ie)},k.prototype.setOrderBy=function(R,G){return this.service.setOrderBy(R,G)},k.prototype.removeOrderBy=function(R,G,le){return this.service.removeOrderBy(R,G,le)},k.prototype.addProperty=function(R,G,le,ge){return this.service.addProperty(R,G,le,ge)},k.prototype.removeProperty=function(R,G,le){return this.service.removeProperty(R,G,le)},k.prototype.deleteVisualRelationships=function(R,G){return this.service.deleteVisualRelationships(R,G)},k.prototype.setVisualRelationship=function(R,G,le,ge){return this.service.setVisualRelationship(R,G,le,ge)},k.prototype.persistProperties=function(R,G,le){return this.service.persistProperties(R,G,le)},k.prototype.persistVCProperties=function(R,G){return this.service.persistVCProperties(R,G)},k.prototype.setVisibility=function(R,G,le){return this.service.setVisibility(R,G,le)},k.prototype.setZIndex=function(R,G){return this.service.setZIndex(R,G)},k.prototype.setVisualContainerGroupVisibility=function(R,G,le){this.service.setVisualContainerGroupVisibility(R,G,le)},k.prototype.setVisualContainerGroupDisplayName=function(R,G){this.service.setVisualContainerGroupDisplayName(R,G)},k.prototype.setTabOrder=function(R,G){return this.service.setTabOrder(R,G)},k.prototype.toggleSlicerVisualSearch=function(R,G,le){return this.service.toggleSlicerVisualSearch(R,G,le)},k.prototype.notifyVisualContainers=function(R,G,le,ge,re){return this.service.notifyVisualContainers(R,G,le,ge,re)},k.prototype.notifyVisualContainerGroups=function(R){return this.service.notifyVisualContainerGroups(R)},k.prototype.clearCrossHighlightsForGroup=function(R,G,le){return this.service.clearCrossHighlightsForGroup(R,G,le)},k.prototype.updateContainerListOrders=function(R,G,le){return this.service.updateContainerListOrders(R,G,le)},k.prototype.buildVisualContainerFromConfig=function(R,G,le){return this.service.buildVisualContainerFromConfig(R,G,le)},k.prototype.assignSyncGroup=function(R,G){this.service.assignSyncGroup(R,G)},k.prototype.clearSyncGroup=function(R){this.service.clearSyncGroup(R)},k.prototype.resolveParameters=function(R,G,le){return this.service.resolveParameters(R,G,le)},k.prototype.setDisplayNameAlias=function(R,G,le,ge){return this.service.setDisplayNameAlias(R,G,le,ge)},k.\u0275fac=function(G){return new(G||k)(n.\u0275\u0275inject(f.D),n.\u0275\u0275inject(i.f),n.\u0275\u0275inject(M.O),n.\u0275\u0275inject(V.r),n.\u0275\u0275inject(w.y0),n.\u0275\u0275inject(E.z),n.\u0275\u0275inject(I.z),n.\u0275\u0275inject(d.q),n.\u0275\u0275inject(P.L),n.\u0275\u0275inject(y.J),n.\u0275\u0275inject(T.vZ),n.\u0275\u0275inject(b.K),n.\u0275\u0275inject(a.s),n.\u0275\u0275inject(o.s),n.\u0275\u0275inject(l.v),n.\u0275\u0275inject(s.r),n.\u0275\u0275inject(v.C),n.\u0275\u0275inject(c.j),n.\u0275\u0275inject(g.F),n.\u0275\u0275inject(r.o),n.\u0275\u0275inject(u.kc),n.\u0275\u0275inject(C.U),n.\u0275\u0275inject(F.U),n.\u0275\u0275inject(O.s),n.\u0275\u0275inject(x.Q),n.\u0275\u0275inject(A.g),n.\u0275\u0275inject(e.e,8))},k.\u0275prov=n.\u0275\u0275defineInjectable({token:k,factory:k.\u0275fac}),k}()},59804:function(Ee,ne,t){t.d(ne,{$:function(){return se}});var e=t(40582),n=t(27367),f=t(62710),i=t(76430),M=t(80815),E=t(38942),I=t(4486),d=t(59116),P=t(47051),y=t(59886),b=t(71367),a=t(23246),o=t(7078),l=t(10883),s=t(95781),c=t(40629),O=t(48478),x=t(78226),V=t(4714),w=t(44627),T=powerbi.visuals.ActionButtonType,v=powerbi.explore.contracts,g=powerbi.data,r=powerbi.data.DataViewObjectDefinitions,u=powerbi.explore.services.events,C=powerbi.explore.FilterUtils,F=powerbi.ItemGroupingManager,A=powerbi.explore.util.ParameterAddingBehavior,W=powerbi.visuals.plugins,k=powerbi.explore.PodUtils,R=powerbi.explore.services.selectionUtils,G=powerbi.data.SemanticFilter,le=g.SQExpr,ge=g.SQExprBuilder,re=powerbi.telemetry,j=powerbi.explore.util,ie=powerbi.explore.viewModels,Z=powerbi.explore.util.VisualContainerUtils,fe=powerbi.explore.contracts.VisualLink,Q={x:0,y:0,width:100,height:40};function J(oe,K){return!!oe&&!!K&&K.container===oe&&0===K.scopeType}var se=function(oe){function K(D,p,h,m,S,N,ce,he,Ce,me,Ze,Je,it,Te,ue,ve,Me){void 0===Me&&(Me=new n.I);var we=oe.call(this)||this;return we.visualPluginService=D,we.conceptualSchemaProxy=p,we.contextActivityService=h,we.telemetryService=m,we.explorationNavigationService=S,we.selectionService=N,we.eventBridge=ce,we.undoRedoService=he,we.featureSwitchService=Ce,we.filterGenerator=me,we.viewModeState=Ze,we.dataSource=Je,we.layoutAuthoring=it,we.visualAuthoringOperations=Te,we.visualSyncService=ue,we.lazyScoped=ve,we.linguisticSchemaProxy=Me,we}return(0,e.ZT)(K,oe),K.prototype.addFieldToVisual=function(D,p,h,m){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var S,N=this;return(0,e.Jh)(this,function(ce){switch(ce.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return S=ce.sent(),[2,this.registerUndoableAction(p,function(he){return N.runVisualContainerUpdateAction(function(Ze){return N.visualAuthoringOperations.addFieldToVisual(he,D,Ze,S,m)},[h])},"AddFieldToVisual")]}})})},K.prototype.addFieldInRole=function(D,p,h,m,S,N,ce){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var he,Ce=this;return(0,e.Jh)(this,function(me){switch(me.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return he=me.sent(),[2,this.registerUndoableAction(h,function(Ze){return Ce.runVisualContainerUpdateAction(function(Te){return Ce.visualAuthoringOperations.addFieldInRole(Ze,D,p,Te,S,N,ce,A.Default,he)},[m])},"AddFieldInRole")]}})})},K.prototype.resolveParameters=function(D,p,h){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var m,N=this;return(0,e.Jh)(this,function(ce){switch(ce.label){case 0:return[4,this.getSchema(D)];case 1:return m=ce.sent(),[2,this.runVisualContainerUpdateAction(function(Ce){return N.visualAuthoringOperations.resolveParameters(m,Ce,h)},[p])]}})})},K.prototype.updateVisualCalculation=function(D,p,h,m,S){var N=this;return this.undoRedoService.register("UpdateVisualCalculation",function(){return N.runVisualContainerUpdateAction(function(Ce){var me=N.visualAuthoringOperations.updateVisualCalculation(Ce,p,h,m,S);return me&&N.raiseVisualContainerChanged(Ce),me},[D])})},K.prototype.expandHierarchy=function(D,p,h,m,S){var N=this;return this.registerUndoableAction(D,function(ce){return N.runVisualContainerUpdateAction(function(me){return N.visualAuthoringOperations.expandHierarchy(ce,me,h,m,S)},[p])},"ExpandHierarchy")},K.prototype.removeFieldFromAllRoles=function(D,p){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var h,m=this;return(0,e.Jh)(this,function(S){switch(S.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return h=S.sent(),[2,this.registerUndoableAction(D,function(N){var he=R.getSelectedVisualContainers(m.selectionService);return m.runVisualContainerUpdateAction(function(me){return m.visualAuthoringOperations.removeFieldFromAllRoles(p,N,h,[me])},he)},"RemoveFieldFromAllRoles")]}})})},K.prototype.removeFieldFromRole=function(D,p){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var h,m=this;return(0,e.Jh)(this,function(S){switch(S.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return h=S.sent(),[2,this.undoRedoService.register("RemoveFieldFromRole",function(){var ce=R.getSelectedVisual(m.selectionService);return m.runVisualContainerUpdateAction(function(Ce){return m.visualAuthoringOperations.removeFieldFromRole(D,p,Ce,h)},[ce])})]}})})},K.prototype.removeInvalidExpressions=function(D,p){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var h,m=this;return(0,e.Jh)(this,function(S){switch(S.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return h=S.sent(),[2,this.registerUndoableAction(p,function(N){return m.visualAuthoringOperations.removeInvalidExpressions(N,D,h)},"RemoveInvalidExpressions")]}})})},K.prototype.moveField=function(D,p,h,m,S,N){var ce=this;return this.registerUndoableAction(N,function(he){var me=R.getSelectedVisual(ce.selectionService);return ce.runVisualContainerUpdateAction(function(Je){return ce.visualAuthoringOperations.moveField(he,D,p,h,m,S,Je)},[me])},"MoveField")},K.prototype.drillDownLevel=function(D,p,h){var m=this;this.undoRedoService.register("DrillDownLevel",function(){return m.visualAuthoringOperations.drillDownLevel(D,p,h)})},K.prototype.replaceField=function(D,p,h,m,S,N){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var ce,he=this;return(0,e.Jh)(this,function(Ce){switch(Ce.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return ce=Ce.sent(),[2,this.registerUndoableAction(S,function(me){return he.runVisualContainerUpdateAction(function(it){return he.visualAuthoringOperations.replaceField(me,D,p,h,it,N,ce)},[m])},"ReplaceField")]}})})},K.prototype.drillDown=function(D,p,h,m){var S=this;return this.registerUndoableAction(h,function(N){return S.visualAuthoringOperations.drillDown(N,D,p,m)},"DrillDown")},K.prototype.drillUp=function(D,p){var h=this;this.undoRedoService.register("DrillUp",function(){return h.visualAuthoringOperations.drillUp(D,p)})},K.prototype.toggleDrillFilterOtherVisualsSetting=function(){var D=this,p=R.getSelectedVisual(this.selectionService);if(p){var h=!p.drillFilterOtherVisuals;this.undoRedoService.register("SetDrillFilterOtherVisualsSetting",function(){return D.visualAuthoringOperations.setDrillFilterOtherVisualsSetting(h)})}},K.prototype.setDrillFilterOtherVisualsSetting=function(D){var p=this;this.undoRedoService.register("SetDrillFilterOtherVisualsSetting",function(){return p.visualAuthoringOperations.setDrillFilterOtherVisualsSetting(D)})},K.prototype.setAggregate=function(D,p,h,m,S){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var N,ce=this;return(0,e.Jh)(this,function(he){switch(he.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return N=he.sent(),[2,this.registerUndoableAction(S,function(Ce){return ce.visualAuthoringOperations.setAggregate(Ce,D,p,h,m,N)},"SetAggregate")]}})})},K.prototype.removeAggregate=function(D,p,h,m){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var S,N=this;return(0,e.Jh)(this,function(ce){switch(ce.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return S=ce.sent(),[2,this.registerUndoableAction(m,function(he){return N.visualAuthoringOperations.removeAggregate(he,D,p,h,S)},"RemoveAggregate")]}})})},K.prototype.setPercentOfGrandTotal=function(D,p,h,m){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var S;return(0,e.Jh)(this,function(N){switch(N.label){case 0:return[4,this.getSchema(m)];case 1:return S=N.sent(),[2,this.visualAuthoringOperations.setPercentOfGrandTotal(S,D,p,h)]}})})},K.prototype.removePercentOfGrandTotal=function(D,p,h,m){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var S;return(0,e.Jh)(this,function(N){switch(N.label){case 0:return[4,this.getSchema(m)];case 1:return S=N.sent(),[2,this.visualAuthoringOperations.removePercentOfGrandTotal(S,D,p,h)]}})})},K.prototype.setPercentOfRoleTotal=function(D,p,h,m,S){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var N;return(0,e.Jh)(this,function(ce){switch(ce.label){case 0:return[4,this.getSchema(S)];case 1:return N=ce.sent(),[2,this.visualAuthoringOperations.setPercentOfRoleTotal(N,D,p,h,m)]}})})},K.prototype.removePercentOfRoleTotal=function(D,p,h,m){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var S;return(0,e.Jh)(this,function(N){switch(N.label){case 0:return[4,this.getSchema(m)];case 1:return S=N.sent(),[2,this.visualAuthoringOperations.removePercentOfRoleTotal(S,D,p,h)]}})})},K.prototype.toggleShowAll=function(D,p){var h=this;this.undoRedoService.register("ToggleShowAll",function(){h.visualAuthoringOperations.toggleShowAll(D,p)})},K.prototype.setVariation=function(D,p,h,m,S,N){var ce=this;return this.registerUndoableAction(D,function(he){return ce.runVisualContainerUpdateAction(function(Ze){return ce.visualAuthoringOperations.setVariation(he,Ze,h,m,S,N)},[p])},"SetVariation")},K.prototype.createVisualContainerConfig=function(D){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var p,h;return(0,e.Jh)(this,function(m){switch(m.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return p=m.sent(),[4,this.conceptualSchemaProxy.get(D.dataSources)];case 2:return h=m.sent(),[2,this.visualAuthoringOperations.createVisualContainerConfig(h,D,p)]}})})},K.prototype.addVisualContainerImage=function(D,p,h,m,S,N,ce){var he=this;this.undoRedoService.register("AddVisualContainerImage",function(){he.visualAuthoringOperations.addVisualContainerImageFromData({sections:D,exploreCanvas:p,position:ce},h,N),he.publishVisualContainerAddedEvent()})},K.prototype.addVisualContainerBasicShapeVisual=function(D,p,h){var m=this;this.undoRedoService.register("AddVisualContainerBasicShape",function(){m.visualAuthoringOperations.addVisualContainerBasicShapeVisual({sections:D,exploreCanvas:p,position:void 0},h),m.publishVisualContainerAddedEvent()})},K.prototype.addVisualContainerShapeVisual=function(D,p,h){var m=this;this.undoRedoService.register("AddVisualContainerShape",function(){m.visualAuthoringOperations.addVisualContainerShapeVisual({sections:D,exploreCanvas:p,position:void 0},h),m.publishVisualContainerAddedEvent()})},K.prototype.addVisualContainerActionButtonVisual=function(D,p,h){var m=this;this.undoRedoService.register("AddVisualContainerActionButton",function(){m.visualAuthoringOperations.addVisualContainerActionButtonVisual({sections:D,exploreCanvas:p,position:Q},h),m.publishVisualContainerAddedEvent()})},K.prototype.addVisualContainerNavigatorVisual=function(D,p,h){var m=this;this.undoRedoService.register("addVisualContainerNavigatorVisual_"+h,function(){var S=m.getNavigatorWidth(h);m.visualAuthoringOperations.addVisualContainerNavigatorVisual({sections:D,exploreCanvas:p,position:{x:0,y:0,width:S,height:50}},h),m.publishVisualContainerAddedEvent()})},K.prototype.addVisualContainerTextbox=function(D,p,h,m,S){return this.addEmptyVisualContainer(D,p,W&&W.textbox&&W.textbox.name,h,m,S)},K.prototype.addVisualContainer=function(D,p,h,m){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var S,N=this;return(0,e.Jh)(this,function(ce){switch(ce.label){case 0:return D.postProcessing=this.getPostProcessing(D.visualType,D.shouldSummarize),[4,this.getAuthoringVisualRecommendationInterop()];case 1:return S=ce.sent(),[2,this.registerUndoableAction(D.dataSources,function(he){var Ce=N.visualAuthoringOperations.addVisualContainer(he,D,p,h,S,m);return N.publishVisualContainerAddedEvent(Ce),Ce},"AddVisualContainer")]}})})},K.prototype.addVisualContainerFromConfig=function(D,p,h,m){var S=this;return this.undoRedoService.register("AddVisualContainerFromConfig",function(){var N=S.visualAuthoringOperations.addVisualContainerFromConfig(D,p,h,m);return S.publishVisualContainerAddedEvent(N),N})},K.prototype.addEmptyVisualContainer=function(D,p,h,m,S,N){var ce=this,he=this.getPostProcessing(h,S);return this.undoRedoService.register("AddEmptyVisualContainer",function(){var Ce=ce.visualAuthoringOperations.addEmptyVisualContainer(D,p,h,m,N,he);return ce.publishVisualContainerAddedEvent(Ce),Ce})},K.prototype.groupVisualContainers=function(D,p){var h=this;return this.undoRedoService.register("GroupVisualContainers",function(){return h.visualAuthoringOperations.groupVisualContainers(D,p)})},K.prototype.ungroupVisualContainers=function(D,p){var h=this;return this.undoRedoService.register("UngroupVisualContainers",function(){return h.visualAuthoringOperations.ungroupVisualContainers(D,p)})},K.prototype.moveCanvasItemsInTree=function(D,p,h,m,S){var N=this;return this.undoRedoService.register(S?"MergeCanvasItemContainers":"MoveCanvasItemContainersInTree",function(){return N.visualAuthoringOperations.moveCanvasItemsInTree(D,p,h,m,S)})},K.prototype.addConfigToCategoricalFilters=function(D,p,h,m){void 0===m&&(m=!0);var S=_.filter(D,function(Ce){return!Ce.isInvalid()&&Ce.canVisualize()});if(S)for(var N=0,ce=S;N<ce.length;N++)this.createFilterVisualContainerConfig(ce[N].contract,h,p,m)},K.prototype.createVisualFilters=function(D,p,h,m){return this.visualAuthoringOperations.createVisualFilters(D,p,h,m)},K.prototype.setFilterSortType=function(D,p,h){var m=this;return this.registerUndoableAction(D,function(S){return m.visualAuthoringOperations.setFilterSortType(S,p,h)},"setFilterSortType")},K.prototype.moveFilter=function(D,p,h,m){var S=this;return this.registerUndoableAction(D,function(N){return S.visualAuthoringOperations.moveFilter(N,p,h,m)},"moveFilter")},K.prototype.addFilter=function(D,p,h,m){var S=this;return this.registerUndoableAction(h,function(N){return S.visualAuthoringOperations.addFilter(N,D,p,h,!1,m)},"AddFilter")},K.prototype.addDrillthroughFilter=function(D,p,h){var m=this;return this.registerUndoableAction(h,function(S){var N=m.visualAuthoringOperations.addFilter(S,D,p,h,!0);if(!_.isEmpty(N)){var ce=m.explorationNavigationService.getCurrentSection(),he=m.explorationNavigationService.getAllSections();if(!m.shouldAddBackButton(ce))return N;var Ce=Q,me=m.explorationNavigationService.getCurrentExploreCanvas();return me&&m.visualAuthoringOperations.addVisualContainerActionButtonVisual({sections:he,exploreCanvas:me,position:Ce,select:!1},T.back),N}},"AddDrillthroughFilter")},K.prototype.shouldAddBackButton=function(D){if(!D)return!1;var h=D.type;return(this.featureSwitchService.featureSwitches.onObject?jsCommon.EnumExtensions.hasFlag(h,2):null==h||0===h)&&!this.hasBackButton(D)},K.prototype.runVisualContainerUpdateAction=function(D,p){if(_.isEmpty(p))return!1;for(var h=!1,m=[],S=0,N=p;S<N.length;S++){var ce=N[S];if(ce&&-1===_.indexOf(m,ce)&&D(ce)){m.push(ce);for(var he=0,Ce=this.visualSyncService.getVisualsAffectByFieldChanges(ce);he<Ce.length;he++){var me=Ce[he];D(me),m.push(me)}h=!0}}return h},K.prototype.publishVisualContainerAddedEvent=function(D){void 0===D&&(D=null),this.eventBridge.publishToChannel(u.VisualContainerAdded,D)},K.prototype.hasBackButton=function(D){return _.some(D.visualContainers,function(h){var N,m=g.DataViewObjectDefinitions.getObjectDefinition(h.config.singleVisual.vcObjects,"visualLink",void 0),S=m&&m.properties;return S&&(N={show:S.show&&S.show.value,bookmark:S.bookmark&&S.bookmark.value,type:S.type&&S.type.value}),N&&N.show&&fe.getType(N)===fe.Back})},K.prototype.removeFilter=function(D,p,h,m){var S=this;return this.undoRedoService.register("RemoveFilter",function(){var N=2===D.howCreated,ce=S.visualAuthoringOperations.removeFilter(D,p,h,m);return ce&&N&&J(p.container,p)&&S.updateCrossDrillFromVisualContainer(p.container),5===D.howCreated&&!D.isTransient&&(j.logDrillthroughFilterUpdateTelemetry(S.telemetryService,"Delete",p.container,h),k.isPodEnabled(D,p)),S.telemetryService.logChildEvent(h&&h.event,re.EXRemoveFilter,{filterType:j.getTelemetryFilterType(D.type),filterScopeType:j.getTelemetryFilterScopeType(p.scopeType),fieldKind:D.expression&&j.getTelemetryFieldKind(D.expression),viewMode:j.getTelemetryViewMode(S.viewModeState.getMode())}),ce})},K.prototype.clearFilter=function(D,p,h){var m=this;return this.undoRedoService.register("ClearFilter",function(){m.telemetryService.logChildEvent(h.event,re.EXClearFilter,{filterType:j.getTelemetryFilterType(p.type),filterScopeType:j.getTelemetryFilterScopeType(D.scopeType),fieldKind:j.getTelemetryFieldKind(p.expression),viewMode:j.getTelemetryViewMode(m.viewModeState.getMode())}),m.updateFilter(D,p,void 0)})},K.prototype.toggleFilterVisibility=function(D,p){var h=this;return this.undoRedoService.register("HideFilter",function(){h.telemetryService.logEvent(re.EXHideFilter,{filterType:j.getTelemetryFilterType(p.type),filterScopeType:j.getTelemetryFilterScopeType(D.scopeType),fieldKind:j.getTelemetryFieldKind(p.expression),isFilterHidden:p.isHiddenInViewMode}),p.isHiddenInViewMode=!p.isHiddenInViewMode,h.updateFilter(D,p,p.filter),C.ensureFilterHasName(p,D)})},K.prototype.toggleFilterLock=function(D,p){var h=this;return this.undoRedoService.register("lockFilter",function(){h.telemetryService.logEvent(re.EXLockFilter,{filterType:j.getTelemetryFilterType(p.type),filterScopeType:j.getTelemetryFilterScopeType(D.scopeType),fieldKind:j.getTelemetryFieldKind(p.expression),isFilterLocked:p.isLockedInViewMode}),p.isLockedInViewMode=!p.isLockedInViewMode,h.updateFilter(D,p,p.filter),C.ensureFilterHasName(p,D)})},K.prototype.renameFilter=function(D,p,h){var S,m=this;this.undoRedoService.register("renameFilter",function(){h?p.displayName=h:p&&delete p.displayName,m.updateFilter(D,p,p.filter),C.ensureFilterHasName(p,D)}),this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(S=C.createChangeFilterActivity(this.contextActivityService,"Rename Filer")),C.notifyFilterContainerChangedByUser(this.eventBridge,{filter:p,changeType:256,scope:D,changeFilterActivity:S}),S&&S.resolve()},K.prototype.updateFilter=function(D,p,h){var m=2===p.howCreated,S=p.filter;p.filter=h;var N=p.config&&p.config.singleVisual;if(N){var ce=this.visualPluginService.capabilities(N.visualType),he=this.filterGenerator.tryGetFilterPropertyIdentifier(ce);he&&(N.objects||(N.objects={}),null==h?r.deleteProperty(N.objects,he.objectName,null,he.propertyName):r.setValue(N.objects,he,null,h))}m&&!G.isSameFilter(S,h)&&J(D.container,D)&&this.updateCrossDrillFromVisualContainer(D.container);var Ce=D.container;null==Ce.filters&&(Ce.filters=[]),-1===_.indexOf(Ce.filters,p)&&Ce.filters.push(p)},K.prototype.updateTopNFilter=function(D,p,h,m,S,N){var he,Ce,ce=this;if(D){var me=Z.getVisualQuery(D);if(me){var Ze=me.defn.select();he=_.some(Ze,function(Te){return le.equals(Te.expr,p.fieldBeingFiltered,!0,!0)}),Ce=_.some(Ze,function(Te){return le.equals(Te.expr,p.orderByField,!0,!0)})}}var Je=this.telemetryService.startEvent(re.EXFilterPaneTopNFilterApplied,{isTop:p.isTop,itemCount:p.itemCount,atGrain:he,onVisualMeasure:Ce,viewMode:j.getTelemetryViewMode(this.viewModeState.getMode()),isInOutspacePane:S}),it=this.dataSource.get();return this.registerUndoableAction(it,function(Te){var ue=g.TopNFilterPattern.buildFilterFromParameters({fieldBeingFiltered:p.fieldBeingFiltered,isTop:p.isTop,itemCount:p.itemCount,orderByField:p.orderByField});return ce.updateFilter(h,m,ue),Je.resolve(),!0},"Apply TopN Filter",N)},K.prototype.createFilterVisualContainerConfig=function(D,p,h,m){return void 0===m&&(m=!0),this.visualAuthoringOperations.createFilterVisualContainerConfig(D,p,h,m)},K.prototype.raiseVisualContainerChanged=function(D,p){void 0===p&&(p="UserAction_EditVisual"),this.raiseVisualContainersChanged([D],p)},K.prototype.raiseVisualContainersChanged=function(D,p){void 0===p&&(p="UserAction_EditVisual"),this.eventBridge.publishToChannel(u.visualContainerChanged,{affectContainer:function(m){return _.some(D,function(S){return S===m})},sourceLabelKey:p})},K.prototype.raiseVisualContainerGroupChanged=function(D){this.raiseVisualContainerGroupsChanged([D])},K.prototype.raiseVisualContainerGroupsChanged=function(D){this.eventBridge.publishToChannel(u.visualContainerGroupChanged,{affectContainer:function(h){return _.includes(D,h)}})},K.prototype.raiseCanvasItemChanged=function(D,p){void 0===p&&(p="UserAction_EditVisual"),this.raiseCanvasItemsChanged([D],p)},K.prototype.raiseCanvasItemsChanged=function(D,p){void 0===p&&(p="UserAction_EditVisual");var h=[],m=[];v.traverseVisualContainerGroups(D,function(S){v.isVisualContainer(S)?h.push(S):m.push(S)}),_.isEmpty(h)||this.raiseVisualContainersChanged(h,p),_.isEmpty(m)||this.raiseVisualContainerGroupsChanged(m)},K.prototype.convert=function(D,p,h,m,S){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var N,ce=this;return(0,e.Jh)(this,function(he){switch(he.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return N=he.sent(),[2,this.registerUndoableAction(p,function(Ce){return ce.convertAction(Ce,D,h,N,m,S)},"VisualConversion")]}})})},K.prototype.convertMultiple=function(D,p,h,m){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var S,N=this;return(0,e.Jh)(this,function(ce){switch(ce.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return S=ce.sent(),[2,this.registerUndoableAction(p,function(he){return D.reduce(function(Ce,me){return N.convertAction(he,me,h,S,m)&&Ce},!0)},"MultipleVisualConversion")]}})})},K.prototype.convertAction=function(D,p,h,m,S,N){var ce,he;if(S){this.filterGenerator.clearFiltersFromVisualContainers(S,[p],"UserAction_EditVisual");var Ce=this.visualPluginService.getPlugin(h);(null==Ce?void 0:Ce.supportsSummarization)&&(ce=this.getSummarizationPostProcessing(),he=[_.cloneDeep(p)])}return this.visualAuthoringOperations.convert(D,p,h,m,he,ce,N)},K.prototype.setOrderBy=function(D,p){var h=D.config.singleVisual;h.query.orderBy(p),h.hasDefaultSort=!1,this.raiseVisualContainerChanged(D)},K.prototype.removeOrderBy=function(D,p){for(var h=0,m=p;h<m.length;h++)D.config.singleVisual.query.removeOrderBy(m[h]);this.raiseVisualContainerChanged(D)},K.prototype.setPropertyDefinition=function(D,p,h,m,S,N){var ce=this,he=function(){return void 0!==S&&(ce.visualAuthoringOperations.removeProperty(D,p,h),h=S),ce.visualAuthoringOperations.addProperty(D,p,h,m),ce.raiseVisualContainerChanged(D),!0};N?he():this.undoRedoService.register("Set Property",he)},K.prototype.removePropertyDefinition=function(D,p,h){var m=this;this.undoRedoService.register("Removing Property",function(){return m.visualAuthoringOperations.removeProperty(D,p,h),m.raiseVisualContainerChanged(D),!0})},K.prototype.addDataBars=function(D,p,h){var m=this;this.undoRedoService.register("Set Data Bars",function(){return m.visualAuthoringOperations.addProperty(D,p.propertyId,p.selector,h),m.raiseVisualContainerChanged(D),!0})},K.prototype.removeDataBars=function(D,p){var h=this;this.undoRedoService.register("Removing Data Bars",function(){return h.visualAuthoringOperations.removeProperty(D,p.propertyId,p.selector),h.raiseVisualContainerChanged(D),!0})},K.prototype.removeConditionalFormattingAll=function(D,p){var h=this;this.undoRedoService.register("Removing All Conditional Formatting",function(){if(!_.isEmpty(p))for(var m=0,S=p;m<S.length;m++){var N=S[m];h.visualAuthoringOperations.removeProperty(D,N.propertyId,N.selector)}return h.raiseVisualContainerChanged(D),!0})},K.prototype.persistProperties=function(D,p,h,m,S){var N=this,ce=_.isArray(D)?D:[D],he=p.config.singleVisual,Ce=function(){var Je=N.visualPluginService.capabilities(he.visualType),it=N.filterGenerator.tryGetFilterPropertyIdentifier(Je),Te=!1,ue=function($e,et,at,dt,Fe){it&&$e===it.objectName&&it.propertyName===at&&(Te=!0)},ve=_.reduce(ce,function(we,$e){return N.visualAuthoringOperations.persistProperties($e,he,ue)&&we},!0);return Te&&Z.notifyVisualContainersExceptSource(N.eventBridge,p,"UserAction_ChangeSlicer",m,S),ve?(N.visualSyncService.syncFilterState(p),ve):ve};return h?Ce():this.undoRedoService.register("VisualContainerPersistProperties",Ce)},K.prototype.persistVCProperties=function(D,p){var h=this,m=p.config.singleVisual;return this.undoRedoService.register("VisualContainerPersistVCProperties",function(){var ce=_.reduce(D,function(he,Ce){return h.visualAuthoringOperations.persistVCProperties(Ce,m)&&he},!0);return ce&&h.raiseVisualContainerChanged(p),ce})},K.prototype.deleteSelectedVisuals=function(D){for(var p=_.map(this.selectionService.getSelectedElements(),function(he){return he.canvasItem}),h=!1,m=0,S=p;m<S.length;m++){var N=S[m];N&&(h=this.deleteVisualContainerInternal(N,D)||h)}if(h){var ce=_.chain(p).filter(function(he){return v.isVisualContainer(he)}).map(function(he){return he}).value();this.notifyVisualContainersAndClearSelection(ce,D)}},K.prototype.deleteVisualContainer=function(D,p){this.deleteVisualContainerInternal(D,p)&&this.notifyVisualContainersAndClearSelection([D],p)},K.prototype.deleteVisualContainers=function(D,p){var h=this,m=p.sections.filter(function(N){return N.selected})[0],S=[];p.contract.sections.forEach(function(N){D.forEach(N.name===m.contract.name?function(ce){_.some(N.visualContainers,function(he){return he.config.singleVisual.visualType===ce.config.singleVisual.visualType})&&S.push(ce)}:function(ce){_.remove(N.visualContainers,function(he){return ce.config.singleVisual.visualType===he.config.singleVisual.visualType}),N.visualContainerGroups=F.removeBy(N.visualContainerGroups,function(he){return v.isVisualContainer(he)&&ce.config.singleVisual.visualType===he.config.singleVisual.visualType}),h.visualAuthoringOperations.deleteVisualRelationships(N,ce)})}),S.length>0&&(S.forEach(function(N){h.deleteVisualContainer(N,p.exploreCanvas)}),this.notifyVisualContainersAndClearSelection(S,p.exploreCanvas))},K.prototype.deleteVisualRelationships=function(D,p){this.visualAuthoringOperations.deleteVisualRelationships(D,p)},K.prototype.setVisualRelationship=function(D,p,h,m){var S=this;this.undoRedoService.register("SetVisualRelationship",function(){return S.visualAuthoringOperations.setVisualRelationship(D,p,h,m)})},K.prototype.setDisplayNameAlias=function(D,p,h,m){var S=this;this.undoRedoService.register("SetDisplayNameAlias",function(){S.visualAuthoringOperations.setDisplayNameAlias(D,p,h,m),S.raiseVisualContainerChanged(D)})},K.prototype.setLinkFieldAsAggregation=function(D,p,h){var m=this;this.undoRedoService.register("Set Link As Aggregation",function(){if(k.isPodEnabled(D,p)){var S=m.explorationNavigationService.getCurrentExploration(),N=p.container;null!=S&&null!=N&&(k.updateParameter(S,N.name,D.name,h),m.eventBridge.publishToChannel(u.podParameterChanged,{filter:D,filterName:D.name,type:2,asAggregation:h}))}})},K.prototype.setRequireSingleSelection=function(D,p,h){var m=D.objects,S="requireSingleSelect",N="general";if(m||(D.objects=m={}),h?r.setValue(m,{objectName:N,propertyName:S},null,ge.boolean(h)):r.deleteProperty(m,N,null,S),k.isPodEnabled(D,p)){var ce=this.explorationNavigationService.getCurrentExploration(),he=p.container;null!=ce&&null!=he&&this.updatePodParameter(D,ce,he,h)}},K.prototype.updatePodParameter=function(D,p,h,m){var S;m?5===D.howCreated||k.hasParameter(p,h.name,D.name)||(k.addParameter(p,h.name,D.name,D.expression,(S={filterName:D.name,type:0,isCausedByCode:!1,fieldExpr:D.expression,asAggregation:!1,isLegacySingleSelection:!0}).asAggregation,!0,k.determineType(h,this.featureSwitchService.featureSwitches.onObject)),this.eventBridge.publishToChannel(u.podParameterChanged,S)):(k.deleteParameter(p,h.name,D.name,this.linguisticSchemaProxy),this.eventBridge.publishToChannel(u.podParameterChanged,S={filterName:D.name,type:1}))},K.prototype.setVisibility=function(D,p,h){var m=this;this.undoRedoService.register("Set Visual Containers Visibility",function(){for(var S=0,N=p;S<N.length;S++)m.visualAuthoringOperations.setVisibility(N[S],D,h);m.visualAuthoringOperations.notifyVisualContainers(p),m.eventBridge.publishToChannel(u.canvasItemHiddenChanged,{changedItems:p})})},K.prototype.setVisualContainerGroupVisibility=function(D,p,h){var m=this;this.undoRedoService.register("Set Visual Container Group Visibility",function(){for(var N=0,ce=p;N<ce.length;N++)m.visualAuthoringOperations.setVisualContainerGroupVisibility(ce[N],D,h)}),this.raiseVisualContainerGroupsChanged(p),this.eventBridge.publishToChannel(u.canvasItemHiddenChanged,{changedItems:p})},K.prototype.setVisualContainerGroupDisplayName=function(D,p){var h=this;this.undoRedoService.register("Set Visual Container Group DisplayName",function(){for(var m=0,S=p;m<S.length;m++)h.visualAuthoringOperations.setVisualContainerGroupDisplayName(S[m],D)}),this.raiseVisualContainerGroupsChanged(p)},K.prototype.setPresentationChangesApplied=function(D){var p=this;return this.undoRedoService.register("setApplyPresentationChanges",function(){var m=R.getSelectedVisual(p.selectionService);return p.runVisualContainerUpdateAction(function(N){return N.config.singleVisual.presentationChangesApplied=D},[m])})},K.prototype.updateContainerListOrders=function(D,p,h){var m=this;this.undoRedoService.register("Update Visual Containers for "+h,function(){m.visualAuthoringOperations.updateContainerListOrders(D,p,h)})},K.prototype.applyShowValueAs=function(D,p,h){var m=this;return this.registerUndoableAction(D.dataSources,function(S){if(m.removeShowValueAs(S,D,p))switch(h.kind){case void 0:return!0;case 0:return m.visualAuthoringOperations.setPercentOfGrandTotal(S,D.visualDataRole.name,D.roleIndex,D.visual);case 1:return m.visualAuthoringOperations.setPercentOfRoleTotal(S,h.roles,D.visualDataRole.name,D.roleIndex,D.visual);default:return!1}},"applying quick calc ")},K.prototype.toggleSlicerVisualSearch=function(D,p,h){var m=this;this.undoRedoService.register("ToggleSearchVisualContainer",function(){m.visualAuthoringOperations.toggleSlicerVisualSearch(D,p,h)&&m.raiseVisualContainerChanged(D)})},K.prototype.switchQueryParameter=function(D,p,h){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var m,S=this;return(0,e.Jh)(this,function(N){switch(N.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return m=N.sent(),[2,this.undoRedoService.register("switchQueryParameter",function(){var he=R.getSelectedVisual(S.selectionService);return S.runVisualContainerUpdateAction(function(me){return S.visualAuthoringOperations.switchQueryParameter(D,me,p,h,m)},[he])})]}})})},K.prototype.removeShowValueAs=function(D,p,h){switch(h.kind){case void 0:return!0;case 0:return this.visualAuthoringOperations.removePercentOfGrandTotal(D,p.visualDataRole.name,p.roleIndex,p.visual);case 1:return this.visualAuthoringOperations.removePercentOfRoleTotal(D,p.visualDataRole.name,p.roleIndex,p.visual);default:return!1}},K.prototype.registerUndoableAction=function(D,p,h,m){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var S;return(0,e.Jh)(this,function(N){switch(N.label){case 0:return[4,this.getSchema(D)];case 1:return S=N.sent(),[2,this.undoRedoService.register(h,function(){return p(S)},m)]}})})},K.prototype.getSchema=function(D){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(p){return[2,this.conceptualSchemaProxy.get(D)]})})},K.prototype.getAuthoringVisualRecommendationInterop=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(D){switch(D.label){case 0:return[4,this.lazyScoped.get("authoringVisualRecommendationInterop")];case 1:return[2,D.sent()]}})})},K.prototype.notifyVisualContainersAndClearSelection=function(D,p){this.filterGenerator.clearFiltersFromVisualContainers(p.contract,D,"UserAction_EditVisual"),this.selectionService.clearSelection()},K.prototype.deleteVisualContainerInternal=function(D,p,h){if(void 0===h&&(h=!1),D){var m=F.find(D.name,p.visualContainerGroups);if(m){var S=p.contract;if(v.isVisualContainer(D)&&ie.isVisualContainer(m)){this.visualAuthoringOperations.deleteVisualRelationships(p.contract,D);var N=p.visualContainers.indexOf(m);p.visualContainers.splice(N,1);var ce=S.visualContainers.indexOf(D);S.visualContainers.splice(ce,1)}else if(v.isVisualContainerGroup(D))for(var he=0,Ce=D.children;he<Ce.length;he++)this.deleteVisualContainerInternal(Ce[he],p,!0);if(!h){S.visualContainerGroups=F.remove(D,S.visualContainerGroups),p.visualContainerGroups=F.remove(m,p.visualContainerGroups),j.CanvasVisualsUtility.syncCanvasItemViewModelsWithContracts(p.visualContainerGroups,S.visualContainerGroups);var Ze=m.parentGroup&&F.find(m.parentGroup.name,p.visualContainerGroups);Ze&&ie.isVisualContainerGroup(Ze)&&this.layoutAuthoring.removeCanvasItemFromGroup(Ze,m)}return!0}}},K.prototype.updateCrossDrillFromVisualContainer=function(D){var p=this.explorationNavigationService.getCurrentExploration(),h=_.find(p.sections,function(m){return _.includes(m.visualContainers,D)});h&&this.filterGenerator.updateCrossFilterOnDrill(h,D)},K.prototype.getPostProcessing=function(D,p){var h;if(p){var m=this.visualPluginService.getPlugin(D);m&&m.supportsSummarization&&(h=this.getSummarizationPostProcessing())}return h},K.prototype.getSummarizationPostProcessing=function(){var D=this;return function(p){return(0,e.mG)(D,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(m){switch(m.label){case 0:return[4,this.lazyScoped.get("smartNarrativesSummarization")];case 1:return[4,m.sent().generateSummaries(p.outputVisualContainer,p.selectedVisualContainers)];case 2:return m.sent(),[2]}})})}},K.prototype.getNavigatorWidth=function(D){return"page"===D?Math.min(Math.max(200,200*this.explorationNavigationService.getAllSections().length),1e3):"bookmark"===D?600:void 0},K.\u0275fac=function(p){return new(p||K)(i.\u0275\u0275inject(M.D),i.\u0275\u0275inject(E.i),i.\u0275\u0275inject(I.r),i.\u0275\u0275inject(d.y0),i.\u0275\u0275inject(P.I),i.\u0275\u0275inject(y.z),i.\u0275\u0275inject(b.J),i.\u0275\u0275inject(a.z),i.\u0275\u0275inject(s.vZ),i.\u0275\u0275inject(o.r),i.\u0275\u0275inject(c.kc),i.\u0275\u0275inject(l.D),i.\u0275\u0275inject(O.U),i.\u0275\u0275inject(x.Q),i.\u0275\u0275inject(V.M),i.\u0275\u0275inject(w.H),i.\u0275\u0275inject(n.e,8))},K.\u0275prov=i.\u0275\u0275defineInjectable({token:K,factory:K.\u0275fac}),K}(f.t)},5480:function(Ee,ne,t){t.d(ne,{w:function(){return I}});var e=t(76430),n=t(23580),f=t(66075),i=t(30224),M=t(40629),E=powerbi.explore.SectionUtils,I=function(){function d(P,y,b,a){this.explorationCapabilities=P,this.explorationNavigation=y,this.pinVisualService=b,this.viewModeState=a}return d.prototype.showCopyVisualImageOption=function(P,y,b){return this.explorationCapabilities.getCapabilities().showCopyVisualImageButton&&!!P.contract.config.singleVisual.query&&!P.errorInfo&&this.pinVisualService.canPin(P)&&!E.isQuickExploreSection(y)&&this.getCopySource(b)},d.prototype.getActiveSection=function(){var P=this.explorationNavigation.getCurrentExploration();return P.sections[P.activeSectionIndex]},d.prototype.getCopySource=function(P){switch(P){case"ContextMenu":return this.explorationCapabilities.getCapabilities().showCopyImageContextMenuOptions;case"VisualHeader":return 0===this.viewModeState.getMode();default:return!1}},d.\u0275fac=function(y){return new(y||d)(e.\u0275\u0275inject(n.U),e.\u0275\u0275inject(f.z),e.\u0275\u0275inject(i.k),e.\u0275\u0275inject(M.kc))},d.\u0275prov=e.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}()},23832:function(Ee,ne,t){t.d(ne,{s:function(){return T}});var e=t(40582),n=t(8576),f=t(76430),i=t(19156),M=t(38942),E=t(10883),I=t(71367),d=t(59886),P=t(73143),y=t(95781),b=t(60660),a=t(18237),o=t(51460),l=t(59804),s=t(63724),c=powerbi.explore.services.events,O=powerbi.explore.util.ErrorDetailsUtility,x=powerbi.data.SQExprUtils,V=jsCommon.TraceType,T=function(){function g(r,u,C,F,A,W,k,R,G,le,ge,re,j){this.aggrOps=r,this.commandStore=u,this.conceptualSchemaProxy=C,this.dataSources=F,this.errorService=A,this.eventBridge=W,this.featureSwitchService=k,this.localizationService=R,this.dialogService=G,this.selection=le,this.telemetryService=ge,this.visualAuthoring=re,this.pauseQueriesService=j,this.services={aggrOps:this.aggrOps,commandStore:this.commandStore,conceptualSchemaProxy:this.conceptualSchemaProxy,dataSources:this.dataSources,errorService:this.errorService,eventBridge:this.eventBridge,featureSwitchService:this.featureSwitchService,localizationService:this.localizationService,dialogService:this.dialogService,selection:this.selection,telemetryService:this.telemetryService,visualAuthoring:this.visualAuthoring,pauseQueriesService:this.pauseQueriesService}}return g.prototype.create=function(r,u,C){return new v(r,u,C,this.services)},g.\u0275fac=function(u){return new(u||g)(f.\u0275\u0275inject(i.C),f.\u0275\u0275inject(n.D),f.\u0275\u0275inject(M.i),f.\u0275\u0275inject(E.D),f.\u0275\u0275inject(P.T),f.\u0275\u0275inject(I.J),f.\u0275\u0275inject(y.vZ),f.\u0275\u0275inject(b.o),f.\u0275\u0275inject(a.x),f.\u0275\u0275inject(d.z),f.\u0275\u0275inject(o.y0),f.\u0275\u0275inject(l.$),f.\u0275\u0275inject(s.F))},g.\u0275prov=f.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac}),g}(),v=function(){function g(r,u,C,F){this.viewModel=r,this.getVisualType=u,this.getVisualContract=C,this.services=F}return g.prototype.showErrorDetails=function(){var r,u=this.viewModel;if(u.errorInfo){var C=!(null===(r=u.errorInfo.details)||void 0===r?void 0:r.hideDebugInfo);this.logErrorAndShowDialog(u.errorInfo,this.getVisualType(),"User"!==u.errorInfo.source,C)}},g.prototype.showWarningDetails=function(){var r=this.viewModel,u={details:r.warningInfo?r.warningInfo.details:r.customVisualDeprecatedWarningInfo.details,code:r.warningInfo?r.warningInfo.code:r.customVisualDeprecatedWarningInfo.code,fixableError:0},C=!u.details.hideDebugInfo;this.logErrorAndShowDialog(u,this.getVisualType(),!1,C)},g.prototype.showTransformWarningDetails=function(){var r=this.viewModel;this.logErrorAndShowDialog({details:r.transformWarningInfo.details,code:r.transformWarningInfo.code,fixableError:0},this.getVisualType(),!1,!0)},g.prototype.showInfoDetails=function(){var r=this.viewModel;r.versionsInfo||this.logErrorAndShowDialog({details:r.visualInfo.details,code:r.visualInfo.code,fixableError:0},this.getVisualType(),!1,!1)},g.prototype.showPauseVisualWarning=function(){this.viewModel.visualPausedWarning={iconName:"pbi-glyph-info",bannerType:0,iconTooltip:this.services.localizationService.get("Paused_Visual_Pending_Status"),buttonText:this.services.localizationService.get("Refresh"),buttonTooltip:this.services.localizationService.get("Refresh"),buttonIcon:"refresh",allowDismiss:!1}},g.prototype.clearError=function(){var r=this.viewModel;r.errorInfo=void 0,r.warningInfo=void 0,r.transformWarningInfo=void 0,r.visualInfo=void 0,r.visualPausedWarning=void 0},g.prototype.showErrorOverlay=function(r,u,C,F){var A=this.viewModel,W=this.getVisualType(),k=this.getVisualContract();if(this.services.telemetryService.logEvent(powerbi.telemetry.VisualError,{errorCode:u,targetVisualType:W,visualName:k.name,message:r.message}),!A.errorInfo||A.errorInfo.code!==u){var R=O.getErrorOverlayType(u),G=O.shouldHideSeeDetails(u),le=this.services.conceptualSchemaProxy.getLatestCapabilities(this.services.dataSources.get(),void 0),ge=this.getFixableErrorKind(u,this.services.featureSwitchService.featureSwitches.enableTableToTableRelationship&&le&&le.canEdit);if(7===ge)return void this.showPauseVisualWarning();A.errorInfo={details:r,code:u,fixableError:ge,hideSeeDetails:G,overlayType:R,requestId:C,source:F}}},g.prototype.showWarningIcon=function(r,u){var C=this.viewModel,F=this.getVisualType();this.logVisualWarning(F,u,r.message),!C.warningInfo&&(C.warningInfo={details:r,code:u})},g.prototype.showDeprecationWarning=function(){var r=this.viewModel,u=powerbi.common.getLocalize().get("CustomVisuals_DeprecatedMessageWarningKey"),C=powerbi.common.getLocalize().get("CustomVisuals_DeprecatedMessageWarningValue"),F={message:powerbi.common.getLocalize().get("CustomVisuals_DeprecatedMessage"),displayableErrorInfo:[{errorInfoKey:u,errorInfoValue:C}],hideAdditionalErrorInfo:!0};r.customVisualDeprecatedWarningInfo={details:F,code:"CustomVisuals_DeprecatedMessage"}},g.prototype.clearDeprecationWarning=function(){this.viewModel.customVisualDeprecatedWarningInfo=void 0},g.prototype.showTransformWarningIcon=function(r,u,C){var F=this.viewModel,A=this.getVisualType(),W=C?u.concat("|").concat("Sampled"):u;this.logVisualWarning(A,W,r.message),!F.transformWarningInfo&&(F.transformWarningInfo={details:r,code:u})},g.prototype.showInfoIcon=function(r,u){var C=this.viewModel,F=this.getVisualType();this.logVisualWarning(F,u,r.message),!C.visualInfo&&(C.visualInfo={details:r,code:u})},g.prototype.showPublicVersionsInfo=function(r,u){var C=this.viewModel;if(!C.visualInfo&&!C.versionsInfo&&r&&u){var F=this.services.localizationService.format("CustomVisuals_VersionIsNotUpdatedMessage",[r,u]);C.versionsInfo={details:{message:F,displayableErrorInfo:void 0,hideAdditionalErrorInfo:!0},code:F}}},g.prototype.clearPublicVersionsInfo=function(){this.viewModel.versionsInfo=void 0},g.prototype.fixErrors=function(){return(0,e.mG)(this,void 0,void 0,function(){var r,u,F,A;return(0,e.Jh)(this,function(W){switch(W.label){case 0:switch(r=this.viewModel,u=this.getVisualContract(),r.errorInfo.fixableError){case 1:return[3,1];case 2:return[3,2];case 3:return[3,3];case 4:return[3,4];case 5:return[3,5];case 6:return[3,6];case 7:case 0:return[3,9]}return[3,10];case 1:return powerbi.explore.services.selectionUtils.selectCanvasItem(u,this.services.selection),this.services.visualAuthoring.removeInvalidExpressions(u,this.services.dataSources.get()),[3,11];case 2:return F=x.getActiveTablesNames(u.config.singleVisual.query.defn),this.services.eventBridge.publishToChannel(c.missingTableRelationship,{tables:F}),[3,11];case 3:return this.removeBrokenFilters(),[3,11];case 4:return this.services.eventBridge.publishToChannel(c.showEnableScriptVisualsDialog,0),[3,11];case 5:return this.services.eventBridge.publishToChannel(c.showEnableScriptVisualsDialog,1),[3,11];case 6:return[4,(A=this.services.commandStore.DataImport.ShowDataSourceSettingsDialog).canExecuteAsync()];case 7:return W.sent()?[4,A.execute()]:[3,9];case 8:W.sent(),W.label=9;case 9:return[3,11];case 10:W.label=11;case 11:return[2]}})})},g.prototype.clearWarning=function(r){var u=this.viewModel;u.warningInfo&&u.warningInfo.code===r&&(u.warningInfo=void 0)},g.prototype.clearPausedVisualWarning=function(){this.viewModel.visualPausedWarning=void 0},g.prototype.removeBrokenFilters=function(){var r=this,u=this.getVisualContract(),C=u.filters,F={scopeType:0,container:u};this.services.conceptualSchemaProxy.get(this.services.dataSources.get()).then(function(A){for(var W=0,k=C;W<k.length;W++){var R=k[W];R.filter&&!_.isEmpty(R.filter.validate(A,r.services.aggrOps))&&r.services.visualAuthoring.removeFilter(R,F,void 0,void 0)}})},g.prototype.generateShowMoreErrorDetails=function(r){var u=[],C=r.message,F=powerbi.common.getLocalize().get("ServiceError_CannotLoadVisual");if(O.hasAdditionalErrorInfo(r)&&(F=r.displayableErrorInfo[0].errorInfoKey,C=r.displayableErrorInfo[0].errorInfoValue,r.displayableErrorInfo.length>1))for(var A=1;A<r.displayableErrorInfo.length;A++)u.push(r.displayableErrorInfo[A]);return{title:F,message:C,displayableErrorInfo:u,debugErrorInfo:r.debugErrorInfo,source:r.source,hideErrorHelperText:r.hideErrorHelperText}},g.prototype.getFixableErrorKind=function(r,u){switch(r){case"Missing_References":return 1;case"InvalidUnconstrainedJoin":return u?2:0;case"Broken_Filters":return 3;case"ScriptVisualsNotEnabled":return 4;case"PythonVisualsNotEnabled":return 5;case"QueryCacheMissError":return 7;case powerbi.PBID_WindowsAuthImpersonationNotSupported:case powerbi.PBID_WindowsAuthNotSupported:return 6;default:return 0}},g.prototype.logErrorAndShowDialog=function(r,u,C,F){var k,R,A=this.generateShowMoreErrorDetails(r.details),W=r.code;if(C?(k="VisualErrorSeeDetails_"+W+"_"+u,R=V.Error):(k="VisualWarningSeeDetails_"+W+"_"+u,R=V.Warning),F){var G={title:A.title,displayableErrorInfo:A.displayableErrorInfo,debugErrorInfo:A.debugErrorInfo,level:R,source:null!=A.source?A.source:r.source,hideErrorHelperText:!!A.hideErrorHelperText},le=r.details;le&&(G.showAdditionalErrorInfo=!0!==le.hideAdditionalErrorInfo,le.helpLink&&(G.helpLink=le.helpLink,G.displayLearnMoreHelpLink=1===le.helpLinkType)),r.requestId&&(G.requestId=r.requestId),this.services.errorService.error(A.message,k,G)}else{var ge=r.details.helpLink;this.services.dialogService.promptSimpleDialog(A.title,A.message,{minWidth:"560px"},ge?{url:ge,text:"LearnMore"}:void 0,this.services.localizationService.get("PBI_Button_Label_Close"))}},g.prototype.logVisualWarning=function(r,u,C){var F=this.getVisualContract();this.services.telemetryService.logEvent(powerbi.telemetry.VisualWarning,{targetVisualType:r,visualName:F.name,isError:!1,errorSource:"PowerBI",errorCode:u,activityName:C})},g}()},49099:function(Ee,ne,t){t.d(ne,{p:function(){return fe}});var e=t(40582),n=t(97894),f=t(88471),i=t(60354),M=t(76430),E=t(38942),I=t(4486),d=t(45996),P=t(10883),y=t(78838),b=t(28074),a=t(71367),o=t(26808),l=t(7078),s=t(16035),c=t(23246),O=t(59886),x=t(66187),V=t(21645),w=t(97440),T=t(23580),v=t(47051),g=t(95781),r=t(10191),u=t(18701),C=t(44627),F=t(60660),A=t(59804),W=t(40629),k=t(59116),R=t(48922),G=t(35450),le=t(80815),ge=t(48478),re=t(76182),j=t(24704),ie=t(5480),Z=powerbi.explore.components.VisualContainerContextMenu,fe=function(){function Q(J,se,oe,K,D,p,h,m,S,N,ce,he,Ce,me,Ze,Je,it,Te,ue,ve,Me,we,$e,et,at,dt,Fe,be,_e,Oe,Xe,nt,ht){this.localizationService=Je,this.pbiMenuService=Xe,this.service=powerbi.explore.services.createVisualContainerMenuFactoryService(J,se,oe,K,D,p,h,m,S,N,ce,he,Ce,me,function(bt){return Ze.get(bt)},it,Te,ue,ve,Me,we,$e,et,at,dt,Fe,be,_e,Oe,nt,ht)}return Q.prototype.createDrillthroughCommands=function(J,se,oe){return this.service.createDrillthroughCommands(J,se,oe)},Q.prototype.createOptionsCommands=function(J,se,oe){return this.service.createOptionsCommands(J,se,oe)},Q.prototype.createCommands=function(J,se,oe,K,D,p,h,m){return this.service.createCommands(J,se,oe,K,D,p,h,m)},Q.prototype.createMenu=function(J,se,oe,K,D,p,h,m,S){return(0,e.mG)(this,void 0,void 0,function(){var N,ce,he;return(0,e.Jh)(this,function(Ce){switch(Ce.label){case 0:return N=this,[4,this.createCommands(J,se,oe,K,D,p,m,S)];case 1:return N.commands=Ce.sent(),ce=new Z(this.localizationService),he=(0,e.pi)({element:h},se.position),[2,this.drawContextMenu(ce,he,!0,!0)]}})})},Q.prototype.createDrillthroughMenu=function(J,se,oe,K,D){return(0,e.mG)(this,void 0,void 0,function(){var p,h,m;return(0,e.Jh)(this,function(S){switch(S.label){case 0:return p=this,[4,this.createDrillthroughCommands(J,se,K)];case 1:return p.commands=[S.sent()],h=new Z(this.localizationService),m=(0,e.pi)({element:D},oe),[2,this.drawContextMenu(h,m)]}})})},Q.prototype.createOptionsMenu=function(J,se,oe,K){return(0,e.mG)(this,void 0,void 0,function(){var D,p;return(0,e.Jh)(this,function(h){return this.commands=this.createOptionsCommands(J,se,oe),D=new Z(this.localizationService,!0),p=(0,e.pi)({element:K.anchorElement.get(0)},K.position),[2,this.drawContextMenu(D,p,!0,!0,K)]})})},Q.getPbiMenuConfig=function(J,se,oe,K,D){return void 0===oe&&(oe=!1),void 0===K&&(K=!1),{menu:Q.createPbiMenu(J.items,oe,D),origin:se,closeOnButtonClick:!0,menuMode:f.Kb.Compact,ignoreOverlayMaxDimensions:K}},Q.prototype.drawContextMenu=function(J,se,oe,K,D){return void 0===oe&&(oe=!1),void 0===K&&(K=!1),(0,e.mG)(this,void 0,powerbi.Promise,function(){var p;return(0,e.Jh)(this,function(m){switch(m.label){case 0:return[4,J.createItems(this.commands)];case 1:return p=m.sent(),this.pbiMenuService.open(Q.getPbiMenuConfig(p,se,oe,K,D)).onButtonClick$.pipe((0,n.q)(1)).subscribe(function(S){Q.menuItemClick(S.id,J)}),[2,J]}})})},Q.menuItemClick=function(J,se){se.getCommandByIndex(J).execute()},Q.convertItemType=function(J){var se;return((se={})[0]=f.iB.Button,se[1]=f.iB.Divider,se[2]=f.iB.Header,se)[J]},Q.createPbiMenu=function(J,se,oe){var K=[],D=oe&&oe.backgroundStyle&&oe.backgroundStyle.getCss(),p=oe&&oe.foregroundStyle&&oe.foregroundStyle.getCss(),h=oe&&oe.foregroundStyle?{color:p.color}:void 0;return J.forEach(function(m){var S,N;m.children&&m.children.length>0?(S=f.iB.SubMenu,N=Q.createPbiMenu(m.children,se,oe)):S=Q.convertItemType(m.type);var ce={"background-color":"transparent"};p&&(ce.color=p.color),K.push({id:m.key,type:S,text:m.text,tooltip:m.tooltip?m.tooltip:m.text,checkable:null!=m.selected||null!=m.checked,checked:m.selected||m.checked,disabled:m.disabled,styles:ce,icon:se?{type:0,glyph:m.icon,styles:h}:void 0,menu:N})}),{items:K,styles:D?{"background-color":D["background-color"],"border-color":D["background-color"]}:void 0}},Q.\u0275fac=function(se){return new(se||Q)(M.\u0275\u0275inject(E.i),M.\u0275\u0275inject(I.r),M.\u0275\u0275inject(d.Yv),M.\u0275\u0275inject(P.D),M.\u0275\u0275inject(y.s),M.\u0275\u0275inject(b.v),M.\u0275\u0275inject(V.W),M.\u0275\u0275inject(w.M),M.\u0275\u0275inject(a.J),M.\u0275\u0275inject(T.U),M.\u0275\u0275inject(v.I),M.\u0275\u0275inject(g.vZ),M.\u0275\u0275inject(r.RD),M.\u0275\u0275inject(u.Y),M.\u0275\u0275inject(C.H),M.\u0275\u0275inject(F.o),M.\u0275\u0275inject(o.w),M.\u0275\u0275inject(i.t),M.\u0275\u0275inject(A.$),M.\u0275\u0275inject(W.kc),M.\u0275\u0275inject(l.r),M.\u0275\u0275inject(k.y0),M.\u0275\u0275inject(R.r),M.\u0275\u0275inject(s.f),M.\u0275\u0275inject(G.F),M.\u0275\u0275inject(c.z),M.\u0275\u0275inject(le.D),M.\u0275\u0275inject(O.z),M.\u0275\u0275inject(ge.U),M.\u0275\u0275inject(x.s),M.\u0275\u0275inject(re.o),M.\u0275\u0275inject(j.e),M.\u0275\u0275inject(ie.w))},Q.\u0275prov=M.\u0275\u0275defineInjectable({token:Q,factory:Q.\u0275fac}),Q}()},95758:function(Ee,ne,t){t.d(ne,{K:function(){return f}});var e=t(76430),n=powerbi.explore.util.VisualContainerUtils,f=function(){function i(){}return i.prototype.updateVisual=function(M,E,I,d,P,y){n.updateVisual(M,E,I,d,P,y)},i.prototype.wrapRunningVisual=function(M,E,I,d,P,y,b,a,o,l){return n.wrapRunningVisual(M,E,I,d,P,y,b,a,o,l)},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac=function(E){return new(E||i)}}),i}()},15941:function(Ee,ne,t){t.d(ne,{k:function(){return f}});var e=t(76430),n=t(66075),f=function(){function i(M){this.explorationNavigationService=M}return i.prototype.getReportId=function(){var M=this.explorationNavigationService.getCurrentExploration();return M&&M.report&&M.report.objectId},i.\u0275fac=function(E){return new(E||i)(e.\u0275\u0275inject(n.z))},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac}),i}()},41527:function(Ee,ne,t){t.d(ne,{S:function(){return M}});var e=t(76430),n=t(59116),f=powerbi.extensibility.convertVisualEventType,i=powerbi.telemetry,M=function(){function d(P){this.telemetryService=P}return d.prototype.create=function(P,y,b){return new I(this.telemetryService,P,y,b)},d.\u0275fac=function(y){return new(y||d)(e.\u0275\u0275inject(n.y0))},d.\u0275prov=e.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"}),d}(),I=function(){function d(P,y,b,a){this.telemetryService=P,this.visualType=y,this.visualName=b,this.instanceId=a}return d.prototype.trace=function(P,y){var b=f(P);if(b){var a=function(d){switch(d){case"VisualEventError":return i.VisualEventError;case"VisualEventTrace":return i.VisualEventTrace;case"VisualEventRenderStarted":return i.VisualEventRenderStarted;case"VisualEventRenderCompleted":return i.VisualEventRenderCompleted;default:return}}(b);a&&this.telemetryService.logEvent(a,{visualType:this.visualType,instanceId:this.instanceId,payload:y})}},d.prototype.traceCustom=function(P){P&&this.telemetryService.logCustomEvent(P)},d}()},61995:function(Ee,ne,t){t.d(ne,{z:function(){return E}});var e=t(69104),n=t(78677),f=t(76430),i=t(86269),M=t(92759),E=function(){function I(d,P){this.overlay=d,this.rtl=P,this.containers={},this.registeredVisualContainersSubject=new e.X([]),this.registeredVisualContainers$=this.registeredVisualContainersSubject.asObservable()}return I.prototype.getOrigin=function(d){var P=this.containers[d.name];if(P)return P.get(0)},I.prototype.getRelativeOffsets=function(d,P){var y=this.containers[d.name];if(y){var b=this.rtl.isRtlLayout,a=(0,n.V)({origin:y.get(0),globalPoint:P}),o=a.right,l=a.left;if(b){var O=l;l=o,o=O}return{startX:l,endX:o,startY:a.top,endY:a.bottom}}},I.prototype.flexibleConnectedTo=function(d){var P=this.getOrigin(d);if(P)return this.overlay.position().flexibleConnectedTo(P)},I.prototype.registerVisualContainer=function(d,P){this.containers[d.name]=P;var y=this.registeredVisualContainersSubject.value;y.push(d),this.registeredVisualContainersSubject.next(y)},I.prototype.unregisterVisualContainer=function(d){delete this.containers[d.name];var P=this.registeredVisualContainersSubject.value;_.remove(P,function(y){return y.name===d.name}),this.registeredVisualContainersSubject.next(P)},I.\u0275fac=function(P){return new(P||I)(f.\u0275\u0275inject(i._c),f.\u0275\u0275inject(M.q))},I.\u0275prov=f.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac}),I}()},34425:function(Ee,ne,t){t.d(ne,{R:function(){return I}});var e=t(59116),n=t(59571),f=t(80463),i=t(60354),M=t(76430),E=function(){function d(P){var y=P&&JSON.parse(P);this.unpinnedVisuals=y&&y.unpinnedVisuals||[],this.favoritePublicCustomVisuals=y&&y.favoritePublicCustomVisuals||[]}return d.prototype.addUnpinnedVisual=function(P){this.isUnpinned(P)||this.unpinnedVisuals.push(P)},d.prototype.getFavoritePublicCustomVisuals=function(){return this.favoritePublicCustomVisuals},d.prototype.addFavoritePublicCustomVisual=function(P){this.isFavoritePublicCustomVisual(P)||this.favoritePublicCustomVisuals.push(P)},d.prototype.isFavoritePublicCustomVisual=function(P){return _.includes(this.favoritePublicCustomVisuals,P)},d.prototype.removeFavoritePublicCustomVisual=function(P){_.remove(this.favoritePublicCustomVisuals,function(y){return y===P})},d.prototype.isUnpinned=function(P){return _.includes(this.unpinnedVisuals,P)},d.prototype.removeUnpinnedVisual=function(P){_.remove(this.unpinnedVisuals,function(y){return y===P})},d.prototype.reset=function(){this.unpinnedVisuals=[]},d.prototype.toString=function(){return JSON.stringify(this)},d}(),I=function(){function d(P,y,b,a){this.visualPaneSettingsLoader=P,this.featureSwitchService=y,this.promiseFactory=b,this.telemetryService=a,this.reset()}return d.prototype.reset=function(){this.visualPaneSettings=null,this.userSettingsLoadInProgress=!1,this.userSettingsLoaded=!1,this.exlorationVisualTypes={},this.featureSwitchService.personalVisualizationPaneEnabled&&this.ensureUserSettingsLoaded(!1)},d.prototype.updateVisuals=function(){return this.ensureUserSettingsLoaded(!1)},d.prototype.getFavoritePublicCustomVisuals=function(){var P=this;return this.ensureUserSettingsLoaded(!1).then(function(){return P.visualPaneSettings.getFavoritePublicCustomVisuals()})},d.prototype.unpinVisual=function(P){var y=this;return this.ensureUserSettingsLoaded(!0).then(function(){return y.visualPaneSettings.addUnpinnedVisual(P.name),y.saveVisualPaneSettings("Unpin",P.name)})},d.prototype.addFavoritePublicCustomVisual=function(P){var y=this;return this.ensureUserSettingsLoaded(!0).then(function(){return y.visualPaneSettings.addFavoritePublicCustomVisual(P.name),y.saveVisualPaneSettings("AddFavoritePublicCustomVisual",P.name)})},d.prototype.removeFavoritePublicCustomVisual=function(P){var y=this;return this.ensureUserSettingsLoaded(!0).then(function(){return y.visualPaneSettings.removeFavoritePublicCustomVisual(P.name),y.saveVisualPaneSettings("RemoveFavoritePublicCustomVisual",P.name)})},d.prototype.restoreVisual=function(P){var y=this;return this.ensureUserSettingsLoaded(!1).then(function(){return y.visualPaneSettings.removeUnpinnedVisual(P.name),y.saveVisualPaneSettings("Restore",P.name)})},d.prototype.restoreAllVisuals=function(){var P=this;return this.ensureUserSettingsLoaded(!1).then(function(){return P.visualPaneSettings.reset(),P.saveVisualPaneSettings("RestoreAll")})},d.prototype.resetExplorationVisuals=function(){this.exlorationVisualTypes={}},d.prototype.addExplorationVisual=function(P){this.exlorationVisualTypes[P]=!0},d.prototype.isExplorationVisual=function(P){return this.exlorationVisualTypes[P]},d.prototype.isUnpinnedVisual=function(P){return!!this.visualPaneSettings&&this.visualPaneSettings.isUnpinned(P)},d.prototype.isFavoritePublicCustomVisual=function(P){return!!this.visualPaneSettings&&this.visualPaneSettings.isFavoritePublicCustomVisual(P)},d.prototype.ensureUserSettingsLoaded=function(P){var y=this;return this.userSettingsLoaded||this.userSettingsLoadInProgress||(this.userSettingsPromise=this.promiseFactory.defer(),this.visualPaneSettingsLoader.getVisualPaneSettings(P).then(function(b){y.visualPaneSettings=new E(b),y.telemetryService.logEvent(powerbi.telemetry.SettingsVisualPane,{visualPaneAction:"Get",visualPaneActionPayload:b}),y.userSettingsLoaded=!0,y.userSettingsPromise.resolve()}).catch(function(){y.userSettingsLoaded=!1,y.userSettingsPromise.reject()}).finally(function(){y.userSettingsLoadInProgress=!1}),this.userSettingsLoadInProgress=!0),this.userSettingsPromise.promise},d.prototype.saveVisualPaneSettings=function(P,y){void 0===y&&(y=null);var b=this.telemetryService.startEvent(powerbi.telemetry.SettingsVisualPane,{visualPaneAction:P,visualPaneActionPayload:y});return this.visualPaneSettingsLoader.updateVisualPaneSettings(this.visualPaneSettings.toString(),b)},d.\u0275fac=function(y){return new(y||d)(M.\u0275\u0275inject(n.Y),M.\u0275\u0275inject(f.h),M.\u0275\u0275inject(i.t),M.\u0275\u0275inject(e.y0))},d.\u0275prov=M.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"}),d}()},4714:function(Ee,ne,t){t.d(ne,{M:function(){return b}});var e=t(76430),n=t(66075),f=t(5370),i=t(85475),M=t(10883),E=t(95762),I=t(95781),d=t(80815),P=t(38942),y=t(78226),b=function(){function a(o,l,s,c,O,x,V,w,T){this.service=powerbi.visualSyncServiceModuleFactory().create(s,o,l,c,O,x,V,w,T)}return a.prototype.syncFilterState=function(o,l){return this.service.syncFilterState(o,l)},a.prototype.getVisualsAffectByFieldChanges=function(o){return this.service.getVisualsAffectByFieldChanges(o)},a.prototype.generateUniqueGroupName=function(o,l,s){return this.service.generateUniqueGroupName(o,l,s)},a.prototype.syncVisualFiltersState=function(o){return this.service.syncVisualFiltersState(o)},a.\u0275fac=function(l){return new(l||a)(e.\u0275\u0275inject(n.z),e.\u0275\u0275inject(f.L),e.\u0275\u0275inject(i.J),e.\u0275\u0275inject(I.vZ),e.\u0275\u0275inject(d.D),e.\u0275\u0275inject(P.i),e.\u0275\u0275inject(M.D),e.\u0275\u0275inject(E.O),e.\u0275\u0275inject(y.Q))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}()},1537:function(Ee,ne,t){t.d(ne,{iD:function(){return d},$R:function(){return b},pz:function(){return l},wJ:function(){return O},tJ:function(){return w},Iw:function(){return g},qd:function(){return C},Sw:function(){return W},$k:function(){return G}});var e=powerbi.TelemetryCategory,n=powerbi.telemetryEventFactory,f=powerbi.telemetry.CustomerAction,M=(jsCommon,powerbi.telemetry.EventFactories),I="PBI.PersonalizeVisual.ResetVisual",d=M[I]=function(ge){return n({name:I,baseEvent:f(ge),info:ge,category:e.CustomerAction,loggers:void 0})},y="PBI.ExploreUI.ChangeDetection",b=M[y]=function(ge){return n({name:y,baseEvent:f(ge),info:ge,category:e.CustomerAction,optionalParameters:["calculationType","refreshInterval","dialogInteractionType"],loggers:void 0})},o="PBI.ExploreUI.ReorderTabOrderByPosition",l=M[o]=function(ge){return n({name:o,baseEvent:f(ge),info:ge,category:e.CustomerAction,loggers:void 0})},c="PBI.Sparklines.OpenDialog",O=M[c]=function(ge){return n({name:c,baseEvent:f(ge),info:ge,category:e.CustomerAction,loggers:void 0})},V="PBI.LoadProgressNotification.ModifyCounter",w=M[V]=function(ge){return n({name:V,baseEvent:f(ge),info:ge,category:e.CustomerAction,loggers:void 0})},v="PBI.LoadProgressNotification.Reset",g=M[v]=function(ge){return n({name:v,baseEvent:f(ge),info:ge,category:e.CustomerAction,loggers:void 0})},u="PBI.LoadProgressNotification.Cancel",C=M[u]=function(ge){return n({name:u,baseEvent:f(ge),info:ge,category:e.CustomerAction,loggers:void 0})},A="PBI.Sparklines.OpenWithMaxSparklines",W=M[A]=function(ge){return n({name:A,baseEvent:f(ge),info:ge,category:e.CustomerAction,loggers:void 0})},R="PBI.EX.Panes",G=M[R]=function(ge){return n({name:R,baseEvent:f(ge),info:ge,category:e.CustomerAction,loggers:void 0})}},62279:function(Ee,ne,t){t.d(ne,{lb:function(){return d}});var e=powerbi.TelemetryCategory,n=powerbi.telemetryEventFactory,f=powerbi.telemetry.CustomerAction,M=(jsCommon,powerbi.telemetry.EventFactories),I="PBI.PersonalizeVisual.OpenOverlay",d=M[I]=function(y){return n({name:I,baseEvent:f(y),info:y,category:e.CustomerAction,loggers:void 0,logExpAssignment:!0})}},62340:function(Ee,ne,t){t.d(ne,{H:function(){return M}});var e=t(40582),n=powerbi.visualHost.ResourcePackageReferenceResolver,f=powerbi.explore.contracts.VisualContainer,i=powerbi.explore.util.VisualContainerUtils;function M(E,I,d,P,y,b){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var a,o,l,c,O;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return a=i.getVisualType(E),o=i.getObjectDefinitions(E),l=d.capabilities(a),[4,n.loadAndResolveFromDataViewObjects(o,l&&l.objects,I.resourcePackages,P,y,!0)];case 1:return c=x.sent(),(O=f.clone(E,b)).config.singleVisual.objects=c,[2,O]}})})}},26162:function(Ee,ne,t){t.d(ne,{Dp:function(){return e},I$:function(){return i},Y2:function(){return M},Oq:function(){return E}});var e={UnitLength:96,UnitDivisions:12},n=[12,6,4,3,2,1];function i(d,P){return d===P||d&&P&&d.UnitLength===P.UnitLength&&d.UnitDivisions===P.UnitDivisions}function M(d,P){var y=d/(P/e.UnitLength);y=Math.floor(y);var b=_.find(n,function(a){return 1===a||y/a>=8});return{UnitLength:y,UnitDivisions:b}}function E(d,P){return{x:I(d.x,P.width),y:I(d.y,P.height)}}function I(d,P){var y=M(d*P,P);return M(y.UnitLength/e.UnitLength*P,P).UnitLength/e.UnitLength}},16686:function(Ee,ne,t){t.d(ne,{h:function(){return e}});var e=function(){function n(f){this.formGroup=f}return n.prototype.setDirty=function(){this.formGroup.markAsDirty()},n.prototype.setPristine=function(){this.formGroup.markAsPristine()},n.prototype.isDirty=function(){return this.formGroup.dirty},n.prototype.isValid=function(){return this.formGroup.valid},n}()},5223:function(Ee,ne,t){function f(E,I){var d=!1;if(E){var P=E.sections;if(P)for(var y=0,b=P.length;y<b;y++){var o=P[y].visualContainers;if(o)for(var l=function(V,w){var v=o[V].config.singleVisual.visualType;if(v&&!I.getPlugin(v)){if(E.resourcePackages){if(E.resourcePackages.some(function(g){return g.name===v}))return"continue";if(powerbi.visualHost.CustomVisualsUtils.isOrganizationalCustomVisual(v))return"continue"}return d=!0,"break"}},s=0,c=o.length;s<c&&"break"!==l(s);s++);}}return d}function M(E){return E===powerbi.DMTS_NoGatewayWithAllDatasourcesToBindError||E===powerbi.DMTS_MultipleGatewaysWithAllDatasourcesToBindError||E===powerbi.DMTS_DatasourceHasNoCredentialError||E===powerbi.DM_GWPipeline_Client_GatewayUnreachable||E===powerbi.DM_GWPipeline_Client_OAuthTokenRefreshFailedError||E===powerbi.DMTS_UserLostPermissionToDatasourceError||E===powerbi.DMTS_UserNotFoundInADGraphError||E===powerbi.DM_GWPipeline_Gateway_DataSourceAccessError||E===powerbi.DM_GWPipeline_Gateway_GatewayOverloadedMemory||E===powerbi.DM_GWPipeline_Gateway_GatewayOverloadedConcurrency||E===powerbi.DM_GWPipeline_Gateway_ServerUnreachable||E===powerbi.DM_GWPipeline_Gateway_GatewayOverloadedProcessor||E===powerbi.DM_GWPipeline_Gateway_ImpersonationError||E===powerbi.DM_GWPipeline_Gateway_InvalidMashupConnectionString||E===powerbi.DM_GWPipeline_Gateway_DatabaseLoginError||E===powerbi.DM_GWPipeline_Gateway_SqlTimeoutException||E===powerbi.DM_GWPipeline_Gateway_AdomdTimeoutException||E===powerbi.DM_GWPipeline_Gateway_InvalidObjectNameException||E===powerbi.DM_GWPipeline_Gateway_ConnectionBrokenException||E===powerbi.DM_GWPipeline_Gateway_MemoryError||E===powerbi.DM_GWPipeline_Gateway_MissingStructureError||E===powerbi.DM_GWPipeline_Gateway_UnprocessedStructureError||E===powerbi.DM_GWPipeline_Gateway_ModelLoadError||E===powerbi.DM_GWPipeline_Gateway_CancellationError||E===powerbi.DM_GWPipeline_Gateway_QueryExecutionError||E===powerbi.DM_GWPipeline_Gateway_RecalculationRequiredError||E===powerbi.DM_GWPipeline_Gateway_AdomdConnectError||E===powerbi.DM_GWPipeline_Gateway_MashupDataAccessError||E===powerbi.RS_CannotRetrieveModel||E===powerbi.RS_AccessDeniedDueToRLSGroup||E===powerbi.RLSNotAuthorizedForModel||E===powerbi.RS_AccessDenied}t.d(ne,{$V:function(){return f},Uy:function(){return M}}),powerbi}}]);